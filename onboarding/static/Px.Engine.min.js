!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=267)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"ACESFilmicToneMapping",(function(){return ve})),n.d(t,"AddEquation",(function(){return N})),n.d(t,"AddOperation",(function(){return ce})),n.d(t,"AdditiveBlending",(function(){return k})),n.d(t,"AlphaFormat",(function(){return Ze})),n.d(t,"AlwaysDepth",(function(){return te})),n.d(t,"AlwaysStencilFunc",(function(){return dn})),n.d(t,"AmbientLight",(function(){return Zc})),n.d(t,"AmbientLightProbe",(function(){return bh})),n.d(t,"AnimationClip",(function(){return rc})),n.d(t,"AnimationLoader",(function(){return hc})),n.d(t,"AnimationMixer",(function(){return Qh})),n.d(t,"AnimationObjectGroup",(function(){return Xh})),n.d(t,"AnimationUtils",(function(){return Gu})),n.d(t,"ArcCurve",(function(){return bc})),n.d(t,"ArrayCamera",(function(){return vs})),n.d(t,"ArrowHelper",(function(){return Zf})),n.d(t,"Audio",(function(){return Ah})),n.d(t,"AudioAnalyser",(function(){return Ih})),n.d(t,"AudioContext",(function(){return dh})),n.d(t,"AudioListener",(function(){return Ph})),n.d(t,"AudioLoader",(function(){return mh})),n.d(t,"AxesHelper",(function(){return Kf})),n.d(t,"AxisHelper",(function(){return _p})),n.d(t,"BackSide",(function(){return M})),n.d(t,"BasicDepthPacking",(function(){return Yt})),n.d(t,"BasicShadowMap",(function(){return x})),n.d(t,"BinaryTextureLoader",(function(){return Pp})),n.d(t,"Bone",(function(){return Zs})),n.d(t,"BooleanKeyframeTrack",(function(){return Zu})),n.d(t,"BoundingBoxHelper",(function(){return Sp})),n.d(t,"Box2",(function(){return of})),n.d(t,"Box3",(function(){return Tr})),n.d(t,"Box3Helper",(function(){return Hf})),n.d(t,"BoxBufferGeometry",(function(){return ro})),n.d(t,"BoxGeometry",(function(){return no})),n.d(t,"BoxHelper",(function(){return Gf})),n.d(t,"BufferAttribute",(function(){return hi})),n.d(t,"BufferGeometry",(function(){return Oi})),n.d(t,"BufferGeometryLoader",(function(){return nh})),n.d(t,"ByteType",(function(){return je})),n.d(t,"Cache",(function(){return oc})),n.d(t,"Camera",(function(){return lo})),n.d(t,"CameraHelper",(function(){return Bf})),n.d(t,"CanvasRenderer",(function(){return Op})),n.d(t,"CanvasTexture",(function(){return yl})),n.d(t,"CatmullRomCurve3",(function(){return Mc})),n.d(t,"CineonToneMapping",(function(){return me})),n.d(t,"CircleBufferGeometry",(function(){return Lu})),n.d(t,"CircleGeometry",(function(){return Ou})),n.d(t,"ClampToEdgeWrapping",(function(){return Ee})),n.d(t,"Clock",(function(){return _h})),n.d(t,"ClosedSplineCurve3",(function(){return xp})),n.d(t,"Color",(function(){return ri})),n.d(t,"ColorKeyframeTrack",(function(){return Ku})),n.d(t,"CompressedTexture",(function(){return gl})),n.d(t,"CompressedTextureLoader",(function(){return fc})),n.d(t,"ConeBufferGeometry",(function(){return Au})),n.d(t,"ConeGeometry",(function(){return Pu})),n.d(t,"CubeCamera",(function(){return co})),n.d(t,"CubeGeometry",(function(){return no})),n.d(t,"CubeReflectionMapping",(function(){return ye})),n.d(t,"CubeRefractionMapping",(function(){return be})),n.d(t,"CubeTexture",(function(){return Io})),n.d(t,"CubeTextureLoader",(function(){return mc})),n.d(t,"CubeUVReflectionMapping",(function(){return _e})),n.d(t,"CubeUVRefractionMapping",(function(){return Se})),n.d(t,"CubicBezierCurve",(function(){return Ac})),n.d(t,"CubicBezierCurve3",(function(){return Oc})),n.d(t,"CubicInterpolant",(function(){return Wu})),n.d(t,"CullFaceBack",(function(){return m})),n.d(t,"CullFaceFront",(function(){return v})),n.d(t,"CullFaceFrontBack",(function(){return g})),n.d(t,"CullFaceNone",(function(){return d})),n.d(t,"Curve",(function(){return gc})),n.d(t,"CurvePath",(function(){return Fc})),n.d(t,"CustomBlending",(function(){return F})),n.d(t,"CylinderBufferGeometry",(function(){return Tu})),n.d(t,"CylinderGeometry",(function(){return Eu})),n.d(t,"Cylindrical",(function(){return nf})),n.d(t,"DataTexture",(function(){return fo})),n.d(t,"DataTexture2DArray",(function(){return Ro})),n.d(t,"DataTexture3D",(function(){return Fo})),n.d(t,"DataTextureLoader",(function(){return pc})),n.d(t,"DecrementStencilOp",(function(){return nn})),n.d(t,"DecrementWrapStencilOp",(function(){return on})),n.d(t,"DefaultLoadingManager",(function(){return sc})),n.d(t,"DepthFormat",(function(){return nt})),n.d(t,"DepthStencilFormat",(function(){return rt})),n.d(t,"DepthTexture",(function(){return bl})),n.d(t,"DirectionalLight",(function(){return Qc})),n.d(t,"DirectionalLightHelper",(function(){return Nf})),n.d(t,"DirectionalLightShadow",(function(){return Yc})),n.d(t,"DiscreteInterpolant",(function(){return Yu})),n.d(t,"DodecahedronBufferGeometry",(function(){return Cl})),n.d(t,"DodecahedronGeometry",(function(){return Ll})),n.d(t,"DoubleSide",(function(){return E})),n.d(t,"DstAlphaFactor",(function(){return Q})),n.d(t,"DstColorFactor",(function(){return K})),n.d(t,"DynamicBufferAttribute",(function(){return cp})),n.d(t,"DynamicCopyUsage",(function(){return qn})),n.d(t,"DynamicDrawUsage",(function(){return vn})),n.d(t,"DynamicReadUsage",(function(){return bn})),n.d(t,"EdgesGeometry",(function(){return Mu})),n.d(t,"EdgesHelper",(function(){return Mp})),n.d(t,"EllipseCurve",(function(){return yc})),n.d(t,"EqualDepth",(function(){return ie})),n.d(t,"EqualStencilFunc",(function(){return un})),n.d(t,"EquirectangularReflectionMapping",(function(){return xe})),n.d(t,"EquirectangularRefractionMapping",(function(){return we})),n.d(t,"Euler",(function(){return Jn})),n.d(t,"EventDispatcher",(function(){return Sn})),n.d(t,"ExtrudeBufferGeometry",(function(){return hu})),n.d(t,"ExtrudeGeometry",(function(){return cu})),n.d(t,"Face3",(function(){return si})),n.d(t,"Face4",(function(){return Jf})),n.d(t,"FaceColors",(function(){return O})),n.d(t,"FaceNormalsHelper",(function(){return kf})),n.d(t,"FileLoader",(function(){return cc})),n.d(t,"FlatShading",(function(){return T})),n.d(t,"Float32Attribute",(function(){return yp})),n.d(t,"Float32BufferAttribute",(function(){return bi})),n.d(t,"Float64Attribute",(function(){return bp})),n.d(t,"Float64BufferAttribute",(function(){return xi})),n.d(t,"FloatType",(function(){return Ge})),n.d(t,"Fog",(function(){return Ms})),n.d(t,"FogExp2",(function(){return Ss})),n.d(t,"Font",(function(){return hh})),n.d(t,"FontLoader",(function(){return ph})),n.d(t,"FrontFaceDirectionCCW",(function(){return b})),n.d(t,"FrontFaceDirectionCW",(function(){return y})),n.d(t,"FrontSide",(function(){return S})),n.d(t,"Frustum",(function(){return vo})),n.d(t,"GammaEncoding",(function(){return Ut})),n.d(t,"Geometry",(function(){return to})),n.d(t,"GeometryUtils",(function(){return Ap})),n.d(t,"GreaterDepth",(function(){return ae})),n.d(t,"GreaterEqualDepth",(function(){return oe})),n.d(t,"GreaterEqualStencilFunc",(function(){return pn})),n.d(t,"GreaterStencilFunc",(function(){return hn})),n.d(t,"GridHelper",(function(){return Pf})),n.d(t,"Group",(function(){return ms})),n.d(t,"HalfFloatType",(function(){return He})),n.d(t,"HemisphereLight",(function(){return Bc})),n.d(t,"HemisphereLightHelper",(function(){return Ef})),n.d(t,"HemisphereLightProbe",(function(){return yh})),n.d(t,"IcosahedronBufferGeometry",(function(){return Ol})),n.d(t,"IcosahedronGeometry",(function(){return Al})),n.d(t,"ImageBitmapLoader",(function(){return uh})),n.d(t,"ImageLoader",(function(){return dc})),n.d(t,"ImageUtils",(function(){return Rn})),n.d(t,"ImmediateRenderObject",(function(){return uf})),n.d(t,"IncrementStencilOp",(function(){return tn})),n.d(t,"IncrementWrapStencilOp",(function(){return rn})),n.d(t,"InstancedBufferAttribute",(function(){return th})),n.d(t,"InstancedBufferGeometry",(function(){return eh})),n.d(t,"InstancedInterleavedBuffer",(function(){return Kh})),n.d(t,"InstancedMesh",(function(){return Ks})),n.d(t,"Int16Attribute",(function(){return dp})),n.d(t,"Int16BufferAttribute",(function(){return mi})),n.d(t,"Int32Attribute",(function(){return vp})),n.d(t,"Int32BufferAttribute",(function(){return gi})),n.d(t,"Int8Attribute",(function(){return hp})),n.d(t,"Int8BufferAttribute",(function(){return fi})),n.d(t,"IntType",(function(){return Ue})),n.d(t,"InterleavedBuffer",(function(){return Es})),n.d(t,"InterleavedBufferAttribute",(function(){return Ts})),n.d(t,"Interpolant",(function(){return Hu})),n.d(t,"InterpolateDiscrete",(function(){return Lt})),n.d(t,"InterpolateLinear",(function(){return Ct})),n.d(t,"InterpolateSmooth",(function(){return Dt})),n.d(t,"InvertStencilOp",(function(){return an})),n.d(t,"JSONLoader",(function(){return Lp})),n.d(t,"KeepStencilOp",(function(){return $t})),n.d(t,"KeyframeTrack",(function(){return Qu})),n.d(t,"LOD",(function(){return Hs})),n.d(t,"LatheBufferGeometry",(function(){return wu})),n.d(t,"LatheGeometry",(function(){return xu})),n.d(t,"Layers",(function(){return $n})),n.d(t,"LensFlare",(function(){return Dp})),n.d(t,"LessDepth",(function(){return ne})),n.d(t,"LessEqualDepth",(function(){return re})),n.d(t,"LessEqualStencilFunc",(function(){return cn})),n.d(t,"LessStencilFunc",(function(){return ln})),n.d(t,"Light",(function(){return zc})),n.d(t,"LightProbe",(function(){return gh})),n.d(t,"LightProbeHelper",(function(){return Tf})),n.d(t,"LightShadow",(function(){return Uc})),n.d(t,"Line",(function(){return il})),n.d(t,"Line3",(function(){return lf})),n.d(t,"LineBasicMaterial",(function(){return Js})),n.d(t,"LineCurve",(function(){return Lc})),n.d(t,"LineCurve3",(function(){return Cc})),n.d(t,"LineDashedMaterial",(function(){return Uu})),n.d(t,"LineLoop",(function(){return ll})),n.d(t,"LinePieces",(function(){return ep})),n.d(t,"LineSegments",(function(){return sl})),n.d(t,"LineStrip",(function(){return $f})),n.d(t,"LinearEncoding",(function(){return zt})),n.d(t,"LinearFilter",(function(){return De})),n.d(t,"LinearInterpolant",(function(){return Xu})),n.d(t,"LinearMipMapLinearFilter",(function(){return Fe})),n.d(t,"LinearMipMapNearestFilter",(function(){return Ie})),n.d(t,"LinearMipmapLinearFilter",(function(){return Re})),n.d(t,"LinearMipmapNearestFilter",(function(){return ke})),n.d(t,"LinearToneMapping",(function(){return fe})),n.d(t,"Loader",(function(){return lc})),n.d(t,"LoaderUtils",(function(){return $c})),n.d(t,"LoadingManager",(function(){return ac})),n.d(t,"LogLuvEncoding",(function(){return Gt})),n.d(t,"LoopOnce",(function(){return Pt})),n.d(t,"LoopPingPong",(function(){return Ot})),n.d(t,"LoopRepeat",(function(){return At})),n.d(t,"LuminanceAlphaFormat",(function(){return et})),n.d(t,"LuminanceFormat",(function(){return $e})),n.d(t,"MOUSE",(function(){return f})),n.d(t,"Material",(function(){return ui})),n.d(t,"MaterialLoader",(function(){return Jc})),n.d(t,"Math",(function(){return Tn})),n.d(t,"Matrix3",(function(){return In})),n.d(t,"Matrix4",(function(){return Qn})),n.d(t,"MaxEquation",(function(){return U})),n.d(t,"Mesh",(function(){return Yi})),n.d(t,"MeshBasicMaterial",(function(){return ci})),n.d(t,"MeshDepthMaterial",(function(){return ss})),n.d(t,"MeshDistanceMaterial",(function(){return ls})),n.d(t,"MeshFaceMaterial",(function(){return tp})),n.d(t,"MeshLambertMaterial",(function(){return zu})),n.d(t,"MeshMatcapMaterial",(function(){return Bu})),n.d(t,"MeshNormalMaterial",(function(){return ju})),n.d(t,"MeshPhongMaterial",(function(){return Fu})),n.d(t,"MeshPhysicalMaterial",(function(){return Ru})),n.d(t,"MeshStandardMaterial",(function(){return Iu})),n.d(t,"MeshToonMaterial",(function(){return Nu})),n.d(t,"MinEquation",(function(){return B})),n.d(t,"MirroredRepeatWrapping",(function(){return Te})),n.d(t,"MixOperation",(function(){return ue})),n.d(t,"MultiMaterial",(function(){return np})),n.d(t,"MultiplyBlending",(function(){return R})),n.d(t,"MultiplyOperation",(function(){return le})),n.d(t,"NearestFilter",(function(){return Pe})),n.d(t,"NearestMipMapLinearFilter",(function(){return Ce})),n.d(t,"NearestMipMapNearestFilter",(function(){return Oe})),n.d(t,"NearestMipmapLinearFilter",(function(){return Le})),n.d(t,"NearestMipmapNearestFilter",(function(){return Ae})),n.d(t,"NeverDepth",(function(){return ee})),n.d(t,"NeverStencilFunc",(function(){return sn})),n.d(t,"NoBlending",(function(){return C})),n.d(t,"NoColors",(function(){return A})),n.d(t,"NoToneMapping",(function(){return he})),n.d(t,"NormalBlending",(function(){return D})),n.d(t,"NotEqualDepth",(function(){return se})),n.d(t,"NotEqualStencilFunc",(function(){return fn})),n.d(t,"NumberKeyframeTrack",(function(){return Ju})),n.d(t,"Object3D",(function(){return pr})),n.d(t,"ObjectLoader",(function(){return ih})),n.d(t,"ObjectSpaceNormalMap",(function(){return Kt})),n.d(t,"OctahedronBufferGeometry",(function(){return Pl})),n.d(t,"OctahedronGeometry",(function(){return Tl})),n.d(t,"OneFactor",(function(){return G})),n.d(t,"OneMinusDstAlphaFactor",(function(){return Z})),n.d(t,"OneMinusDstColorFactor",(function(){return J})),n.d(t,"OneMinusSrcAlphaFactor",(function(){return Y})),n.d(t,"OneMinusSrcColorFactor",(function(){return W})),n.d(t,"OrthographicCamera",(function(){return Xc})),n.d(t,"PCFShadowMap",(function(){return w})),n.d(t,"PCFSoftShadowMap",(function(){return q})),n.d(t,"ParametricBufferGeometry",(function(){return ql})),n.d(t,"ParametricGeometry",(function(){return wl})),n.d(t,"Particle",(function(){return ip})),n.d(t,"ParticleBasicMaterial",(function(){return sp})),n.d(t,"ParticleSystem",(function(){return op})),n.d(t,"ParticleSystemMaterial",(function(){return lp})),n.d(t,"Path",(function(){return Nc})),n.d(t,"PerspectiveCamera",(function(){return uo})),n.d(t,"Plane",(function(){return Ur})),n.d(t,"PlaneBufferGeometry",(function(){return _o})),n.d(t,"PlaneGeometry",(function(){return qo})),n.d(t,"PlaneHelper",(function(){return Wf})),n.d(t,"PointCloud",(function(){return rp})),n.d(t,"PointCloudMaterial",(function(){return ap})),n.d(t,"PointLight",(function(){return Wc})),n.d(t,"PointLightHelper",(function(){return wf})),n.d(t,"Points",(function(){return dl})),n.d(t,"PointsMaterial",(function(){return ul})),n.d(t,"PolarGridHelper",(function(){return Af})),n.d(t,"PolyhedronBufferGeometry",(function(){return Sl})),n.d(t,"PolyhedronGeometry",(function(){return _l})),n.d(t,"PositionalAudio",(function(){return kh})),n.d(t,"PositionalAudioHelper",(function(){return Of})),n.d(t,"PropertyBinding",(function(){return Wh})),n.d(t,"PropertyMixer",(function(){return Rh})),n.d(t,"QuadraticBezierCurve",(function(){return Dc})),n.d(t,"QuadraticBezierCurve3",(function(){return kc})),n.d(t,"Quaternion",(function(){return An})),n.d(t,"QuaternionKeyframeTrack",(function(){return ec})),n.d(t,"QuaternionLinearInterpolant",(function(){return $u})),n.d(t,"REVISION",(function(){return h})),n.d(t,"RGBADepthPacking",(function(){return Qt})),n.d(t,"RGBAFormat",(function(){return Je})),n.d(t,"RGBA_ASTC_10x10_Format",(function(){return Mt})),n.d(t,"RGBA_ASTC_10x5_Format",(function(){return qt})),n.d(t,"RGBA_ASTC_10x6_Format",(function(){return _t})),n.d(t,"RGBA_ASTC_10x8_Format",(function(){return St})),n.d(t,"RGBA_ASTC_12x10_Format",(function(){return Et})),n.d(t,"RGBA_ASTC_12x12_Format",(function(){return Tt})),n.d(t,"RGBA_ASTC_4x4_Format",(function(){return dt})),n.d(t,"RGBA_ASTC_5x4_Format",(function(){return mt})),n.d(t,"RGBA_ASTC_5x5_Format",(function(){return vt})),n.d(t,"RGBA_ASTC_6x5_Format",(function(){return gt})),n.d(t,"RGBA_ASTC_6x6_Format",(function(){return yt})),n.d(t,"RGBA_ASTC_8x5_Format",(function(){return bt})),n.d(t,"RGBA_ASTC_8x6_Format",(function(){return xt})),n.d(t,"RGBA_ASTC_8x8_Format",(function(){return wt})),n.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return ft})),n.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return ht})),n.d(t,"RGBA_S3TC_DXT1_Format",(function(){return at})),n.d(t,"RGBA_S3TC_DXT3_Format",(function(){return st})),n.d(t,"RGBA_S3TC_DXT5_Format",(function(){return lt})),n.d(t,"RGBDEncoding",(function(){return Xt})),n.d(t,"RGBEEncoding",(function(){return Vt})),n.d(t,"RGBEFormat",(function(){return tt})),n.d(t,"RGBFormat",(function(){return Ke})),n.d(t,"RGBM16Encoding",(function(){return Wt})),n.d(t,"RGBM7Encoding",(function(){return Ht})),n.d(t,"RGB_ETC1_Format",(function(){return pt})),n.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return ct})),n.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return ut})),n.d(t,"RGB_S3TC_DXT1_Format",(function(){return ot})),n.d(t,"RawShaderMaterial",(function(){return ku})),n.d(t,"Ray",(function(){return Nr})),n.d(t,"Raycaster",(function(){return Jh})),n.d(t,"RectAreaLight",(function(){return Kc})),n.d(t,"RectAreaLightHelper",(function(){return qf})),n.d(t,"RedFormat",(function(){return it})),n.d(t,"ReinhardToneMapping",(function(){return pe})),n.d(t,"RepeatWrapping",(function(){return Me})),n.d(t,"ReplaceStencilOp",(function(){return en})),n.d(t,"ReverseSubtractEquation",(function(){return z})),n.d(t,"RingBufferGeometry",(function(){return bu})),n.d(t,"RingGeometry",(function(){return yu})),n.d(t,"Scene",(function(){return dr})),n.d(t,"SceneUtils",(function(){return Cp})),n.d(t,"ShaderChunk",(function(){return go})),n.d(t,"ShaderLib",(function(){return bo})),n.d(t,"ShaderMaterial",(function(){return so})),n.d(t,"ShadowMaterial",(function(){return Du})),n.d(t,"Shape",(function(){return jc})),n.d(t,"ShapeBufferGeometry",(function(){return _u})),n.d(t,"ShapeGeometry",(function(){return qu})),n.d(t,"ShapePath",(function(){return ch})),n.d(t,"ShapeUtils",(function(){return su})),n.d(t,"ShortType",(function(){return ze})),n.d(t,"Skeleton",(function(){return Qs})),n.d(t,"SkeletonHelper",(function(){return xf})),n.d(t,"SkinnedMesh",(function(){return Ws})),n.d(t,"SmoothShading",(function(){return P})),n.d(t,"Sphere",(function(){return Or})),n.d(t,"SphereBufferGeometry",(function(){return gu})),n.d(t,"SphereGeometry",(function(){return vu})),n.d(t,"Spherical",(function(){return tf})),n.d(t,"SphericalHarmonics3",(function(){return vh})),n.d(t,"SphericalReflectionMapping",(function(){return qe})),n.d(t,"Spline",(function(){return qp})),n.d(t,"SplineCurve",(function(){return Ic})),n.d(t,"SplineCurve3",(function(){return wp})),n.d(t,"SpotLight",(function(){return Gc})),n.d(t,"SpotLightHelper",(function(){return vf})),n.d(t,"SpotLightShadow",(function(){return Vc})),n.d(t,"Sprite",(function(){return Bs})),n.d(t,"SpriteMaterial",(function(){return Ps})),n.d(t,"SrcAlphaFactor",(function(){return X})),n.d(t,"SrcAlphaSaturateFactor",(function(){return $})),n.d(t,"SrcColorFactor",(function(){return H})),n.d(t,"StaticCopyUsage",(function(){return wn})),n.d(t,"StaticDrawUsage",(function(){return mn})),n.d(t,"StaticReadUsage",(function(){return yn})),n.d(t,"StereoCamera",(function(){return qh})),n.d(t,"StreamCopyUsage",(function(){return _n})),n.d(t,"StreamDrawUsage",(function(){return gn})),n.d(t,"StreamReadUsage",(function(){return xn})),n.d(t,"StringKeyframeTrack",(function(){return tc})),n.d(t,"SubtractEquation",(function(){return j})),n.d(t,"SubtractiveBlending",(function(){return I})),n.d(t,"TOUCH",(function(){return p})),n.d(t,"TangentSpaceNormalMap",(function(){return Zt})),n.d(t,"TetrahedronBufferGeometry",(function(){return El})),n.d(t,"TetrahedronGeometry",(function(){return Ml})),n.d(t,"TextBufferGeometry",(function(){return mu})),n.d(t,"TextGeometry",(function(){return du})),n.d(t,"Texture",(function(){return Nn})),n.d(t,"TextureLoader",(function(){return vc})),n.d(t,"TorusBufferGeometry",(function(){return Nl})),n.d(t,"TorusGeometry",(function(){return Fl})),n.d(t,"TorusKnotBufferGeometry",(function(){return Rl})),n.d(t,"TorusKnotGeometry",(function(){return Il})),n.d(t,"Triangle",(function(){return $r})),n.d(t,"TriangleFanDrawMode",(function(){return jt})),n.d(t,"TriangleStripDrawMode",(function(){return Nt})),n.d(t,"TrianglesDrawMode",(function(){return Ft})),n.d(t,"TubeBufferGeometry",(function(){return kl})),n.d(t,"TubeGeometry",(function(){return Dl})),n.d(t,"UVMapping",(function(){return ge})),n.d(t,"Uint16Attribute",(function(){return mp})),n.d(t,"Uint16BufferAttribute",(function(){return vi})),n.d(t,"Uint32Attribute",(function(){return gp})),n.d(t,"Uint32BufferAttribute",(function(){return yi})),n.d(t,"Uint8Attribute",(function(){return fp})),n.d(t,"Uint8BufferAttribute",(function(){return pi})),n.d(t,"Uint8ClampedAttribute",(function(){return pp})),n.d(t,"Uint8ClampedBufferAttribute",(function(){return di})),n.d(t,"Uncharted2ToneMapping",(function(){return de})),n.d(t,"Uniform",(function(){return Zh})),n.d(t,"UniformsLib",(function(){return yo})),n.d(t,"UniformsUtils",(function(){return ao})),n.d(t,"UnsignedByteType",(function(){return Ne})),n.d(t,"UnsignedInt248Type",(function(){return Qe})),n.d(t,"UnsignedIntType",(function(){return Ve})),n.d(t,"UnsignedShort4444Type",(function(){return We})),n.d(t,"UnsignedShort5551Type",(function(){return Xe})),n.d(t,"UnsignedShort565Type",(function(){return Ye})),n.d(t,"UnsignedShortType",(function(){return Be})),n.d(t,"VSMShadowMap",(function(){return _})),n.d(t,"Vector2",(function(){return Pn})),n.d(t,"Vector3",(function(){return Cn})),n.d(t,"Vector4",(function(){return jn})),n.d(t,"VectorKeyframeTrack",(function(){return nc})),n.d(t,"Vertex",(function(){return up})),n.d(t,"VertexColors",(function(){return L})),n.d(t,"VertexNormalsHelper",(function(){return df})),n.d(t,"VideoTexture",(function(){return vl})),n.d(t,"WebGLMultisampleRenderTarget",(function(){return Bn})),n.d(t,"WebGLRenderTarget",(function(){return zn})),n.d(t,"WebGLRenderTargetCube",(function(){return ho})),n.d(t,"WebGLRenderer",(function(){return _s})),n.d(t,"WebGLUtils",(function(){return fs})),n.d(t,"WireframeGeometry",(function(){return xl})),n.d(t,"WireframeHelper",(function(){return Ep})),n.d(t,"WrapAroundEnding",(function(){return Rt})),n.d(t,"XHRLoader",(function(){return Tp})),n.d(t,"ZeroCurvatureEnding",(function(){return kt})),n.d(t,"ZeroFactor",(function(){return V})),n.d(t,"ZeroSlopeEnding",(function(){return It})),n.d(t,"ZeroStencilOp",(function(){return Jt})),n.d(t,"sRGBEncoding",(function(){return Bt})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var h="110",f={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},p={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d=0,m=1,v=2,g=3,y=0,b=1,x=0,w=1,q=2,_=3,S=0,M=1,E=2,T=1,P=2,A=0,O=1,L=2,C=0,D=1,k=2,I=3,R=4,F=5,N=100,j=101,z=102,B=103,U=104,V=200,G=201,H=202,W=203,X=204,Y=205,Q=206,Z=207,K=208,J=209,$=210,ee=0,te=1,ne=2,re=3,ie=4,oe=5,ae=6,se=7,le=0,ue=1,ce=2,he=0,fe=1,pe=2,de=3,me=4,ve=5,ge=300,ye=301,be=302,xe=303,we=304,qe=305,_e=306,Se=307,Me=1e3,Ee=1001,Te=1002,Pe=1003,Ae=1004,Oe=1004,Le=1005,Ce=1005,De=1006,ke=1007,Ie=1007,Re=1008,Fe=1008,Ne=1009,je=1010,ze=1011,Be=1012,Ue=1013,Ve=1014,Ge=1015,He=1016,We=1017,Xe=1018,Ye=1019,Qe=1020,Ze=1021,Ke=1022,Je=1023,$e=1024,et=1025,tt=Je,nt=1026,rt=1027,it=1028,ot=33776,at=33777,st=33778,lt=33779,ut=35840,ct=35841,ht=35842,ft=35843,pt=36196,dt=37808,mt=37809,vt=37810,gt=37811,yt=37812,bt=37813,xt=37814,wt=37815,qt=37816,_t=37817,St=37818,Mt=37819,Et=37820,Tt=37821,Pt=2200,At=2201,Ot=2202,Lt=2300,Ct=2301,Dt=2302,kt=2400,It=2401,Rt=2402,Ft=0,Nt=1,jt=2,zt=3e3,Bt=3001,Ut=3007,Vt=3002,Gt=3003,Ht=3004,Wt=3005,Xt=3006,Yt=3200,Qt=3201,Zt=0,Kt=1,Jt=0,$t=7680,en=7681,tn=7682,nn=7683,rn=34055,on=34056,an=5386,sn=512,ln=513,un=514,cn=515,hn=516,fn=517,pn=518,dn=519,mn=35044,vn=35048,gn=35040,yn=35045,bn=35049,xn=35041,wn=35046,qn=35050,_n=35042;function Sn(){}Object.assign(Sn.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var Mn=[],En=0;En<256;En++)Mn[En]=(En<16?"0":"")+En.toString(16);var Tn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Mn[255&e]+Mn[e>>8&255]+Mn[e>>16&255]+Mn[e>>24&255]+"-"+Mn[255&t]+Mn[t>>8&255]+"-"+Mn[t>>16&15|64]+Mn[t>>24&255]+"-"+Mn[63&n|128]+Mn[n>>8&255]+"-"+Mn[n>>16&255]+Mn[n>>24&255]+Mn[255&r]+Mn[r>>8&255]+Mn[r>>16&255]+Mn[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Tn.DEG2RAD},radToDeg:function(e){return e*Tn.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Pn(e,t){this.x=e||0,this.y=t||0}function An(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}Object.defineProperties(Pn.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Pn.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(An,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(c!==d||s!==h||l!==f||u!==p){var m=1-a,v=s*h+l*f+u*p+c*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*g;if(s=s*m+h*w,l=l*m+f*w,u=u*m+p*w,c=c*m+d*w,m===1-a){var q=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=q,l*=q,u*=q,c*=q}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(An.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(An.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=h*u*c+l*f*p,this._y=l*f*c-h*u*p,this._z=l*u*p+h*f*c,this._w=l*u*c-h*f*p):"YXZ"===o?(this._x=h*u*c+l*f*p,this._y=l*f*c-h*u*p,this._z=l*u*p-h*f*c,this._w=l*u*c+h*f*p):"ZXY"===o?(this._x=h*u*c-l*f*p,this._y=l*f*c+h*u*p,this._z=l*u*p+h*f*c,this._w=l*u*c-h*f*p):"ZYX"===o?(this._x=h*u*c-l*f*p,this._y=l*f*c+h*u*p,this._z=l*u*p-h*f*c,this._w=l*u*c+h*f*p):"YZX"===o?(this._x=h*u*c+l*f*p,this._y=l*f*c+h*u*p,this._z=l*u*p-h*f*c,this._w=l*u*c-h*f*p):"XZY"===o&&(this._x=h*u*c-l*f*p,this._y=l*f*c-h*u*p,this._z=l*u*p+h*f*c,this._w=l*u*c+h*f*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(l+c)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Tn.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var On=new Cn,Ln=new An;function Cn(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(Cn.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ln.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Ln.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,u=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+u*-a-c*-o,this.y=u*s+h*-o+c*-i-l*-a,this.z=c*s+h*-a+l*-o-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return On.copy(this).projectOnVector(e),this.sub(On)},reflect:function(e){return this.sub(On.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());0===t&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var n=this.dot(e)/t;return Math.acos(Tn.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Dn,kn=new Cn;function In(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(In.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)kn.x=e.getX(t),kn.y=e.getY(t),kn.z=e.getZ(t),kn.applyMatrix3(this),e.setXYZ(t,kn.x,kn.y,kn.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],p=n[8],d=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],q=r[8];return i[0]=o*d+a*g+s*x,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*q,i[1]=l*d+u*g+c*x,i[4]=l*m+u*y+c*w,i[7]=l*v+u*b+c*q,i[2]=h*d+f*g+p*x,i[5]=h*m+f*y+p*w,i[8]=h*v+f*b+p*q,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*i*u+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],f=n[8],p=f*l-u*h,d=u*c-f*s,m=h*s-l*c,v=i*p+o*d+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=p*y,r[1]=(a*h-f*o)*y,r[2]=(u*o-a*l)*y,r[3]=d*y,r[4]=(f*i-a*c)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(l*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Rn={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Dn&&(Dn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Dn.width=e.width,Dn.height=e.height;var n=Dn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Dn}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Fn=0;function Nn(e,t,n,r,i,o,a,s,l,u){Object.defineProperty(this,"id",{value:Fn++}),this.uuid=Tn.generateUUID(),this.name="",this.image=void 0!==e?e:Nn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Nn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ee,this.wrapT=void 0!==r?r:Ee,this.magFilter=void 0!==i?i:De,this.minFilter=void 0!==o?o:Re,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Je,this.type=void 0!==s?s:Ne,this.offset=new Pn(0,0),this.repeat=new Pn(1,1),this.center=new Pn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new In,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:zt,this.version=0,this.onUpdate=null}function jn(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function zn(e,t,n){this.width=e,this.height=t,this.scissor=new jn(0,0,e,t),this.scissorTest=!1,this.viewport=new jn(0,0,e,t),n=n||{},this.texture=new Nn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:De,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Bn(e,t,n){zn.call(this,e,t,n),this.samples=4}Nn.DEFAULT_IMAGE=void 0,Nn.DEFAULT_MAPPING=ge,Nn.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Nn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Tn.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Rn.getDataURL(r[o]))}else i=Rn.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ge)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Me:e.x=e.x-Math.floor(e.x);break;case Ee:e.x=e.x<0?0:1;break;case Te:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Me:e.y=e.y-Math.floor(e.y);break;case Ee:e.y=e.y<0?0:1;break;case Te:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Nn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(jn.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(jn.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],l=o[8],u=o[1],c=o[5],h=o[9],f=o[2],p=o[6],d=o[10];if(Math.abs(s-u)<.01&&Math.abs(l-f)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+f)<.1&&Math.abs(h+p)<.1&&Math.abs(a+c+d-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(d+1)/2,y=(s+u)/4,b=(l+f)/4,x=(h+p)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var w=Math.sqrt((p-h)*(p-h)+(l-f)*(l-f)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(p-h)/w,this.y=(l-f)/w,this.z=(u-s)/w,this.w=Math.acos((a+c+d-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),zn.prototype=Object.assign(Object.create(Sn.prototype),{constructor:zn,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Bn.prototype=Object.assign(Object.create(zn.prototype),{constructor:Bn,isWebGLMultisampleRenderTarget:!0,copy:function(e){return zn.prototype.copy.call(this,e),this.samples=e.samples,this}});var Un=new Cn,Vn=new Qn,Gn=new Cn(0,0,0),Hn=new Cn(1,1,1),Wn=new Cn,Xn=new Cn,Yn=new Cn;function Qn(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Qn.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,u,c,h,f,p,d,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=f,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Qn).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/Un.setFromMatrixColumn(e,0).length(),i=1/Un.setFromMatrixColumn(e,1).length(),o=1/Un.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*u,f=o*c,p=a*u,d=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=f+p*l,t[5]=h-d*l,t[9]=-a*s,t[2]=d-h*l,t[6]=p+f*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*a,t[4]=-o*c,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*u,f=o*c,p=a*u,d=a*c;t[0]=s*u,t[4]=p*l-f,t[8]=h*l+d,t[1]=s*c,t[5]=d*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*l,w=a*s,q=a*l;t[0]=s*u,t[4]=q-b*c,t[8]=w*c+x,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=x*c+w,t[10]=b-q*c}else if("XZY"===e.order){b=o*s,x=o*l,w=a*s,q=a*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=b*c+q,t[5]=o*u,t[9]=x*c-w,t[2]=w*c-x,t[6]=a*u,t[10]=q*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Gn,e,Hn)},lookAt:function(e,t,n){var r=this.elements;return Yn.subVectors(e,t),0===Yn.lengthSq()&&(Yn.z=1),Yn.normalize(),Wn.crossVectors(n,Yn),0===Wn.lengthSq()&&(1===Math.abs(n.z)?Yn.x+=1e-4:Yn.z+=1e-4,Yn.normalize(),Wn.crossVectors(n,Yn)),Wn.normalize(),Xn.crossVectors(Yn,Wn),r[0]=Wn.x,r[4]=Xn.x,r[8]=Yn.x,r[1]=Wn.y,r[5]=Xn.y,r[9]=Yn.y,r[2]=Wn.z,r[6]=Xn.z,r[10]=Yn.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],q=r[4],_=r[8],S=r[12],M=r[1],E=r[5],T=r[9],P=r[13],A=r[2],O=r[6],L=r[10],C=r[14],D=r[3],k=r[7],I=r[11],R=r[15];return i[0]=o*w+a*M+s*A+l*D,i[4]=o*q+a*E+s*O+l*k,i[8]=o*_+a*T+s*L+l*I,i[12]=o*S+a*P+s*C+l*R,i[1]=u*w+c*M+h*A+f*D,i[5]=u*q+c*E+h*O+f*k,i[9]=u*_+c*T+h*L+f*I,i[13]=u*S+c*P+h*C+f*R,i[2]=p*w+d*M+m*A+v*D,i[6]=p*q+d*E+m*O+v*k,i[10]=p*_+d*T+m*L+v*I,i[14]=p*S+d*P+m*C+v*R,i[3]=g*w+y*M+b*A+x*D,i[7]=g*q+y*E+b*O+x*k,i[11]=g*_+y*T+b*L+x*I,i[15]=g*S+y*P+b*C+x*R,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Un.x=e.getX(t),Un.y=e.getY(t),Un.z=e.getZ(t),Un.applyMatrix4(this),e.setXYZ(t,Un.x,Un.y,Un.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*l*h+i*o*h-r*o*f+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*f-i*o*c+n*o*f+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*h+r*o*c-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],f=r[8],p=r[9],d=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],x=p*y*h-g*d*h+g*c*m-u*y*m-p*c*b+u*d*b,w=v*d*h-f*y*h-v*c*m+l*y*m+f*c*b-l*d*b,q=f*g*h-v*p*h+v*u*m-l*g*m-f*u*b+l*p*b,_=v*p*c-f*g*c-v*u*d+l*g*d+f*u*y-l*p*y,S=i*x+o*w+a*q+s*_;if(0===S){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(M);return console.warn(M),this.identity()}var E=1/S;return n[0]=x*E,n[1]=(g*d*s-p*y*s-g*a*m+o*y*m+p*a*b-o*d*b)*E,n[2]=(u*y*s-g*c*s+g*a*h-o*y*h-u*a*b+o*c*b)*E,n[3]=(p*c*s-u*d*s-p*a*h+o*d*h+u*a*m-o*c*m)*E,n[4]=w*E,n[5]=(f*y*s-v*d*s+v*a*m-i*y*m-f*a*b+i*d*b)*E,n[6]=(v*c*s-l*y*s-v*a*h+i*y*h+l*a*b-i*c*b)*E,n[7]=(l*d*s-f*c*s+f*a*h-i*d*h-l*a*m+i*c*m)*E,n[8]=q*E,n[9]=(v*p*s-f*g*s-v*o*m+i*g*m+f*o*b-i*p*b)*E,n[10]=(l*g*s-v*u*s+v*o*h-i*g*h-l*o*b+i*u*b)*E,n[11]=(f*u*s-l*p*s-f*o*h+i*p*h+l*o*m-i*u*m)*E,n[12]=_*E,n[13]=(f*g*a-v*p*a+v*o*d-i*g*d-f*o*y+i*p*y)*E,n[14]=(v*u*a-l*g*a-v*o*c+i*g*c+l*o*y-i*u*y)*E,n[15]=(l*p*a-f*u*a+f*o*c-i*p*c-l*o*d+i*u*d)*E,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,u=o+o,c=a+a,h=i*l,f=i*u,p=i*c,d=o*u,m=o*c,v=a*c,g=s*l,y=s*u,b=s*c,x=n.x,w=n.y,q=n.z;return r[0]=(1-(d+v))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*q,r[9]=(m-g)*q,r[10]=(1-(h+d))*q,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=Un.set(r[0],r[1],r[2]).length(),o=Un.set(r[4],r[5],r[6]).length(),a=Un.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Vn.copy(this);var s=1/i,l=1/o,u=1/a;return Vn.elements[0]*=s,Vn.elements[1]*=s,Vn.elements[2]*=s,Vn.elements[4]*=l,Vn.elements[5]*=l,Vn.elements[6]*=l,Vn.elements[8]*=u,Vn.elements[9]*=u,Vn.elements[10]*=u,t.setFromRotationMatrix(Vn),n.x=i,n.y=o,n.z=a,this},makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(o-i),c=(t+e)*s,h=(n+r)*l,f=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Zn=new Qn,Kn=new An;function Jn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Jn.DefaultOrder}function $n(){this.mask=1}Jn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Jn.DefaultOrder="XYZ",Object.defineProperties(Jn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Jn.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Tn.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Zn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Zn,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Kn.setFromEuler(this),this.setFromQuaternion(Kn,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Cn(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign($n.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var er=0,tr=new Cn,nr=new An,rr=new Qn,ir=new Cn,or=new Cn,ar=new Cn,sr=new An,lr=new Cn(1,0,0),ur=new Cn(0,1,0),cr=new Cn(0,0,1),hr={type:"added"},fr={type:"removed"};function pr(){Object.defineProperty(this,"id",{value:er++}),this.uuid=Tn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pr.DefaultUp.clone();var e=new Cn,t=new Jn,n=new An,r=new Cn(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Qn},normalMatrix:{value:new In}}),this.matrix=new Qn,this.matrixWorld=new Qn,this.matrixAutoUpdate=pr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $n,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function dr(){pr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}pr.DefaultUp=new Cn(0,1,0),pr.DefaultMatrixAutoUpdate=!0,pr.prototype=Object.assign(Object.create(Sn.prototype),{constructor:pr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return nr.setFromAxisAngle(e,t),this.quaternion.multiply(nr),this},rotateOnWorldAxis:function(e,t){return nr.setFromAxisAngle(e,t),this.quaternion.premultiply(nr),this},rotateX:function(e){return this.rotateOnAxis(lr,e)},rotateY:function(e){return this.rotateOnAxis(ur,e)},rotateZ:function(e){return this.rotateOnAxis(cr,e)},translateOnAxis:function(e,t){return tr.copy(e).applyQuaternion(this.quaternion),this.position.add(tr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(lr,e)},translateY:function(e){return this.translateOnAxis(ur,e)},translateZ:function(e){return this.translateOnAxis(cr,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(rr.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?ir.copy(e):ir.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),or.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rr.lookAt(or,ir,this.up):rr.lookAt(ir,or,this.up),this.quaternion.setFromRotationMatrix(rr),r&&(rr.extractRotation(r.matrixWorld),nr.setFromRotationMatrix(rr),this.quaternion.premultiply(nr.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(hr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(fr)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),rr.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),rr.multiply(e.parent.matrixWorld)),e.applyMatrix(rr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Cn),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new An),this.updateMatrixWorld(!0),this.matrixWorld.decompose(or,e,ar),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Cn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(or,sr,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Cn),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ft&&(r.drawMode=this.drawMode),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(i(e.materials,this.material[s]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),f=m(e.materials),p=m(e.textures),d=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),dr.prototype=Object.assign(Object.create(pr.prototype),{constructor:dr,isScene:!0,copy:function(e,t){return pr.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var mr=[new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn],vr=new Cn,gr=new Cn,yr=new Cn,br=new Cn,xr=new Cn,wr=new Cn,qr=new Cn,_r=new Cn,Sr=new Cn,Mr=new Cn,Er=new Cn;function Tr(e,t){this.min=void 0!==e?e:new Cn(1/0,1/0,1/0),this.max=void 0!==t?t:new Cn(-1/0,-1/0,-1/0)}function Pr(e,t,n,r,i){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){Er.fromArray(e,o);var s=i.x*Math.abs(Er.x)+i.y*Math.abs(Er.y)+i.z*Math.abs(Er.z),l=t.dot(Er),u=n.dot(Er),c=r.dot(Er);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(Tr.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=vr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Cn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Cn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){var t,n;e.updateWorldMatrix(!1,!1);var r=e.geometry;if(void 0!==r)if(r.isGeometry){var i=r.vertices;for(t=0,n=i.length;t<n;t++)vr.copy(i[t]),vr.applyMatrix4(e.matrixWorld),this.expandByPoint(vr)}else if(r.isBufferGeometry){var o=r.attributes.position;if(void 0!==o)for(t=0,n=o.count;t<n;t++)vr.fromBufferAttribute(o,t).applyMatrix4(e.matrixWorld),this.expandByPoint(vr)}var a=e.children;for(t=0,n=a.length;t<n;t++)this.expandByObject(a[t]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Cn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,vr),vr.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(_r),Sr.subVectors(this.max,_r),gr.subVectors(e.a,_r),yr.subVectors(e.b,_r),br.subVectors(e.c,_r),xr.subVectors(yr,gr),wr.subVectors(br,yr),qr.subVectors(gr,br);var t=[0,-xr.z,xr.y,0,-wr.z,wr.y,0,-qr.z,qr.y,xr.z,0,-xr.x,wr.z,0,-wr.x,qr.z,0,-qr.x,-xr.y,xr.x,0,-wr.y,wr.x,0,-qr.y,qr.x,0];return!!Pr(t,gr,yr,br,Sr)&&(!!Pr(t=[1,0,0,0,1,0,0,0,1],gr,yr,br,Sr)&&(Mr.crossVectors(xr,wr),Pr(t=[Mr.x,Mr.y,Mr.z],gr,yr,br,Sr)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Cn),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return vr.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(vr).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(mr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mr)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Ar=new Tr;function Or(e,t){this.center=void 0!==e?e:new Cn,this.radius=void 0!==t?t:0}Object.assign(Or.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):Ar.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Cn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Tr),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Lr=new Cn,Cr=new Cn,Dr=new Cn,kr=new Cn,Ir=new Cn,Rr=new Cn,Fr=new Cn;function Nr(e,t){this.origin=void 0!==e?e:new Cn,this.direction=void 0!==t?t:new Cn}Object.assign(Nr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Cn),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Lr)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Cn),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Lr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lr.copy(this.direction).multiplyScalar(t).add(this.origin),Lr.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){Cr.copy(e).add(t).multiplyScalar(.5),Dr.copy(t).sub(e).normalize(),kr.copy(this.origin).sub(Cr);var i,o,a,s,l=.5*e.distanceTo(t),u=-this.direction.dot(Dr),c=kr.dot(this.direction),h=-kr.dot(Dr),f=kr.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(o=u*c-h,s=l*p,(i=u*h-c)>=0)if(o>=-s)if(o<=s){var d=1/p;a=(i*=d)*(i+u*(o*=d)+2*c)+o*(u*i+o+2*h)+f}else o=l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+f;else o=-l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-u*l+c)))*i+(o=i>0?-l:Math.min(Math.max(-l,-h),l))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-l,-h),l))*(o+2*h)+f):a=-(i=Math.max(0,-(u*l+c)))*i+(o=i>0?l:Math.min(Math.max(-l,-h),l))*(o+2*h)+f;else o=u>0?-l:l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Dr).multiplyScalar(o).add(Cr),a},intersectSphere:function(e,t){Lr.subVectors(e.center,this.origin);var n=Lr.dot(this.direction),r=Lr.dot(Lr)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Lr)},intersectTriangle:function(e,t,n,r,i){Ir.subVectors(t,e),Rr.subVectors(n,e),Fr.crossVectors(Ir,Rr);var o,a=this.direction.dot(Fr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}kr.subVectors(this.origin,e);var s=o*this.direction.dot(Rr.crossVectors(kr,Rr));if(s<0)return null;var l=o*this.direction.dot(Ir.cross(kr));if(l<0)return null;if(s+l>a)return null;var u=-o*kr.dot(Fr);return u<0?null:this.at(u/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var jr=new Cn,zr=new Cn,Br=new In;function Ur(e,t){this.normal=void 0!==e?e:new Cn(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Ur.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=jr.subVectors(n,t).cross(zr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Cn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Cn);var n=e.delta(jr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Cn),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Br.getNormalMatrix(e),r=this.coplanarPoint(jr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Vr=new Cn,Gr=new Cn,Hr=new Cn,Wr=new Cn,Xr=new Cn,Yr=new Cn,Qr=new Cn,Zr=new Cn,Kr=new Cn,Jr=new Cn;function $r(e,t,n){this.a=void 0!==e?e:new Cn,this.b=void 0!==t?t:new Cn,this.c=void 0!==n?n:new Cn}Object.assign($r,{getNormal:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Cn),r.subVectors(n,t),Vr.subVectors(e,t),r.cross(Vr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){Vr.subVectors(r,t),Gr.subVectors(n,t),Hr.subVectors(e,t);var o=Vr.dot(Vr),a=Vr.dot(Gr),s=Vr.dot(Hr),l=Gr.dot(Gr),u=Gr.dot(Hr),c=o*l-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Cn),0===c)return i.set(-2,-1,-1);var h=1/c,f=(l*s-a*u)*h,p=(o*u-a*s)*h;return i.set(1-f-p,p,f)},containsPoint:function(e,t,n,r){return $r.getBarycoord(e,t,n,r,Wr),Wr.x>=0&&Wr.y>=0&&Wr.x+Wr.y<=1},getUV:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,Wr),s.set(0,0),s.addScaledVector(i,Wr.x),s.addScaledVector(o,Wr.y),s.addScaledVector(a,Wr.z),s},isFrontFacing:function(e,t,n,r){return Vr.subVectors(n,t),Gr.subVectors(e,t),Vr.cross(Gr).dot(r)<0}}),Object.assign($r.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Vr.subVectors(this.c,this.b),Gr.subVectors(this.a,this.b),.5*Vr.cross(Gr).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Cn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return $r.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ur),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return $r.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return $r.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return $r.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return $r.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Cn);var n,r,i=this.a,o=this.b,a=this.c;Xr.subVectors(o,i),Yr.subVectors(a,i),Zr.subVectors(e,i);var s=Xr.dot(Zr),l=Yr.dot(Zr);if(s<=0&&l<=0)return t.copy(i);Kr.subVectors(e,o);var u=Xr.dot(Kr),c=Yr.dot(Kr);if(u>=0&&c<=u)return t.copy(o);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(Xr,n);Jr.subVectors(e,a);var f=Xr.dot(Jr),p=Yr.dot(Jr);if(p>=0&&f<=p)return t.copy(a);var d=f*l-s*p;if(d<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(Yr,r);var m=u*p-f*c;if(m<=0&&c-u>=0&&f-p>=0)return Qr.subVectors(a,o),r=(c-u)/(c-u+(f-p)),t.copy(o).addScaledVector(Qr,r);var v=1/(m+d+h);return n=d*v,r=h*v,t.copy(i).addScaledVector(Xr,n).addScaledVector(Yr,r)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ti={h:0,s:0,l:0},ni={h:0,s:0,l:0};function ri(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function ii(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function oi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ai(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function si(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Cn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ri,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(ri.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Tn.euclideanModulo(e,1),t=Tn.clamp(t,0,1),n=Tn.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=ii(i,r,e+1/3),this.g=ii(i,r,e),this.b=ii(i,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=ei[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=oi(e.r),this.g=oi(e.g),this.b=oi(e.b),this},copyLinearToSRGB:function(e){return this.r=ai(e.r),this.g=ai(e.g),this.b=ai(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=l<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(ti),ti.h+=e,ti.s+=t,ti.l+=n,this.setHSL(ti.h,ti.s,ti.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(ti),e.getHSL(ni);var n=Tn.lerp(ti.h,ni.h,t),r=Tn.lerp(ti.s,ni.s,t),i=Tn.lerp(ti.l,ni.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),ri.NAMES=ei,Object.assign(si.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var li=0;function ui(){Object.defineProperty(this,"id",{value:li++}),this.uuid=Tn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=D,this.side=S,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=A,this.opacity=1,this.transparent=!1,this.blendSrc=X,this.blendDst=Y,this.blendEquation=N,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=re,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$t,this.stencilZFail=$t,this.stencilZPass=$t,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function ci(e){ui.call(this),this.type="MeshBasicMaterial",this.color=new ri(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}function hi(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=mn,this.updateRange={offset:0,count:-1},this.version=0}function fi(e,t,n){hi.call(this,new Int8Array(e),t,n)}function pi(e,t,n){hi.call(this,new Uint8Array(e),t,n)}function di(e,t,n){hi.call(this,new Uint8ClampedArray(e),t,n)}function mi(e,t,n){hi.call(this,new Int16Array(e),t,n)}function vi(e,t,n){hi.call(this,new Uint16Array(e),t,n)}function gi(e,t,n){hi.call(this,new Int32Array(e),t,n)}function yi(e,t,n){hi.call(this,new Uint32Array(e),t,n)}function bi(e,t,n){hi.call(this,new Float32Array(e),t,n)}function xi(e,t,n){hi.call(this,new Float64Array(e),t,n)}function wi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function qi(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}ui.prototype=Object.assign(Object.create(Sn.prototype),{constructor:ui,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===T;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==D&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==S&&(n.side=this.side),this.vertexColors!==A&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ci.prototype=Object.create(ui.prototype),ci.prototype.constructor=ci,ci.prototype.isMeshBasicMaterial=!0,ci.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(hi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(hi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ri),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Pn),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Cn),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new jn),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),fi.prototype=Object.create(hi.prototype),fi.prototype.constructor=fi,pi.prototype=Object.create(hi.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(hi.prototype),di.prototype.constructor=di,mi.prototype=Object.create(hi.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(hi.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(hi.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(hi.prototype),yi.prototype.constructor=yi,bi.prototype=Object.create(hi.prototype),bi.prototype.constructor=bi,xi.prototype=Object.create(hi.prototype),xi.prototype.constructor=xi,Object.assign(wi.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var c,h=e.morphNormals,f=h.length;if(f>0){c=[];for(u=0;u<f;u++)c[u]={name:h[u].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,d=e.skinWeights,m=p.length===r.length,v=d.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var x,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var q=g.color;this.colors.push(q,q,q)}if(!0===o)void 0!==(x=i[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new Pn,new Pn,new Pn));if(!0===a)void 0!==(x=i[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new Pn,new Pn,new Pn));for(var _=0;_<l;_++){var S=s[_].vertices;t[_].data.push(S[g.a],S[g.b],S[g.c])}for(_=0;_<f;_++){var M=h[_].vertexNormals[u];c[_].data.push(M.a,M.b,M.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var _i=1,Si=new Qn,Mi=new pr,Ei=new Cn,Ti=new Tr,Pi=new Tr,Ai=new Cn;function Oi(){Object.defineProperty(this,"id",{value:_i+=2}),this.uuid=Tn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Oi.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Oi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(qi(e)>65535?yi:vi)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new In).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new In).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Si.makeRotationX(e),this.applyMatrix(Si),this},rotateY:function(e){return Si.makeRotationY(e),this.applyMatrix(Si),this},rotateZ:function(e){return Si.makeRotationZ(e),this.applyMatrix(Si),this},translate:function(e,t,n){return Si.makeTranslation(e,t,n),this.applyMatrix(Si),this},scale:function(e,t,n){return Si.makeScale(e,t,n),this.applyMatrix(Si),this},lookAt:function(e){return Mi.lookAt(e),Mi.updateMatrix(),this.applyMatrix(Mi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ei).negate(),this.translate(Ei.x,Ei.y,Ei.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new bi(3*t.vertices.length,3),r=new bi(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new bi(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new bi(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new wi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new hi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new hi(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.setAttribute("color",new hi(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new hi(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new hi(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],u=0,c=l.length;u<c;u++){var h=l[u],f=new bi(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new bi(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var d=new bi(4*e.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Tr);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Ti.setFromBufferAttribute(i),this.boundingBox.expandByPoint(Ti.min),this.boundingBox.expandByPoint(Ti.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Or);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Ti.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];Pi.setFromBufferAttribute(o),Ti.expandByPoint(Pi.min),Ti.expandByPoint(Pi.max)}Ti.getCenter(n);var a=0;for(r=0,i=e.count;r<i;r++)Ai.fromBufferAttribute(e,r),a=Math.max(a,n.distanceToSquared(Ai));if(t)for(r=0,i=t.length;r<i;r++)for(var s=0,l=(o=t[r]).count;s<l;s++)Ai.fromBufferAttribute(o,s),a=Math.max(a,n.distanceToSquared(Ai));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new hi(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,l,u=t.normal.array,c=new Cn,h=new Cn,f=new Cn,p=new Cn,d=new Cn;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],l=3*m[i+2],c.fromArray(n,a),h.fromArray(n,s),f.fromArray(n,l),p.subVectors(f,h),d.subVectors(c,h),p.cross(d),u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),f.fromArray(n,i+6),p.subVectors(f,h),d.subVectors(c,h),p.cross(d),u[i]=p.x,u[i+1]=p.y,u[i+2]=p.z,u[i+3]=p.x,u[i+4]=p.y,u[i+5]=p.z,u[i+6]=p.x,u[i+7]=p.y,u[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s),u=0,c=s;u<l;u++,c++)i[c]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Ai.x=e.getX(t),Ai.y=e.getY(t),Ai.z=e.getZ(t),Ai.normalize(),e.setXYZ(t,Ai.x,Ai.y,Ai.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,l=t.length;s<l;s++){o=t[s]*r;for(var u=0;u<r;u++)i[a++]=n[o++]}return new hi(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Oi,n=this.index.array,r=this.attributes;for(var i in r){var o=e(r[i],n);t.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],l=a[i],u=0,c=l.length;u<c;u++){o=e(l[u],n);s.push(o)}t.morphAttributes[i]=s}for(var h=this.groups,f=(u=0,h.length);u<f;u++){var p=h[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(f=i[n]).toJSON();""!==f.name&&(o.name=f.name),e.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,h=l.length;c<h;c++){var f;o=(f=l[c]).toJSON();""!==f.name&&(o.name=f.name),u.push(o)}u.length>0&&(a[n]=u,s=!0)}s&&(e.data.morphAttributes=a);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e},clone:function(){return(new Oi).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.setAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,r=u.length;n<r;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,r=c.length;n<r;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Li=new Qn,Ci=new Nr,Di=new Or,ki=new Cn,Ii=new Cn,Ri=new Cn,Fi=new Cn,Ni=new Cn,ji=new Cn,zi=new Cn,Bi=new Cn,Ui=new Cn,Vi=new Pn,Gi=new Pn,Hi=new Pn,Wi=new Cn,Xi=new Cn;function Yi(e,t){pr.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Oi,this.material=void 0!==t?t:new ci({color:16777215*Math.random()}),this.drawMode=Ft,this.updateMorphTargets()}function Qi(e,t,n,r,i,o,a,s){if(null===(t.side===M?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==E,s)))return null;Xi.copy(s),Xi.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Xi);return l<n.near||l>n.far?null:{distance:l,point:Xi.clone(),object:e}}function Zi(e,t,n,r,i,o,a,s,l,u,c){ki.fromBufferAttribute(i,l),Ii.fromBufferAttribute(i,u),Ri.fromBufferAttribute(i,c);var h=e.morphTargetInfluences;if(t.morphTargets&&o&&h){zi.set(0,0,0),Bi.set(0,0,0),Ui.set(0,0,0);for(var f=0,p=o.length;f<p;f++){var d=h[f],m=o[f];0!==d&&(Fi.fromBufferAttribute(m,l),Ni.fromBufferAttribute(m,u),ji.fromBufferAttribute(m,c),zi.addScaledVector(Fi.sub(ki),d),Bi.addScaledVector(Ni.sub(Ii),d),Ui.addScaledVector(ji.sub(Ri),d))}ki.add(zi),Ii.add(Bi),Ri.add(Ui)}var v=Qi(e,t,n,r,ki,Ii,Ri,Wi);if(v){a&&(Vi.fromBufferAttribute(a,l),Gi.fromBufferAttribute(a,u),Hi.fromBufferAttribute(a,c),v.uv=$r.getUV(Wi,ki,Ii,Ri,Vi,Gi,Hi,new Pn)),s&&(Vi.fromBufferAttribute(s,l),Gi.fromBufferAttribute(s,u),Hi.fromBufferAttribute(s,c),v.uv2=$r.getUV(Wi,ki,Ii,Ri,Vi,Gi,Hi,new Pn));var g=new si(l,u,c);$r.getNormal(ki,Ii,Ri,g.normal),v.face=g}return v}Yi.prototype=Object.assign(Object.create(pr.prototype),{constructor:Yi,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return pr.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Di.copy(r.boundingSphere),Di.applyMatrix4(o),!1!==e.ray.intersectsSphere(Di)&&(Li.getInverse(o),Ci.copy(e.ray).applyMatrix4(Li),null===r.boundingBox||!1!==Ci.intersectsBox(r.boundingBox))))if(this.drawMode===Ft){if(r.isBufferGeometry){var a,s,l,u,c,h,f,p,d,m=r.index,v=r.attributes.position,g=r.morphAttributes.position,y=r.attributes.uv,b=r.attributes.uv2,x=r.groups,w=r.drawRange;if(null!==m)if(Array.isArray(i))for(u=0,h=x.length;u<h;u++)for(d=i[(p=x[u]).materialIndex],c=Math.max(p.start,w.start),f=Math.min(p.start+p.count,w.start+w.count);c<f;c+=3)a=m.getX(c),s=m.getX(c+1),l=m.getX(c+2),(n=Zi(this,d,e,Ci,v,g,y,b,a,s,l))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,w.start),h=Math.min(m.count,w.start+w.count);u<h;u+=3)a=m.getX(u),s=m.getX(u+1),l=m.getX(u+2),(n=Zi(this,i,e,Ci,v,g,y,b,a,s,l))&&(n.faceIndex=Math.floor(u/3),t.push(n));else if(void 0!==v)if(Array.isArray(i))for(u=0,h=x.length;u<h;u++)for(d=i[(p=x[u]).materialIndex],c=Math.max(p.start,w.start),f=Math.min(p.start+p.count,w.start+w.count);c<f;c+=3)(n=Zi(this,d,e,Ci,v,g,y,b,a=c,s=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,w.start),h=Math.min(v.count,w.start+w.count);u<h;u+=3)(n=Zi(this,i,e,Ci,v,g,y,b,a=u,s=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),t.push(n))}else if(r.isGeometry){var q,_,S,M,E=Array.isArray(i),T=r.vertices,P=r.faces,A=r.faceVertexUvs[0];A.length>0&&(M=A);for(var O=0,L=P.length;O<L;O++){var C=P[O],D=E?i[C.materialIndex]:i;if(void 0!==D&&(q=T[C.a],_=T[C.b],S=T[C.c],n=Qi(this,D,e,Ci,q,_,S,Wi))){if(M&&M[O]){var k=M[O];Vi.copy(k[0]),Gi.copy(k[1]),Hi.copy(k[2]),n.uv=$r.getUV(Wi,q,_,S,Vi,Gi,Hi,new Pn)}n.face=C,n.faceIndex=O,t.push(n)}}}}else console.warn("THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ki=0,Ji=new Qn,$i=new pr,eo=new Cn;function to(){Object.defineProperty(this,"id",{value:Ki+=2}),this.uuid=Tn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}to.prototype=Object.assign(Object.create(Sn.prototype),{constructor:to,isGeometry:!0,applyMatrix:function(e){for(var t=(new In).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Ji.makeRotationX(e),this.applyMatrix(Ji),this},rotateY:function(e){return Ji.makeRotationY(e),this.applyMatrix(Ji),this},rotateZ:function(e){return Ji.makeRotationZ(e),this.applyMatrix(Ji),this},translate:function(e,t,n){return Ji.makeTranslation(e,t,n),this.applyMatrix(Ji),this},scale:function(e,t,n){return Ji.makeScale(e,t,n),this.applyMatrix(Ji),this},lookAt:function(e){return $i.lookAt(e),$i.updateMatrix(),this.applyMatrix($i.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<i.length;u+=3)t.vertices.push((new Cn).fromArray(i,u)),void 0!==a&&t.colors.push((new ri).fromArray(a,u));function c(e,n,r,i){var u=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],c=new si(e,n,r,void 0===o?[]:[(new Cn).fromArray(o,3*e),(new Cn).fromArray(o,3*n),(new Cn).fromArray(o,3*r)],u,i);t.faces.push(c),void 0!==s&&t.faceVertexUvs[0].push([(new Pn).fromArray(s,2*e),(new Pn).fromArray(s,2*n),(new Pn).fromArray(s,2*r)]),void 0!==l&&t.faceVertexUvs[1].push([(new Pn).fromArray(l,2*e),(new Pn).fromArray(l,2*n),(new Pn).fromArray(l,2*r)])}var h=e.groups;if(h.length>0)for(u=0;u<h.length;u++)for(var f=h[u],p=f.start,d=p,m=p+f.count;d<m;d+=3)void 0!==n?c(n[d],n[d+1],n[d+2],f.materialIndex):c(d,d+1,d+2,f.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<i.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(eo).negate(),this.translate(eo.x,eo.y,eo.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Qn;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Cn,t=new Cn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Cn;if(e){var s,l,u,c=new Cn,h=new Cn;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var f=(o=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new to;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)l=new Cn,u={a:new Cn,b:new Cn,c:new Cn},a.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Tr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Or),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new In).getNormalMatrix(t));for(var h=0,f=a.length;h<f;h++){var p=a[h].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(h=0,f=c.length;h<f;h++)u.push(c[h].clone());for(h=0,f=l.length;h<f;h++){var d,m,v,g=l[h],y=g.vertexNormals,b=g.vertexColors;(d=new si(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(var x=0,w=y.length;x<w;x++)m=y[x].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),d.vertexNormals.push(m);d.color.copy(g.color);for(x=0,w=b.length;x<w;x++)v=b[x],d.vertexColors.push(v.clone());d.materialIndex=g.materialIndex+n,s.push(d)}for(h=0,f=e.faceVertexUvs.length;h<f;h++){var q=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(x=0,w=q.length;x<w;x++){for(var _=q[x],S=[],M=0,E=_.length;M<E;M++)S.push(_[M].clone());this.faceVertexUvs[h].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var d=f[n];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Cn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],l={},u=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,b=0;if(b=_(b,0,0),b=_(b,1,!0),b=_(b,2,!1),b=_(b,3,d),b=_(b,4,m),b=_(b,5,v),b=_(b,6,g),b=_(b,7,y),a.push(b),a.push(p.a,p.b,p.c),a.push(p.materialIndex),d){var x=this.faceVertexUvs[0][i];a.push(E(x[0]),E(x[1]),E(x[2]))}if(m&&a.push(S(p.normal)),v){var w=p.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(g&&a.push(M(p.color)),y){var q=p.vertexColors;a.push(M(q[0]),M(q[1]),M(q[2]))}}function _(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function M(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]||(f[t]=h.length/2,h.push(e.x,e.y)),f[t]}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new to).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(o=0,a=h.length;o<a;o++){var p=h[o];f.push(p.clone())}this.faceVertexUvs[t].push(f)}}var d=e.morphTargets;for(t=0,n=d.length;t<n;t++){var m={};if(m.name=d[t].name,void 0!==d[t].vertices)for(m.vertices=[],r=0,i=d[t].vertices.length;r<i;r++)m.vertices.push(d[t].vertices[r].clone());if(void 0!==d[t].normals)for(m.normals=[],r=0,i=d[t].normals.length;r<i;r++)m.normals.push(d[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var q=e.lineDistances;for(t=0,n=q.length;t<n;t++)this.lineDistances.push(q[t]);var _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var no=function(e){function t(e,n,r,i,s,u){var c;return o(this,t),(c=a(this,l(t).call(this))).type="BoxGeometry",c.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:u},c.fromBufferGeometry(new ro(e,n,r,i,s,u)),c.mergeVertices(),c}return u(t,e),t}(to),ro=function(e){function t(e,n,r,i,u,c){var h;o(this,t),(h=a(this,l(t).call(this))).type="BoxBufferGeometry",h.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:u,depthSegments:c};var f=s(h);e=e||1,n=n||1,r=r||1,i=Math.floor(i)||1,u=Math.floor(u)||1,c=Math.floor(c)||1;var p=[],d=[],m=[],v=[],g=0,y=0;function b(e,t,n,r,i,o,a,s,l,u,c){var h,b,x=o/l,w=a/u,q=o/2,_=a/2,S=s/2,M=l+1,E=u+1,T=0,P=0,A=new Cn;for(b=0;b<E;b++){var O=b*w-_;for(h=0;h<M;h++){var L=h*x-q;A[e]=L*r,A[t]=O*i,A[n]=S,d.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=s>0?1:-1,m.push(A.x,A.y,A.z),v.push(h/l),v.push(1-b/u),T+=1}}for(b=0;b<u;b++)for(h=0;h<l;h++){var C=g+h+M*b,D=g+h+M*(b+1),k=g+(h+1)+M*(b+1),I=g+(h+1)+M*b;p.push(C,D,I),p.push(D,k,I),P+=6}f.addGroup(y,P,c),y+=P,g+=T}return b("z","y","x",-1,-1,r,n,e,c,u,0),b("z","y","x",1,-1,r,n,-e,c,u,1),b("x","z","y",1,1,e,r,n,i,c,2),b("x","z","y",1,-1,e,r,-n,i,c,3),b("x","y","z",1,-1,e,n,r,i,u,4),b("x","y","z",-1,-1,e,n,-r,i,u,5),h.setIndex(p),h.setAttribute("position",new bi(d,3)),h.setAttribute("normal",new bi(m,3)),h.setAttribute("uv",new bi(v,2)),h}return u(t,e),t}(Oi);function io(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function oo(e){for(var t={},n=0;n<e.length;n++){var r=io(e[n]);for(var i in r)t[i]=r[i]}return t}var ao={clone:io,merge:oo};function so(e){ui.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function lo(){pr.call(this),this.type="Camera",this.matrixWorldInverse=new Qn,this.projectionMatrix=new Qn,this.projectionMatrixInverse=new Qn}function uo(e,t,n,r){lo.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}so.prototype=Object.create(ui.prototype),so.prototype.constructor=so,so.prototype.isShaderMaterial=!0,so.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=io(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},so.prototype.toJSON=function(e){var t=ui.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},lo.prototype=Object.assign(Object.create(pr.prototype),{constructor:lo,isCamera:!0,copy:function(e,t){return pr.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Cn),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){pr.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),uo.prototype=Object.assign(Object.create(lo.prototype),{constructor:uo,isPerspectiveCamera:!0,copy:function(e,t){return lo.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Tn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Tn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Tn.RAD2DEG*Math.atan(Math.tan(.5*Tn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Tn.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function co(e,t,n,r){pr.call(this),this.type="CubeCamera";var i=new uo(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Cn(1,0,0)),this.add(i);var o=new uo(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new Cn(-1,0,0)),this.add(o);var a=new uo(90,1,e,t);a.up.set(0,0,1),a.lookAt(new Cn(0,1,0)),this.add(a);var s=new uo(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new Cn(0,-1,0)),this.add(s);var l=new uo(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Cn(0,0,1)),this.add(l);var u=new uo(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new Cn(0,0,-1)),this.add(u),r=r||{format:Ke,magFilter:De,minFilter:De},this.renderTarget=new ho(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,c=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=c,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function ho(e,t,n){zn.call(this,e,t,n)}function fo(e,t,n,r,i,o,a,s,l,u,c,h){Nn.call(this,null,o,a,s,l,u,r,i,c,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:Pe,this.minFilter=void 0!==u?u:Pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}co.prototype=Object.create(pr.prototype),co.prototype.constructor=co,ho.prototype=Object.create(zn.prototype),ho.prototype.constructor=ho,ho.prototype.isWebGLRenderTargetCube=!0,ho.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new dr,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new so({type:"CubemapFromEquirect",uniforms:io(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:M,blending:C});i.uniforms.tEquirect.value=t;var o=new Yi(new ro(5,5,5),i);n.add(o);var a=new co(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,n),o.geometry.dispose(),o.material.dispose(),this},fo.prototype=Object.create(Nn.prototype),fo.prototype.constructor=fo,fo.prototype.isDataTexture=!0;var po=new Or,mo=new Cn;function vo(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Ur,void 0!==t?t:new Ur,void 0!==n?n:new Ur,void 0!==r?r:new Ur,void 0!==i?i:new Ur,void 0!==o?o:new Ur]}Object.assign(vo.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,d-h,y-m).normalize(),t[1].setComponents(a+r,c+s,d+h,y+m).normalize(),t[2].setComponents(a+i,c+l,d+f,y+v).normalize(),t[3].setComponents(a-i,c-l,d-f,y-v).normalize(),t[4].setComponents(a-o,c-u,d-p,y-g).normalize(),t[5].setComponents(a+o,c+u,d+p,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),po.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(po)},intersectsSprite:function(e){return po.center.set(0,0,0),po.radius=.7071067811865476,po.applyMatrix4(e.matrixWorld),this.intersectsSphere(po)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(mo.x=r.normal.x>0?e.max.x:e.min.x,mo.y=r.normal.y>0?e.max.y:e.min.y,mo.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(mo)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var go={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tbool frontFacing = dot( cross( S, T ), N ) > 0.0;\n\t\t\tmapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},yo={common:{diffuse:{value:new ri(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new In},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Pn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ri(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ri(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new In}},sprite:{diffuse:{value:new ri(15658734)},opacity:{value:1},center:{value:new Pn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new In}}},bo={basic:{uniforms:oo([yo.common,yo.specularmap,yo.envmap,yo.aomap,yo.lightmap,yo.fog]),vertexShader:go.meshbasic_vert,fragmentShader:go.meshbasic_frag},lambert:{uniforms:oo([yo.common,yo.specularmap,yo.envmap,yo.aomap,yo.lightmap,yo.emissivemap,yo.fog,yo.lights,{emissive:{value:new ri(0)}}]),vertexShader:go.meshlambert_vert,fragmentShader:go.meshlambert_frag},phong:{uniforms:oo([yo.common,yo.specularmap,yo.envmap,yo.aomap,yo.lightmap,yo.emissivemap,yo.bumpmap,yo.normalmap,yo.displacementmap,yo.gradientmap,yo.fog,yo.lights,{emissive:{value:new ri(0)},specular:{value:new ri(1118481)},shininess:{value:30}}]),vertexShader:go.meshphong_vert,fragmentShader:go.meshphong_frag},standard:{uniforms:oo([yo.common,yo.envmap,yo.aomap,yo.lightmap,yo.emissivemap,yo.bumpmap,yo.normalmap,yo.displacementmap,yo.roughnessmap,yo.metalnessmap,yo.fog,yo.lights,{emissive:{value:new ri(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:go.meshphysical_vert,fragmentShader:go.meshphysical_frag},matcap:{uniforms:oo([yo.common,yo.bumpmap,yo.normalmap,yo.displacementmap,yo.fog,{matcap:{value:null}}]),vertexShader:go.meshmatcap_vert,fragmentShader:go.meshmatcap_frag},points:{uniforms:oo([yo.points,yo.fog]),vertexShader:go.points_vert,fragmentShader:go.points_frag},dashed:{uniforms:oo([yo.common,yo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:go.linedashed_vert,fragmentShader:go.linedashed_frag},depth:{uniforms:oo([yo.common,yo.displacementmap]),vertexShader:go.depth_vert,fragmentShader:go.depth_frag},normal:{uniforms:oo([yo.common,yo.bumpmap,yo.normalmap,yo.displacementmap,{opacity:{value:1}}]),vertexShader:go.normal_vert,fragmentShader:go.normal_frag},sprite:{uniforms:oo([yo.sprite,yo.fog]),vertexShader:go.sprite_vert,fragmentShader:go.sprite_frag},background:{uniforms:{uvTransform:{value:new In},t2D:{value:null}},vertexShader:go.background_vert,fragmentShader:go.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:go.cube_vert,fragmentShader:go.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:go.equirect_vert,fragmentShader:go.equirect_frag},distanceRGBA:{uniforms:oo([yo.common,yo.displacementmap,{referencePosition:{value:new Cn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:go.distanceRGBA_vert,fragmentShader:go.distanceRGBA_frag},shadow:{uniforms:oo([yo.lights,yo.fog,{color:{value:new ri(0)},opacity:{value:1}}]),vertexShader:go.shadow_vert,fragmentShader:go.shadow_frag}};function xo(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function wo(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(!function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,i):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function qo(e,t,n,r){to.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new _o(e,t,n,r)),this.mergeVertices()}function _o(e,t,n,r){Oi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(r)||1,c=l+1,h=u+1,f=e/l,p=t/u,d=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<c;i++){var b=i*f-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/l),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<l;i++){var x=i+c*o,w=i+c*(o+1),q=i+1+c*(o+1),_=i+1+c*o;d.push(x,w,_),d.push(w,q,_)}this.setIndex(d),this.setAttribute("position",new bi(m,3)),this.setAttribute("normal",new bi(v,3)),this.setAttribute("uv",new bi(g,2))}function So(e,t,n,r){var i,o,a=new ri(0),s=0,l=null,u=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),c(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){c(a,s=e)},render:function(t,r,h,f){var p=r.background,d=e.vr,m=d.getSession&&d.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(c(a,s),l=null,u=0):p&&p.isColor&&(c(p,1),f=!0,l=null,u=0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===o&&((o=new Yi(new ro(1,1,1),new so({type:"BackgroundCubeMaterial",uniforms:io(bo.cube.uniforms),vertexShader:bo.cube.vertexShader,fragmentShader:bo.cube.fragmentShader,side:M,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var v=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.tCube.value=v,o.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&u===v.version||(o.material.needsUpdate=!0,l=p,u=v.version),t.unshift(o,o.geometry,o.material,0,0,null)}else p&&p.isTexture&&(void 0===i&&((i=new Yi(new _o(2,2),new so({type:"BackgroundMaterial",uniforms:io(bo.background.uniforms),vertexShader:bo.background.vertexShader,fragmentShader:bo.background.fragmentShader,side:S,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&u===p.version||(i.material.needsUpdate=!0,l=p,u=p.version),t.unshift(i,i.geometry,i.material,0,0,null))}}}function Mo(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(r,a,s,l){if(0!==l){var u,c;if(o)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](i,a,s,l),n.update(s,i,l)}}}function Eo(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),d=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=c>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}function To(){var e=this,t=null,n=0,r=!1,i=!1,o=new Ur,a=new In,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==i||null===u){var c=r+4*l,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var f=0,p=r;f!==l;++f,p+=4)o.copy(t[f]).applyMatrix4(h,a),o.normal.toArray(u,p),u[p+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,o,a,c,h,f){if(!r||null===e||0===e.length||i&&!a)i?u(null):l();else{var p=i?0:n,d=4*p,m=h.clippingState||null;s.value=m,m=u(e,c,d,f);for(var v=0;v!==d;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Po(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Ao(e,t,n){var r=new WeakMap,i=new WeakMap;function o(e){var a=e.target,s=r.get(a);for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),r.delete(a);var u=i.get(s);u&&(t.remove(u),i.delete(s)),n.memory.geometries--}function a(e){var n=[],r=e.index,o=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],f=s[l+2];n.push(c,h,h,f,f,c)}}else{s=o.array;a=o.version;for(l=0,u=s.length/3-1;l<u;l+=3){c=l+0,h=l+1,f=l+2;n.push(c,h,h,f,f,c)}}var p=new(qi(n)>65535?yi:vi)(n,1);p.version=a,t.update(p,34963);var d=i.get(e);d&&t.remove(d),i.set(e,p)}return{get:function(e,t){var i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Oi).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,l=a.length;s<l;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return i.get(e)}}}function Oo(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(r,l,u,c){if(0!==c){var h,f;if(s)h=e,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(h=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](i,u,o,l*a,c),n.update(u,i,c)}}}function Lo(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 5:case 6:t.triangles+=r*(e-2);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Co(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Do(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,l=s.length,u=t[i.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[i.id]=u}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<l;c++){0!==(p=u[c])[1]&&(h&&i.deleteAttribute("morphTarget"+c),f&&i.deleteAttribute("morphNormal"+c))}for(c=0;c<l;c++){(p=u[c])[0]=c,p[1]=s[c]}for(u.sort(Co),c=0;c<8;c++){var p;if(p=u[c]){var d=p[0],m=p[1];if(m){h&&i.setAttribute("morphTarget"+c,h[d]),f&&i.setAttribute("morphNormal"+c,f[d]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function ko(e,t,n,r){var i={};return{update:function(e){var o=r.render.frame,a=e.geometry,s=t.get(e,a);return i[s.id]!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i[s.id]=o),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){i={}}}}function Io(e,t,n,r,i,o,a,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:ye,a=void 0!==a?a:Ke,Nn.call(this,e,t,n,r,i,o,a,s,l,u),this.flipY=!1}function Ro(e,t,n,r){Nn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Pe,this.minFilter=Pe,this.wrapR=Ee,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Fo(e,t,n,r){Nn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Pe,this.minFilter=Pe,this.wrapR=Ee,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}bo.physical={uniforms:oo([bo.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new ri(0)},clearcoatNormalScale:{value:new Pn(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:go.meshphysical_vert,fragmentShader:go.meshphysical_frag},qo.prototype=Object.create(to.prototype),qo.prototype.constructor=qo,_o.prototype=Object.create(Oi.prototype),_o.prototype.constructor=_o,Io.prototype=Object.create(Nn.prototype),Io.prototype.constructor=Io,Io.prototype.isCubeTexture=!0,Object.defineProperty(Io.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Ro.prototype=Object.create(Nn.prototype),Ro.prototype.constructor=Ro,Ro.prototype.isDataTexture2DArray=!0,Fo.prototype=Object.create(Nn.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isDataTexture3D=!0;var No=new Nn,jo=new Ro,zo=new Fo,Bo=new Io,Uo=[],Vo=[],Go=new Float32Array(16),Ho=new Float32Array(9),Wo=new Float32Array(4);function Xo(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Uo[i];if(void 0===o&&(o=new Float32Array(i),Uo[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Yo(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Qo(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Zo(e,t){var n=Vo[t];void 0===n&&(n=new Int32Array(t),Vo[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ko(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Jo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Yo(n,t))return;e.uniform2fv(this.addr,t),Qo(n,t)}}function $o(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Yo(n,t))return;e.uniform3fv(this.addr,t),Qo(n,t)}}function ea(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Yo(n,t))return;e.uniform4fv(this.addr,t),Qo(n,t)}}function ta(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Yo(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Qo(n,t)}else{if(Yo(n,r))return;Wo.set(r),e.uniformMatrix2fv(this.addr,!1,Wo),Qo(n,r)}}function na(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Yo(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Qo(n,t)}else{if(Yo(n,r))return;Ho.set(r),e.uniformMatrix3fv(this.addr,!1,Ho),Qo(n,r)}}function ra(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Yo(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Qo(n,t)}else{if(Yo(n,r))return;Go.set(r),e.uniformMatrix4fv(this.addr,!1,Go),Qo(n,r)}}function ia(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||No,i)}function oa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||jo,i)}function aa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||zo,i)}function sa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Bo,i)}function la(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ua(e,t){var n=this.cache;Yo(n,t)||(e.uniform2iv(this.addr,t),Qo(n,t))}function ca(e,t){var n=this.cache;Yo(n,t)||(e.uniform3iv(this.addr,t),Qo(n,t))}function ha(e,t){var n=this.cache;Yo(n,t)||(e.uniform4iv(this.addr,t),Qo(n,t))}function fa(e,t){e.uniform1fv(this.addr,t)}function pa(e,t){e.uniform1iv(this.addr,t)}function da(e,t){e.uniform2iv(this.addr,t)}function ma(e,t){e.uniform3iv(this.addr,t)}function va(e,t){e.uniform4iv(this.addr,t)}function ga(e,t){var n=Xo(t,this.size,2);e.uniform2fv(this.addr,n)}function ya(e,t){var n=Xo(t,this.size,3);e.uniform3fv(this.addr,n)}function ba(e,t){var n=Xo(t,this.size,4);e.uniform4fv(this.addr,n)}function xa(e,t){var n=Xo(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function wa(e,t){var n=Xo(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function qa(e,t){var n=Xo(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function _a(e,t,n){var r=t.length,i=Zo(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||No,i[o])}function Sa(e,t,n){var r=t.length,i=Zo(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Bo,i[o])}function Ma(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ko;case 35664:return Jo;case 35665:return $o;case 35666:return ea;case 35674:return ta;case 35675:return na;case 35676:return ra;case 35678:case 36198:return ia;case 35679:return aa;case 35680:return sa;case 36289:return oa;case 5124:case 35670:return la;case 35667:case 35671:return ua;case 35668:case 35672:return ca;case 35669:case 35673:return ha}}(t.type)}function Ea(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return fa;case 35664:return ga;case 35665:return ya;case 35666:return ba;case 35674:return xa;case 35675:return wa;case 35676:return qa;case 35678:return _a;case 35680:return Sa;case 5124:case 35670:return pa;case 35667:case 35671:return da;case 35668:case 35672:return ma;case 35669:case 35673:return va}}(t.type)}function Ta(e){this.id=e,this.seq=[],this.map={}}Ea.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Qo(t,e)},Ta.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var Pa=/([\w\d_]+)(\])?(\[|\.)?/g;function Aa(e,t){e.seq.push(t),e.map[t.id]=t}function Oa(e,t,n){var r=e.name,i=r.length;for(Pa.lastIndex=0;;){var o=Pa.exec(r),a=Pa.lastIndex,s=o[1],l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){Aa(n,void 0===u?new Ma(s,e,t):new Ea(s,e,t));break}var c=n.map[s];void 0===c&&Aa(n,c=new Ta(s)),n=c}}function La(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Oa(i,e.getUniformLocation(t,i.name),this)}}function Ca(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}La.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},La.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},La.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},La.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Da=0;function ka(e){switch(e){case zt:return["Linear","( value )"];case Bt:return["sRGB","( value )"];case Vt:return["RGBE","( value )"];case Ht:return["RGBM","( value, 7.0 )"];case Wt:return["RGBM","( value, 16.0 )"];case Xt:return["RGBD","( value, 256.0 )"];case Ut:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Gt:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function Ia(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Ra(e,t){var n=ka(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Fa(e,t){var n;switch(t){case fe:n="Linear";break;case pe:n="Reinhard";break;case de:n="Uncharted2";break;case me:n="OptimizedCineon";break;case ve:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Na(e){return""!==e}function ja(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function za(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Ba=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ua(e){return e.replace(Ba,Va)}function Va(e,t){var n=go[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ua(n)}var Ga=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function Ha(e){return e.replace(Ga,Wa)}function Wa(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Xa(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ya(e,t,n,r,i,o){var a,s,l,u,c,h=e.getContext(),f=r.defines,p=i.vertexShader,d=i.fragmentShader,m=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===w?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===q?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===_&&(t="SHADOWMAP_TYPE_VSM"),t}(o),v=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ye:case be:t="ENVMAP_TYPE_CUBE";break;case _e:case Se:t="ENVMAP_TYPE_CUBE_UV";break;case xe:case we:t="ENVMAP_TYPE_EQUIREC";break;case qe:t="ENVMAP_TYPE_SPHERE"}return t}(o),g=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case be:case we:t="ENVMAP_MODE_REFRACTION"}return t}(o),y=function(e){var t="ENVMAP_BLENDING_MULTIPLY";if(e.envMap)switch(e.combine){case le:t="ENVMAP_BLENDING_MULTIPLY";break;case ue:t="ENVMAP_BLENDING_MIX";break;case ce:t="ENVMAP_BLENDING_ADD"}return t}(o),b=e.gammaFactor>0?e.gammaFactor:1,x=o.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Na).join("\n")}(r.extensions,o,t),S=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(f),M=h.createProgram(),E=o.numMultiviewViews;if(r.isRawShaderMaterial?((a=[S].filter(Na).join("\n")).length>0&&(a+="\n"),(s=[x,S].filter(Na).join("\n")).length>0&&(s+="\n")):(a=[Xa(o),"#define SHADER_NAME "+i.name,S,o.instancing?"#define USE_INSTANCING":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+g:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+m:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Na).join("\n"),s=[x,Xa(o),"#define SHADER_NAME "+i.name,S,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+v:"",o.envMap?"#define "+g:"",o.envMap?"#define "+y:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.sheen?"#define USE_SHEEN":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+m:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensions&&r.extensions.shaderTextureLOD||o.envMap)&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==he?"#define TONE_MAPPING":"",o.toneMapping!==he?go.tonemapping_pars_fragment:"",o.toneMapping!==he?Fa("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?go.encodings_pars_fragment:"",o.mapEncoding?Ra("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Ra("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Ra("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ra("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(l="linearToOutputTexel",u=o.outputEncoding,c=ka(u),"vec4 "+l+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Na).join("\n")),p=za(p=ja(p=Ua(p),o),o),d=za(d=ja(d=Ua(d),o),o),p=Ha(p),d=Ha(d),o.isWebGL2&&!r.isRawShaderMaterial){var T=!1,P=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==p.match(P)&&null!==d.match(P)&&(T=!0,p=p.replace(P,""),d=d.replace(P,"")),a=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,s=["#version 300 es\n","#define varying in",T?"":"out highp vec4 pc_fragColor;",T?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s,E>0&&(a=(a=a.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+E+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+E+"];","uniform mat4 projectionMatrices["+E+"];","uniform mat4 viewMatrices["+E+"];","uniform mat3 normalMatrices["+E+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),s=(s=s.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+E+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var A,O,L=s+d,C=Ca(h,35633,a+p),D=Ca(h,35632,L);if(h.attachShader(M,C),h.attachShader(M,D),void 0!==r.index0AttributeName?h.bindAttribLocation(M,0,r.index0AttributeName):!0===o.morphTargets&&h.bindAttribLocation(M,0,"position"),h.linkProgram(M),e.debug.checkShaderErrors){var k=h.getProgramInfoLog(M).trim(),I=h.getShaderInfoLog(C).trim(),R=h.getShaderInfoLog(D).trim(),F=!0,N=!0;if(!1===h.getProgramParameter(M,35714)){F=!1;var j=Ia(h,C,"vertex"),z=Ia(h,D,"fragment");console.error("THREE.WebGLProgram: shader error: ",h.getError(),"35715",h.getProgramParameter(M,35715),"gl.getProgramInfoLog",k,j,z)}else""!==k?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",k):""!==I&&""!==R||(N=!1);N&&(this.diagnostics={runnable:F,material:r,programLog:k,vertexShader:{log:I,prefix:a},fragmentShader:{log:R,prefix:s}})}return h.deleteShader(C),h.deleteShader(D),this.getUniforms=function(){return void 0===A&&(A=new La(h,M)),A},this.getAttributes=function(){return void 0===O&&(O=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(h,M)),O},this.destroy=function(){h.deleteProgram(M),this.program=void 0},this.name=i.name,this.id=Da++,this.cacheKey=n,this.usedTimes=1,this.program=M,this.vertexShader=C,this.fragmentShader=D,this.numMultiviewViews=E,this}function Qa(e,t,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,l=n.maxVertexUniforms,u=n.vertexTextures,c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function f(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=zt,n===zt&&t&&(n=Ut),n}this.getParameters=function(t,r,h,p,d,m,v){var g=c[t.type],y=v.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(a)return 1024;var n=l,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(v):0;null!==t.precision&&(s=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",s,"instead.");var b=e.getRenderTarget(),x=b&&b.isWebGLMultiviewRenderTarget?b.numViews:0;return{isWebGL2:i,shaderID:g,precision:s,instancing:!0===v.isInstancedMesh,supportsVertexTextures:u,numMultiviewViews:x,outputEncoding:f(b?b.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:f(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:f(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:f(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===_e||t.envMap.mapping===Se),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:f(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Kt,tangentSpaceNormalMap:t.normalMapType===Zt,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||t.displacementMap),uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||!t.displacementMap),fog:!!p,useFog:t.fog,fogExp2:p&&p.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:o,skinning:t.skinning&&y>0,maxBones:y,useVertexTexture:a,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:d,numClipIntersection:m,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:t.toneMapped?e.toneMapping:he,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===E,flipSided:t.side===M,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCacheKey=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<h.length;o++)r.push(n[h[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(n,i,o,a){for(var s,l=0,u=r.length;l<u;l++){var c=r[l];if(c.cacheKey===a){++(s=c).usedTimes;break}}return void 0===s&&(s=new Ya(e,t,a,n,i,o),r.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Za(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Ka(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ja(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function $a(){var e=[],t=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,l){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=o,u.program=o.program||i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=s,u.group=l),t++,u}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,i,a,s,l){var u=o(e,t,i,a,s,l);(!0===i.transparent?r:n).push(u)},unshift:function(e,t,i,a,s,l){var u=o(e,t,i,a,s,l);(!0===i.transparent?r:n).unshift(u)},sort:function(){n.length>1&&n.sort(Ka),r.length>1&&r.sort(Ja)}}}function es(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i,o=e.get(n);return void 0===o?(i=new $a,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):void 0===(i=o.get(r))&&(i=new $a,o.set(r,i)),i},dispose:function(){e=new WeakMap}}}function ts(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Cn,color:new ri,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Pn};break;case"SpotLight":n={position:new Cn,direction:new Cn,color:new ri,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Pn};break;case"PointLight":n={position:new Cn,color:new ri,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Pn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Cn,skyColor:new ri,groundColor:new ri};break;case"RectAreaLight":n={color:new ri,position:new Cn,halfWidth:new Cn,halfHeight:new Cn}}return e[t.id]=n,n}}}var ns=0;function rs(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function is(){for(var e=new ts,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new Cn);var r=new Cn,i=new Qn,o=new Qn;return{setup:function(n,a,s){for(var l=0,u=0,c=0,h=0;h<9;h++)t.probe[h].set(0,0,0);var f=0,p=0,d=0,m=0,v=0,g=0,y=0,b=0,x=s.matrixWorldInverse;n.sort(rs),h=0;for(var w=n.length;h<w;h++){var q=n[h],_=q.color,S=q.intensity,M=q.distance,E=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)l+=_.r*S,u+=_.g*S,c+=_.b*S;else if(q.isLightProbe)for(var T=0;T<9;T++)t.probe[T].addScaledVector(q.sh.coefficients[T],S);else if(q.isDirectionalLight){if((A=e.get(q)).color.copy(q.color).multiplyScalar(q.intensity),A.direction.setFromMatrixPosition(q.matrixWorld),r.setFromMatrixPosition(q.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(x),A.shadow=q.castShadow,q.castShadow){var P=q.shadow;A.shadowBias=P.bias,A.shadowRadius=P.radius,A.shadowMapSize=P.mapSize,t.directionalShadowMap[f]=E,t.directionalShadowMatrix[f]=q.shadow.matrix,g++}t.directional[f]=A,f++}else if(q.isSpotLight){if((A=e.get(q)).position.setFromMatrixPosition(q.matrixWorld),A.position.applyMatrix4(x),A.color.copy(_).multiplyScalar(S),A.distance=M,A.direction.setFromMatrixPosition(q.matrixWorld),r.setFromMatrixPosition(q.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(x),A.coneCos=Math.cos(q.angle),A.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),A.decay=q.decay,A.shadow=q.castShadow,q.castShadow){P=q.shadow;A.shadowBias=P.bias,A.shadowRadius=P.radius,A.shadowMapSize=P.mapSize,t.spotShadowMap[d]=E,t.spotShadowMatrix[d]=q.shadow.matrix,b++}t.spot[d]=A,d++}else if(q.isRectAreaLight){(A=e.get(q)).color.copy(_).multiplyScalar(S),A.position.setFromMatrixPosition(q.matrixWorld),A.position.applyMatrix4(x),o.identity(),i.copy(q.matrixWorld),i.premultiply(x),o.extractRotation(i),A.halfWidth.set(.5*q.width,0,0),A.halfHeight.set(0,.5*q.height,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),t.rectArea[m]=A,m++}else if(q.isPointLight){if((A=e.get(q)).position.setFromMatrixPosition(q.matrixWorld),A.position.applyMatrix4(x),A.color.copy(q.color).multiplyScalar(q.intensity),A.distance=q.distance,A.decay=q.decay,A.shadow=q.castShadow,q.castShadow){P=q.shadow;A.shadowBias=P.bias,A.shadowRadius=P.radius,A.shadowMapSize=P.mapSize,A.shadowCameraNear=P.camera.near,A.shadowCameraFar=P.camera.far,t.pointShadowMap[p]=E,t.pointShadowMatrix[p]=q.shadow.matrix,y++}t.point[p]=A,p++}else if(q.isHemisphereLight){var A;(A=e.get(q)).direction.setFromMatrixPosition(q.matrixWorld),A.direction.transformDirection(x),A.direction.normalize(),A.skyColor.copy(q.color).multiplyScalar(S),A.groundColor.copy(q.groundColor).multiplyScalar(S),t.hemi[v]=A,v++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c;var O=t.hash;O.directionalLength===f&&O.pointLength===p&&O.spotLength===d&&O.rectAreaLength===m&&O.hemiLength===v&&O.numDirectionalShadows===g&&O.numPointShadows===y&&O.numSpotShadows===b||(t.directional.length=f,t.spot.length=d,t.rectArea.length=m,t.point.length=p,t.hemi.length=v,t.directionalShadowMap.length=g,t.pointShadowMap.length=y,t.spotShadowMap.length=b,t.directionalShadowMatrix.length=g,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=b,O.directionalLength=f,O.pointLength=p,O.spotLength=d,O.rectAreaLength=m,O.hemiLength=v,O.numDirectionalShadows=g,O.numPointShadows=y,O.numSpotShadows=b,t.version=ns++)},state:t}}function os(){var e=new is,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function as(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i;return!1===e.has(n)?(i=new os,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):!1===e.get(n).has(r)?(i=new os,e.get(n).set(r,i)):i=e.get(n).get(r),i},dispose:function(){e=new WeakMap}}}function ss(e){ui.call(this),this.type="MeshDepthMaterial",this.depthPacking=Yt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function ls(e){ui.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Cn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}ss.prototype=Object.create(ui.prototype),ss.prototype.constructor=ss,ss.prototype.isMeshDepthMaterial=!0,ss.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},ls.prototype=Object.create(ui.prototype),ls.prototype.constructor=ls,ls.prototype.isMeshDistanceMaterial=!0,ls.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function us(e,t,n){var r=new vo,i=new Pn,o=new Pn,a=new jn,s=[],l=[],u={},c={0:M,1:S,2:E},h=new so({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONAL_PASS=1;var p=new Oi;p.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var d=new Yi(p,h),m=this;function v(n,r){var i=t.update(d);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,d,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,f,d,null)}function g(e,t,n){var r=e<<0|t<<1|n<<2,i=s[r];return void 0===i&&(i=new ss({depthPacking:Qt,morphTargets:e,skinning:t}),s[r]=i),i}function y(e,t,n){var r=e<<0|t<<1|n<<2,i=l[r];return void 0===i&&(i=new ls({morphTargets:e,skinning:t}),l[r]=i),i}function b(t,n,r,i,o,a){var s=t.geometry,l=null,h=g,f=t.customDepthMaterial;if(!0===r.isPointLight&&(h=y,f=t.customDistanceMaterial),void 0===f){var p=!1;!0===n.morphTargets&&(!0===s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0));var d=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?d=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=h(p,d,!0===t.isInstancedMesh)}else l=f;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=l.uuid,v=n.uuid,b=u[m];void 0===b&&(b={},u[m]=b);var x=b[v];void 0===x&&(x=l.clone(),b[v]=x),l=x}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=a===_?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:c[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=i,l.farDistance=o),l}function x(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===_)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,f=c.length;h<f;h++){var p=c[h],d=u[p.materialIndex];if(d&&d.visible){var m=b(n,d,a,o.near,o.far,s);e.renderBufferDirect(o,null,l,m,n,p)}}else if(u.visible){m=b(n,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,l,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)x(v[g],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=w,this.render=function(t,s,l){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(C),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var p=0,d=t.length;p<d;p++){var g=t[p],y=g.shadow;if(void 0!==y){i.copy(y.mapSize);var b=y.getFrameExtents();if(i.multiply(b),o.copy(y.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",g,"has shadow exceeding max texture size, reducing"),i.x>n&&(o.x=Math.floor(n/b.x),i.x=o.x*b.x,y.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/b.y),i.y=o.y*b.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&this.type===_){var w={minFilter:De,magFilter:De,format:Je};y.map=new zn(i.x,i.y,w),y.map.texture.name=g.name+".shadowMap",y.mapPass=new zn(i.x,i.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){w={minFilter:Pe,magFilter:Pe,format:Je};y.map=new zn(i.x,i.y,w),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var q=y.getViewportCount(),S=0;S<q;S++){var M=y.getViewport(S);a.set(o.x*M.x,o.y*M.y,o.x*M.z,o.y*M.w),f.viewport(a),y.updateMatrices(g,S),r=y.getFrustum(),x(s,l,y.camera,g,this.type)}y.isPointLightShadow||this.type!==_||v(y,l)}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,c,h)}}}function cs(e,t,n){var i,o,a=n.isWebGL2;var s=new function(){var t=!1,n=new jn,r=null,i=new jn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},l=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?qe(2929):_e(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ee:e.depthFunc(512);break;case te:e.depthFunc(519);break;case ne:e.depthFunc(513);break;case re:e.depthFunc(515);break;case ie:e.depthFunc(514);break;case oe:e.depthFunc(518);break;case ae:e.depthFunc(516);break;case se:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?qe(2960):_e(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}},c=e.getParameter(34921),h=new Uint8Array(c),f=new Uint8Array(c),p=new Uint8Array(c),g={},y=null,b=null,x=null,w=null,q=null,_=null,S=null,T=null,P=null,A=!1,O=null,L=null,le=null,ue=null,ce=null,he=e.getParameter(35661),fe=!1,pe=0,de=e.getParameter(7938);-1!==de.indexOf("WebGL")?(pe=parseFloat(/^WebGL\ ([0-9])/.exec(de)[1]),fe=pe>=1):-1!==de.indexOf("OpenGL ES")&&(pe=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(de)[1]),fe=pe>=2);var me=null,ve={},ge=new jn,ye=new jn;function be(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var xe={};function we(n,r){(h[n]=1,0===f[n]&&(e.enableVertexAttribArray(n),f[n]=1),p[n]!==r)&&((a?e:t.get("ANGLE_instanced_arrays"))[a?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),p[n]=r)}function qe(t){!0!==g[t]&&(e.enable(t),g[t]=!0)}function _e(t){!1!==g[t]&&(e.disable(t),g[t]=!1)}xe[3553]=be(3553,3553,1),xe[34067]=be(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),qe(2929),l.setFunc(re),Pe(!1),Ae(m),qe(2884),Te(C);var Se=(r(i={},N,32774),r(i,j,32778),r(i,z,32779),i);if(a)Se[B]=32775,Se[U]=32776;else{var Me=t.get("EXT_blend_minmax");null!==Me&&(Se[B]=Me.MIN_EXT,Se[U]=Me.MIN_EXT)}var Ee=(r(o={},V,0),r(o,G,1),r(o,H,768),r(o,X,770),r(o,$,776),r(o,K,774),r(o,Q,772),r(o,W,769),r(o,Y,771),r(o,J,775),r(o,Z,773),o);function Te(t,n,r,i,o,a,s,l){if(t!==C){if(b||(qe(3042),b=!0),t===F)o=o||n,a=a||r,s=s||i,n===w&&o===S||(e.blendEquationSeparate(Se[n],Se[o]),w=n,S=o),r===q&&i===_&&a===T&&s===P||(e.blendFuncSeparate(Ee[r],Ee[i],Ee[a],Ee[s]),q=r,_=i,T=a,P=s),x=t,A=null;else if(t!==x||l!==A){if(w===N&&S===N||(e.blendEquation(32774),w=N,S=N),l)switch(t){case D:e.blendFuncSeparate(1,771,1,771);break;case k:e.blendFunc(1,1);break;case I:e.blendFuncSeparate(0,0,769,771);break;case R:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case D:e.blendFuncSeparate(770,771,1,771);break;case k:e.blendFunc(770,1);break;case I:e.blendFunc(0,769);break;case R:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}q=null,_=null,T=null,P=null,x=t,A=l}}else b&&(_e(3042),b=!1)}function Pe(t){O!==t&&(t?e.frontFace(2304):e.frontFace(2305),O=t)}function Ae(t){t!==d?(qe(2884),t!==L&&(t===m?e.cullFace(1029):t===v?e.cullFace(1028):e.cullFace(1032))):_e(2884),L=t}function Oe(t,n,r){t?(qe(32823),ue===n&&ce===r||(e.polygonOffset(n,r),ue=n,ce=r)):_e(32823)}function Le(t){void 0===t&&(t=33984+he-1),me!==t&&(e.activeTexture(t),me=t)}return{buffers:{color:s,depth:l,stencil:u},initAttributes:function(){for(var e=0,t=h.length;e<t;e++)h[e]=0},enableAttribute:function(e){we(e,0)},enableAttributeAndDivisor:we,disableUnusedAttributes:function(){for(var t=0,n=f.length;t!==n;++t)f[t]!==h[t]&&(e.disableVertexAttribArray(t),f[t]=0)},enable:qe,disable:_e,useProgram:function(t){return y!==t&&(e.useProgram(t),y=t,!0)},setBlending:Te,setMaterial:function(e,t){e.side===E?_e(2884):qe(2884);var n=e.side===M;t&&(n=!n),Pe(n),e.blending===D&&!1===e.transparent?Te(C):Te(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),l.setFunc(e.depthFunc),l.setTest(e.depthTest),l.setMask(e.depthWrite),s.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Oe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:Pe,setCullFace:Ae,setLineWidth:function(t){t!==le&&(fe&&e.lineWidth(t),le=t)},setPolygonOffset:Oe,setScissorTest:function(e){e?qe(3089):_e(3089)},activeTexture:Le,bindTexture:function(t,n){null===me&&Le();var r=ve[me];void 0===r&&(r={type:void 0,texture:void 0},ve[me]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||xe[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=ve[me];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ge.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ge.copy(t))},viewport:function(t){!1===ye.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ye.copy(t))},reset:function(){for(var t=0;t<f.length;t++)1===f[t]&&(e.disableVertexAttribArray(t),f[t]=0);g={},me=null,ve={},y=null,x=null,O=null,L=null,s.reset(),l.reset(),u.reset()}}}function hs(e,t,n,i,o,a,s){var l,u,c,h=o.isWebGL2,f=o.maxTextures,p=o.maxCubemapSize,d=o.maxTextureSize,m=o.maxSamples,v=new WeakMap,g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");function y(e,t){return g?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function b(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?Tn.floorPowerOfTwo:Math.floor,a=o(i*e.width),s=o(i*e.height);void 0===c&&(c=y(a,s));var l=n?y(a,s):c;return l.width=a,l.height=s,l.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return Tn.isPowerOfTwo(e.width)&&Tn.isPowerOfTwo(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Pe&&e.minFilter!==De}function q(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function _(e,n){if(!1===h)return e;var r=e;return 6403===e&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===e&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===e&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?t.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function S(e){return e===Pe||e===Ae||e===Le?9728:9729}function M(t){var n=t.target;n.removeEventListener("dispose",M),function(t){var n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&v.delete(n),s.memory.textures--}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(n.__webglColorTexture),e.deleteTexture(n.__webglDepthStencilTexture),s.memory.textures-=2;o=0;for(var a=n.__webglViewFramebuffers.length;o<a;o++)e.deleteFramebuffer(n.__webglViewFramebuffers[o])}i.remove(t.texture),i.remove(t)}(n),s.memory.textures--}var T=0;function P(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=s.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void I(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function A(t,r){if(6===t.image.length){var o=i.get(t);if(t.version>0&&o.__version!==t.version){k(o,t),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&t.isCompressedTexture,l=t.image[0]&&t.image[0].isDataTexture,u=[],c=0;c<6;c++)u[c]=s||l?l?t.image[c].image:t.image[c]:b(t.image[c],!1,!0,p);var f,d=u[0],m=x(d)||h,v=a.convert(t.format),g=a.convert(t.type),y=_(v,g);if(D(34067,t,m),s){for(c=0;c<6;c++){f=u[c].mipmaps;for(var S=0;S<f.length;S++){var M=f[S];t.format!==Je&&t.format!==Ke?null!==v?n.compressedTexImage2D(34069+c,S,y,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+c,S,y,M.width,M.height,0,v,g,M.data)}}o.__maxMipLevel=f.length-1}else{f=t.mipmaps;for(c=0;c<6;c++)if(l){n.texImage2D(34069+c,0,y,u[c].width,u[c].height,0,v,g,u[c].data);for(S=0;S<f.length;S++){var E=(M=f[S]).image[c].image;n.texImage2D(34069+c,S+1,y,E.width,E.height,0,v,g,E.data)}}else{n.texImage2D(34069+c,0,y,v,g,u[c]);for(S=0;S<f.length;S++){M=f[S];n.texImage2D(34069+c,S+1,y,v,g,M.image[c])}}o.__maxMipLevel=f.length}w(t,m)&&q(34067,t,d.width,d.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function O(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}var L=(r(l={},Me,10497),r(l,Ee,33071),r(l,Te,33648),l),C=(r(u={},Pe,9728),r(u,Ae,9984),r(u,Le,9986),r(u,De,9729),r(u,ke,9985),r(u,Re,9987),u);function D(n,r,a){a?(e.texParameteri(n,10242,L[r.wrapS]),e.texParameteri(n,10243,L[r.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,L[r.wrapR]),e.texParameteri(n,10240,C[r.magFilter]),e.texParameteri(n,10241,C[r.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),r.wrapS===Ee&&r.wrapT===Ee||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,S(r.magFilter)),e.texParameteri(n,10241,S(r.minFilter)),r.minFilter!==Pe&&r.minFilter!==De&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(r.type===Ge&&null===t.get("OES_texture_float_linear"))return;if(r.type===He&&null===(h||t.get("OES_texture_half_float_linear")))return;(r.anisotropy>1||i.get(r).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy)}}function k(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M),t.__webglTexture=e.createTexture(),s.memory.textures++)}function I(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),k(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var s=function(e){return!h&&(e.wrapS!==Ee||e.wrapT!==Ee||e.minFilter!==Pe&&e.minFilter!==De)}(r)&&!1===x(r.image),l=b(r.image,s,!1,d),u=x(l)||h,c=a.convert(r.format),f=a.convert(r.type),p=_(c,f);D(o,r,u);var m,v=r.mipmaps;if(r.isDepthTexture){if(p=6402,r.type===Ge){if(!1===h)throw new Error("Float Depth Texture only supported in WebGL2.0");p=36012}else h&&(p=33189);r.format===nt&&6402===p&&r.type!==Be&&r.type!==Ve&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Be,f=a.convert(r.type)),r.format===rt&&(p=34041,r.type!==Qe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Qe,f=a.convert(r.type))),n.texImage2D(3553,0,p,l.width,l.height,0,c,f,null)}else if(r.isDataTexture)if(v.length>0&&u){for(var g=0,y=v.length;g<y;g++)m=v[g],n.texImage2D(3553,g,p,m.width,m.height,0,c,f,m.data);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,p,l.width,l.height,0,c,f,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(g=0,y=v.length;g<y;g++)m=v[g],r.format!==Je&&r.format!==Ke?null!==c?n.compressedTexImage2D(3553,g,p,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,g,p,m.width,m.height,0,c,f,m.data);t.__maxMipLevel=v.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,p,l.width,l.height,l.depth,0,c,f,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,p,l.width,l.height,l.depth,0,c,f,l.data),t.__maxMipLevel=0;else if(v.length>0&&u){for(g=0,y=v.length;g<y;g++)m=v[g],n.texImage2D(3553,g,p,c,f,m);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,p,c,f,l),t.__maxMipLevel=0;w(r,u)&&q(3553,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,r,o,s){var l=a.convert(r.texture.format),u=a.convert(r.texture.type),c=_(l,u);n.texImage2D(s,0,c,r.width,r.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=j(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=j(n);e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var o=_(a.convert(n.texture.format),a.convert(n.texture.type));if(r){i=j(n);e.renderbufferStorageMultisample(36161,i,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),P(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===nt)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==rt)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),F(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),F(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function j(e){return h&&e.isWebGLMultisampleRenderTarget?Math.min(m,e.samples):0}var z=!1,B=!1;this.allocateTextureUnit=function(){var e=T;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=A,this.setTextureCubeDynamic=O,this.setupRenderTarget=function(r){var o=i.get(r),l=i.get(r.texture);r.addEventListener("dispose",E),l.__webglTexture=e.createTexture(),s.memory.textures++;var u=!0===r.isWebGLRenderTargetCube,c=!0===r.isWebGLMultisampleRenderTarget,f=!0===r.isWebGLMultiviewRenderTarget,p=x(r)||h;if(u){o.__webglFramebuffer=[];for(var d=0;d<6;d++)o.__webglFramebuffer[d]=e.createFramebuffer()}else if(o.__webglFramebuffer=e.createFramebuffer(),c)if(h){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,o.__webglColorRenderbuffer);var m=_(a.convert(r.texture.format),a.convert(r.texture.type)),v=j(r);e.renderbufferStorageMultisample(36161,v,m,r.width,r.height),e.bindFramebuffer(36160,o.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,o.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),r.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),F(o.__webglDepthRenderbuffer,r,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(f){var g=r.width,y=r.height,b=r.numViews;e.bindFramebuffer(36160,o.__webglFramebuffer);var S=t.get("OVR_multiview2");s.memory.textures+=2;var M=e.createTexture();e.bindTexture(35866,M),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,g,y,b,0,6408,5121,null),S.framebufferTextureMultiviewOVR(36160,36064,M,0,0,b);var T=e.createTexture();e.bindTexture(35866,T),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,g,y,b,0,34041,34042,null),S.framebufferTextureMultiviewOVR(36160,33306,T,0,0,b);var P=new Array(b);for(d=0;d<b;++d)P[d]=e.createFramebuffer(),e.bindFramebuffer(36160,P[d]),e.framebufferTextureLayer(36160,36064,M,0,d);o.__webglColorTexture=M,o.__webglDepthStencilTexture=T,o.__webglViewFramebuffers=P,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(u){n.bindTexture(34067,l.__webglTexture),D(34067,r.texture,p);for(d=0;d<6;d++)R(o.__webglFramebuffer[d],r,36064,34069+d);w(r.texture,p)&&q(34067,r.texture,r.width,r.height),n.bindTexture(34067,null)}else f||(n.bindTexture(3553,l.__webglTexture),D(3553,r.texture,p),R(o.__webglFramebuffer,r,36064,3553),w(r.texture,p)&&q(3553,r.texture,r.width,r.height),n.bindTexture(3553,null));r.depthBuffer&&N(r)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(w(t,x(e)||h)){var r=e.isWebGLRenderTargetCube?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(r,o),q(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(h){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var r=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),P(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?A(e,t):O(e,t)}}function fs(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===Ne)return 5121;if(e===We)return 32819;if(e===Xe)return 32820;if(e===Ye)return 33635;if(e===je)return 5120;if(e===ze)return 5122;if(e===Be)return 5123;if(e===Ue)return 5124;if(e===Ve)return 5125;if(e===Ge)return 5126;if(e===He)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===Ze)return 6406;if(e===Ke)return 6407;if(e===Je)return 6408;if(e===$e)return 6409;if(e===et)return 6410;if(e===nt)return 6402;if(e===rt)return 34041;if(e===it)return 6403;if(e===ot||e===at||e===st||e===lt){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===ot)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===at)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===st)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===lt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===ut||e===ct||e===ht||e===ft){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===ut)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ct)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===ht)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===ft)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===pt?null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null:e===dt||e===mt||e===vt||e===gt||e===yt||e===bt||e===xt||e===wt||e===qt||e===_t||e===St||e===Mt||e===Et||e===Tt?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===Qe?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ps(e,t,n,r){zn.call(this,e,t,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function ds(e,t){var n,r,i,o,a,s,l,u=e.extensions,c=e.properties,h=0;function f(e){return e.isArrayCamera?e.cameras:(a[0]=e,a)}this.isAvailable=function(){if(void 0===l){var e=u.get("OVR_multiview2");if(l=null!==e&&!1===t.getContextAttributes().antialias){h=t.getParameter(e.MAX_VIEWS_OVR),n=new ps(0,0,2),s=new Pn,o=[],i=[],a=[];for(var r=0;r<h;r++)o[r]=new Qn,i[r]=new In}}return l},this.attachCamera=function(t){!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>h)return!1;for(var n=1,r=t.length;n<r;n++)if(t[0].viewport.z!==t[n].viewport.z||t[0].viewport.w!==t[n].viewport.w)return!1;return!0}(t)&&(r=e.getRenderTarget(),function(t){if(r?s.set(r.width,r.height):e.getDrawingBufferSize(s),t.isArrayCamera){var i=t.cameras[0].viewport;n.setSize(i.z,i.w),n.setNumViews(t.cameras.length)}else n.setSize(s.x,s.y),n.setNumViews(2)}(t),e.setRenderTarget(n))},this.detachCamera=function(i){n===e.getRenderTarget()&&(e.setRenderTarget(r),function(e){var r=n,i=r.numViews,o=c.get(r).__webglViewFramebuffers,a=r.width,l=r.height;if(e.isArrayCamera)for(var u=0;u<i;u++){var h=e.cameras[u].viewport,f=h.x,p=h.y,d=f+h.z,m=p+h.w;t.bindFramebuffer(36008,o[u]),t.blitFramebuffer(0,0,a,l,f,p,d,m,16384,9728)}else t.bindFramebuffer(36008,o[0]),t.blitFramebuffer(0,0,a,l,0,0,s.x,s.y,16384,9728)}(i))},this.updateCameraProjectionMatricesUniform=function(e,n){for(var r=f(e),i=0;i<r.length;i++)o[i].copy(r[i].projectionMatrix);n.setValue(t,"projectionMatrices",o)},this.updateCameraViewMatricesUniform=function(e,n){for(var r=f(e),i=0;i<r.length;i++)o[i].copy(r[i].matrixWorldInverse);n.setValue(t,"viewMatrices",o)},this.updateObjectMatricesUniforms=function(e,n,r){for(var a=f(n),s=0;s<a.length;s++)o[s].multiplyMatrices(a[s].matrixWorldInverse,e.matrixWorld),i[s].getNormalMatrix(o[s]);r.setValue(t,"modelViewMatrices",o),r.setValue(t,"normalMatrices",i)}}function ms(){pr.call(this),this.type="Group"}function vs(e){uo.call(this),this.cameras=e||[]}ps.prototype=Object.assign(Object.create(zn.prototype),{constructor:ps,isWebGLMultiviewRenderTarget:!0,copy:function(e){return zn.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),ms.prototype=Object.assign(Object.create(pr.prototype),{constructor:ms,isGroup:!0}),vs.prototype=Object.assign(Object.create(uo.prototype),{constructor:vs,isArrayCamera:!0});var gs,ys=new Cn,bs=new Cn;function xs(e,t,n){ys.setFromMatrixPosition(t.matrixWorld),bs.setFromMatrixPosition(n.matrixWorld);var r=ys.distanceTo(bs),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,p=a*h,d=r/(-c+h),m=d*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=a+d,g=s+d,y=f-m,b=p+(r-m),x=l*s/g*v,w=u*s/g*v;e.projectionMatrix.makePerspective(y,b,x,w,v,g)}function ws(e){var t,n,r=this,i=null,o=null,a=null,s=[],l=new Qn,u=new Qn,c=1,h="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",w,!1));var f=new Qn,p=new An,d=new Cn,m=new uo;m.viewport=new jn,m.layers.enable(1);var v=new uo;v.viewport=new jn,v.layers.enable(2);var g=new vs([m,v]);function y(){return null!==i&&!0===i.isPresenting}g.layers.enable(1),g.layers.enable(2);var b,x=new Pn;function w(){if(y()){var o=i.getEyeParameters("left");t=2*o.renderWidth*c,n=o.renderHeight*c,b=e.getPixelRatio(),e.getSize(x),e.setDrawingBufferSize(t,n,1),m.viewport.set(0,0,t/2,n),v.viewport.set(t/2,0,t/2,n),M.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&e.setDrawingBufferSize(x.width,x.height,b),M.stop(),r.dispatchEvent({type:"sessionend"})}var q=[];function _(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=t.length;n<r;n++){var i=t[n];if(i&&("Daydream Controller"===i.id||"Gear VR Controller"===i.id||"Oculus Go Controller"===i.id||"OpenVR Gamepad"===i.id||i.id.startsWith("Oculus Touch")||i.id.startsWith("HTC Vive Focus")||i.id.startsWith("Spatial Controller"))){var o=i.hand;if(0===e&&(""===o||"right"===o))return i;if(1===e&&"left"===o)return i}}}function S(e,r){null!==r&&4===r.length&&e.set(r[0]*t,r[1]*n,r[2]*t,r[3]*n)}this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new ms).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),M.setContext(e)},this.setFramebufferScaleFactor=function(e){c=e},this.setReferenceSpaceType=function(e){h=e},this.setPoseTarget=function(e){void 0!==e&&(a=e)},this.getCamera=function(e){var t="local-floor"===h?1.6:0;if(!1===y())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(o),"local-floor"===h){var n=i.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,t,0)}var r=o.pose,c=null!==a?a:e;c.matrix.copy(l),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==r.orientation&&(p.fromArray(r.orientation),c.quaternion.multiply(p)),null!==r.position&&(p.setFromRotationMatrix(l),d.fromArray(r.position),d.applyQuaternion(p),c.position.add(d)),c.updateMatrixWorld(),m.near=e.near,v.near=e.near,m.far=e.far,v.far=e.far,m.matrixWorldInverse.fromArray(o.leftViewMatrix),v.matrixWorldInverse.fromArray(o.rightViewMatrix),u.getInverse(l),"local-floor"===h&&(m.matrixWorldInverse.multiply(u),v.matrixWorldInverse.multiply(u));var b=c.parent;null!==b&&(f.getInverse(b.matrixWorld),m.matrixWorldInverse.multiply(f),v.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),m.projectionMatrix.fromArray(o.leftProjectionMatrix),v.projectionMatrix.fromArray(o.rightProjectionMatrix),xs(g,m,v);var x=i.getLayers();if(x.length){var w=x[0];S(m.viewport,w.leftBounds),S(v.viewport,w.rightBounds)}return function(){for(var e=0;e<s.length;e++){var t=s[e],n=_(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(l),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;void 0===q[e]&&(q[e]=!1),q[e]!==n.buttons[i].pressed&&(q[e]=n.buttons[i].pressed,!0===q[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),g},this.getStandingMatrix=function(){return l},this.isPresenting=y;var M=new xo;this.setAnimationLoop=function(e){M.setAnimationLoop(e),y()&&M.start()},this.submitFrame=function(){y()&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",w)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function qs(e,t){var n=this,r=null,i=null,o="local-floor",a=null,s=[],l=[];function u(){return null!==r&&null!==i}var c=new uo;c.layers.enable(1),c.viewport=new jn;var h=new uo;h.layers.enable(2),h.viewport=new jn;var f=new vs([c,h]);function p(e){for(var t=0;t<s.length;t++)l[t]===e.inputSource&&s[t].dispatchEvent({type:e.type})}function d(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),x.stop(),n.dispatchEvent({type:"sessionend"})}function m(e){i=e,x.setContext(r),x.start(),n.dispatchEvent({type:"sessionstart"})}function v(){for(var e=0;e<s.length;e++)l[e]=g(e)}function g(e){for(var t=r.inputSources,n=0;n<t.length;n++){var i=t[n],o=i.handedness;if(0===e&&("none"===o||"right"===o))return i;if(1===e&&"left"===o)return i}}function y(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new ms).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){o=e},this.getSession=function(){return r},this.setSession=function(e){null!==(r=e)&&(r.addEventListener("select",p),r.addEventListener("selectstart",p),r.addEventListener("selectend",p),r.addEventListener("end",d),r.updateRenderState({baseLayer:new XRWebGLLayer(r,t)}),r.requestReferenceSpace(o).then(m),r.addEventListener("inputsourceschange",v),v())},this.getCamera=function(e){if(u()){var t=e.parent,n=f.cameras;y(f,t);for(var r=0;r<n.length;r++)y(n[r],t);e.matrixWorld.copy(f.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return xs(f,c,h),f}return e},this.isPresenting=u;var b=null;var x=new xo;x.setAnimationLoop((function(t,n){if(null!==(a=n.getViewerPose(i))){var o=a.views,u=r.renderState.baseLayer;e.setFramebuffer(u.framebuffer);for(var c=0;c<o.length;c++){var h=o[c],p=u.getViewport(h),d=h.transform.inverse.matrix,m=f.cameras[c];m.matrix.fromArray(d).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(p.x,p.y,p.width,p.height),0===c&&f.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var v=s[c],g=l[c];if(g){var y=n.getPose(g.targetRaySpace,i);if(null!==y){v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}b&&b(t)})),this.setAnimationLoop=function(e){b=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Qn},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function _s(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=fe,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,m,v,g,y,b,x,w,q,_,S,E,T,P,A,O,L,C=this,D=!1,k=null,I=0,R=0,F=null,N=null,j=-1,z={geometry:null,program:null,wireframe:!1},B=null,U=null,V=new jn,G=new jn,H=null,W=t.width,X=t.height,Y=1,Q=new jn(0,0,W,X),Z=new jn(0,0,W,X),K=!1,J=new vo,$=new To,ee=!1,te=!1,ne=new Qn,re=new Cn;function ie(){return null===F?Y:1}try{var oe={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(t.addEventListener("webglcontextlost",ce,!1),t.addEventListener("webglcontextrestored",he,!1),null===(p=n||t.getContext("webgl",oe)||t.getContext("experimental-webgl",oe)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ae(){d=new Po(p),!1===(m=new Eo(p,d,e)).isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),L=new fs(p,d,m),(v=new cs(p,d,m)).scissor(G.copy(Z).multiplyScalar(Y).floor()),v.viewport(V.copy(Q).multiplyScalar(Y).floor()),g=new Lo(p),y=new Za,b=new hs(p,d,v,y,m,L,g),x=new wo(p),w=new Ao(p,x,g),q=new ko(p,w,x,g),P=new Do(p),_=new Qa(C,d,m),S=new es,E=new as,T=new So(C,v,q,s),A=new Mo(p,d,g,m),O=new Oo(p,d,g,m),g.programs=_.programs,C.capabilities=m,C.extensions=d,C.properties=y,C.renderLists=S,C.state=v,C.info=g}ae();var se="undefined"!=typeof navigator&&"xr"in navigator&&"isSessionSupported"in navigator.xr?new qs(C,p):new ws(C);this.vr=se;var le=new ds(C,p),ue=new us(C,q,m.maxTextureSize);function ce(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,ae()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){de(e),y.remove(e)}(t)}function de(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&_.releaseProgram(t)}this.shadowMap=ue,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(W,X,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Pn),e.set(W,X)},this.setSize=function(e,n,r){se.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,X=n,t.width=Math.floor(e*Y),t.height=Math.floor(n*Y),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Pn),e.set(W*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,n,r){W=e,X=n,Y=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new jn),e.copy(V)},this.getViewport=function(e){return e.copy(Q)},this.setViewport=function(e,t,n,r){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,r),v.viewport(V.copy(Q).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(Z)},this.setScissor=function(e,t,n,r){e.isVector4?Z.set(e.x,e.y,e.z,e.w):Z.set(e,t,n,r),v.scissor(G.copy(Z).multiplyScalar(Y).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(e){v.setScissorTest(K=e)},this.getClearColor=function(){return T.getClearColor()},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ce,!1),t.removeEventListener("webglcontextrestored",he,!1),S.dispose(),E.dispose(),y.dispose(),q.dispose(),se.dispose(),ve.stop()},this.renderBufferImmediate=function(e,t){v.initAttributes();var n=y.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var r=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),v.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),v.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),v.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),v.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;v.setMaterial(r,a);var s=we(e,t,r,i),l=!1;z.geometry===n.id&&z.program===s.id&&z.wireframe===(!0===r.wireframe)||(z.geometry=n.id,z.program=s.id,z.wireframe=!0===r.wireframe,l=!0),i.morphTargetInfluences&&(P.update(i,n,r,s),l=!0);var u,c=n.index,h=n.attributes.position,f=1;!0===r.wireframe&&(c=w.getWireframeAttribute(n),f=2);var g=A;null!==c&&(u=x.get(c),(g=O).setIndex(u)),l&&(!function(e,t,n,r){if(!1===m.isWebGL2&&(e.isInstancedMesh||t.isInstancedBufferGeometry)&&null===d.get("ANGLE_instanced_arrays"))return;v.initAttributes();var i=t.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var l=o[s];if(l>=0){var u=i[s];if(void 0!==u){var c=u.normalized,h=u.itemSize;if(void 0===(_=x.get(u)))continue;var f=_.buffer,g=_.type,y=_.bytesPerElement;if(u.isInterleavedBufferAttribute){var b=u.data,w=b.stride,q=u.offset;b&&b.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(l,b.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=b.meshPerAttribute*b.count)):v.enableAttribute(l),p.bindBuffer(34962,f),p.vertexAttribPointer(l,h,g,c,w*y,q*y)}else u.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=u.meshPerAttribute*u.count)):v.enableAttribute(l),p.bindBuffer(34962,f),p.vertexAttribPointer(l,h,g,c,0,0)}else if("instanceMatrix"===s){var _;if(void 0===(_=x.get(e.instanceMatrix)))continue;f=_.buffer,g=_.type;v.enableAttributeAndDivisor(l+0,1),v.enableAttributeAndDivisor(l+1,1),v.enableAttributeAndDivisor(l+2,1),v.enableAttributeAndDivisor(l+3,1),p.bindBuffer(34962,f),p.vertexAttribPointer(l+0,4,g,!1,64,0),p.vertexAttribPointer(l+1,4,g,!1,64,16),p.vertexAttribPointer(l+2,4,g,!1,64,32),p.vertexAttribPointer(l+3,4,g,!1,64,48)}else if(void 0!==a){var S=a[s];if(void 0!==S)switch(S.length){case 2:p.vertexAttrib2fv(l,S);break;case 3:p.vertexAttrib3fv(l,S);break;case 4:p.vertexAttrib4fv(l,S);break;default:p.vertexAttrib1fv(l,S)}}}}v.disableUnusedAttributes()}(i,n,r,s),null!==c&&p.bindBuffer(34963,u.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var b=n.drawRange.start*f,q=n.drawRange.count*f,_=null!==o?o.start*f:0,S=null!==o?o.count*f:1/0,M=Math.max(b,_),E=Math.min(y,b+q,_+S)-1,T=Math.max(0,E-M+1);if(0!==T){if(i.isMesh)if(!0===r.wireframe)v.setLineWidth(r.wireframeLinewidth*ie()),g.setMode(1);else switch(i.drawMode){case Ft:g.setMode(4);break;case Nt:g.setMode(5);break;case jt:g.setMode(6)}else if(i.isLine){var L=r.linewidth;void 0===L&&(L=1),v.setLineWidth(L*ie()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);i.isInstancedMesh?g.renderInstances(n,M,T,i.count):n.isInstancedBufferGeometry?g.renderInstances(n,M,T,n.maxInstancedCount):g.render(M,T)}},this.compile=function(e,t){(f=E.get(e,t)).init(),e.traverse((function(e){e.isLight&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)xe(t.material[n],e.fog,t);else xe(t.material,e.fog,t)}))};var me=null;var ve=new xo;function ge(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||J.intersectsSprite(e)){r&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ne);var i=q.update(e);(o=e.material).visible&&h.push(e,i,o,n,re.z,null)}}else if(e.isImmediateRenderObject)r&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ne),h.push(e,null,e.material,n,re.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==g.render.frame&&(e.skeleton.update(),e.skeleton.frame=g.render.frame),!e.frustumCulled||J.intersectsObject(e))){r&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ne);i=q.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,l=a.length;s<l;s++){var u=a[s],c=o[u.materialIndex];c&&c.visible&&h.push(e,i,c,n,re.z,u)}else o.visible&&h.push(e,i,o,n,re.z,null)}var p=e.children;for(s=0,l=p.length;s<l;s++)ge(p[s],t,n,r)}}function ye(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,l=a.geometry,u=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera)if(U=n,se.enabled&&le.isAvailable())be(s,t,n,l,u,c);else for(var h=n.cameras,p=0,d=h.length;p<d;p++){var m=h[p];s.layers.test(m.layers)&&(v.viewport(V.copy(m.viewport)),f.setupLights(m),be(s,t,m,l,u,c))}else U=null,be(s,t,n,l,u,c)}}function be(e,t,n,r,i,o){if(e.onBeforeRender(C,t,n,r,i,o),f=E.get(t,U||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){v.setMaterial(i);var a=we(n,t.fog,i,e);z.geometry=null,z.program=null,z.wireframe=!1,function(e,t){e.render((function(e){C.renderBufferImmediate(e,t)}))}(e,a)}else C.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(C,t,n,r,i,o),f=E.get(t,U||n)}function xe(e,t,n){var r=y.get(e),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=_.getParameters(e,i.state,o,t,$.numPlanes,$.numIntersection,n),l=_.getProgramCacheKey(e,s),u=r.program,c=!0;if(void 0===u)e.addEventListener("dispose",pe);else if(u.cacheKey!==l)de(e);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var h=bo[s.shaderID];r.shader={name:e.type,uniforms:io(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,C),l=_.getProgramCacheKey(e,s),u=_.acquireProgram(e,r.shader,s,l),r.program=u,e.program=u}var p=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<C.maxMorphTargets;d++)p["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<C.maxMorphNormals;d++)p["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var m=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=$.numPlanes,r.numIntersection=$.numIntersection,m.clippingPlanes=$.uniform),r.fog=t,r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=La.seqWithValue(v.seq,m);r.uniformsList=g}function we(e,t,n,r){b.resetTextureUnits();var i=y.get(n),o=f.state.lights;if(ee&&(te||e!==B)){var a=e===B&&n.id===j;$.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,a)}!1===n.needsUpdate&&(void 0===i.program||n.fog&&i.fog!==t||i.needsLights&&i.lightsStateVersion!==o.state.version?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===$.numPlanes&&i.numIntersection===$.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(xe(n,t,r),n.needsUpdate=!1);var s,l,u=!1,c=!1,h=!1,d=i.program,g=d.getUniforms(),x=i.shader.uniforms;if(v.useProgram(d.program)&&(u=!0,c=!0,h=!0),n.id!==j&&(j=n.id,c=!0),u||B!==e){if(d.numMultiviewViews>0?le.updateCameraProjectionMatricesUniform(e,g):g.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&g.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),B!==e&&(B=e,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=g.map.cameraPosition;void 0!==w&&w.setValue(p,re.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(d.numMultiviewViews>0?le.updateCameraViewMatricesUniform(e,g):g.setValue(p,"viewMatrix",e.matrixWorldInverse))}if(n.skinning){g.setOptional(p,r,"bindMatrix"),g.setOptional(p,r,"bindMatrixInverse");var q=r.skeleton;if(q){var _=q.bones;if(m.floatVertexTextures){if(void 0===q.boneTexture){var S=Math.sqrt(4*_.length);S=Tn.ceilPowerOfTwo(S),S=Math.max(S,4);var E=new Float32Array(S*S*4);E.set(q.boneMatrices);var T=new fo(E,S,S,Je,Ge);q.boneMatrices=E,q.boneTexture=T,q.boneTextureSize=S}g.setValue(p,"boneTexture",q.boneTexture,b),g.setValue(p,"boneTextureSize",q.boneTextureSize)}else g.setOptional(p,q,"boneMatrices")}}return(c||i.receiveShadow!==r.receiveShadow)&&(i.receiveShadow=r.receiveShadow,g.setValue(p,"receiveShadow",r.receiveShadow)),c&&(g.setValue(p,"toneMappingExposure",C.toneMappingExposure),g.setValue(p,"toneMappingWhitePoint",C.toneMappingWhitePoint),i.needsLights&&(l=h,(s=x).ambientLightColor.needsUpdate=l,s.lightProbe.needsUpdate=l,s.directionalLights.needsUpdate=l,s.pointLights.needsUpdate=l,s.spotLights.needsUpdate=l,s.rectAreaLights.needsUpdate=l,s.hemisphereLights.needsUpdate=l),t&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(x,t),n.isMeshBasicMaterial?qe(x,n):n.isMeshLambertMaterial?(qe(x,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(x,n)):n.isMeshPhongMaterial?(qe(x,n),n.isMeshToonMaterial?function(e,t){_e(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(x,n):_e(x,n)):n.isMeshStandardMaterial?(qe(x,n),n.isMeshPhysicalMaterial?function(e,t){Se(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===M&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(x,n):Se(x,n)):n.isMeshMatcapMaterial?(qe(x,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===M&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===M&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDepthMaterial?(qe(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDistanceMaterial?(qe(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(x,n)):n.isMeshNormalMaterial?(qe(x,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===M&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===M&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(x,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(x,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*X,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(x,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(x,n):n.isShadowMaterial&&(x.color.value.copy(n.color),x.opacity.value=n.opacity),void 0!==x.ltc_1&&(x.ltc_1.value=yo.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=yo.LTC_2),La.upload(p,i.uniformsList,x,b),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(La.upload(p,i.uniformsList,x,b),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(p,"center",r.center),d.numMultiviewViews>0?le.updateObjectMatricesUniforms(r,e,g):(g.setValue(p,"modelViewMatrix",r.modelViewMatrix),g.setValue(p,"normalMatrix",r.normalMatrix)),g.setValue(p,"modelMatrix",r.matrixWorld),d}function qe(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=y.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function _e(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===M&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===M&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Se(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===M&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===M&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}ve.setAnimationLoop((function(e){se.isPresenting()||me&&me(e)})),"undefined"!=typeof window&&ve.setContext(window),this.setAnimationLoop=function(e){me=e,se.setAnimationLoop(e),ve.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!D){z.geometry=null,z.program=null,z.wireframe=!1,j=-1,B=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),se.enabled&&(t=se.getCamera(t)),(f=E.get(e,t)).init(),e.onBeforeRender(C,e,t,n||F),ne.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),J.setFromMatrix(ne),te=this.localClippingEnabled,ee=$.init(this.clippingPlanes,te,t),(h=S.get(e,t)).init(),ge(e,t,0,C.sortObjects),!0===C.sortObjects&&h.sort(),ee&&$.beginShadows();var i=f.state.shadowsArray;ue.render(i,e,t),f.setupLights(t),ee&&$.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),se.enabled&&le.isAvailable()&&le.attachCamera(t),T.render(h,e,t,r);var o=h.opaque,a=h.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&ye(o,e,t,s),a.length&&ye(a,e,t,s)}else o.length&&ye(o,e,t),a.length&&ye(a,e,t);e.onAfterRender(C,e,t),null!==F&&(b.updateRenderTargetMipmap(F),b.updateMultisampleRenderTarget(F)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),se.enabled&&(le.isAvailable()&&le.detachCamera(t),se.submitFrame()),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){k!==e&&null===F&&p.bindFramebuffer(36160,e),k=e},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return F},this.setRenderTarget=function(e,t,n){F=e,I=t,R=n,e&&void 0===y.get(e).__webglFramebuffer&&b.setupRenderTarget(e);var r=k,i=!1;if(e){var o=y.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?y.get(e).__webglMultisampledFramebuffer:o,V.copy(e.viewport),G.copy(e.scissor),H=e.scissorTest}else V.copy(Q).multiplyScalar(Y).floor(),G.copy(Z).multiplyScalar(Y).floor(),H=K;if(N!==r&&(p.bindFramebuffer(36160,r),N=r),v.viewport(V),v.scissor(G),v.setScissorTest(H),i){var a=y.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=y.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var l=!1;s!==N&&(p.bindFramebuffer(36160,s),l=!0);try{var u=e.texture,c=u.format,h=u.type;if(c!==Je&&L.convert(c)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Ne||L.convert(h)===p.getParameter(35738)||h===Ge&&(m.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||h===He&&(m.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&p.readPixels(t,n,r,i,L.convert(c),L.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&p.bindFramebuffer(36160,N)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=L.convert(t.format);b.setTexture2D(t,0),p.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),v.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=L.convert(n.format),s=L.convert(n.type);b.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):p.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image),v.unbindTexture()},this.initTexture=function(e){b.setTexture2D(e,0),v.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ss(e,t){this.name="",this.color=new ri(e),this.density=void 0!==t?t:25e-5}function Ms(e,t,n){this.name="",this.color=new ri(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Es(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=mn,this.updateRange={offset:0,count:-1},this.version=0}function Ts(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ps(e){ui.call(this),this.type="SpriteMaterial",this.color=new ri(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.assign(ws.prototype,Sn.prototype),Object.assign(qs.prototype,Sn.prototype),Object.assign(Ss.prototype,{isFogExp2:!0,clone:function(){return new Ss(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ms.prototype,{isFog:!0,clone:function(){return new Ms(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Es.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Es.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Ts.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ts.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Ps.prototype=Object.create(ui.prototype),Ps.prototype.constructor=Ps,Ps.prototype.isSpriteMaterial=!0,Ps.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var As=new Cn,Os=new Cn,Ls=new Cn,Cs=new Pn,Ds=new Pn,ks=new Qn,Is=new Cn,Rs=new Cn,Fs=new Cn,Ns=new Pn,js=new Pn,zs=new Pn;function Bs(e){if(pr.call(this),this.type="Sprite",void 0===gs){gs=new Oi;var t=new Es(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);gs.setIndex([0,1,2,0,2,3]),gs.setAttribute("position",new Ts(t,3,0,!1)),gs.setAttribute("uv",new Ts(t,2,3,!1))}this.geometry=gs,this.material=void 0!==e?e:new Ps,this.center=new Pn(.5,.5)}function Us(e,t,n,r,i,o){Cs.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Ds.x=o*Cs.x-i*Cs.y,Ds.y=i*Cs.x+o*Cs.y):Ds.copy(Cs),e.copy(t),e.x+=Ds.x,e.y+=Ds.y,e.applyMatrix4(ks)}Bs.prototype=Object.assign(Object.create(pr.prototype),{constructor:Bs,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Os.setFromMatrixScale(this.matrixWorld),ks.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ls.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Os.multiplyScalar(-Ls.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Us(Is.set(-.5,-.5,0),Ls,o,Os,n,r),Us(Rs.set(.5,-.5,0),Ls,o,Os,n,r),Us(Fs.set(.5,.5,0),Ls,o,Os,n,r),Ns.set(0,0),js.set(1,0),zs.set(1,1);var a=e.ray.intersectTriangle(Is,Rs,Fs,!1,As);if(null!==a||(Us(Rs.set(-.5,.5,0),Ls,o,Os,n,r),js.set(0,1),null!==(a=e.ray.intersectTriangle(Is,Fs,Rs,!1,As)))){var s=e.ray.origin.distanceTo(As);s<e.near||s>e.far||t.push({distance:s,point:As.clone(),uv:$r.getUV(As,Is,Rs,Fs,Ns,js,zs,new Pn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return pr.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var Vs=new Cn,Gs=new Cn;function Hs(){pr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ws(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Yi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qn,this.bindMatrixInverse=new Qn}Hs.prototype=Object.assign(Object.create(pr.prototype),{constructor:Hs,isLOD:!0,copy:function(e){pr.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(e,t){Vs.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Vs);this.getObjectForDistance(n).raycast(e,t)},update:function(e){var t=this.levels;if(t.length>1){Vs.setFromMatrixPosition(e.matrixWorld),Gs.setFromMatrixPosition(this.matrixWorld);var n=Vs.distanceTo(Gs);t[0].object.visible=!0;for(var r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Ws.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Ws,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new jn,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Yi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Xs=new Qn,Ys=new Qn;function Qs(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Qn)}}function Zs(){pr.call(this),this.type="Bone"}function Ks(e,t,n){Yi.call(this,e,t),this.instanceMatrix=new hi(new Float32Array(16*n),16),this.count=n}function Js(e){ui.call(this),this.type="LineBasicMaterial",this.color=new ri(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}Object.assign(Qs.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Qn;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:Ys;Xs.multiplyMatrices(a,t[i]),Xs.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new Qs(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Zs.prototype=Object.assign(Object.create(pr.prototype),{constructor:Zs,isBone:!0}),Ks.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Ks,isInstancedMesh:!0,raycast:function(){},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),Js.prototype=Object.create(ui.prototype),Js.prototype.constructor=Js,Js.prototype.isLineBasicMaterial=!0,Js.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var $s=new Cn,el=new Cn,tl=new Qn,nl=new Nr,rl=new Or;function il(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),pr.call(this),this.type="Line",this.geometry=void 0!==e?e:new Oi,this.material=void 0!==t?t:new Js({color:16777215*Math.random()})}il.prototype=Object.assign(Object.create(pr.prototype),{constructor:il,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)$s.fromBufferAttribute(t,r-1),el.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=$s.distanceTo(el);e.setAttribute("lineDistance",new bi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;(n=e.lineDistances)[0]=0;for(r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(e,t){var n=e.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),rl.copy(r.boundingSphere),rl.applyMatrix4(i),rl.radius+=n,!1!==e.ray.intersectsSphere(rl)){tl.getInverse(i),nl.copy(e.ray).applyMatrix4(tl);var o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Cn,l=new Cn,u=new Cn,c=new Cn,h=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var f=r.index,p=r.attributes.position.array;if(null!==f)for(var d=f.array,m=0,v=d.length-1;m<v;m+=h){var g=d[m],y=d[m+1];if(s.fromArray(p,3*g),l.fromArray(p,3*y),!(nl.distanceSqToSegment(s,l,c,u)>a))c.applyMatrix4(this.matrixWorld),(w=e.ray.origin.distanceTo(c))<e.near||w>e.far||t.push({distance:w,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,v=p.length/3-1;m<v;m+=h){if(s.fromArray(p,3*m),l.fromArray(p,3*m+3),!(nl.distanceSqToSegment(s,l,c,u)>a))c.applyMatrix4(this.matrixWorld),(w=e.ray.origin.distanceTo(c))<e.near||w>e.far||t.push({distance:w,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(r.isGeometry){var b=r.vertices,x=b.length;for(m=0;m<x-1;m+=h){var w;if(!(nl.distanceSqToSegment(b[m],b[m+1],c,u)>a))c.applyMatrix4(this.matrixWorld),(w=e.ray.origin.distanceTo(c))<e.near||w>e.far||t.push({distance:w,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ol=new Cn,al=new Cn;function sl(e,t){il.call(this,e,t),this.type="LineSegments"}function ll(e,t){il.call(this,e,t),this.type="LineLoop"}function ul(e){ui.call(this),this.type="PointsMaterial",this.color=new ri(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}sl.prototype=Object.assign(Object.create(il.prototype),{constructor:sl,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)ol.fromBufferAttribute(t,r),al.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+ol.distanceTo(al);e.setAttribute("lineDistance",new bi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(n=e.lineDistances,r=0,i=o.length;r<i;r+=2)ol.copy(o[r]),al.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+ol.distanceTo(al)}return this}}),ll.prototype=Object.assign(Object.create(il.prototype),{constructor:ll,isLineLoop:!0}),ul.prototype=Object.create(ui.prototype),ul.prototype.constructor=ul,ul.prototype.isPointsMaterial=!0,ul.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var cl=new Qn,hl=new Nr,fl=new Or,pl=new Cn;function dl(e,t){pr.call(this),this.type="Points",this.geometry=void 0!==e?e:new Oi,this.material=void 0!==t?t:new ul({color:16777215*Math.random()}),this.updateMorphTargets()}function ml(e,t,n,r,i,o,a){var s=hl.distanceSqToPoint(e);if(s<n){var l=new Cn;hl.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:a})}}function vl(e,t,n,r,i,o,a,s,l){Nn.call(this,e,t,n,r,i,o,a,s,l),this.format=void 0!==a?a:Ke,this.minFilter=void 0!==o?o:De,this.magFilter=void 0!==i?i:De,this.generateMipmaps=!1}function gl(e,t,n,r,i,o,a,s,l,u,c,h){Nn.call(this,null,o,a,s,l,u,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function yl(e,t,n,r,i,o,a,s,l){Nn.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function bl(e,t,n,r,i,o,a,s,l,u){if((u=void 0!==u?u:nt)!==nt&&u!==rt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===nt&&(n=Be),void 0===n&&u===rt&&(n=Qe),Nn.call(this,null,r,i,o,a,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Pe,this.minFilter=void 0!==s?s:Pe,this.flipY=!1,this.generateMipmaps=!1}function xl(e){Oi.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,l,u,c,h=[],f=[0,0],p={},d=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[d[n]],l=v[d[(n+1)%3]],f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===p[u=f[0]+","+f[1]]&&(p[u]={index1:f[0],index2:f[1]})}for(u in p)a=p[u],c=e.vertices[a.index1],h.push(c.x,c.y,c.z),c=e.vertices[a.index2],h.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,y,b,x,w,q,_;if(c=new Cn,null!==e.index){for(g=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=w=(x=b[i]).start,r=w+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===p[u=f[0]+","+f[1]]&&(p[u]={index1:f[0],index2:f[1]});for(u in p)a=p[u],c.fromBufferAttribute(g,a.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)q=3*t+n,c.fromBufferAttribute(g,q),h.push(c.x,c.y,c.z),_=3*t+(n+1)%3,c.fromBufferAttribute(g,_),h.push(c.x,c.y,c.z)}this.setAttribute("position",new bi(h,3))}function wl(e,t,n){to.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new ql(e,t,n)),this.mergeVertices()}function ql(e,t,n){Oi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],l=[],u=1e-5,c=new Cn,h=new Cn,f=new Cn,p=new Cn,d=new Cn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),g-u>=0?(e(g-u,v,f),p.subVectors(h,f)):(e(g+u,v,f),p.subVectors(f,h)),v-u>=0?(e(g,v-u,f),d.subVectors(h,f)):(e(g,v+u,f),d.subVectors(f,h)),c.crossVectors(p,d).normalize(),s.push(c.x,c.y,c.z),l.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,x=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,x,w)}this.setIndex(o),this.setAttribute("position",new bi(a,3)),this.setAttribute("normal",new bi(s,3)),this.setAttribute("uv",new bi(l,2))}function _l(e,t,n,r){to.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Sl(e,t,n,r)),this.mergeVertices()}function Sl(e,t,n,r){Oi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),l=[];for(i=0;i<=a;i++){l[i]=[];var u=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)l[i][o]=0===o&&i===a?u:u.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2==0?(s(l[i][f+1]),s(l[i+1][f]),s(l[i][f])):(s(l[i][f+1]),s(l[i+1][f+1]),s(l[i+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Cn,r=new Cn,i=new Cn,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Cn,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Cn,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new Cn,t=new Cn,n=new Cn,r=new Cn,a=new Pn,s=new Pn,l=new Pn,h=0,f=0;h<i.length;h+=9,f+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),l.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=c(r);u(a,f+0,e,p),u(s,f+2,t,p),u(l,f+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new bi(i,3)),this.setAttribute("normal",new bi(i.slice(),3)),this.setAttribute("uv",new bi(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Ml(e,t){to.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new El(e,t)),this.mergeVertices()}function El(e,t){Sl.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Tl(e,t){to.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Pl(e,t)),this.mergeVertices()}function Pl(e,t){Sl.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Al(e,t){to.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ol(e,t)),this.mergeVertices()}function Ol(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Sl.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ll(e,t){to.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Cl(e,t)),this.mergeVertices()}function Cl(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Sl.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Dl(e,t,n,r,i,o){to.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new kl(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function kl(e,t,n,r,i){Oi.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Cn,u=new Cn,c=new Pn,h=new Cn,f=[],p=[],d=[],m=[];function v(i){h=e.getPointAt(i/t,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var d=s/r*Math.PI*2,m=Math.sin(d),v=-Math.cos(d);u.x=v*a.x+m*c.x,u.y=v*a.y+m*c.y,u.z=v*a.z+m*c.z,u.normalize(),p.push(u.x,u.y,u.z),l.x=h.x+n*u.x,l.y=h.y+n*u.y,l.z=h.z+n*u.z,f.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)c.x=a/t,c.y=s/r,d.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.setAttribute("position",new bi(f,3)),this.setAttribute("normal",new bi(p,3)),this.setAttribute("uv",new bi(d,2))}function Il(e,t,n,r,i,o,a){to.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Rl(e,t,n,r,i,o)),this.mergeVertices()}function Rl(e,t,n,r,i,o){Oi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,l=[],u=[],c=[],h=[],f=new Cn,p=new Cn,d=new Cn,m=new Cn,v=new Cn,g=new Cn,y=new Cn;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(T(b,i,o,e,d),T(b+.01,i,o,e,m),g.subVectors(m,d),y.addVectors(m,d),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,w=-t*Math.cos(x),q=t*Math.sin(x);f.x=d.x+(w*y.x+q*v.x),f.y=d.y+(w*y.y+q*v.y),f.z=d.z+(w*y.z+q*v.z),u.push(f.x,f.y,f.z),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var _=(r+1)*(s-1)+(a-1),S=(r+1)*s+(a-1),M=(r+1)*s+a,E=(r+1)*(s-1)+a;l.push(_,S,E),l.push(S,M,E)}function T(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(l),this.setAttribute("position",new bi(u,3)),this.setAttribute("normal",new bi(c,3)),this.setAttribute("uv",new bi(h,2))}function Fl(e,t,n,r,i){to.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Nl(e,t,n,r,i)),this.mergeVertices()}function Nl(e,t,n,r,i){Oi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],l=[],u=[],c=[],h=new Cn,f=new Cn,p=new Cn;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var d=a/r*i,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(d),f.y=(e+t*Math.cos(m))*Math.sin(d),f.z=t*Math.sin(m),l.push(f.x,f.y,f.z),h.x=e*Math.cos(d),h.y=e*Math.sin(d),p.subVectors(f,h).normalize(),u.push(p.x,p.y,p.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.setAttribute("position",new bi(l,3)),this.setAttribute("normal",new bi(u,3)),this.setAttribute("uv",new bi(c,2))}dl.prototype=Object.assign(Object.create(pr.prototype),{constructor:dl,isPoints:!0,raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),fl.copy(n.boundingSphere),fl.applyMatrix4(r),fl.radius+=i,!1!==e.ray.intersectsSphere(fl)){cl.getInverse(r),hl.copy(e.ray).applyMatrix4(cl);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var u=s.array,c=0,h=u.length;c<h;c++){var f=u[c];pl.fromArray(l,3*f),ml(pl,f,a,r,e,t,this)}else{c=0;for(var p=l.length/3;c<p;c++)pl.fromArray(l,3*c),ml(pl,c,a,r,e,t,this)}}else{var d=n.vertices;for(c=0,p=d.length;c<p;c++)ml(d[c],c,a,r,e,t,this)}}},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vl.prototype=Object.assign(Object.create(Nn.prototype),{constructor:vl,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),gl.prototype=Object.create(Nn.prototype),gl.prototype.constructor=gl,gl.prototype.isCompressedTexture=!0,yl.prototype=Object.create(Nn.prototype),yl.prototype.constructor=yl,yl.prototype.isCanvasTexture=!0,bl.prototype=Object.create(Nn.prototype),bl.prototype.constructor=bl,bl.prototype.isDepthTexture=!0,xl.prototype=Object.create(Oi.prototype),xl.prototype.constructor=xl,wl.prototype=Object.create(to.prototype),wl.prototype.constructor=wl,ql.prototype=Object.create(Oi.prototype),ql.prototype.constructor=ql,_l.prototype=Object.create(to.prototype),_l.prototype.constructor=_l,Sl.prototype=Object.create(Oi.prototype),Sl.prototype.constructor=Sl,Ml.prototype=Object.create(to.prototype),Ml.prototype.constructor=Ml,El.prototype=Object.create(Sl.prototype),El.prototype.constructor=El,Tl.prototype=Object.create(to.prototype),Tl.prototype.constructor=Tl,Pl.prototype=Object.create(Sl.prototype),Pl.prototype.constructor=Pl,Al.prototype=Object.create(to.prototype),Al.prototype.constructor=Al,Ol.prototype=Object.create(Sl.prototype),Ol.prototype.constructor=Ol,Ll.prototype=Object.create(to.prototype),Ll.prototype.constructor=Ll,Cl.prototype=Object.create(Sl.prototype),Cl.prototype.constructor=Cl,Dl.prototype=Object.create(to.prototype),Dl.prototype.constructor=Dl,kl.prototype=Object.create(Oi.prototype),kl.prototype.constructor=kl,kl.prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Il.prototype=Object.create(to.prototype),Il.prototype.constructor=Il,Rl.prototype=Object.create(Oi.prototype),Rl.prototype.constructor=Rl,Fl.prototype=Object.create(to.prototype),Fl.prototype.constructor=Fl,Nl.prototype=Object.create(Oi.prototype),Nl.prototype.constructor=Nl;var jl=function(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,f=zl(e,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(e,t,n,r){var i,o,a,s,l,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(l=zl(e,a,s,r,!1))===l.next&&(l.steiner=!0),u.push(Zl(l));for(u.sort(Xl),i=0;i<u.length;i++)Yl(u[i],n),n=Bl(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<h;d+=n)(s=e[d])<r&&(r=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return Ul(f,p,n,r,i,u),p};function zl(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=iu(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=iu(o,e[o],e[o+1],a);return a&&eu(a,a.next)&&(ou(a),a=a.next),a}function Bl(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!eu(r,r.next)&&0!==$l(r.prev,r,r.next))r=r.next;else{if(ou(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Ul(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Ql(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Gl(e,r,i,o):Vl(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),ou(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?Ul(e=Hl(e,t,n),t,n,r,i,o,2):2===a&&Wl(e,t,n,r,i,o):Ul(Bl(e),t,n,r,i,o,1);break}}}function Vl(e){var t=e.prev,n=e,r=e.next;if($l(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Kl(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&$l(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Gl(e,t,n,r){var i=e.prev,o=e,a=e.next;if($l(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Ql(s,l,t,n,r),f=Ql(u,c,t,n,r),p=e.prevZ,d=e.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==e.prev&&p!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&$l(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&$l(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&$l(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&$l(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Hl(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!eu(i,o)&&tu(i,r,r.next,o)&&nu(i,o)&&nu(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),ou(r),ou(r.next),r=e=o),r=r.next}while(r!==e);return r}function Wl(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Jl(a,s)){var l=ru(a,s);return a=Bl(a,a.next),l=Bl(l,l.next),Ul(a,t,n,r,i,o),void Ul(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Xl(e,t){return e.x-t.x}function Yl(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;r=n.next;for(;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&Kl(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&nu(r,e)&&(n=r,f=l),r=r.next;return n}(e,t)){var n=ru(t,e);Bl(n,n.next)}}function Ql(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Zl(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Kl(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Jl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&tu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&nu(e,t)&&nu(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function $l(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function eu(e,t){return e.x===t.x&&e.y===t.y}function tu(e,t,n,r){return!!(eu(e,n)&&eu(t,r)||eu(e,r)&&eu(n,t))||$l(e,t,n)>0!=$l(e,t,r)>0&&$l(n,r,e)>0!=$l(n,r,t)>0}function nu(e,t){return $l(e.prev,e,e.next)<0?$l(e,t,e.next)>=0&&$l(e,e.prev,t)>=0:$l(e,t,e.prev)<0||$l(e,e.next,t)<0}function ru(e,t){var n=new au(e.i,e.x,e.y),r=new au(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function iu(e,t,n,r){var i=new au(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ou(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function au(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var su={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return su.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];lu(e),uu(n,e);var o=e.length;t.forEach(lu);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,uu(n,t[a]);var s=jl(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function lu(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function uu(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function cu(e,t){to.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new hu(e,t)),this.mergeVertices()}function hu(e,t){Oi.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,f=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:fu;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var v,g,y,b,x,w,q,_,S=!1;d&&(v=d.getSpacedPoints(s),S=!0,u=!1,g=d.computeFrenetFrames(s,!1),y=new Cn,b=new Cn,x=new Cn),u||(p=0,c=0,h=0,f=0);var M=e.extractPoints(a),E=M.shape,T=M.holes;if(!su.isClockWise(E))for(E=E.reverse(),q=0,_=T.length;q<_;q++)w=T[q],su.isClockWise(w)&&(T[q]=w.reverse());var P=su.triangulateShape(E,T),A=E;for(q=0,_=T.length;q<_;q++)w=T[q],E=E.concat(w);function O(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,C,D,k,I,R,F=E.length,N=P.length;function j(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+s*s,h=a*u-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),p=Math.sqrt(l*l+u*u),d=t.x-s/f,m=t.y+a/f,v=((n.x-u/p-d)*u-(n.y+l/p-m)*l)/(a*u-s*l),g=(r=d+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new Pn(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Pn(r/o,i/o)}for(var z=[],B=0,U=A.length,V=U-1,G=B+1;B<U;B++,V++,G++)V===U&&(V=0),G===U&&(G=0),z[B]=j(A[B],A[V],A[G]);var H,W,X=[],Y=z.concat();for(q=0,_=T.length;q<_;q++){for(w=T[q],H=[],B=0,V=(U=w.length)-1,G=B+1;B<U;B++,V++,G++)V===U&&(V=0),G===U&&(G=0),H[B]=j(w[B],w[V],w[G]);X.push(H),Y=Y.concat(H)}for(L=0;L<p;L++){for(D=L/p,k=c*Math.cos(D*Math.PI/2),C=h*Math.sin(D*Math.PI/2)+f,B=0,U=A.length;B<U;B++)Z((I=O(A[B],z[B],C)).x,I.y,-k);for(q=0,_=T.length;q<_;q++)for(w=T[q],H=X[q],B=0,U=w.length;B<U;B++)Z((I=O(w[B],H[B],C)).x,I.y,-k)}for(C=h+f,B=0;B<F;B++)I=u?O(E[B],Y[B],C):E[B],S?(b.copy(g.normals[0]).multiplyScalar(I.x),y.copy(g.binormals[0]).multiplyScalar(I.y),x.copy(v[0]).add(b).add(y),Z(x.x,x.y,x.z)):Z(I.x,I.y,0);for(W=1;W<=s;W++)for(B=0;B<F;B++)I=u?O(E[B],Y[B],C):E[B],S?(b.copy(g.normals[W]).multiplyScalar(I.x),y.copy(g.binormals[W]).multiplyScalar(I.y),x.copy(v[W]).add(b).add(y),Z(x.x,x.y,x.z)):Z(I.x,I.y,l/s*W);for(L=p-1;L>=0;L--){for(D=L/p,k=c*Math.cos(D*Math.PI/2),C=h*Math.sin(D*Math.PI/2)+f,B=0,U=A.length;B<U;B++)Z((I=O(A[B],z[B],C)).x,I.y,l+k);for(q=0,_=T.length;q<_;q++)for(w=T[q],H=X[q],B=0,U=w.length;B<U;B++)I=O(w[B],H[B],C),S?Z(I.x,I.y+v[s-1].y,v[s-1].x+k):Z(I.x,I.y,l+k)}function Q(e,t){var n,r;for(B=e.length;--B>=0;){n=B,(r=B-1)<0&&(r=e.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=F*i,l=F*(i+1);J(t+n+a,t+r+a,t+r+l,t+n+l)}}}function Z(e,t,n){o.push(e),o.push(t),o.push(n)}function K(e,t,i){$(e),$(t),$(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[2])}function J(e,t,i,o){$(e),$(t),$(o),$(t),$(i),$(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function $(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function ee(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(u){var t=0,i=F*t;for(B=0;B<N;B++)K((R=P[B])[2]+i,R[1]+i,R[0]+i);for(i=F*(t=s+2*p),B=0;B<N;B++)K((R=P[B])[0]+i,R[1]+i,R[2]+i)}else{for(B=0;B<N;B++)K((R=P[B])[2],R[1],R[0]);for(B=0;B<N;B++)K((R=P[B])[0]+F*s,R[1]+F*s,R[2]+F*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Q(A,t),t+=A.length,q=0,_=T.length;q<_;q++)Q(w=T[q],t),t+=w.length;n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new bi(r,3)),this.setAttribute("uv",new bi(i,2)),this.computeVertexNormals()}cu.prototype=Object.create(to.prototype),cu.prototype.constructor=cu,cu.prototype.toJSON=function(){var e=to.prototype.toJSON.call(this);return pu(this.parameters.shapes,this.parameters.options,e)},hu.prototype=Object.create(Oi.prototype),hu.prototype.constructor=hu,hu.prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);return pu(this.parameters.shapes,this.parameters.options,e)};var fu={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new Pn(o,a),new Pn(s,l),new Pn(u,c)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],p=t[3*i+1],d=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<.01?[new Pn(a,1-l),new Pn(u,1-h),new Pn(f,1-d),new Pn(m,1-g)]:[new Pn(s,1-l),new Pn(c,1-h),new Pn(p,1-d),new Pn(v,1-g)]}};function pu(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function du(e,t){to.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new mu(e,t)),this.mergeVertices()}function mu(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new to;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),hu.call(this,r,t),this.type="TextBufferGeometry"}function vu(e,t,n,r,i,o,a){to.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new gu(e,t,n,r,i,o,a)),this.mergeVertices()}function gu(e,t,n,r,i,o,a){Oi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,u=Math.min(o+a,Math.PI),c=0,h=[],f=new Cn,p=new Cn,d=[],m=[],v=[],g=[];for(l=0;l<=n;l++){var y=[],b=l/n,x=0;for(0==l&&0==o?x=.5/t:l==n&&u==Math.PI&&(x=-.5/t),s=0;s<=t;s++){var w=s/t;f.x=-e*Math.cos(r+w*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+w*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),p.copy(f).normalize(),v.push(p.x,p.y,p.z),g.push(w+x,1-b),y.push(c++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<t;s++){var q=h[l][s+1],_=h[l][s],S=h[l+1][s],M=h[l+1][s+1];(0!==l||o>0)&&d.push(q,_,M),(l!==n-1||u<Math.PI)&&d.push(_,S,M)}this.setIndex(d),this.setAttribute("position",new bi(m,3)),this.setAttribute("normal",new bi(v,3)),this.setAttribute("uv",new bi(g,2))}function yu(e,t,n,r,i,o){to.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new bu(e,t,n,r,i,o)),this.mergeVertices()}function bu(e,t,n,r,i,o){Oi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l,u=[],c=[],h=[],f=[],p=e,d=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Cn,v=new Pn;for(s=0;s<=r;s++){for(l=0;l<=n;l++)a=i+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y);p+=d}for(s=0;s<r;s++){var g=s*(n+1);for(l=0;l<n;l++){var y=a=l+g,b=a+n+1,x=a+n+2,w=a+1;u.push(y,b,w),u.push(b,x,w)}}this.setIndex(u),this.setAttribute("position",new bi(c,3)),this.setAttribute("normal",new bi(h,3)),this.setAttribute("uv",new bi(f,2))}function xu(e,t,n,r){to.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new wu(e,t,n,r)),this.mergeVertices()}function wu(e,t,n,r){Oi.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Tn.clamp(r,0,2*Math.PI);var i,o,a,s=[],l=[],u=[],c=1/t,h=new Cn,f=new Pn;for(o=0;o<=t;o++){var p=n+o*c*r,d=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)h.x=e[a].x*d,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),f.x=o/t,f.y=a/(e.length-1),u.push(f.x,f.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=i=a+o*e.length,g=i+e.length,y=i+e.length+1,b=i+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.setAttribute("position",new bi(l,3)),this.setAttribute("uv",new bi(u,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,w=new Cn,q=new Cn,_=new Cn;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)w.x=x[a+0],w.y=x[a+1],w.z=x[a+2],q.x=x[i+a+0],q.y=x[i+a+1],q.z=x[i+a+2],_.addVectors(w,q).normalize(),x[a+0]=x[i+a+0]=_.x,x[a+1]=x[i+a+1]=_.y,x[a+2]=x[i+a+2]=_.z}}function qu(e,t){to.call(this),this.type="ShapeGeometry","object"===i(t)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new _u(e,t)),this.mergeVertices()}function _u(e,t){Oi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(a,s,l),a+=s,s=0;function u(e){var a,l,u,c=r.length/3,h=e.extractPoints(t),f=h.shape,p=h.holes;for(!1===su.isClockWise(f)&&(f=f.reverse()),a=0,l=p.length;a<l;a++)u=p[a],!0===su.isClockWise(u)&&(p[a]=u.reverse());var d=su.triangulateShape(f,p);for(a=0,l=p.length;a<l;a++)u=p[a],f=f.concat(u);for(a=0,l=f.length;a<l;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=d.length;a<l;a++){var v=d[a],g=v[0]+c,y=v[1]+c,b=v[2]+c;n.push(g,y,b),s+=3}}this.setIndex(n),this.setAttribute("position",new bi(r,3)),this.setAttribute("normal",new bi(i,3)),this.setAttribute("uv",new bi(o,2))}function Su(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Mu(e,t){Oi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Tn.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(o=new to).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,p=0,d=f.length;p<d;p++)for(var m=f[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===u[i=l[0]+","+l[1]]?u[i]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[i].face2=p;for(i in u){var g=u[i];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new bi(a,3))}function Eu(e,t,n,r,i,o,a,s){to.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Tu(e,t,n,r,i,o,a,s)),this.mergeVertices()}function Tu(e,t,n,r,i,o,a,s){Oi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],f=[],p=0,d=[],m=n/2,v=0;function g(n){var i,o,d,g=new Pn,y=new Cn,b=0,x=!0===n?e:t,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)c.push(0,m*w,0),h.push(0,w,0),f.push(.5,.5),p++;for(d=p,i=0;i<=r;i++){var q=i/r*s+a,_=Math.cos(q),S=Math.sin(q);y.x=x*S,y.y=m*w,y.z=x*_,c.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*_+.5,g.y=.5*S*w+.5,f.push(g.x,g.y),p++}for(i=0;i<r;i++){var M=o+i,E=d+i;!0===n?u.push(E,E+1,M):u.push(E+1,E,M),b+=3}l.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new Cn,b=new Cn,x=0,w=(t-e)/n;for(g=0;g<=i;g++){var q=[],_=g/i,S=_*(t-e)+e;for(o=0;o<=r;o++){var M=o/r,E=M*s+a,T=Math.sin(E),P=Math.cos(E);b.x=S*T,b.y=-_*n+m,b.z=S*P,c.push(b.x,b.y,b.z),y.set(T,w,P).normalize(),h.push(y.x,y.y,y.z),f.push(M,1-_),q.push(p++)}d.push(q)}for(o=0;o<r;o++)for(g=0;g<i;g++){var A=d[g][o],O=d[g+1][o],L=d[g+1][o+1],C=d[g][o+1];u.push(A,O,C),u.push(O,L,C),x+=6}l.addGroup(v,x,0),v+=x}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.setAttribute("position",new bi(c,3)),this.setAttribute("normal",new bi(h,3)),this.setAttribute("uv",new bi(f,2))}function Pu(e,t,n,r,i,o,a){Eu.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Au(e,t,n,r,i,o,a){Tu.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Ou(e,t,n,r){to.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Lu(e,t,n,r)),this.mergeVertices()}function Lu(e,t,n,r){Oi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],l=[],u=[],c=new Cn,h=new Pn;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,u.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new bi(s,3)),this.setAttribute("normal",new bi(l,3)),this.setAttribute("uv",new bi(u,2))}du.prototype=Object.create(to.prototype),du.prototype.constructor=du,mu.prototype=Object.create(hu.prototype),mu.prototype.constructor=mu,vu.prototype=Object.create(to.prototype),vu.prototype.constructor=vu,gu.prototype=Object.create(Oi.prototype),gu.prototype.constructor=gu,yu.prototype=Object.create(to.prototype),yu.prototype.constructor=yu,bu.prototype=Object.create(Oi.prototype),bu.prototype.constructor=bu,xu.prototype=Object.create(to.prototype),xu.prototype.constructor=xu,wu.prototype=Object.create(Oi.prototype),wu.prototype.constructor=wu,qu.prototype=Object.create(to.prototype),qu.prototype.constructor=qu,qu.prototype.toJSON=function(){var e=to.prototype.toJSON.call(this);return Su(this.parameters.shapes,e)},_u.prototype=Object.create(Oi.prototype),_u.prototype.constructor=_u,_u.prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);return Su(this.parameters.shapes,e)},Mu.prototype=Object.create(Oi.prototype),Mu.prototype.constructor=Mu,Eu.prototype=Object.create(to.prototype),Eu.prototype.constructor=Eu,Tu.prototype=Object.create(Oi.prototype),Tu.prototype.constructor=Tu,Pu.prototype=Object.create(Eu.prototype),Pu.prototype.constructor=Pu,Au.prototype=Object.create(Tu.prototype),Au.prototype.constructor=Au,Ou.prototype=Object.create(to.prototype),Ou.prototype.constructor=Ou,Lu.prototype=Object.create(Oi.prototype),Lu.prototype.constructor=Lu;var Cu=Object.freeze({__proto__:null,WireframeGeometry:xl,ParametricGeometry:wl,ParametricBufferGeometry:ql,TetrahedronGeometry:Ml,TetrahedronBufferGeometry:El,OctahedronGeometry:Tl,OctahedronBufferGeometry:Pl,IcosahedronGeometry:Al,IcosahedronBufferGeometry:Ol,DodecahedronGeometry:Ll,DodecahedronBufferGeometry:Cl,PolyhedronGeometry:_l,PolyhedronBufferGeometry:Sl,TubeGeometry:Dl,TubeBufferGeometry:kl,TorusKnotGeometry:Il,TorusKnotBufferGeometry:Rl,TorusGeometry:Fl,TorusBufferGeometry:Nl,TextGeometry:du,TextBufferGeometry:mu,SphereGeometry:vu,SphereBufferGeometry:gu,RingGeometry:yu,RingBufferGeometry:bu,PlaneGeometry:qo,PlaneBufferGeometry:_o,LatheGeometry:xu,LatheBufferGeometry:wu,ShapeGeometry:qu,ShapeBufferGeometry:_u,ExtrudeGeometry:cu,ExtrudeBufferGeometry:hu,EdgesGeometry:Mu,ConeGeometry:Pu,ConeBufferGeometry:Au,CylinderGeometry:Eu,CylinderBufferGeometry:Tu,CircleGeometry:Ou,CircleBufferGeometry:Lu,BoxGeometry:no,BoxBufferGeometry:ro});function Du(e){ui.call(this),this.type="ShadowMaterial",this.color=new ri(0),this.transparent=!0,this.setValues(e)}function ku(e){so.call(this,e),this.type="RawShaderMaterial"}function Iu(e){ui.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ri(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ri(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zt,this.normalScale=new Pn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ru(e){Iu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new Pn(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function Fu(e){ui.call(this),this.type="MeshPhongMaterial",this.color=new ri(16777215),this.specular=new ri(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ri(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zt,this.normalScale=new Pn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Nu(e){Fu.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ju(e){ui.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zt,this.normalScale=new Pn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function zu(e){ui.call(this),this.type="MeshLambertMaterial",this.color=new ri(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ri(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Bu(e){ui.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ri(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zt,this.normalScale=new Pn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Uu(e){Js.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Du.prototype=Object.create(ui.prototype),Du.prototype.constructor=Du,Du.prototype.isShadowMaterial=!0,Du.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this},ku.prototype=Object.create(so.prototype),ku.prototype.constructor=ku,ku.prototype.isRawShaderMaterial=!0,Iu.prototype=Object.create(ui.prototype),Iu.prototype.constructor=Iu,Iu.prototype.isMeshStandardMaterial=!0,Iu.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ru.prototype=Object.create(Iu.prototype),Ru.prototype.constructor=Ru,Ru.prototype.isMeshPhysicalMaterial=!0,Ru.prototype.copy=function(e){return Iu.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new ri).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},Fu.prototype=Object.create(ui.prototype),Fu.prototype.constructor=Fu,Fu.prototype.isMeshPhongMaterial=!0,Fu.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Nu.prototype=Object.create(Fu.prototype),Nu.prototype.constructor=Nu,Nu.prototype.isMeshToonMaterial=!0,Nu.prototype.copy=function(e){return Fu.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ju.prototype=Object.create(ui.prototype),ju.prototype.constructor=ju,ju.prototype.isMeshNormalMaterial=!0,ju.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},zu.prototype=Object.create(ui.prototype),zu.prototype.constructor=zu,zu.prototype.isMeshLambertMaterial=!0,zu.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Bu.prototype=Object.create(ui.prototype),Bu.prototype.constructor=Bu,Bu.prototype.isMeshMatcapMaterial=!0,Bu.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Uu.prototype=Object.create(Js.prototype),Uu.prototype.constructor=Uu,Uu.prototype.isLineDashedMaterial=!0,Uu.prototype.copy=function(e){return Js.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Vu=Object.freeze({__proto__:null,ShadowMaterial:Du,SpriteMaterial:Ps,RawShaderMaterial:ku,ShaderMaterial:so,PointsMaterial:ul,MeshPhysicalMaterial:Ru,MeshStandardMaterial:Iu,MeshPhongMaterial:Fu,MeshToonMaterial:Nu,MeshNormalMaterial:ju,MeshLambertMaterial:zu,MeshDepthMaterial:ss,MeshDistanceMaterial:ls,MeshBasicMaterial:ci,MeshMatcapMaterial:Bu,LineDashedMaterial:Uu,LineBasicMaterial:Js,Material:ui}),Gu={arraySlice:function(e,t,n){return Gu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,l=0;l!==t;++l)i[a++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r,i){i=i||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var l=o.tracks[s],u=l.getValueSize(),c=[],h=[],f=0;f<l.times.length;++f){var p=l.times[f]*i;if(!(p<n||p>=r)){c.push(l.times[f]);for(var d=0;d<u;++d)h.push(l.values[f*u+d])}}0!==c.length&&(l.times=Gu.convertArray(c,l.times.constructor),l.values=Gu.convertArray(h,l.values.constructor),a.push(l))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o}};function Hu(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Wu(e,t,n,r){Hu.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Xu(e,t,n,r){Hu.call(this,e,t,n,r)}function Yu(e,t,n,r){Hu.call(this,e,t,n,r)}function Qu(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gu.convertArray(t,this.TimeBufferType),this.values=Gu.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Zu(e,t,n){Qu.call(this,e,t,n)}function Ku(e,t,n,r){Qu.call(this,e,t,n,r)}function Ju(e,t,n,r){Qu.call(this,e,t,n,r)}function $u(e,t,n,r){Hu.call(this,e,t,n,r)}function ec(e,t,n,r){Qu.call(this,e,t,n,r)}function tc(e,t,n,r){Qu.call(this,e,t,n,r)}function nc(e,t,n,r){Qu.call(this,e,t,n,r)}function rc(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Tn.generateUUID(),this.duration<0&&this.resetDuration()}function ic(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ju;case"vector":case"vector2":case"vector3":case"vector4":return nc;case"color":return Ku;case"quaternion":return ec;case"bool":case"boolean":return Zu;case"string":return tc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Gu.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Hu.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Hu.prototype,{beforeStart_:Hu.prototype.copySampleValue_,afterEnd_:Hu.prototype.copySampleValue_}),Wu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Wu,DefaultSettings_:{endingStart:kt,endingEnd:kt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case It:i=e,a=2*t-n;break;case Rt:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case It:o=e,s=2*n-t;break;case Rt:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-t)/(r-t),d=p*p,m=d*p,v=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,b=f*m-f*d,x=0;x!==a;++x)i[x]=v*o[u+x]+g*o[l+x]+y*o[s+x]+b*o[c+x];return i}}),Xu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Xu,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(n-t)/(r-t),c=1-u,h=0;h!==a;++h)i[h]=o[l+h]*c+o[s+h]*u;return i}}),Yu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Yu,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Qu,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Gu.convertArray(e.times,Array),values:Gu.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(Qu.prototype,{constructor:Qu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ct,InterpolantFactoryMethodDiscrete:function(e){return new Yu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Xu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Wu(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Lt:t=this.InterpolantFactoryMethodDiscrete;break;case Ct:t=this.InterpolantFactoryMethodLinear;break;case Dt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lt;case this.InterpolantFactoryMethodLinear:return Ct;case this.InterpolantFactoryMethodSmooth:return Dt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Gu.arraySlice(n,i,o),this.values=Gu.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&Gu.isTypedArray(r)){a=0;for(var l=r.length;a!==l;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Dt,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(r)s=!0;else for(var u=a*n,c=u-n,h=u+n,f=0;f!==n;++f){var p=t[u+f];if(p!==t[c+f]||p!==t[h+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var d=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[d+f]}++i}}if(o>0){e[i]=e[o];for(d=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[d+f];++i}return i!==e.length&&(this.times=Gu.arraySlice(e,0,i),this.values=Gu.arraySlice(t,0,i*n)),this},clone:function(){var e=Gu.arraySlice(this.times,0),t=Gu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Zu.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Zu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ku.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Ku,ValueTypeName:"color"}),Ju.prototype=Object.assign(Object.create(Qu.prototype),{constructor:Ju,ValueTypeName:"number"}),$u.prototype=Object.assign(Object.create(Hu.prototype),{constructor:$u,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(r-t),u=s+a;s!==u;s+=4)An.slerpFlat(i,0,o,s-a,o,s,l);return i}}),ec.prototype=Object.assign(Object.create(Qu.prototype),{constructor:ec,ValueTypeName:"quaternion",DefaultInterpolation:Ct,InterpolantFactoryMethodLinear:function(e){return new $u(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),tc.prototype=Object.assign(Object.create(Qu.prototype),{constructor:tc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),nc.prototype=Object.assign(Object.create(Qu.prototype),{constructor:nc,ValueTypeName:"vector"}),Object.assign(rc,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(ic(n[i]).scale(r));return new rc(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(Qu.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);var u=Gu.getKeyframeOrder(s);s=Gu.sortedArray(s,1,u),l=Gu.sortedArray(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),o.push(new Ju(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new rc(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(i);if(l&&l.length>1){var u=r[h=l[1]];u||(r[h]=u=[]),u.push(s)}}var c=[];for(var h in r)c.push(rc.CreateFromMorphTargetSequence(h,r[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];Gu.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var f=0;f<u[h].morphTargets.length;f++)c[u[h].morphTargets[f]]=-1;for(var p in c){var d=[],m=[];for(f=0;f!==u[h].morphTargets.length;++f){var v=u[h];d.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new Ju(".morphTargetInfluence["+p+"]",d,m))}o=c.length*(a||1)}else{var g=".bones["+t[l].name+"]";n(nc,g+".position",u,"pos",r),n(ec,g+".quaternion",u,"rot",r),n(nc,g+".scale",u,"scl",r)}}return 0===r.length?null:new rc(i,o,r)}}),Object.assign(rc.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new rc(this.name,this.duration,e)}});var oc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function ac(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.test(e))return i}return null}}var sc=new ac;function lc(e){this.manager=void 0!==e?e:sc,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(lc.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var uc={};function cc(e){lc.call(this,e)}function hc(e){lc.call(this,e)}function fc(e){lc.call(this,e)}function pc(e){lc.call(this,e)}function dc(e){lc.call(this,e)}function mc(e){lc.call(this,e)}function vc(e){lc.call(this,e)}function gc(){this.type="Curve",this.arcLengthDivisions=200}function yc(e,t,n,r,i,o,a,s){gc.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function bc(e,t,n,r,i,o){yc.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function xc(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,l*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}cc.prototype=Object.assign(Object.create(lc.prototype),{constructor:cc,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=oc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===uc[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],u=a[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(u.length),p=0;p<u.length;p++)f[p]=u.charCodeAt(p);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var d=new DOMParser;c=d.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){t&&t(c),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{uc[e]=[],uc[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response,r=uc[e];if(delete uc[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),oc.add(e,n);for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=uc[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=uc[e];delete uc[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=uc[e];delete uc[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}uc[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),hc.prototype=Object.assign(Object.create(lc.prototype),{constructor:hc,load:function(e,t,n,r){var i=this,o=new cc(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=rc.parse(e[n]);t.push(r)}return t}}),fc.prototype=Object.assign(Object.create(lc.prototype),{constructor:fc,load:function(e,t,n,r){var i=this,o=[],a=new gl;a.image=o;var s=new cc(this.manager);function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=De),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=De),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}),pc.prototype=Object.assign(Object.create(lc.prototype),{constructor:pc,load:function(e,t,n,r){var i=this,o=new fo,a=new cc(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ee,o.wrapT=void 0!==n.wrapT?n.wrapT:Ee,o.magFilter=void 0!==n.magFilter?n.magFilter:De,o.minFilter=void 0!==n.minFilter?n.minFilter:De,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Re),1===n.mipmapCount&&(o.minFilter=De),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),dc.prototype=Object.assign(Object.create(lc.prototype),{constructor:dc,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=oc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),oc.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),mc.prototype=Object.assign(Object.create(lc.prototype),{constructor:mc,load:function(e,t,n,r){var i=new Io,o=new dc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i}}),vc.prototype=Object.assign(Object.create(lc.prototype),{constructor:vc,load:function(e,t,n,r){var i=new Nn,o=new dc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ke:Je,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(gc.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new Cn,a=[],s=[],l=[],u=new Cn,c=new Qn;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Cn,l[0]=new Cn;var h=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(f<=h&&(h=f,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),d<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(Tn.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,i))),l[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(Tn.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(c.makeRotationAxis(a[n],i*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),yc.prototype=Object.create(gc.prototype),yc.prototype.constructor=yc,yc.prototype.isEllipseCurve=!0,yc.prototype.getPoint=function(e,t){for(var n=t||new Pn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=l-this.aY;s=h*u-f*c+this.aX,l=h*c+f*u+this.aY}return n.set(s,l)},yc.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},yc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},yc.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},bc.prototype=Object.create(yc.prototype),bc.prototype.constructor=bc,bc.prototype.isArcCurve=!0;var wc=new Cn,qc=new xc,_c=new xc,Sc=new xc;function Mc(e,t,n,r){gc.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Ec(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Tc(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Pc(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ac(e,t,n,r){gc.call(this),this.type="CubicBezierCurve",this.v0=e||new Pn,this.v1=t||new Pn,this.v2=n||new Pn,this.v3=r||new Pn}function Oc(e,t,n,r){gc.call(this),this.type="CubicBezierCurve3",this.v0=e||new Cn,this.v1=t||new Cn,this.v2=n||new Cn,this.v3=r||new Cn}function Lc(e,t){gc.call(this),this.type="LineCurve",this.v1=e||new Pn,this.v2=t||new Pn}function Cc(e,t){gc.call(this),this.type="LineCurve3",this.v1=e||new Cn,this.v2=t||new Cn}function Dc(e,t,n){gc.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Pn,this.v1=t||new Pn,this.v2=n||new Pn}function kc(e,t,n){gc.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Cn,this.v1=t||new Cn,this.v2=n||new Cn}function Ic(e){gc.call(this),this.type="SplineCurve",this.points=e||[]}Mc.prototype=Object.create(gc.prototype),Mc.prototype.constructor=Mc,Mc.prototype.isCatmullRomCurve3=!0,Mc.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Cn,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?n=s[(c-1)%l]:(wc.subVectors(s[0],s[1]).add(s[0]),n=wc),r=s[c%l],i=s[(c+1)%l],this.closed||c+2<l?o=s[(c+2)%l]:(wc.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=wc),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),d=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);d<1e-4&&(d=1),p<1e-4&&(p=d),m<1e-4&&(m=d),qc.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,d,m),_c.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,d,m),Sc.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,d,m)}else"catmullrom"===this.curveType&&(qc.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),_c.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Sc.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(qc.calc(h),_c.calc(h),Sc.calc(h)),a},Mc.prototype.copy=function(e){gc.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Mc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Mc.prototype.fromJSON=function(e){gc.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Cn).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ac.prototype=Object.create(gc.prototype),Ac.prototype.constructor=Ac,Ac.prototype.isCubicBezierCurve=!0,Ac.prototype.getPoint=function(e,t){var n=t||new Pn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Pc(e,r.x,i.x,o.x,a.x),Pc(e,r.y,i.y,o.y,a.y)),n},Ac.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ac.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ac.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Oc.prototype=Object.create(gc.prototype),Oc.prototype.constructor=Oc,Oc.prototype.isCubicBezierCurve3=!0,Oc.prototype.getPoint=function(e,t){var n=t||new Cn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Pc(e,r.x,i.x,o.x,a.x),Pc(e,r.y,i.y,o.y,a.y),Pc(e,r.z,i.z,o.z,a.z)),n},Oc.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Oc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Oc.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Lc.prototype=Object.create(gc.prototype),Lc.prototype.constructor=Lc,Lc.prototype.isLineCurve=!0,Lc.prototype.getPoint=function(e,t){var n=t||new Pn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Lc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Lc.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Lc.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Lc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Lc.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Cc.prototype=Object.create(gc.prototype),Cc.prototype.constructor=Cc,Cc.prototype.isLineCurve3=!0,Cc.prototype.getPoint=function(e,t){var n=t||new Cn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Cc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Cc.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Cc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Cc.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Dc.prototype=Object.create(gc.prototype),Dc.prototype.constructor=Dc,Dc.prototype.isQuadraticBezierCurve=!0,Dc.prototype.getPoint=function(e,t){var n=t||new Pn,r=this.v0,i=this.v1,o=this.v2;return n.set(Tc(e,r.x,i.x,o.x),Tc(e,r.y,i.y,o.y)),n},Dc.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Dc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Dc.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},kc.prototype=Object.create(gc.prototype),kc.prototype.constructor=kc,kc.prototype.isQuadraticBezierCurve3=!0,kc.prototype.getPoint=function(e,t){var n=t||new Cn,r=this.v0,i=this.v1,o=this.v2;return n.set(Tc(e,r.x,i.x,o.x),Tc(e,r.y,i.y,o.y),Tc(e,r.z,i.z,o.z)),n},kc.prototype.copy=function(e){return gc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},kc.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},kc.prototype.fromJSON=function(e){return gc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ic.prototype=Object.create(gc.prototype),Ic.prototype.constructor=Ic,Ic.prototype.isSplineCurve=!0,Ic.prototype.getPoint=function(e,t){var n=t||new Pn,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Ec(a,s.x,l.x,u.x,c.x),Ec(a,s.y,l.y,u.y,c.y)),n},Ic.prototype.copy=function(e){gc.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Ic.prototype.toJSON=function(){var e=gc.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Ic.prototype.fromJSON=function(e){gc.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Pn).fromArray(r))}return this};var Rc=Object.freeze({__proto__:null,ArcCurve:bc,CatmullRomCurve3:Mc,CubicBezierCurve:Ac,CubicBezierCurve3:Oc,EllipseCurve:yc,LineCurve:Lc,LineCurve3:Cc,QuadraticBezierCurve:Dc,QuadraticBezierCurve3:kc,SplineCurve:Ic});function Fc(){gc.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Nc(e){Fc.call(this),this.type="Path",this.currentPoint=new Pn,e&&this.setFromPoints(e)}function jc(e){Nc.call(this,e),this.uuid=Tn.generateUUID(),this.type="Shape",this.holes=[]}function zc(e,t){pr.call(this),this.type="Light",this.color=new ri(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Bc(e,t,n){zc.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(pr.DefaultUp),this.updateMatrix(),this.groundColor=new ri(t)}function Uc(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Pn(512,512),this.map=null,this.mapPass=null,this.matrix=new Qn,this._frustum=new vo,this._frameExtents=new Pn(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}function Vc(){Uc.call(this,new uo(50,1,.5,500))}function Gc(e,t,n,r,i,o){zc.call(this,e,t),this.type="SpotLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Vc}function Hc(){Uc.call(this,new uo(90,1,.5,500)),this._frameExtents=new Pn(4,2),this._viewportCount=6,this._viewports=[new jn(2,1,1,1),new jn(0,1,1,1),new jn(3,1,1,1),new jn(1,1,1,1),new jn(3,0,1,1),new jn(1,0,1,1)],this._cubeDirections=[new Cn(1,0,0),new Cn(-1,0,0),new Cn(0,0,1),new Cn(0,0,-1),new Cn(0,1,0),new Cn(0,-1,0)],this._cubeUps=[new Cn(0,1,0),new Cn(0,1,0),new Cn(0,1,0),new Cn(0,1,0),new Cn(0,0,1),new Cn(0,0,-1)]}function Wc(e,t,n,r){zc.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Hc}function Xc(e,t,n,r,i,o){lo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Yc(){Uc.call(this,new Xc(-5,5,5,-5,.5,500))}function Qc(e,t){zc.call(this,e,t),this.type="DirectionalLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,this.shadow=new Yc}function Zc(e,t){zc.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Kc(e,t,n,r){zc.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Jc(e){lc.call(this,e),this.textures={}}Fc.prototype=Object.assign(Object.create(gc.prototype),{constructor:Fc,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Lc(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){gc.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=gc.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){gc.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Rc[r.type]).fromJSON(r))}return this}}),Nc.prototype=Object.assign(Object.create(Fc.prototype),{constructor:Nc,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Lc(this.currentPoint.clone(),new Pn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){var i=new Dc(this.currentPoint.clone(),new Pn(e,t),new Pn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){var a=new Ac(this.currentPoint.clone(),new Pn(e,t),new Pn(n,r),new Pn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){var t=new Ic([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){var l=new yc(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Fc.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Fc.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Fc.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),jc.prototype=Object.assign(Object.create(Nc.prototype),{constructor:jc,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Nc.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Nc.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Nc.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Nc).fromJSON(r))}return this}}),zc.prototype=Object.assign(Object.create(pr.prototype),{constructor:zc,isLight:!0,copy:function(e){return pr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Bc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Bc,isHemisphereLight:!0,copy:function(e){return zc.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Uc.prototype,{_projScreenMatrix:new Qn,_lightPositionWorld:new Cn,_lookTarget:new Cn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Vc.prototype=Object.assign(Object.create(Uc.prototype),{constructor:Vc,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Tn.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),Uc.prototype.updateMatrices.call(this,e)}}),Gc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Gc,isSpotLight:!0,copy:function(e){return zc.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Hc.prototype=Object.assign(Object.create(Uc.prototype),{constructor:Hc,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromMatrix(a)}}),Wc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Wc,isPointLight:!0,copy:function(e){return zc.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Xc.prototype=Object.assign(Object.create(lo.prototype),{constructor:Xc,isOrthographicCamera:!0,copy:function(e,t){return lo.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(a-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Yc.prototype=Object.assign(Object.create(Uc.prototype),{constructor:Yc,isDirectionalLightShadow:!0,updateMatrices:function(e){Uc.prototype.updateMatrices.call(this,e)}}),Qc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Qc,isDirectionalLight:!0,copy:function(e){return zc.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Zc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Zc,isAmbientLight:!0}),Kc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Kc,isRectAreaLight:!0,copy:function(e){return zc.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=zc.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Jc.prototype=Object.assign(Object.create(lc.prototype),{constructor:Jc,load:function(e,t,n,r){var i=this,o=new cc(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new Vu[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new ri).setHex(e.sheen)),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new ri).setHex(o.value);break;case"v2":r.uniforms[i].value=(new Pn).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new Cn).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new jn).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new In).fromArray(o.value);case"m4":r.uniforms[i].value=(new Qn).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new Pn).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Pn).fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});var $c={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function eh(){Oi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function th(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),hi.call(this,e,t,n),this.meshPerAttribute=r||1}function nh(e){lc.call(this,e)}eh.prototype=Object.assign(Object.create(Oi.prototype),{constructor:eh,isInstancedBufferGeometry:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Oi.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),th.prototype=Object.assign(Object.create(hi.prototype),{constructor:th,isInstancedBufferAttribute:!0,copy:function(e){return hi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=hi.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),nh.prototype=Object.assign(Object.create(lc.prototype),{constructor:nh,load:function(e,t,n,r){var i=this,o=new cc(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new eh:new Oi,n=e.data.index;if(void 0!==n){var r=new rh[n.type](n.array);t.setIndex(new hi(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(r=new rh[a.type](a.array),new(a.isInstancedBufferAttribute?th:hi)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.setAttribute(o,s)}var l=e.data.morphAttributes;if(l)for(var o in l){for(var u=l[o],c=[],h=0,f=u.length;h<f;h++){a=u[h],s=new hi(r=new rh[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),c.push(s)}t.morphAttributes[o]=c}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){h=0;for(var d=p.length;h!==d;++h){var m=p[h];t.addGroup(m.start,m.count,m.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new Cn;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new Or(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var rh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ih(e){lc.call(this,e)}ih.prototype=Object.assign(Object.create(lc.prototype),{constructor:ih,load:function(e,t,n,r){var i=this,o=""===this.path?$c.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new cc(i.manager);a.setPath(this.path),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new jc).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new nh,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Cu[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Cu[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Cu[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Cu[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Cu[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Cu[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Cu[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Cu[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Cu[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Cu[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Cu[s.type]((new Rc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Cu[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Cu[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=t[s.shapes[u]];l.push(h)}a=new Cu[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++){h=t[s.shapes[u]];l.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new Rc[f.type]).fromJSON(f)),a=new Cu[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Jc;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),l.push(n[c.uuid])}r[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=rc.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new dc(new ac(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],u=l.url;if(Array.isArray(u)){r[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var f=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;r[l.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;r[l.uuid]=i(p)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Io(t[s.image]):new Nn(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,ah)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],sh),a.wrapT=n(s.wrap[1],sh)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,lh)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,lh)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new dr,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new ri(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Ms(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Ss(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new uo(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Xc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Zc(e.color,e.intensity);break;case"DirectionalLight":r=new Qc(e.color,e.intensity);break;case"PointLight":r=new Wc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Kc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Gc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Bc(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new Ws(a,s):new Yi(a,s);break;case"InstancedMesh":a=i(e.geometry),s=o(e.material);var l=e.count,u=e.instanceMatrix;(r=new Ks(a,s,l)).instanceMatrix=new hi(new Float32Array(u.array),16);break;case"LOD":r=new Hs;break;case"Line":r=new il(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new ll(i(e.geometry),o(e.material));break;case"LineSegments":r=new sl(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new dl(i(e.geometry),o(e.material));break;case"Sprite":r=new Bs(o(e.material));break;case"Group":r=new ms;break;default:r=new pr}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.drawMode&&r.setDrawMode(e.drawMode),void 0!==e.children)for(var c=e.children,h=0;h<c.length;h++)r.add(this.parseObject(c[h],t,n));if("LOD"===e.type)for(var f=e.levels,p=0;p<f.length;p++){var d=f[p],m=r.getObjectByProperty("uuid",d.object);void 0!==m&&r.addLevel(m,d.distance)}return r}});var oh,ah={UVMapping:ge,CubeReflectionMapping:ye,CubeRefractionMapping:be,EquirectangularReflectionMapping:xe,EquirectangularRefractionMapping:we,SphericalReflectionMapping:qe,CubeUVReflectionMapping:_e,CubeUVRefractionMapping:Se},sh={RepeatWrapping:Me,ClampToEdgeWrapping:Ee,MirroredRepeatWrapping:Te},lh={NearestFilter:Pe,NearestMipmapNearestFilter:Ae,NearestMipmapLinearFilter:Le,LinearFilter:De,LinearMipmapNearestFilter:ke,LinearMipmapLinearFilter:Re};function uh(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),lc.call(this,e),this.options=void 0}function ch(){this.type="ShapePath",this.color=new ri,this.subPaths=[],this.currentPath=null}function hh(e){this.type="Font",this.data=e}function fh(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,l,u,c,h,f,p,d=new ch;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,d.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,d.lineTo(a,s);break;case"q":l=m[v++]*t+n,u=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,d.quadraticCurveTo(c,h,l,u);break;case"b":l=m[v++]*t+n,u=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,f=m[v++]*t+n,p=m[v++]*t+r,d.bezierCurveTo(c,h,f,p,l,u)}}return{offsetX:o.ha*t,path:d}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function ph(e){lc.call(this,e)}uh.prototype=Object.assign(Object.create(lc.prototype),{constructor:uh,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=oc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(n){oc.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(ch.prototype,{moveTo:function(e,t){return this.currentPath=new Nc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new jc;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],l=-l,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=u*(e.x-a.x)-l*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=su.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,u=[];if(1===o.length)return s=o[0],(l=new jc).curves=s.curves,u.push(l),u;var c=!i(o[0].getPoints());c=e?!c:c;var h,f,p=[],d=[],m=[],v=0;d[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!c&&d[v]&&v++,d[v]={s:new jc,p:h},d[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!d[0])return n(o);if(d.length>1){for(var b=!1,x=[],w=0,q=d.length;w<q;w++)p[w]=[];for(w=0,q=d.length;w<q;w++)for(var _=m[w],S=0;S<_.length;S++){for(var M=_[S],E=!0,T=0;T<d.length;T++)r(M.p,d[T].p)&&(w!==T&&x.push({froms:w,tos:T,hole:S}),E?(E=!1,p[T].push(M)):b=!0);E&&p[w].push(M)}x.length>0&&(b||(m=p))}g=0;for(var P=d.length;g<P;g++){l=d[g].s,u.push(l);for(var A=0,O=(f=m[g]).length;A<O;A++)l.holes.push(f[A].h)}return u}}),Object.assign(hh.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,l=0,u=0;u<r.length;u++){var c=r[u];if("\n"===c)s=0,l-=o;else{var h=fh(c,i,s,l,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),ph.prototype=Object.assign(Object.create(lc.prototype),{constructor:ph,load:function(e,t,n,r){var i=this,o=new cc(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new hh(e)}});var dh={getContext:function(){return void 0===oh&&(oh=new(window.AudioContext||window.webkitAudioContext)),oh},setContext:function(e){oh=e}};function mh(e){lc.call(this,e)}function vh(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Cn)}function gh(e,t){zc.call(this,void 0,t),this.sh=void 0!==e?e:new vh}function yh(e,t,n){gh.call(this,void 0,n);var r=(new ri).set(e),i=(new ri).set(t),o=new Cn(r.r,r.g,r.b),a=new Cn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function bh(e,t){gh.call(this,void 0,t);var n=(new ri).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}mh.prototype=Object.assign(Object.create(lc.prototype),{constructor:mh,load:function(e,t,n,r){var i=new cc(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){var n=e.slice(0);dh.getContext().decodeAudioData(n,(function(e){t(e)}))}),n,r)}}),Object.assign(vh.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*r),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*n),t.addScale(o[4],n*r*1.092548),t.addScale(o[5],r*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],n*i*1.092548),t.addScale(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*r),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*r),t.addScale(o[5],.858086*r*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*n*i),t.addScale(o[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(vh,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),gh.prototype=Object.assign(Object.create(zc.prototype),{constructor:gh,isLightProbe:!0,copy:function(e){return zc.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return zc.prototype.toJSON.call(this,e)}}),yh.prototype=Object.assign(Object.create(gh.prototype),{constructor:yh,isHemisphereLightProbe:!0,copy:function(e){return gh.prototype.copy.call(this,e),this},toJSON:function(e){return gh.prototype.toJSON.call(this,e)}}),bh.prototype=Object.assign(Object.create(gh.prototype),{constructor:bh,isAmbientLightProbe:!0,copy:function(e){return gh.prototype.copy.call(this,e),this},toJSON:function(e){return gh.prototype.toJSON.call(this,e)}});var xh=new Qn,wh=new Qn;function qh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new uo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new uo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function _h(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(qh.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(Tn.DEG2RAD*t.fov*.5)/t.zoom;wh.elements[12]=-o,xh.elements[12]=o,n=-s*t.aspect+a,r=s*t.aspect+a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-a,r=s*t.aspect-a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(wh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xh)}}),Object.assign(_h.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var Sh=new Cn,Mh=new An,Eh=new Cn,Th=new Cn;function Ph(){pr.call(this),this.type="AudioListener",this.context=dh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new _h}function Ah(e){pr.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Ph.prototype=Object.assign(Object.create(pr.prototype),{constructor:Ph,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){pr.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Sh,Mh,Eh),Th.set(0,0,-1).applyQuaternion(Mh),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Sh.x,r),t.positionY.linearRampToValueAtTime(Sh.y,r),t.positionZ.linearRampToValueAtTime(Sh.z,r),t.forwardX.linearRampToValueAtTime(Th.x,r),t.forwardY.linearRampToValueAtTime(Th.y,r),t.forwardZ.linearRampToValueAtTime(Th.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Sh.x,Sh.y,Sh.z),t.setOrientation(Th.x,Th.y,Th.z,n.x,n.y,n.z)}}),Ah.prototype=Object.assign(Object.create(pr.prototype),{constructor:Ah,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Oh=new Cn,Lh=new An,Ch=new Cn,Dh=new Cn;function kh(e){Ah.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Ih(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Rh(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}kh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:kh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(pr.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Oh,Lh,Ch),Dh.set(0,0,1).applyQuaternion(Lh);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Oh.x,n),t.positionY.linearRampToValueAtTime(Oh.y,n),t.positionZ.linearRampToValueAtTime(Oh.z,n),t.orientationX.linearRampToValueAtTime(Dh.x,n),t.orientationY.linearRampToValueAtTime(Dh.y,n),t.orientationZ.linearRampToValueAtTime(Dh.z,n)}else t.setPosition(Oh.x,Oh.y,Oh.z),t.setOrientation(Dh.x,Dh.y,Dh.z)}}}),Object.assign(Ih.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Rh.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){An.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Fh=new RegExp("[\\[\\]\\.:\\/]","g"),Nh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",jh=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),zh=/(WCOD+)?/.source.replace("WCOD",Nh),Bh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Uh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Vh=new RegExp("^"+jh+zh+Bh+Uh+"$"),Gh=["material","materials","bones"];function Hh(e,t,n){var r=n||Wh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Wh(e,t,n){this.path=t,this.parsedPath=n||Wh.parseTrackName(t),this.node=Wh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Xh(){this.uuid=Tn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Yh(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:kt,endingEnd:kt},s=0;s!==i;++s){var l=r[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=At,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Qh(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Zh(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Kh(e,t,n){Es.call(this,e,t),this.meshPerAttribute=n||1}function Jh(e,t,n,r){this.ray=new Nr(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function $h(e,t){return e.distance-t.distance}function ef(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)ef(i[o],t,n,!0)}function tf(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function nf(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(Hh.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Wh,{Composite:Hh,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Wh.Composite(e,t,n):new Wh(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Fh,"")},parseTrackName:function(e){var t=Vh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Gh.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign(Wh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Wh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Wh.prototype,{_getValue_unbound:Wh.prototype.getValue,_setValue_unbound:Wh.prototype.setValue}),Object.assign(Xh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],f=h.uuid,p=r[f];if(void 0===p){p=t++,r[f]=p,e.push(h);for(var d=0,m=s;d!==m;++d)a[d].push(new Wh(h,i[d],o[d]))}else if(p<n){l=e[p];var v=--n,g=e[v];r[g.uuid]=p,e[p]=g,r[f]=v,e[v]=h;for(d=0,m=s;d!==m;++d){var y=a[d],b=y[v],x=y[p];y[p]=b,void 0===x&&(x=new Wh(h,i[d],o[d])),y[v]=x}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];n[h.uuid]=u,e[u]=h,n[l]=c,e[c]=s;for(var f=0,p=i;f!==p;++f){var d=r[f],m=d[c],v=d[u];d[u]=m,d[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],u=l.uuid,c=r[u];if(void 0!==c)if(delete r[u],c<n){var h=--n,f=e[h],p=e[y=--t];r[f.uuid]=c,e[c]=f,r[p.uuid]=h,e[h]=p,e.pop();for(var d=0,m=o;d!==m;++d){var v=(b=i[d])[h],g=b[y];b[c]=v,b[h]=g,b.pop()}}else{var y;r[(p=e[y=--t]).uuid]=c,e[c]=p,e.pop();for(d=0,m=o;d!==m;++d){var b;(b=i[d])[c]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var h=u,f=s.length;h!==f;++h){var p=s[h];c[h]=new Wh(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Yh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Ot;if(0===e)return-1===i?t:o&&1==(1&i)?n-t:t;if(r===Pt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1==(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=It,r.endingEnd=It):(r.endingStart=e?this.zeroSlopeAtStart?It:kt:Rt,r.endingEnd=t?this.zeroSlopeAtEnd?It:kt:Rt)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Qh.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Qh,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var h=r[c],f=h.name,p=u[f];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var d=t&&t._propertyBindings[c].binding.parsedPath;++(p=new Rh(Wh.create(n,f,d),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,f),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Xu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?rc.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[r];if(void 0!==l)return l;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Yh(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?rc.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Zh.prototype.clone=function(){return new Zh(void 0===this.value.clone?this.value:this.value.clone())},Kh.prototype=Object.assign(Object.create(Es.prototype),{constructor:Kh,isInstancedInterleavedBuffer:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Jh.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return ef(e,this,r,t),r.sort($h),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)ef(e[i],this,r,t);return r.sort($h),r}}),Object.assign(tf.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Tn.clamp(t/this.radius,-1,1))),this}}),Object.assign(nf.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var rf=new Pn;function of(e,t){this.min=void 0!==e?e:new Pn(1/0,1/0),this.max=void 0!==t?t:new Pn(-1/0,-1/0)}Object.assign(of.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=rf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Pn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Pn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Pn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Pn),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return rf.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var af=new Cn,sf=new Cn;function lf(e,t){this.start=void 0!==e?e:new Cn,this.end=void 0!==t?t:new Cn}function uf(e){pr.call(this),this.material=e,this.render=function(){}}Object.assign(lf.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Cn),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Cn),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Cn),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){af.subVectors(e,this.start),sf.subVectors(this.end,this.start);var n=sf.dot(sf),r=sf.dot(af)/n;return t&&(r=Tn.clamp(r,0,1)),r},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Cn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),uf.prototype=Object.create(pr.prototype),uf.prototype.constructor=uf,uf.prototype.isImmediateRenderObject=!0;var cf=new Cn,hf=new Cn,ff=new In,pf=["a","b","c"];function df(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Oi,u=new bi(2*a*3,3);l.setAttribute("position",u),sl.call(this,l,new Js({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}df.prototype=Object.create(sl.prototype),df.prototype.constructor=df,df.prototype.update=function(){this.object.updateMatrixWorld(!0),ff.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,i=n.faces,o=0,a=0,s=i.length;a<s;a++)for(var l=i[a],u=0,c=l.vertexNormals.length;u<c;u++){var h=r[l[pf[u]]],f=l.vertexNormals[u];cf.copy(h).applyMatrix4(e),hf.copy(f).applyMatrix3(ff).normalize().multiplyScalar(this.size).add(cf),t.setXYZ(o,cf.x,cf.y,cf.z),o+=1,t.setXYZ(o,hf.x,hf.y,hf.z),o+=1}else if(n&&n.isBufferGeometry){var p=n.attributes.position,d=n.attributes.normal;for(o=0,u=0,c=p.count;u<c;u++)cf.set(p.getX(u),p.getY(u),p.getZ(u)).applyMatrix4(e),hf.set(d.getX(u),d.getY(u),d.getZ(u)),hf.applyMatrix3(ff).normalize().multiplyScalar(this.size).add(cf),t.setXYZ(o,cf.x,cf.y,cf.z),o+=1,t.setXYZ(o,hf.x,hf.y,hf.z),o+=1}t.needsUpdate=!0};var mf=new Cn;function vf(e,t){pr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Oi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new bi(r,3));var l=new Js({fog:!1});this.cone=new sl(n,l),this.add(this.cone),this.update()}vf.prototype=Object.create(pr.prototype),vf.prototype.constructor=vf,vf.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},vf.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var gf=new Cn,yf=new Qn,bf=new Qn;function xf(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new Oi,r=[],i=[],o=new ri(0,0,1),a=new ri(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new bi(r,3)),n.setAttribute("color",new bi(i,3));var u=new Js({vertexColors:L,depthTest:!1,depthWrite:!1,transparent:!0});sl.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function wf(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new gu(t,4,2),i=new ci({wireframe:!0,fog:!1});Yi.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function qf(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new Oi;n.setAttribute("position",new bi([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var r=new Js({fog:!1});il.call(this,n,r);var i=new Oi;i.setAttribute("position",new bi([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Yi(i,new ci({side:M,fog:!1}))),this.update()}xf.prototype=Object.create(sl.prototype),xf.prototype.constructor=xf,xf.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");bf.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(yf.multiplyMatrices(bf,a.matrixWorld),gf.setFromMatrixPosition(yf),r.setXYZ(o,gf.x,gf.y,gf.z),yf.multiplyMatrices(bf,a.parent.matrixWorld),gf.setFromMatrixPosition(yf),r.setXYZ(o+1,gf.x,gf.y,gf.z),o+=2)}n.getAttribute("position").needsUpdate=!0,pr.prototype.updateMatrixWorld.call(this,e)},wf.prototype=Object.create(Yi.prototype),wf.prototype.constructor=wf,wf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},wf.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},qf.prototype=Object.create(il.prototype),qf.prototype.constructor=qf,qf.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},qf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var _f=new Cn,Sf=new ri,Mf=new ri;function Ef(e,t,n){pr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Pl(t);r.rotateY(.5*Math.PI),this.material=new ci({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=L);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new hi(o,3)),this.add(new Yi(r,this.material)),this.update()}function Tf(e,t){this.lightProbe=e,this.size=t;var n={GAMMA_OUTPUT:""},r=new so({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new gu(1,32,16);Yi.call(this,i,r),this.onBeforeRender()}function Pf(e,t,n,r){e=e||10,t=t||10,n=new ri(void 0!==n?n:4473924),r=new ri(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],l=[],u=0,c=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=u===i?n:r;f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3}var p=new Oi;p.setAttribute("position",new bi(s,3)),p.setAttribute("color",new bi(l,3));var d=new Js({vertexColors:L});sl.call(this,p,d)}function Af(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new ri(void 0!==i?i:4473924),o=new ri(void 0!==o?o:8947848);var a,s,l,u,c,h,f,p=[],d=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),f=1&u?i:o,d.push(f.r,f.g,f.b),d.push(f.r,f.g,f.b);for(u=0;u<=n;u++)for(f=1&u?i:o,h=e-e/n*u,c=0;c<r;c++)l=c/r*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),d.push(f.r,f.g,f.b),l=(c+1)/r*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),d.push(f.r,f.g,f.b);var m=new Oi;m.setAttribute("position",new bi(p,3)),m.setAttribute("color",new bi(d,3));var v=new Js({vertexColors:L});sl.call(this,m,v)}function Of(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new Oi,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.setAttribute("position",new hi(a,3));var s=new Js({color:65280}),l=new Js({color:16776960});il.call(this,i,[l,s]),this.update()}Ef.prototype=Object.create(pr.prototype),Ef.prototype.constructor=Ef,Ef.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ef.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Sf.copy(this.light.color),Mf.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Sf:Mf;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(_f.setFromMatrixPosition(this.light.matrixWorld).negate())},Tf.prototype=Object.create(Yi.prototype),Tf.prototype.constructor=Tf,Tf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Tf.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Pf.prototype=Object.assign(Object.create(sl.prototype),{constructor:Pf,copy:function(e){return sl.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Af.prototype=Object.create(sl.prototype),Af.prototype.constructor=Af,Of.prototype=Object.create(il.prototype),Of.prototype.constructor=Of,Of.prototype.update=function(){var e,t,n=this.audio,r=this.range,i=this.divisionsInnerAngle,o=this.divisionsOuterAngle,a=Tn.degToRad(n.panner.coneInnerAngle),s=Tn.degToRad(n.panner.coneOuterAngle),l=a/2,u=s/2,c=0,h=0,f=this.geometry,p=f.attributes.position;function d(n,i,o,a){var s=(i-n)/o;for(p.setXYZ(c,0,0,0),h++,e=n;e<i;e+=s)t=c+h,p.setXYZ(t,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(t+1,Math.sin(Math.min(e+s,i))*r,0,Math.cos(Math.min(e+s,i))*r),p.setXYZ(t+2,0,0,0),h+=3;f.addGroup(c,h,a),c+=h,h=0}f.clearGroups(),d(-u,-l,o,0),d(-l,l,i,1),d(l,u,o,0),p.needsUpdate=!0,a===s&&(this.material[0].visible=!1)},Of.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var Lf=new Cn,Cf=new Cn,Df=new In;function kf(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Oi,u=new bi(2*a*3,3);l.setAttribute("position",u),sl.call(this,l,new Js({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}kf.prototype=Object.create(sl.prototype),kf.prototype.constructor=kf,kf.prototype.update=function(){this.object.updateMatrixWorld(!0),Df.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,r=n.vertices,i=n.faces,o=0,a=0,s=i.length;a<s;a++){var l=i[a],u=l.normal;Lf.copy(r[l.a]).add(r[l.b]).add(r[l.c]).divideScalar(3).applyMatrix4(e),Cf.copy(u).applyMatrix3(Df).normalize().multiplyScalar(this.size).add(Lf),t.setXYZ(o,Lf.x,Lf.y,Lf.z),o+=1,t.setXYZ(o,Cf.x,Cf.y,Cf.z),o+=1}t.needsUpdate=!0};var If=new Cn,Rf=new Cn,Ff=new Cn;function Nf(e,t,n){pr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Oi;r.setAttribute("position",new bi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Js({fog:!1});this.lightPlane=new il(r,i),this.add(this.lightPlane),(r=new Oi).setAttribute("position",new bi([0,0,0,0,0,1],3)),this.targetLine=new il(r,i),this.add(this.targetLine),this.update()}Nf.prototype=Object.create(pr.prototype),Nf.prototype.constructor=Nf,Nf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Nf.prototype.update=function(){If.setFromMatrixPosition(this.light.matrixWorld),Rf.setFromMatrixPosition(this.light.target.matrixWorld),Ff.subVectors(Rf,If),this.lightPlane.lookAt(Rf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Rf),this.targetLine.scale.z=Ff.length()};var jf=new Cn,zf=new lo;function Bf(e){var t=new Oi,n=new Js({color:16777215,vertexColors:O}),r=[],i=[],o={},a=new ri(16755200),s=new ri(16711680),l=new ri(43775),u=new ri(16777215),c=new ri(3355443);function h(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.setAttribute("position",new bi(r,3)),t.setAttribute("color",new bi(i,3)),sl.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Uf(e,t,n,r,i,o,a){jf.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],jf.x,jf.y,jf.z)}Bf.prototype=Object.create(sl.prototype),Bf.prototype.constructor=Bf,Bf.prototype.update=function(){var e=this.geometry,t=this.pointMap;zf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Uf("c",t,e,zf,0,0,-1),Uf("t",t,e,zf,0,0,1),Uf("n1",t,e,zf,-1,-1,-1),Uf("n2",t,e,zf,1,-1,-1),Uf("n3",t,e,zf,-1,1,-1),Uf("n4",t,e,zf,1,1,-1),Uf("f1",t,e,zf,-1,-1,1),Uf("f2",t,e,zf,1,-1,1),Uf("f3",t,e,zf,-1,1,1),Uf("f4",t,e,zf,1,1,1),Uf("u1",t,e,zf,.7,1.1,-1),Uf("u2",t,e,zf,-.7,1.1,-1),Uf("u3",t,e,zf,0,2,-1),Uf("cf1",t,e,zf,-1,0,1),Uf("cf2",t,e,zf,1,0,1),Uf("cf3",t,e,zf,0,-1,1),Uf("cf4",t,e,zf,0,1,1),Uf("cn1",t,e,zf,-1,0,-1),Uf("cn2",t,e,zf,1,0,-1),Uf("cn3",t,e,zf,0,-1,-1),Uf("cn4",t,e,zf,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Vf=new Tr;function Gf(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Oi;i.setIndex(new hi(n,1)),i.setAttribute("position",new hi(r,3)),sl.call(this,i,new Js({color:t})),this.matrixAutoUpdate=!1,this.update()}function Hf(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Oi;r.setIndex(new hi(n,1)),r.setAttribute("position",new bi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),sl.call(this,r,new Js({color:t})),this.geometry.computeBoundingSphere()}function Wf(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Oi;i.setAttribute("position",new bi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),il.call(this,i,new Js({color:r}));var o=new Oi;o.setAttribute("position",new bi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Yi(o,new ci({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}Gf.prototype=Object.create(sl.prototype),Gf.prototype.constructor=Gf,Gf.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Vf.setFromObject(this.object),!Vf.isEmpty()){var t=Vf.min,n=Vf.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Gf.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Gf.prototype.copy=function(e){return sl.prototype.copy.call(this,e),this.object=e.object,this},Gf.prototype.clone=function(){return(new this.constructor).copy(this)},Hf.prototype=Object.create(sl.prototype),Hf.prototype.constructor=Hf,Hf.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),pr.prototype.updateMatrixWorld.call(this,e))},Wf.prototype=Object.create(il.prototype),Wf.prototype.constructor=Wf,Wf.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?M:S,this.lookAt(this.plane.normal),pr.prototype.updateMatrixWorld.call(this,e)};var Xf,Yf,Qf=new Cn;function Zf(e,t,n,r,i,o){pr.call(this),void 0===e&&(e=new Cn(0,0,1)),void 0===t&&(t=new Cn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Xf&&((Xf=new Oi).setAttribute("position",new bi([0,0,0,0,1,0],3)),(Yf=new Tu(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new il(Xf,new Js({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yi(Yf,new ci({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Kf(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Oi;n.setAttribute("position",new bi(t,3)),n.setAttribute("color",new bi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Js({vertexColors:L});sl.call(this,n,r)}function Jf(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new si(e,t,n,i,o,a)}Zf.prototype=Object.create(pr.prototype),Zf.prototype.constructor=Zf,Zf.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Qf.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Qf,t)}},Zf.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Zf.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Zf.prototype.copy=function(e){return pr.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Zf.prototype.clone=function(){return(new this.constructor).copy(this)},Kf.prototype=Object.create(sl.prototype),Kf.prototype.constructor=Kf;var $f=0,ep=1;function tp(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function np(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function rp(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new dl(e,t)}function ip(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Bs(e)}function op(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new dl(e,t)}function ap(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ul(e)}function sp(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ul(e)}function lp(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ul(e)}function up(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Cn(e,t,n)}function cp(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new hi(e,t).setDynamic(!0)}function hp(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new fi(e,t)}function fp(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new pi(e,t)}function pp(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new di(e,t)}function dp(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new mi(e,t)}function mp(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new vi(e,t)}function vp(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new gi(e,t)}function gp(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new yi(e,t)}function yp(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new bi(e,t)}function bp(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new xi(e,t)}function xp(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mc.call(this,e),this.type="catmullrom",this.closed=!0}function wp(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Mc.call(this,e),this.type="catmullrom"}function qp(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Mc.call(this,e),this.type="catmullrom"}function _p(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Kf(e)}function Sp(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Gf(e,t)}function Mp(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new sl(new Mu(e.geometry),new Js({color:void 0!==t?t:16777215}))}function Ep(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new sl(new xl(e.geometry),new Js({color:void 0!==t?t:16777215}))}function Tp(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new cc(e)}function Pp(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new pc(e)}gc.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(gc.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Fc.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new to,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Cn(i.x,i.y,i.z||0))}return t}}),Object.assign(Nc.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),xp.prototype=Object.create(Mc.prototype),wp.prototype=Object.create(Mc.prototype),qp.prototype=Object.create(Mc.prototype),Object.assign(qp.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Pf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},xf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(lc.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),$c.extractUrlBase(e)}}),lc.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(ih.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(of.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Tr.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),lf.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Tn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Tn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Tn.ceilPowerOfTwo(e)}}),Object.assign(In.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Qn.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Cn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),Ur.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},An.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Nr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign($r.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign($r,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),$r.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),$r.getNormal(e,t,n,r)}}),Object.assign(jc.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new cu(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qu(this,e)}}),Object.assign(Pn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Cn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(jn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(to.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(pr.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(pr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Hs.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Qs.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ws.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(gc.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),uo.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(zc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(hi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===vn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(vn)}}}),Object.assign(hi.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?vn:mn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Oi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new hi(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)}}),Object.defineProperties(Oi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Es.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===vn},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Es.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?vn:mn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(hu.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Zh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ui.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ri}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===T}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Fu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(so.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(_s.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(_s.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(us.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ho.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(zn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(ws.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Object.defineProperties(Ah.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new mh).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Ih.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},co.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Ap={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function Op(){console.error("THREE.CanvasRenderer has been removed")}function Lp(){console.error("THREE.JSONLoader has been removed.")}Rn.crossOrigin=void 0,Rn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new vc;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Rn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new mc;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Rn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Rn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Cp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Dp(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h}}))},function(e,t,n){var r=n(6),i=n(40),o=n(26),a=n(27),s=n(41),l=function e(t,n,l){var u,c,h,f,p=t&e.F,d=t&e.G,m=t&e.P,v=t&e.B,g=d?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,y=d?i:i[n]||(i[n]={}),b=y.prototype||(y.prototype={});for(u in d&&(l=n),l)h=((c=!p&&g&&void 0!==g[u])?g:l)[u],f=v&&c?s(h,r):m&&"function"==typeof h?s(Function.call,h):h,g&&a(g,u,h,t&e.U),y[u]!=h&&o(y,u,f),m&&b[u]!=h&&(b[u]=h)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){"use strict";(function(e){var n=function(){this._tweens={},this._tweensAddedDuringUpdate={}};n.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:i.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var o=this._tweens[n[r]];o&&!1===o.update(e)&&(o._isPlaying=!1,t||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r,i=new n;i.Group=n,i._nextId=0,i.nextId=function(){return i._nextId++},"undefined"==typeof self&&void 0!==e&&e.hrtime?i.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?i.now=self.performance.now.bind(self.performance):void 0!==Date.now?i.now=Date.now:i.now=function(){return(new Date).getTime()},i.Tween=function(e,t){this._isPaused=!1,this._pauseStart=null,this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||i,this._id=i.nextId()},i.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?i.now()+parseFloat(e):e:i.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(void 0===this._valuesStart[t]&&(this._valuesStart[t]=this._object[t]),this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},pause:function(e){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=void 0===e?i.now():e,this._group.remove(this)),this},resume:function(e){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===e?i.now():e)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onRepeat:function(e){return this._onRepeatCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,r;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,r=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,r):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?i+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=i+(o-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},i.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-i.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*i.Easing.Bounce.In(2*e):.5*i.Easing.Bounce.Out(2*e-1)+.5}}},i.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,o=Math.floor(r),a=i.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[o],e[o+1>n?n:o+1],r-o)},Bezier:function(e,t){for(var n=0,r=e.length-1,o=Math.pow,a=i.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=o(1-t,r-s)*o(t,s)*e[s]*a(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,o=Math.floor(r),a=i.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(o=Math.floor(r=n*(1+t))),a(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],r-o)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],r-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=i.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(r=[1],function(e){var t=1;if(r[e])return r[e];for(var n=e;n>1;n--)t*=n;return r[e]=t,t}),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},t.a=i}).call(this,n(52))},function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return q})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return S}));var r=n(0),i=n(22),o=n(35);function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=null,g=1,y=function(e){function t(e,n,i,o){var a;return l(this,t),(a=h(this,f(t).call(this))).dom=e,a.camera=n,a.undoRedoMgr=i,a.sysGroup=o,a.onPointerDownBinder=a.onPointerDown.bind(p(a)),a.onPointerMoveBinder=a.onPointerMove.bind(p(a)),a.onPointerUpBinder=a.onPointerUp.bind(p(a)),a.onKeyDownBinder=a.onKeyDown.bind(p(a)),a.onKeyUpBinder=a.onKeyUp.bind(p(a)),a.mouseDownPos=new r.Vector2,a.ground=(new r.Plane).setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),new r.Vector3(0,0,0)),a.arrows=[],a.bIsOneWay=!1,a}return d(t,e),c(t,[{key:"onPointerDown",value:function(e){}},{key:"onPointerMove",value:function(e){}},{key:"onPointerUp",value:function(e){}},{key:"onKeyDown",value:function(e){}},{key:"onKeyUp",value:function(e){}},{key:"on",value:function(){this.dom.addEventListener("pointerdown",this.onPointerDownBinder,!1),this.dom.addEventListener("pointermove",this.onPointerMoveBinder,!1),this.dom.addEventListener("pointerup",this.onPointerUpBinder,!1),this.dom.addEventListener("keydown",this.onKeyDownBinder,!1),this.dom.addEventListener("keyup",this.onKeyUpBinder,!1),this.disposeArrow()}},{key:"off",value:function(){this.dom.removeEventListener("pointerdown",this.onPointerDownBinder),this.dom.removeEventListener("pointermove",this.onPointerMoveBinder),this.dom.removeEventListener("pointerup",this.onPointerUpBinder),this.dom.removeEventListener("keydown",this.onKeyDownBinder),this.dom.removeEventListener("keyup",this.onKeyUpBinder),this.disposeArrow()}},{key:"dispose",value:function(){this.disposeArrow()}},{key:"calculateMouseRay",value:function(e,t){var n=new r.Vector2(e/this.dom.clientWidth*2-1,-t/this.dom.clientHeight*2+1),i=new r.Raycaster;return i.setFromCamera(n,this.camera),i}},{key:"disposeArrow",value:function(){var e=this;this.arrows.length&&(this.arrows.forEach((function(t){e.sysGroup.remove(t),t.traverse((function(e){e instanceof r.Mesh&&(e.geometry.dispose(),e.material.dispose())}))})),this.arrows=[])}},{key:"updateArrow",value:function(e,t,n){var i=(new r.Vector3).subVectors(t,e);i.normalize();var o=e.distanceTo(t),a=new r.ArrowHelper(i,e,o,n?65280:16711680,3,2);this.sysGroup.add(a),this.arrows.push(a),this.bIsOneWay||(a=new r.ArrowHelper(i.negate(),t,o,n?65280:16711680,3,2),this.sysGroup.add(a),this.arrows.push(a))}}]),t}(i.a),b=function(e){function t(e,n,r){var i;return l(this,t),(i=h(this,f(t).call(this))).name=i.uuid,i.sourceMaterial=n,i.selectMaterial=r,i.userData.property={},Object.assign(i.userData.property,e),i.isSelect=!1,i}return d(t,e),c(t,[{key:"select",value:function(){this.material=this.selectMaterial,this.isSelect=!0}},{key:"deSelect",value:function(){this.material=this.sourceMaterial,this.isSelect=!1}},{key:"selectToggle",value:function(){this.material=this.material.uuid===this.selectMaterial.uuid?this.sourceMaterial:this.selectMaterial,this.isSelect=!this.isSelect}},{key:"dispose",value:function(){}},{key:"EventData",get:function(){return{name:this.name,isSelected:this.isSelect,property:this.userData.property}}},{key:"WorldLocation",get:function(){var e=new r.Vector3;return this.getWorldPosition(e),e}}]),t}(r.Mesh),x=function(e){function t(e,n,r,i,o){var a;return l(this,t),(a=h(this,f(t).call(this,o,r,i))).name=e,a.geometry=n,a.material=r,a.userData.links=[],a.userData.isolateBasePois=[],a}return d(t,e),c(t,[{key:"connect",value:function(e){this.name!==e.name&&this.userData.links.indexOf(e.name)<0&&this.userData.links.push(e.name)}},{key:"disconnect",value:function(e){var t=this.userData.links.indexOf(e.name);t>=0&&this.userData.links.splice(t,1)}},{key:"disconnectAll",value:function(){this.userData.links=[]}},{key:"clone",value:function(){var e=r.Math.generateUUID(),n=JSON.parse(JSON.stringify(this.userData)),i=new t(e,this.geometry,this.sourceMaterial,this.selectMaterial,{});return i.position.copy(this.position),i.userData=n,i}},{key:"ExportData",get:function(){return{name:this.name,position:{x:this.position.x,y:this.position.y,z:this.position.z},property:this.userData.property,links:this.userData.links,isolateBasePois:this.userData.isolateBasePois}}}]),t}(b),w=function(e){function t(e,n){var r;return l(this,t),(r=h(this,f(t).call(this))).p1=e,r.p2=n,r}return d(t,e),c(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Vector3,n=new r.Vector3,i=new r.Vector3;this.p1.getWorldPosition(n),this.p2.getWorldPosition(i);var o=(new r.Vector3).lerpVectors(n,i,e);return t.copy(o)}}]),t}(r.Curve),q=function(e){function t(e,n,r,i,o,a){var s,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return l(this,t),(s=h(this,f(t).call(this,a,i,o))).name=e,s.material=i,s.bIsOneWay=u,s.arrows=[],s.label=null,s.curve=new w(n,r),n.connect(r),s.bIsOneWay||r.connect(n),s.updateGeometry(),s}return d(t,e),c(t,[{key:"updateGeometry",value:function(){var e=this;this.disposeLabel(),this.geometry.dispose(),this.geometry=new r.TubeBufferGeometry(this.curve,1,.25*g,32),this.geometry.computeBoundingSphere();var t=this.geometry.boundingSphere.center.clone();this.geometry.translate(-t.x,-t.y,-t.z),this.position.copy(t),this.arrows.forEach((function(t){t.geometry.dispose(),e.remove(t)})),this.createArrow()}},{key:"createDistanceLabel",value:function(){if(this.curve.p1.userData.property.floor==this.curve.p2.userData.property.floor){var e=new r.PlaneBufferGeometry(1,1,1,1);e.rotateX(.5*Math.PI);var t=this.curve.p1.position.distanceTo(this.curve.p2.position),n=o.b(t.toFixed(1)+"m",10);this.label=new r.Mesh(e,n.material),this.label.scale.set(1*n.width,1,1*n.height),this.label.position.set(0,.25*g,0),this.add(this.label)}}},{key:"disposeLabel",value:function(){this.label&&(this.remove(this.label),this.label.geometry.dispose(),this.label.material.map.dispose(),this.label.material.dispose())}},{key:"updateMatrix",value:function(){if(a(f(t.prototype),"updateMatrix",this).call(this),this.label&&v){var e=new r.Vector3,n=new r.Vector3;this.label.getWorldPosition(e),this.label.getWorldDirection(n);var i=new r.Vector3;v.getWorldDirection(i),i=i.projectOnPlane(new r.Vector3(0,1,0));var o=(new r.Matrix4).lookAt(e,e.clone().addScaledVector(i,1),new r.Vector3(0,1,0)),s=(new r.Quaternion).setFromRotationMatrix(o);this.label.quaternion.slerp(s,.1)}}},{key:"createArrow",value:function(){if(this.updateMatrixWorld(!0),this.curve.p1.userData.links.indexOf(this.curve.p2.name)>=0){var e=this.worldToLocal(this.curve.p2.position.clone()),t=new r.ConeBufferGeometry(.25,1,16,1);t.rotateX(.5*Math.PI),t.translate(0,0,-.5);var n=new r.Mesh(t,this.sourceMaterial);n.lookAt(e),n.scale.setScalar(3),n.position.copy(e),this.add(n),this.arrows.push(n)}if(this.curve.p2.userData.links.indexOf(this.curve.p1.name)>=0){var i=this.worldToLocal(this.curve.p1.position.clone()),o=new r.ConeBufferGeometry(.25,1,16,1);o.rotateX(.5*Math.PI),o.translate(0,0,-.5);var a=new r.Mesh(o,this.sourceMaterial);a.lookAt(i),a.scale.setScalar(3),a.position.copy(i),this.add(a),this.arrows.push(a)}}},{key:"dispose",value:function(){var e=this;a(f(t.prototype),"dispose",this).call(this),this.disposeLabel(),this.curve.p1.disconnect(this.curve.p2),this.curve.p2.disconnect(this.curve.p1),this.arrows.forEach((function(t){t.geometry.dispose(),e.remove(t)})),this.geometry.dispose()}},{key:"raycastOnLine",value:function(e){if(!this.visible)return null;var t=new r.Vector3,n=new r.Vector3;this.curve.p1.getWorldPosition(t),this.curve.p2.getWorldPosition(n);var i=(new r.Vector3).lerpVectors(t,n,.5),o=.5*(new r.Vector3).subVectors(n,t).length(),a=new r.Sphere(i,o),s=new r.Vector3;return e.ray.intersectSphere(a,s)?s:null}},{key:"getProjectPoint",value:function(e,t){var n=new r.Vector3,i=new r.Vector3;this.curve.p1.getWorldPosition(n),this.curve.p2.getWorldPosition(i);var o=(new r.Plane).setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),n),a=new r.Vector3;if(e.ray.intersectPlane(o,a)){var s=(new r.Vector3).subVectors(i,n),l=s.lengthSq(),u=(new r.Vector3).subVectors(a,n),c=s.dot(u);return t=l*(t/n.distanceTo(i)),c=r.Math.clamp(c,t,l-t),s.divideScalar(l).multiplyScalar(c),{projectPoint:n.clone().add(s),planePoint:a.clone()}}return null}},{key:"clone",value:function(){return new t(r.Math.generateUUID(),this.curve.p1,this.curve.p2,this.sourceMaterial,this.selectMaterial,{},this.bIsOneWay)}}]),t}(b);function _(e){g=e}function S(e){v=e}},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"GLTFLoader",(function(){return o}));var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(){function t(e){r.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function n(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}t.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:t,load:function(e,t,n,i){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.LoaderUtils.extractUrlBase(e),a.manager.itemStart(e);var s=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new r.FileLoader(a.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&l.setWithCredentials(!0),l.load(e,(function(n){try{a.parse(n,o,(function(n){t(n),a.manager.itemEnd(e)}),s)}catch(e){s(e)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,n,i){var c,h={};if("string"==typeof e)c=e;else if(r.LoaderUtils.decodeText(new Uint8Array(e,0,4))===u){try{h[o.KHR_BINARY_GLTF]=new f(e)}catch(e){return void(i&&i(e))}c=h[o.KHR_BINARY_GLTF].content}else c=r.LoaderUtils.decodeText(new Uint8Array(e));var v=JSON.parse(c);if(void 0===v.asset||v.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(v.extensionsUsed)for(var g=0;g<v.extensionsUsed.length;++g){var y=v.extensionsUsed[g],b=v.extensionsRequired||[];switch(y){case o.KHR_LIGHTS_PUNCTUAL:h[y]=new s(v);break;case o.KHR_MATERIALS_UNLIT:h[y]=new l;break;case o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:h[y]=new m;break;case o.KHR_DRACO_MESH_COMPRESSION:h[y]=new p(v,this.dracoLoader);break;case o.MSFT_TEXTURE_DDS:h[y]=new a(this.ddsLoader);break;case o.KHR_TEXTURE_TRANSFORM:h[y]=new d;break;default:b.indexOf(y)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}new U(v,h,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(n,i)}}});var o={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function a(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=o.MSFT_TEXTURE_DDS,this.ddsLoader=e}function s(e){this.name=o.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[o.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function l(){this.name=o.KHR_MATERIALS_UNLIT}s.prototype.loadLight=function(t){var n,i=this.lightDefs[t],o=new r.Color(16777215);void 0!==i.color&&o.fromArray(i.color);var a=void 0!==i.range?i.range:0;switch(i.type){case"directional":(n=new r.DirectionalLight(o)).target.position.set(0,0,-1),n.add(n.target);break;case"point":(n=new r.PointLight(o)).distance=a;break;case"spot":(n=new r.SpotLight(o)).distance=a,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,n.angle=i.spot.outerConeAngle,n.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,n.target.position.set(0,0,-1),n.add(n.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return n.position.set(0,0,0),n.decay=2,void 0!==i.intensity&&(n.intensity=i.intensity),n.name=i.name||"light_"+t,e.resolve(n)},l.prototype.getMaterialType=function(){return r.MeshBasicMaterial},l.prototype.extendParams=function(t,n,i){var o=[];t.color=new r.Color(1,1,1),t.opacity=1;var a=n.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var s=a.baseColorFactor;t.color.fromArray(s),t.opacity=s[3]}void 0!==a.baseColorTexture&&o.push(i.assignTexture(t,"map",a.baseColorTexture))}return e.all(o)};var u="glTF",c=1313821514,h=5130562;function f(e){this.name=o.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==u)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(e,12),i=0;i<n.byteLength;){var a=n.getUint32(i,!0);i+=4;var s=n.getUint32(i,!0);if(i+=4,s===c){var l=new Uint8Array(e,12+i,a);this.content=r.LoaderUtils.decodeText(l)}else if(s===h){var f=12+i;this.body=e.slice(f,f+a)}i+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function p(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=o.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function d(){this.name=o.KHR_TEXTURE_TRANSFORM}function m(){return{name:o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return r.ShaderMaterial},extendParams:function(t,n,i){var o=n.extensions[this.name],a=r.ShaderLib.standard,s=r.UniformsUtils.clone(a.uniforms),l=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),h=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),f=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",l).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",h).replace("#include <lights_physical_fragment>",f);delete s.roughness,delete s.metalness,delete s.roughnessMap,delete s.metalnessMap,s.specular={value:(new r.Color).setHex(1118481)},s.glossiness={value:.5},s.specularMap={value:null},s.glossinessMap={value:null},t.vertexShader=a.vertexShader,t.fragmentShader=p,t.uniforms=s,t.defines={STANDARD:""},t.color=new r.Color(1,1,1),t.opacity=1;var d=[];if(Array.isArray(o.diffuseFactor)){var m=o.diffuseFactor;t.color.fromArray(m),t.opacity=m[3]}if(void 0!==o.diffuseTexture&&d.push(i.assignTexture(t,"map",o.diffuseTexture)),t.emissive=new r.Color(0,0,0),t.glossiness=void 0!==o.glossinessFactor?o.glossinessFactor:1,t.specular=new r.Color(1,1,1),Array.isArray(o.specularFactor)&&t.specular.fromArray(o.specularFactor),void 0!==o.specularGlossinessTexture){var v=o.specularGlossinessTexture;d.push(i.assignTexture(t,"glossinessMap",v)),d.push(i.assignTexture(t,"specularMap",v))}return e.all(d)},createMaterial:function(e){var t=new r.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++){var o=e[n[r]];t[n[r]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,n,r,i){if(!0===i.isGLTFSpecularGlossinessMaterial){var o,a=i.uniforms,s=i.defines;a.opacity.value=i.opacity,a.diffuse.value.copy(i.color),a.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),a.map.value=i.map,a.specularMap.value=i.specularMap,a.alphaMap.value=i.alphaMap,a.lightMap.value=i.lightMap,a.lightMapIntensity.value=i.lightMapIntensity,a.aoMap.value=i.aoMap,a.aoMapIntensity.value=i.aoMapIntensity,i.map?o=i.map:i.specularMap?o=i.specularMap:i.displacementMap?o=i.displacementMap:i.normalMap?o=i.normalMap:i.bumpMap?o=i.bumpMap:i.glossinessMap?o=i.glossinessMap:i.alphaMap?o=i.alphaMap:i.emissiveMap&&(o=i.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),a.uvTransform.value.copy(o.matrix)),i.envMap&&(a.envMap.value=i.envMap,a.envMapIntensity.value=i.envMapIntensity,a.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,a.reflectivity.value=i.reflectivity,a.refractionRatio.value=i.refractionRatio,a.maxMipLevel.value=e.properties.get(i.envMap).__maxMipLevel),a.specular.value.copy(i.specular),a.glossiness.value=i.glossiness,a.glossinessMap.value=i.glossinessMap,a.emissiveMap.value=i.emissiveMap,a.bumpMap.value=i.bumpMap,a.normalMap.value=i.normalMap,a.displacementMap.value=i.displacementMap,a.displacementScale.value=i.displacementScale,a.displacementBias.value=i.displacementBias,null!==a.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function v(e,t,n,i){r.Interpolant.call(this,e,t,n,i)}p.prototype.decodePrimitive=function(t,n){var r=this.json,i=this.dracoLoader,o=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,s={},l={},u={};for(var c in a){var h=A[c]||c.toLowerCase();s[h]=a[c]}for(c in t.attributes){h=A[c]||c.toLowerCase();if(void 0!==a[c]){var f=r.accessors[t.attributes[c]],p=M[f.componentType];u[h]=p,l[h]=!0===f.normalized}}return n.getDependency("bufferView",o).then((function(t){return new e((function(e){i.decodeDracoFile(t,(function(t){for(var n in t.attributes){var r=t.attributes[n],i=l[n];void 0!==i&&(r.normalized=i)}e(t)}),s,u)}))}))},d.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},v.prototype=Object.create(r.Interpolant.prototype),v.prototype.constructor=v,v.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},v.prototype.beforeStart_=v.prototype.copySampleValue_,v.prototype.afterEnd_=v.prototype.copySampleValue_,v.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,u=r-t,c=(n-t)/u,h=c*c,f=h*c,p=e*l,d=p-l,m=-2*f+3*h,v=f-h,g=1-m,y=v-h+c,b=0;b!==a;b++){var x=o[d+b+a],w=o[d+b+s]*u,q=o[p+b+a],_=o[p+b]*u;i[b]=g*x+y*w+m*q+v*_}return i};var g,y=0,b=1,x=2,w=3,q=4,_=5,S=6,M={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipmapNearestFilter,9985:r.LinearMipmapNearestFilter,9986:r.NearestMipmapLinearFilter,9987:r.LinearMipmapLinearFilter},T={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},P={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},O={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},L={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},C="OPAQUE",D="MASK",k="BLEND",I={"image/png":r.RGBAFormat,"image/jpeg":r.RGBFormat};function R(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function F(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function N(e,t){void 0!==t.extras&&("object"===i(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function j(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function z(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function B(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,i=e.array.slice(0,t*n),o=0,a=0;o<t;++o)i[a++]=e.getX(o),n>=2&&(i[a++]=e.getY(o)),n>=3&&(i[a++]=e.getZ(o)),n>=4&&(i[a++]=e.getW(o));return new r.BufferAttribute(i,n,e.normalized)}return e.clone()}function U(e,t,i){this.json=e||{},this.extensions=t||{},this.options=i||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new r.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function V(t,n,r){var i=n.attributes,o=[];function a(e,n){return r.getDependency("accessor",e).then((function(e){t.setAttribute(n,e)}))}for(var s in i){var l=A[s]||s.toLowerCase();l in t.attributes||o.push(a(i[s],l))}if(void 0!==n.indices&&!t.index){var u=r.getDependency("accessor",n.indices).then((function(e){t.setIndex(e)}));o.push(u)}return N(t,n),e.all(o).then((function(){return void 0!==n.targets?function(t,n,r){for(var i=!1,o=!1,a=0,s=n.length;a<s;a++){if(void 0!==(c=n[a]).POSITION&&(i=!0),void 0!==c.NORMAL&&(o=!0),i&&o)break}if(!i&&!o)return e.resolve(t);var l=[],u=[];for(a=0,s=n.length;a<s;a++){var c=n[a];if(i){var h=void 0!==c.POSITION?r.getDependency("accessor",c.POSITION):t.attributes.position;l.push(h)}if(o){h=void 0!==c.NORMAL?r.getDependency("accessor",c.NORMAL):t.attributes.normal;u.push(h)}}return e.all([e.all(l),e.all(u)]).then((function(e){for(var r=e[0],a=e[1],s=0,l=r.length;s<l;s++)t.attributes.position!==r[s]&&(r[s]=B(r[s]));for(s=0,l=a.length;s<l;s++)t.attributes.normal!==a[s]&&(a[s]=B(a[s]));for(s=0,l=n.length;s<l;s++){var u=n[s],c="morphTarget"+s;if(i&&void 0!==u.POSITION){var h=r[s];h.name=c;for(var f=t.attributes.position,p=0,d=h.count;p<d;p++)h.setXYZ(p,h.getX(p)+f.getX(p),h.getY(p)+f.getY(p),h.getZ(p)+f.getZ(p))}if(o&&void 0!==u.NORMAL){var m=a[s];m.name=c;var v=t.attributes.normal;for(p=0,d=m.count;p<d;p++)m.setXYZ(p,m.getX(p)+v.getX(p),m.getY(p)+v.getY(p),m.getZ(p)+v.getZ(p))}}return i&&(t.morphAttributes.position=r),o&&(t.morphAttributes.normal=a),t}))}(t,n.targets,r):t}))}return U.prototype.parse=function(t,n){var r=this,i=this.json,o=this.extensions;this.cache.removeAll(),this.markDefs(),e.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var n={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:r,userData:{}};F(o,n,i),N(n,i),t(n)})).catch(n)},U.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,l=0,u=s.length;l<u;l++)e[s[l]].isBone=!0;for(var c=0,h=e.length;c<h;c++){var f=e[c];void 0!==f.mesh&&(void 0===r[f.mesh]&&(r[f.mesh]=i[f.mesh]=0),r[f.mesh]++,void 0!==f.skin&&(n[f.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},U.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[o.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},U.prototype.getDependencies=function(t){var n=this.cache.get(t);if(!n){var r=this,i=this.json[t+("mesh"===t?"es":"s")]||[];n=e.all(i.map((function(e,n){return r.getDependency(t,n)}))),this.cache.add(t,n)}return n},U.prototype.loadBuffer=function(t){var n=this.json.buffers[t],r=this.fileLoader;if(n.type&&"arraybuffer"!==n.type)throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(void 0===n.uri&&0===t)return e.resolve(this.extensions[o.KHR_BINARY_GLTF].body);var i=this.options;return new e((function(e,t){r.load(R(n.uri,i.path),e,void 0,(function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))}))}))},U.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},U.prototype.loadAccessor=function(t){var n=this,i=this.json,o=this.json.accessors[t];if(void 0===o.bufferView&&void 0===o.sparse)return e.resolve(null);var a=[];return void 0!==o.bufferView?a.push(this.getDependency("bufferView",o.bufferView)):a.push(null),void 0!==o.sparse&&(a.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",o.sparse.values.bufferView))),e.all(a).then((function(e){var t,a,s=e[0],l=P[o.type],u=M[o.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,f=o.byteOffset||0,p=void 0!==o.bufferView?i.bufferViews[o.bufferView].byteStride:void 0,d=!0===o.normalized;if(p&&p!==h){var m=Math.floor(f/p),v="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+m+":"+o.count,g=n.cache.get(v);g||(t=new u(s,m*p,o.count*p/c),g=new r.InterleavedBuffer(t,p/c),n.cache.add(v,g)),a=new r.InterleavedBufferAttribute(g,l,f%p/c,d)}else t=null===s?new u(o.count*l):new u(s,f,o.count*l),a=new r.BufferAttribute(t,l,d);if(void 0!==o.sparse){var y=P.SCALAR,b=M[o.sparse.indices.componentType],x=o.sparse.indices.byteOffset||0,w=o.sparse.values.byteOffset||0,q=new b(e[1],x,o.sparse.count*y),_=new u(e[2],w,o.sparse.count*l);null!==s&&(a=new r.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var S=0,E=q.length;S<E;S++){var T=q[S];if(a.setX(T,_[S*l]),l>=2&&a.setY(T,_[S*l+1]),l>=3&&a.setZ(T,_[S*l+2]),l>=4&&a.setW(T,_[S*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},U.prototype.loadTexture=function(t){var n,i=this,a=this.json,s=this.options,l=this.textureLoader,u=window.URL||window.webkitURL,c=a.textures[t],h=c.extensions||{},f=(n=h[o.MSFT_TEXTURE_DDS]?a.images[h[o.MSFT_TEXTURE_DDS].source]:a.images[c.source]).uri,p=!1;return void 0!==n.bufferView&&(f=i.getDependency("bufferView",n.bufferView).then((function(e){p=!0;var t=new Blob([e],{type:n.mimeType});return f=u.createObjectURL(t)}))),e.resolve(f).then((function(t){var n=s.manager.getHandler(t);return n||(n=h[o.MSFT_TEXTURE_DDS]?i.extensions[o.MSFT_TEXTURE_DDS].ddsLoader:l),new e((function(e,r){n.load(R(t,s.path),e,void 0,r)}))})).then((function(e){!0===p&&u.revokeObjectURL(f),e.flipY=!1,void 0!==c.name&&(e.name=c.name),n.mimeType in I&&(e.format=I[n.mimeType]);var t=(a.samplers||{})[c.sampler]||{};return e.magFilter=E[t.magFilter]||r.LinearFilter,e.minFilter=E[t.minFilter]||r.LinearMipmapLinearFilter,e.wrapS=T[t.wrapS]||r.RepeatWrapping,e.wrapT=T[t.wrapT]||r.RepeatWrapping,e}))},U.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":a.format=r.RGBFormat}if(i.extensions[o.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[o.KHR_TEXTURE_TRANSFORM]:void 0;s&&(a=i.extensions[o.KHR_TEXTURE_TRANSFORM].extendTexture(a,s))}e[t]=a}))},U.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,i=this.extensions,a=void 0!==t.attributes.tangent,s=void 0!==t.attributes.color,l=void 0===t.attributes.normal,u=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,h=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var f="PointsMaterial:"+n.uuid,p=this.cache.get(f);p||(p=new r.PointsMaterial,r.Material.prototype.copy.call(p,n),p.color.copy(n.color),p.map=n.map,p.sizeAttenuation=!1,this.cache.add(f,p)),n=p}else if(e.isLine){f="LineBasicMaterial:"+n.uuid;var d=this.cache.get(f);d||(d=new r.LineBasicMaterial,r.Material.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(f,d)),n=d}if(a||s||l||u||c){f="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(f+="specular-glossiness:"),u&&(f+="skinning:"),a&&(f+="vertex-tangents:"),s&&(f+="vertex-colors:"),l&&(f+="flat-shading:"),c&&(f+="morph-targets:"),h&&(f+="morph-normals:");var m=this.cache.get(f);m||(m=n.isGLTFSpecularGlossinessMaterial?i[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),u&&(m.skinning=!0),a&&(m.vertexTangents=!0),s&&(m.vertexColors=r.VertexColors),l&&(m.flatShading=!0),c&&(m.morphTargets=!0),h&&(m.morphNormals=!0),this.cache.add(f,m)),n=m}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.setAttribute("uv2",new r.BufferAttribute(t.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=i[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=n},U.prototype.loadMaterial=function(t){var n,i=this.json,a=this.extensions,s=i.materials[t],l={},u=s.extensions||{},c=[];if(u[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=a[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=h.getMaterialType(),c.push(h.extendParams(l,s,this))}else if(u[o.KHR_MATERIALS_UNLIT]){var f=a[o.KHR_MATERIALS_UNLIT];n=f.getMaterialType(),c.push(f.extendParams(l,s,this))}else{n=r.MeshStandardMaterial;var p=s.pbrMetallicRoughness||{};if(l.color=new r.Color(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){var d=p.baseColorFactor;l.color.fromArray(d),l.opacity=d[3]}void 0!==p.baseColorTexture&&c.push(this.assignTexture(l,"map",p.baseColorTexture)),l.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,l.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(this.assignTexture(l,"metalnessMap",p.metallicRoughnessTexture)),c.push(this.assignTexture(l,"roughnessMap",p.metallicRoughnessTexture)))}!0===s.doubleSided&&(l.side=r.DoubleSide);var m=s.alphaMode||C;return m===k?l.transparent=!0:(l.transparent=!1,m===D&&(l.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&n!==r.MeshBasicMaterial&&(c.push(this.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new r.Vector2(1,1),void 0!==s.normalTexture.scale&&l.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&n!==r.MeshBasicMaterial&&(c.push(this.assignTexture(l,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(l.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&n!==r.MeshBasicMaterial&&(l.emissive=(new r.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&n!==r.MeshBasicMaterial&&c.push(this.assignTexture(l,"emissiveMap",s.emissiveTexture)),e.all(c).then((function(){var e;return e=n===r.ShaderMaterial?a[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new n(l),void 0!==s.name&&(e.name=s.name),e.map&&(e.map.encoding=r.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=r.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=r.sRGBEncoding),N(e,s),s.extensions&&F(a,e,s),e}))},U.prototype.loadGeometries=function(t){var n=this,i=this.extensions,a=this.primitiveCache;function s(e){return i[o.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then((function(t){return V(t,e,n)}))}for(var l,u,c=[],h=0,f=t.length;h<f;h++){var p,d=t[h],m=(u=void 0,(u=(l=d).extensions&&l.extensions[o.KHR_DRACO_MESH_COMPRESSION])?"draco:"+u.bufferView+":"+u.indices+":"+z(u.attributes):l.indices+":"+z(l.attributes)+":"+l.mode),v=a[m];if(v)c.push(v.promise);else p=d.extensions&&d.extensions[o.KHR_DRACO_MESH_COMPRESSION]?s(d):V(new r.BufferGeometry,d,n),a[m]={primitive:d,promise:p},c.push(p)}return e.all(c)},U.prototype.loadMesh=function(t){for(var n=this,i=this.json.meshes[t],o=i.primitives,a=[],s=0,l=o.length;s<l;s++){var u=void 0===o[s].material?g=g||new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide}):this.getDependency("material",o[s].material);a.push(u)}return e.all(a).then((function(e){return n.loadGeometries(o).then((function(a){for(var s=[],l=0,u=a.length;l<u;l++){var c,h=a[l],f=o[l],p=e[l];if(f.mode===q||f.mode===_||f.mode===S||void 0===f.mode)!0!==(c=!0===i.isSkinnedMesh?new r.SkinnedMesh(h,p):new r.Mesh(h,p)).isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),f.mode===_?c.drawMode=r.TriangleStripDrawMode:f.mode===S&&(c.drawMode=r.TriangleFanDrawMode);else if(f.mode===b)c=new r.LineSegments(h,p);else if(f.mode===w)c=new r.Line(h,p);else if(f.mode===x)c=new r.LineLoop(h,p);else{if(f.mode!==y)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);c=new r.Points(h,p)}Object.keys(c.geometry.morphAttributes).length>0&&j(c,i),c.name=i.name||"mesh_"+t,a.length>1&&(c.name+="_"+l),N(c,i),n.assignFinalMaterial(c),s.push(c)}if(1===s.length)return s[0];var d=new r.Group;for(l=0,u=s.length;l<u;l++)d.add(s[l]);return d}))}))},U.prototype.loadCamera=function(t){var n,i=this.json.cameras[t],o=i[i.type];if(o)return"perspective"===i.type?n=new r.PerspectiveCamera(r.Math.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):"orthographic"===i.type&&(n=new r.OrthographicCamera(o.xmag/-2,o.xmag/2,o.ymag/2,o.ymag/-2,o.znear,o.zfar)),void 0!==i.name&&(n.name=i.name),N(n,i),e.resolve(n);console.warn("THREE.GLTFLoader: Missing camera parameters.")},U.prototype.loadSkin=function(t){var n=this.json.skins[t],r={joints:n.joints};return void 0===n.inverseBindMatrices?e.resolve(r):this.getDependency("accessor",n.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))},U.prototype.loadAnimation=function(t){for(var n=this.json.animations[t],i=[],o=[],a=[],s=[],l=[],u=0,c=n.channels.length;u<c;u++){var h=n.channels[u],f=n.samplers[h.sampler],p=h.target,d=void 0!==p.node?p.node:p.id,m=void 0!==n.parameters?n.parameters[f.input]:f.input,g=void 0!==n.parameters?n.parameters[f.output]:f.output;i.push(this.getDependency("node",d)),o.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",g)),s.push(f),l.push(p)}return e.all([e.all(i),e.all(o),e.all(a),e.all(s),e.all(l)]).then((function(e){for(var i=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=[],c=0,h=i.length;c<h;c++){var f=i[c],p=o[c],d=a[c],m=s[c],g=l[c];if(void 0!==f){var y;switch(f.updateMatrix(),f.matrixAutoUpdate=!0,O[g.path]){case O.weights:y=r.NumberKeyframeTrack;break;case O.rotation:y=r.QuaternionKeyframeTrack;break;case O.position:case O.scale:default:y=r.VectorKeyframeTrack}var b=f.name?f.name:f.uuid,x=void 0!==m.interpolation?L[m.interpolation]:r.InterpolateLinear,w=[];O[g.path]===O.weights?f.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)})):w.push(b);var q=d.array;if(d.normalized){var _;if(q.constructor===Int8Array)_=1/127;else if(q.constructor===Uint8Array)_=1/255;else if(q.constructor==Int16Array)_=1/32767;else{if(q.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");_=1/65535}for(var S=new Float32Array(q.length),M=0,E=q.length;M<E;M++)S[M]=q[M]*_;q=S}for(M=0,E=w.length;M<E;M++){var T=new y(w[M]+"."+O[g.path],p.array,q,x);"CUBICSPLINE"===m.interpolation&&(T.createInterpolant=function(e){return new v(this.times,this.values,this.getValueSize()/3,e)},T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(T)}}}var P=void 0!==n.name?n.name:"animation_"+t;return new r.AnimationClip(P,void 0,u)}))},U.prototype.loadNode=function(t){var n,i=this.json,a=this.extensions,s=this,l=i.meshReferences,u=i.meshUses,c=i.nodes[t];return(n=[],void 0!==c.mesh&&n.push(s.getDependency("mesh",c.mesh).then((function(e){var t;if(l[c.mesh]>1){var n=u[c.mesh]++;(t=e.clone()).name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var r=0,i=t.children.length;r<i;r++)t.children[r].name+="_instance_"+n,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==c.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=c.weights.length;t<n;t++)e.morphTargetInfluences[t]=c.weights[t]})),t}))),void 0!==c.camera&&n.push(s.getDependency("camera",c.camera)),c.extensions&&c.extensions[o.KHR_LIGHTS_PUNCTUAL]&&void 0!==c.extensions[o.KHR_LIGHTS_PUNCTUAL].light&&n.push(s.getDependency("light",c.extensions[o.KHR_LIGHTS_PUNCTUAL].light)),e.all(n)).then((function(e){var t;if((t=!0===c.isBone?new r.Bone:e.length>1?new r.Group:1===e.length?e[0]:new r.Object3D)!==e[0])for(var n=0,i=e.length;n<i;n++)t.add(e[n]);if(void 0!==c.name&&(t.userData.name=c.name,t.name=r.PropertyBinding.sanitizeNodeName(c.name)),N(t,c),c.extensions&&F(a,t,c),void 0!==c.matrix){var o=new r.Matrix4;o.fromArray(c.matrix),t.applyMatrix(o)}else void 0!==c.translation&&t.position.fromArray(c.translation),void 0!==c.rotation&&t.quaternion.fromArray(c.rotation),void 0!==c.scale&&t.scale.fromArray(c.scale);return t}))},U.prototype.loadScene=function(){function t(n,i,o,a){var s=o.nodes[n];return a.getDependency("node",n).then((function(t){return void 0===s.skin?t:a.getDependency("skin",s.skin).then((function(t){for(var r=[],i=0,o=(n=t).joints.length;i<o;i++)r.push(a.getDependency("node",n.joints[i]));return e.all(r)})).then((function(e){return t.traverse((function(t){if(t.isMesh){for(var i=[],o=[],a=0,s=e.length;a<s;a++){var l=e[a];if(l){i.push(l);var u=new r.Matrix4;void 0!==n.inverseBindMatrices&&u.fromArray(n.inverseBindMatrices.array,16*a),o.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[a])}t.bind(new r.Skeleton(i,o),t.matrixWorld)}})),t}));var n})).then((function(n){i.add(n);var r=[];if(s.children)for(var l=s.children,u=0,c=l.length;u<c;u++){var h=l[u];r.push(t(h,n,o,a))}return e.all(r)}))}return function(n){var i=this.json,o=this.extensions,a=this.json.scenes[n],s=new r.Scene;void 0!==a.name&&(s.name=a.name),N(s,a),a.extensions&&F(o,s,a);for(var l=a.nodes||[],u=[],c=0,h=l.length;c<h;c++)u.push(t(l[c],s,i,this));return e.all(u).then((function(){return s}))}}(),t}()}.call(this,n(11))},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===n(e)?null!==e:"function"==typeof e}},function(e,t,n){var r=n(92)("wks"),i=n(68),o=n(6).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(43),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){(function(r,i){var o,a,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */s=function(){"use strict";function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,o=void 0,a=void 0,s=function(e,t){m[n]=e,m[n+1]=t,2===(n+=2)&&(a?a(v):w())},u="undefined"!=typeof window?window:void 0,c=u||{},h=c.MutationObserver||c.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(v,1)}}var m=new Array(1e3);function v(){for(var e=0;e<n;e+=2)(0,m[e])(m[e+1]),m[e]=void 0,m[e+1]=void 0;n=0}var g,y,b,x,w=void 0;function q(e,t){var n=this,r=new this.constructor(M);void 0===r[S]&&I(r);var i=n._state;if(i){var o=arguments[i-1];s((function(){return D(i,r,o,n._result)}))}else L(n,r,e,t);return r}function _(e){if(e&&"object"===l(e)&&e.constructor===this)return e;var t=new this(M);return T(t,e),t}f?w=function(){return r.nextTick(v)}:h?(y=0,b=new h(v),x=document.createTextNode(""),b.observe(x,{characterData:!0}),w=function(){x.data=y=++y%2}):p?((g=new MessageChannel).port1.onmessage=v,w=function(){return g.port2.postMessage(0)}):w=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(v)}:d()}catch(e){return d()}}():d();var S=Math.random().toString(36).substring(2);function M(){}function E(t,n,r){n.constructor===t.constructor&&r===q&&n.constructor.resolve===_?function(e,t){1===t._state?A(e,t._result):2===t._state?O(e,t._result):L(t,void 0,(function(t){return T(e,t)}),(function(t){return O(e,t)}))}(t,n):void 0===r?A(t,n):e(r)?function(e,t,n){s((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?T(e,n):A(e,n))}),(function(t){r||(r=!0,O(e,t))}),e._label);!r&&i&&(r=!0,O(e,i))}),e)}(t,n,r):A(t,n)}function T(e,t){if(e===t)O(e,new TypeError("You cannot resolve a promise with itself"));else if(i=l(r=t),null===r||"object"!==i&&"function"!==i)A(e,t);else{var n=void 0;try{n=t.then}catch(t){return void O(e,t)}E(e,t,n)}var r,i}function P(e){e._onerror&&e._onerror(e._result),C(e)}function A(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(C,e))}function O(e,t){void 0===e._state&&(e._state=2,e._result=t,s(P,e))}function L(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=n,i[o+2]=r,0===o&&e._state&&s(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?D(n,r,i,o):i(o);e._subscribers.length=0}}function D(t,n,r,i){var o=e(r),a=void 0,s=void 0,l=!0;if(o){try{a=r(i)}catch(e){l=!1,s=e}if(n===a)return void O(n,new TypeError("A promises callback cannot return that same promise."))}else a=i;void 0!==n._state||(o&&l?T(n,a):!1===l?O(n,s):1===t?A(n,a):2===t&&O(n,a))}var k=0;function I(e){e[S]=k++,e._state=void 0,e._result=void 0,e._subscribers=[]}var R=function(){function e(e,n){this._instanceConstructor=e,this.promise=new e(M),this.promise[S]||I(this.promise),t(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&A(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===_){var i=void 0,o=void 0,a=!1;try{i=e.then}catch(e){a=!0,o=e}if(i===q&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===F){var s=new n(M);a?O(s,o):E(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===e?O(r,n):this._result[t]=n),0===this._remaining&&A(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;L(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),F=function(){function t(e){this[S]=k++,this._result=this._state=void 0,this._subscribers=[],M!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){T(e,t)}),(function(t){O(e,t)}))}catch(t){O(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return F.prototype.then=q,F.all=function(e){return new R(this,e).promise},F.race=function(e){var n=this;return t(e)?new n((function(t,r){for(var i=e.length,o=0;o<i;o++)n.resolve(e[o]).then(t,r)})):new n((function(e,t){return t(new TypeError("You must pass an array to race."))}))},F.resolve=_,F.reject=function(e){var t=new this(M);return O(t,e),t},F._setScheduler=function(e){a=e},F._setAsap=function(e){s=e},F._asap=s,F.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=F},F.Promise=F,F},"object"===l(t)&&void 0!==e?e.exports=s():void 0===(a="function"==typeof(o=s)?o.call(t,n,t,e):o)||(e.exports=a)}).call(this,n(52),n(39))},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"setFocusObject",(function(){return u})),n.d(r,"restore",(function(){return c}));var i={};n.r(i),n.d(i,"getBusFromModel",(function(){return O})),n.d(i,"importBusRoutes",(function(){return L})),n.d(i,"doPatrol",(function(){return C})),n.d(i,"stop",(function(){return F})),n.d(i,"pause",(function(){return I})),n.d(i,"resume",(function(){return R})),n.d(i,"doRecharge",(function(){return D})),n.d(i,"doRechargeStationImmediate",(function(){return k}));var o={};n.r(o),n.d(o,"Initialize",(function(){return ne})),n.d(o,"Show",(function(){return ie})),n.d(o,"Hide",(function(){return oe})),n.d(o,"ShowAll",(function(){return ae})),n.d(o,"HideAll",(function(){return se})),n.d(o,"Get2dPoint",(function(){return fe})),n.d(o,"Pause",(function(){return le})),n.d(o,"Resume",(function(){return ue})),n.d(o,"PauseAll",(function(){return ce})),n.d(o,"ResumeAll",(function(){return he})),n.d(o,"ShowAnimationSphere",(function(){return pe})),n.d(o,"HideAnimationSphere",(function(){return de})),n.d(o,"ShowAllAnimationSphere",(function(){return me})),n.d(o,"HideAllAnimationSphere",(function(){return ve})),n.d(o,"setSystemGroupScene",(function(){return J})),n.d(o,"setWorkgroupScene",(function(){return $})),n.d(o,"setCamera",(function(){return ee})),n.d(o,"setDom",(function(){return te})),n.d(o,"update",(function(){return re}));var a={};n.r(a),n.d(a,"Initialize",(function(){return xe})),n.d(a,"setCoreResources",(function(){return be}));var s={};n.r(s),n.d(s,"setCoreResource",(function(){return Me})),n.d(s,"Initialize",(function(){return Ee})),n.d(s,"Show",(function(){return Ae})),n.d(s,"Hide",(function(){return Oe})),n.d(s,"ShowEvent",(function(){return Le})),n.d(s,"MoveEvent",(function(){return Ce}));var l=n(0);function u(e,t){c(e),"string"==typeof t&&(t=[t]),e.traverse((function(e){if(e instanceof l.Mesh&&!t.includes(e.name)){var n=!1;if(e.traverseAncestors((function(e){t.includes(e.name)&&(n=!0)})),!n)if(e.material instanceof Array){e.userData.sourceMaterial=[];for(var r=0;r<e.material.length;r++){e.userData.sourceMaterial.push(e.material[r].clone());var i=e.material[r].clone();i.onBeforeCompile=function(e){var t=["float gray = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114));","gl_FragColor = vec4(vec3(gray), 1.0);","}"].join("\n");e.fragmentShader=e.fragmentShader.replace("}",t)},e.material[r]=i}}else{e.userData.sourceMaterial=e.material.clone();var o=e.material.clone();o.onBeforeCompile=function(e){var t=["float gray = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114));","gl_FragColor = vec4(vec3(gray), 1.0);","}"].join("\n");e.fragmentShader=e.fragmentShader.replace("}",t)},e.material=o}}}))}function c(e){e.traverse((function(e){if(e instanceof l.Mesh&&e.userData.hasOwnProperty("sourceMaterial")){if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].dispose();else e.material.dispose();e.material=e.userData.sourceMaterial,delete e.userData.sourceMaterial}}))}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return!0;return!1}function p(e){e.sort((function(e,t){return e.fValue>t.fValue?1:e.fValue<t.fValue?-1:0}))}function d(e,t){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return!0;return!1}function m(e,t,n){var r=e[t],i=e[n];if(r&&i){var o=function(){var t=[{object:r,name:r.name,fValue:0,gValue:0,hValue:0,wValue:0,parentNode:null}],n=[];r.userData.links.forEach((function(o){var a=e[o];if(a){var s=new l.Vector3,u=new l.Vector3,c=new l.Vector3;r.getWorldPosition(s),i.getWorldPosition(u),a.getWorldPosition(c);var h=s.distanceTo(c),f=u.distanceTo(c),d=h+f+0;n.push({object:a,name:o,fValue:d,gValue:h,hValue:f,wValue:0,parentNode:t[0]}),p(n)}}));for(var o=null,a=function(){var r=n.shift();if(t.push(r),r.name===i.name)return o=r,"break";r.object.userData.links.forEach((function(o){if(!f(t,o)){var a=e[o];if(a){var s=new l.Vector3,u=new l.Vector3,c=new l.Vector3;r.object.getWorldPosition(s),i.getWorldPosition(u),a.getWorldPosition(c);var h=r.gValue+s.distanceTo(c),d=u.distanceTo(c),m=h+d+0;if(f(n,o)){var v=function(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null}(n,o);h<v.gValue&&(v.fValue=m,v.hValue=d,v.gValue=h,v.wValue=0,v.parentNode=r)}else n.push({object:a,name:o,fValue:m,gValue:h,hValue:d,wValue:0,parentNode:r});p(n)}}}))};n.length>0;){if("break"===a())break}for(var s=[],u=o;u;){var c=new l.Vector3;if(u.object.getWorldPosition(c),d(s,c)||s.push(c),u.parentNode){var h=new l.Vector3;u.parentNode.object.getWorldPosition(h),d(s,h)||s.push(h)}u=u.parentNode}return s.reverse(),{v:s}}();if("object"===h(o))return o.v}}var v=n(2),g=null,y=null,b={},x=null,w=[],q=0,_=!1,S=null,M="425E42FA-0C70-4EB6-ABAF-97B94E6BE4A8",E="2E3155C0-94C5-4C4F-AE2E-24D899331A5B",T="125A52C2-CDCA-44A0-911D-71AB804F8FCB",P={"1to2":{from:E,to:T},"2to1":{from:T,to:E}},A="2to1";function O(e){var t=e.getObjectByName("bus_01");t&&(g=t,e.add(g),t.visible=!1)}function L(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(n.readyState===n.DONE&&200===n.status){b={};var e=n.response;"string"==typeof e&&(e=JSON.parse(e));for(var r=e.points,i=0;i<r.length;i++){var o=r[i],a=new l.Object3D;a.name=o.name,a.userData.links=o.links.slice(),a.position.set(o.localPosition.x,o.localPosition.y,o.localPosition.z),b[o.name]=a}t&&t()}},n.send()}function C(){_=!1,w=m(b,M,E),q=0,function e(){var t=w[q],n=w[q+1],r={from:t.clone(),to:n.clone(),speed:100,distance:t.distanceTo(n),ratio:0};F(),x=new v.a.Tween(r).to({ratio:1},100*r.distance/(.01*r.speed)).easing(v.a.Easing.Linear.None).onUpdate((function(){var e=(new l.Vector3).lerpVectors(r.from,r.to,r.ratio);g.position.copy(e),1===r.ratio?g.rotation.copy(y):(g.lookAt(r.to),y=g.rotation.clone())})).onComplete((function(){++q>=w.length-1&&(q=0,"1to2"===A?A="2to1":"2to1"===A&&(A="1to2"),w=m(b,P[A].from,P[A].to),q=0),_?function(){_=!1;var e=new l.Vector3;g.getWorldPosition(e);var t=null,n=1/0;for(var r in b){var i=b[r].position.distanceTo(e);i<n&&(t=r,n=i)}w=m(b,t,M),q=0,function e(){var t=w[q],n=w[q+1],r={from:t.clone(),to:n.clone(),speed:100,distance:t.distanceTo(n),ratio:0};F(),x=new v.a.Tween(r).to({ratio:1},100*r.distance/(.01*r.speed)).easing(v.a.Easing.Linear.None).onUpdate((function(){var e=(new l.Vector3).lerpVectors(r.from,r.to,r.ratio);g.position.copy(e),1===r.ratio?g.rotation.copy(y):(g.lookAt(r.to),y=g.rotation.clone())})).onComplete((function(){++q>=w.length-1?S&&S():e()})).start()}()}():e()})).start()}()}function D(e){_=!0,S=e}function k(){F();var e=b[M],t=new l.Vector3;e.getWorldPosition(t),g.position.set(t.x,t.y,t.z)}function I(){x&&x.pause()}function R(){x&&x.resume()}function F(){x&&x.stop()}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=z(this,B(t).call(this))).bAnimPause=!1,r.userData.lineColor=e;var i=new l.SphereBufferGeometry(.2*3,32,32),o=new l.MeshStandardMaterial({color:e}),a=new l.Mesh(i,o);a.position.set(n[0].x,n[0].y,n[0].z),r.attach(a),(a=new l.Mesh(i,o)).position.set(n[n.length-1].x,n[n.length-1].y,n[n.length-1].z),r.attach(a),r.curvePath=new l.CurvePath;for(var s=0;s<n.length-1;s++){var u=new l.LineCurve3(new l.Vector3(n[s].x,n[s].y,n[s].z),new l.Vector3(n[s+1].x,n[s+1].y,n[s+1].z));r.curvePath.add(u)}i=new l.TubeBufferGeometry(r.curvePath,256,.2,32,!1),o=new l.MeshStandardMaterial({color:e});var c=new l.Mesh(i,o);return r.attach(c),r.animPoints=[],r.spawnTimer=0,r.animPointVisibleFlag=!0,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"dispose",value:function(){this.traverse((function(e){e instanceof l.Mesh&&(e.geometry.dispose(),e.material.dispose())}))}},{key:"updateAnimation",value:function(e){if(!this.bAnimPause){this.spawnTimer+=e,this.spawnTimer>=1&&(this.spawnTimer=0,a=this,s=this.animPointVisibleFlag,u=new l.SphereBufferGeometry(.2*3,32,32),c=new l.MeshStandardMaterial({color:a.userData.lineColor}),(h=new l.Mesh(u,c)).position.copy(a.curvePath.curves[0].getPointAt(0)),h.userData.animationRatio=0,h.visible=s,a.animPoints.push(h),a.attach(h));for(var t=G(this.curvePath.curves),n=0;n<this.animPoints.length;n++){var r=this.animPoints[n];if(r.userData.animationRatio+=2*e*(10/t),r.userData.animationRatio<=1){var i=H(this.curvePath.curves,r.userData.animationRatio);i&&r.position.copy(i)}}var o=this;this.animPoints.forEach((function(e,t,n){e.userData.animationRatio>1&&(e.geometry.dispose(),e.material.dispose(),o.remove(e),n.splice(t,1))}))}var a,s,u,c,h}},{key:"pause",value:function(){this.bAnimPause=!0}},{key:"resume",value:function(){this.bAnimPause=!1}},{key:"setAnimPointVisible",value:function(e){this.animPointVisibleFlag=e,this.animPoints.forEach((function(t){t.visible=e}))}}])&&j(n.prototype,r),i&&j(n,i),t}(l.Object3D);function G(e){for(var t=0,n=0;n<e.length;n++){t+=e[n].getLength()}return t}function H(e,t){for(var n=G(e)*t,r=null,i=0;i<e.length;i++){var o=e[i],a=o.getLength();if(0<=n&&n<=a){r=o;break}n-=a}return r?r.getPointAt(n/r.getLength()):null}var W=null,X=null,Y=null,Q=null,Z={},K={type_0:["0"],type_1:["1"],type_2:["2","3"],type_3:["4","5"],type_4:["6","7"],type_5:["8","9"],type_6:["10","11"],type_7:["12","13"],type_8:["14","15"],type_9:["16","17"],type_10:["18","19"],type_11:["20","21"],type_12:["22","23"],type_13:["24","25"],type_14:["26"],type_15:["27"],type_16:["28","29"],type_17:["30","31","32"],type_18:["33","34"],type_19:["35","36","37","38","39","40"],type_20:["41"],type_21:["42","43"],type_22:["44","45"],type_23:["46"]};function J(e){W=e}function $(e){X=e}function ee(e){Y=e}function te(e){Q=e}function ne(){var e=X.getObjectByName("PowerLineGroups");if(e)for(var t=0;t<e.children.length;t++){for(var n=e.children[t],r=n.userData.color,i=[],o=0;o<n.children.length;o++){var a=new l.Vector3;n.children[o].getWorldPosition(a),i.push({order:parseInt(n.children[o].userData.order),x:a.x,y:a.y,z:a.z})}i.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0}));var s=new V(r,i);s.position.copy(n.position),W.add(s),Z[n.name]=s}var u=X.getObjectByName("Oil_Tanker");u&&u.traverse((function(e){if(e instanceof l.Mesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].side=l.DoubleSide;else e.material.side=l.DoubleSide})),(u=X.getObjectByName("Oil_Tanker001"))&&u.traverse((function(e){if(e instanceof l.Mesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].side=l.DoubleSide;else e.material.side=l.DoubleSide}))}function re(e){for(var t in Z){Z[t].updateAnimation(e)}}function ie(e){K.hasOwnProperty(e)&&K[e].forEach((function(e){Z.hasOwnProperty(e)&&(Z[e].visible=!0)}))}function oe(e){K.hasOwnProperty(e)&&K[e].forEach((function(e){Z.hasOwnProperty(e)&&(Z[e].visible=!1)}))}function ae(){for(var e in Z)Z[e].visible=!0}function se(){for(var e in Z)Z[e].visible=!1}function le(e){K.hasOwnProperty(e)&&K[e].forEach((function(e){Z.hasOwnProperty(e)&&Z[e].pause()}))}function ue(e){K.hasOwnProperty(e)&&K[e].forEach((function(e){Z.hasOwnProperty(e)&&Z[e].resume()}))}function ce(){for(var e in Z)Z[e].pause()}function he(){for(var e in Z)Z[e].resume()}function fe(e){var t=X.getObjectByName(e);if(t){var n=new l.Vector3;return t.getWorldPosition(n),Y.updateMatrixWorld(),n.project(Y),n.x=(n.x+1)/2*Q.clientWidth,n.y=-(n.y-1)/2*Q.clientHeight,{x:n.x,y:n.y}}}function pe(e){K.hasOwnProperty(e)&&K[e].forEach((function(e){Z.hasOwnProperty(e)&&Z[e].setAnimPointVisible(!0)}))}function de(e){K.hasOwnProperty(e)&&K[e].forEach((function(e){Z.hasOwnProperty(e)&&Z[e].setAnimPointVisible(!1)}))}function me(){for(var e in Z)Z[e].setAnimPointVisible(!0)}function ve(){for(var e in Z)Z[e].setAnimPointVisible(!1)}var ge=null,ye=null;function be(e,t){ge=e,ye=t}function xe(e){var t=[];["수상태양광","수소생산","전력변환설비","연료전지","HESS","BESS","비응변전소","연구데이터센터동","연구단지","충전소"].forEach((function(n){var r=ge.getObjectByName(n);if(r){var i=new l.Vector3;r.getWorldPosition(i),t.push({type:"sphere",id:n,group:"cctv",lineHeight:10,position:{x:i.x,y:i.y,z:i.z},iconUrl:e,displayText:n,property:{floorNo:0}})}})),ye.addPoiArray(t)}var we=null,qe=null,_e=[],Se=[];function Me(e,t){we=e,t}function Ee(){if(we){we.updateMatrixWorld(),(qe=we.getObjectByName("trailer")).traverse((function(e){if(e.isMesh)if(e.material instanceof Array){for(var t=[],n=0;n<e.material.length;n++){var r=e.material[n].clone();r.transparent=!0,r.opacity=1,t.push(r)}e.material=t}else e.material=e.material.clone(),e.material.transparent=!0,e.material.opacity=1})),_e=[];for(var e=we.getObjectByName("TrailerPath"),t=0;t<e.children.length;t++){var n=e.children[t],r=new l.Vector3;n.getWorldPosition(r),_e.push({order:parseInt(n.userData.order),position:r.clone()})}_e.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0})),qe.visible=!0}}function Te(e){qe.traverse((function(t){if(t.isMesh)if(t.material instanceof Array)for(var n=0;n<t.material.length;n++)t.material[n].opacity=e;else t.material.opacity=e}))}function Pe(e,t,n,r){var i=e.distanceTo(t),o={ratio:0};return new v.a.Tween(o).to({ratio:1},10*i/(n/.01)).easing(v.a.Easing.Linear.None).onUpdate((function(){r.position.copy((new l.Vector3).lerpVectors(e,t,o.ratio)),o.ratio<.9&&r.lookAt(t),r.updateMatrix()}))}function Ae(){qe&&(qe.visible=!0)}function Oe(){qe&&(qe.visible=!1)}function Le(e){if(_e&&_e.length>0&&qe){if(Se.length){for(var t=0;t<Se.length;t++)Se[t].stop();Se=[]}qe.position.copy(_e[0].position),qe.lookAt(_e[1].position);var n=function(e,t){var n={ratio:0};return new v.a.Tween(n).to({ratio:1},1e3).easing(v.a.Easing.Linear.None).onUpdate((function(){Te(n.ratio)})).onComplete((function(){t&&t()}))}(0,e);n.start(),Se.push(n)}}function Ce(e){if(_e&&_e.length>0&&qe){if(Se.length){for(var t=0;t<Se.length;t++)Se[t].stop();Se=[]}Te(1);for(var n=0;n<_e.length-1;n++){var r=_e[n].position.clone(),i=_e[n+1].position.clone();Se.push(Pe(r,i,.001,qe)),0===n&&(qe.position.copy(r),qe.lookAt(i))}Se.push(function(e,t){var n={ratio:1};return new v.a.Tween(n).to({ratio:0},1e3).easing(v.a.Easing.Linear.None).onUpdate((function(){Te(n.ratio)})).onComplete((function(){t&&t()}))}(0,null));for(var o=0;o<Se.length-1;o++)Se[o].chain(Se[o+1]);Se[Se.length-1].onComplete((function(){e&&e()})),Se[0].start()}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s}))},function(e,t,n){e.exports=!n(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(4),i=n(197),o=n(45),a=Object.defineProperty;t.f=n(13)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(e,t,n){"use strict";n.r(t),n.d(t,"AddSDTObject",(function(){return s})),n.d(t,"Restore",(function(){return l}));var r=n(0);var i=null,o=[];function a(e){var t,n,i,o=function(e,t,n){var i=Object.assign({},e);return i.uniforms=r.UniformsUtils.merge([i.uniforms,t]),i.defines=Object.assign({},n),i}(e,{ditherTex:{value:null}},(i=1,(n="ENABLE_DITHER_TRANSPARENCY")in(t={})?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t));return o.fragmentShader="\n        float bayerDither2x2( vec2 v ) {\n            return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );\n        }\n\n        float bayerDither4x4( vec2 v ) {\n            vec2 P1 = mod( v, 2.0 );\n            vec2 P2 = mod( floor( 0.5 * v ), 2.0 );\n            return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );\n        }\n\n        uniform sampler2D ditherTex;\n        ".concat(o.fragmentShader,"\n    ").replace(/main\(\) {/,(function(e){return"\n            ".concat(e,"\n            #if ").concat("ENABLE_DITHER_TRANSPARENCY","\n            if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= opacity ) discard;\n            #endif\n        ")})),o}function s(e,t){i||(i=function(){var e=new Float32Array(16);e[0]=0,e[1]=.5,e[2]=2/16,e[3]=.625,e[4]=.75,e[5]=.25,e[6]=.875,e[7]=6/16,e[8]=3/16,e[9]=11/16,e[10]=1/16,e[11]=9/16,e[12]=15/16,e[13]=9/16,e[14]=13/16,e[15]=5/16;var t=new r.DataTexture(e,4,4,r.LuminanceFormat,r.FloatType);return t.minFilter=r.NearestFilter,t.magFilter=r.NearestFilter,t.anisotropy=1,t.wrapS=r.RepeatWrapping,t.wrapT=r.RepeatWrapping,t.needsUpdate=!0,t}()),e.traverse((function(e){if(e.material){if(e.material instanceof Array){for(var n=[],s=[],l=0;l<e.material.length;l++){var u=e.material[l];n.push(u);var c=e.material[l].color.clone(),h=e.material[l].map,f=a(r.ShaderLib.standard),p=new r.ShaderMaterial(f);p.uniforms.ditherTex.value=i,p.uniforms.opacity.value=t,p.uniforms.diffuse.value.copy(c),p.defines.USE_UV="",h&&(p.defines.USE_MAP="",p.uniforms.map.value=h),p.lights=!0,s.push(p)}e.userData.SourceMaterial=n,e.material=s}else{var d=e.material.clone(),m=e.material.color.clone(),v=e.material.map,g=a(r.ShaderLib.standard),y=new r.ShaderMaterial(g);y.uniforms.ditherTex.value=i,y.uniforms.opacity.value=t,y.uniforms.diffuse.value.copy(m),y.defines.USE_UV="",v&&(y.defines.USE_MAP="",y.uniforms.map.value=v),y.lights=!0,e.userData.SourceMaterial=d,e.material=y}o.push(e)}}))}function l(){for(var e=0;e<o.length;e++){if(o[e].material instanceof Array)for(var t=0;t<o[e].material.length;t++)o[e].material[t].dispose();else o[e].material.dispose();o[e].material=o[e].userData.SourceMaterial}o=[]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,i,o,a=n(0);function s(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(s.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),s.FullScreenQuad=(r=new a.OrthographicCamera(-1,1,1,-1,0,1),i=new a.PlaneBufferGeometry(2,2),o=function(e){this._mesh=new a.Mesh(i,e)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(o.prototype,{render:function(e){e.render(this._mesh,r)}}),o)},function(e,t,n){var r=n(46);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"FBXLoader",(function(){return s}));var r=n(0),i=n(89),o=n(91);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(){var e,t,n;function s(e){r.Loader.call(this,e)}function l(e,t){this.textureLoader=e,this.manager=t}function u(){}function c(){}function h(){}function f(){}function p(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function d(){}function m(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function v(e){return e/46186158e3}s.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:s,load:function(e,t,n,i){var o=this,a=""===o.path?r.LoaderUtils.extractUrlBase(e):o.path,s=new r.FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.load(e,(function(n){try{t(o.parse(n,a))}catch(t){setTimeout((function(){i&&i(t),o.manager.itemError(e)}),0)}}),n,i)},parse:function(t,n){if(a="Kaydara FBX Binary  \0",(o=t).byteLength>=a.length&&a===S(o,0,a.length))e=(new f).parse(t);else{var i=S(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;for(var r=0;r<t.length;++r){if((o=void 0,o=e[(i=1)-1],e=e.slice(n+i),n++,o)===t[r])return!1}var i,o;return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(m(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+m(i));e=(new h).parse(i)}var o,a;return new l(new r.TextureLoader(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),this.manager).parse(e)}}),l.prototype={constructor:l,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),i=this.parseMaterials(r),o=this.parseDeformers(),a=(new u).parse(o);return this.parseScene(o,a,i),n},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach((function(e){var n=e[0],r=e[1],i=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};t.get(n).parents.push(o),t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};t.get(r).children.push(a)}));return t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var r=e.Objects.Video;for(var i in r){var o=r[i];if(t[u=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var l=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=l}}}}for(var u in t){var c=t[u];void 0!==n[c]?t[u]=n[c]:t[u]=t[u].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],t);n.set(parseInt(i),o)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(n.wrapS=0===a?r.RepeatWrapping:r.ClampToEdgeWrapping,n.wrapT=0===s?r.RepeatWrapping:r.ClampToEdgeWrapping,"Scaling"in e){var l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n},loadTexture:function(e,n){var i,o,a=this.textureLoader.path,s=t.get(e.id).children;void 0!==s&&s.length>0&&void 0!==n[s[0].ID]&&(0!==(i=n[s[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var l=e.FileName.slice(-3).toLowerCase();if("tga"===l){var u=this.manager.getHandler(".tga");null===u?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new r.Texture):o=u.load(i)}else"psd"===l?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new r.Texture):o=this.textureLoader.load(i);return this.textureLoader.setPath(a),o},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],t);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(e,n){var i=e.id,o=e.attrName,s=e.ShadingModel;if("object"===a(s)&&(s=s.value),!t.has(i))return null;var l,u=this.parseParameters(e,n,i);switch(s.toLowerCase()){case"phong":l=new r.MeshPhongMaterial;break;case"lambert":l=new r.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),l=new r.MeshPhongMaterial}return l.setValues(u),l.name=o,l},parseParameters:function(e,n,i){var o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=(new r.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(o.color=(new r.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=(new r.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(o.emissive=(new r.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=(new r.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(o.specular=(new r.Color).fromArray(e.SpecularColor.value));var a=this;return t.get(i).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":o.bumpMap=a.getTexture(n,e.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(n,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(n,e.ID),o.map.encoding=r.sRGBEncoding;break;case"DisplacementColor":o.displacementMap=a.getTexture(n,e.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(n,e.ID),o.emissiveMap.encoding=r.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(n,e.ID);break;case"ReflectionColor":o.envMap=a.getTexture(n,e.ID),o.envMap.mapping=r.EquirectangularReflectionMapping,o.envMap.encoding=r.sRGBEncoding;break;case"SpecularColor":o.specularMap=a.getTexture(n,e.ID),o.specularMap.encoding=r.sRGBEncoding;break;case"TransparentColor":o.alphaMap=a.getTexture(n,e.ID),o.transparent=!0;break;case"TransparencyFactor":o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}})),o},getTexture:function(n,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o],s=t.get(parseInt(o));if("Skin"===a.attrType){var l=this.parseSkeleton(s,i);l.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=s.parents[0].ID,n[o]=l}else if("BlendShape"===a.attrType){var u={id:o};u.rawTargets=this.parseMorphTargets(s,i),u.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=u}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(e,t){var n=[];return e.children.forEach((function(e){var i=t[e.ID];if("Cluster"===i.attrType){var o={ID:e.ID,indices:[],weights:[],transformLink:(new r.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),n.push(o)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){var o=e.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=t.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(s)}return r},parseScene:function(i,o,a){n=new r.Group;var s=this.parseModels(i.skeletons,o,a),l=e.Objects.Model,u=this;s.forEach((function(e){var r=l[e.ID];u.setLookAtProperties(e,r),t.get(e.ID).parents.forEach((function(t){var n=s.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(i.skeletons,o,s),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=w(e.userData.transformData);e.applyMatrix(t)}}));var h=(new c).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=h,n=n.children[0]),n.animations=h},parseModels:function(n,i,o){var a=new Map,s=e.Objects.Model;for(var l in s){var u=parseInt(l),c=s[l],h=t.get(u),f=this.buildSkeleton(h,n,u,c.attrName);if(!f){switch(c.attrType){case"Camera":f=this.createCamera(h);break;case"Light":f=this.createLight(h);break;case"Mesh":f=this.createMesh(h,i,o);break;case"NurbsCurve":f=this.createCurve(h,i);break;case"LimbNode":case"Root":f=new r.Bone;break;case"Null":default:f=new r.Group}f.name=c.attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",f.ID=u}this.getTransformData(f,c),a.set(u,f),c.hasOwnProperty("UDP3DSMAX")&&(f.userData.property=this.getUserDefinedProperty(c.UDP3DSMAX.value)),c.hasOwnProperty("attenuation")&&(f.userData.hasOwnProperty("property")||(f.userData.property={}),f.userData.property.attenuation=c.attenuation.value),c.hasOwnProperty("anglePower")&&(f.userData.hasOwnProperty("property")||(f.userData.property={}),f.userData.property.anglePower=c.anglePower.value)}return a},getUserDefinedProperty:function(e){for(var t=e.split("\n"),n={},r=0;r<t.length;r++){var i=t[r].split("=");2===i.length&&(i[1]=i[1].replace("\r",""),n[i[0]]=i[1])}return n},buildSkeleton:function(e,t,n,i){var o=null;return e.parents.forEach((function(e){for(var a in t){var s=t[a];s.rawBones.forEach((function(t,a){if(t.ID===e.ID){var l=o;(o=new r.Bone).matrixWorld.copy(t.transformLink),o.name=i?r.PropertyBinding.sanitizeNodeName(i):"",o.ID=n,s.bones[a]=o,null!==l&&o.add(l)}}))}})),o},createCamera:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(o=1);var a=1;void 0!==i.NearPlane&&(a=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var l=window.innerWidth,u=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(l=i.AspectWidth.value,u=i.AspectHeight.value);var c=l/u,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);var f=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:n=new r.PerspectiveCamera(h,c,a,s),null!==f&&n.setFocalLength(f);break;case 1:n=new r.OrthographicCamera(-l/2,l/2,u/2,-u/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),n=new r.Object3D}}return n},createLight:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o;o=void 0===i.LightType?0:i.LightType.value;var a=16777215;void 0!==i.Color&&(a=(new r.Color).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var l=0;void 0!==i.FarAttenuationEnd&&(l=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);switch(o){case 0:n=new r.PointLight(a,s,l,1);break;case 1:n=new r.DirectionalLight(a,s);break;case 2:var u=Math.PI/3;void 0!==i.InnerAngle&&(u=r.Math.degToRad(i.InnerAngle.value));var c=0;void 0!==i.OuterAngle&&(c=r.Math.degToRad(i.OuterAngle.value),c=Math.max(c,1)),n=new r.SpotLight(a,s,l,u,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new r.PointLight(a,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var i,o=null,a=null,s=[];return e.children.forEach((function(e){t.has(e.ID)&&(o=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new r.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach((function(e){e.vertexColors=r.VertexColors})),o.FBX_Deformer?(s.forEach((function(e){e.skinning=!0})),(i=new r.SkinnedMesh(o,a)).normalizeSkinWeights()):i=new r.Mesh(o,a),i},createCurve:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new r.LineBasicMaterial({color:3342591,linewidth:1});return new r.Line(n,i)},getTransformData:function(e,t){var n={},r={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?q(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),"type"in t&&(r.type=t.type.value),"floorname"in t&&(r.floorname=t.floorname.value),"sortingorder"in t&&(r.sortingorder=t.sortingorder.value),"floorId"in t&&(r.floorId=t.floorId.value),e.userData.transformData=n,e.userData.property=r},setLookAtProperties:function(i,o){"LookAtProperty"in o&&t.get(i.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var o=e.Objects.Model[t.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(a),n.add(i.target)):i.lookAt((new r.Vector3).fromArray(a))}}}))},bindSkeleton:function(e,n,i){var o=this.parsePoseNodes();for(var a in e){var s=e[a];t.get(parseInt(s.ID)).parents.forEach((function(e){if(n.has(e.ID)){var a=e.ID;t.get(a).parents.forEach((function(e){i.has(e.ID)&&i.get(e.ID).bind(new r.Skeleton(s.bones),o[e.ID])}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var o=n[i].PoseNode;Array.isArray(o)?o.forEach((function(e){t[e.Node]=(new r.Matrix4).fromArray(e.Matrix.a)})):t[o.Node]=(new r.Matrix4).fromArray(o.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,i=t[0],o=t[1],a=t[2];if(0!==i||0!==o||0!==a){var s=new r.Color(i,o,a);n.add(new r.AmbientLight(s,1))}}},setupMorphMaterials:function(){var e=this;n.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(n,r){e.setupMorphMaterial(t,n,r)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,r){var i=e.uuid,o=t.uuid,a=!1;if(n.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===o&&e.uuid!==i&&(a=!0)})):e.material.uuid===o&&e.uuid!==i&&(a=!0))})),!0===a){var s=t.clone();s.morphTargets=!0,void 0===r?e.material=s:e.material[r]=s}else t.morphTargets=!0}},u.prototype={constructor:u,parse:function(n){var r=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var o in i){var a=t.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,r){var i=r.skeletons,o=[],a=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==a.length){var s=t.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null);t.children.forEach((function(e){void 0!==r.morphTargets[e.ID]&&o.push(r.morphTargets[e.ID])}));var l=a[0],u={};"RotationOrder"in l&&(u.eulerOrder=q(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);var c=w(u);return this.genGeometry(n,s,o,c)}},genGeometry:function(e,t,n,i){var o=new r.BufferGeometry;e.attrName&&(o.name=e.attrName);var a=this.parseGeoNode(e,t),s=this.genBuffers(a),l=new r.Float32BufferAttribute(s.vertex,3);if(i.applyToBufferAttribute(l),o.setAttribute("position",l),s.colors.length>0&&o.setAttribute("color",new r.Float32BufferAttribute(s.colors,3)),t&&(o.setAttribute("skinIndex",new r.Uint16BufferAttribute(s.weightsIndices,4)),o.setAttribute("skinWeight",new r.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=t),s.normal.length>0){var u=new r.Float32BufferAttribute(s.normal,3);(new r.Matrix3).getNormalMatrix(i).applyToBufferAttribute(u),o.setAttribute("normal",u)}if(s.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),o.setAttribute(n,new r.Float32BufferAttribute(s.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){var c=s.materialIndex[0],h=0;if(s.materialIndex.forEach((function(e,t){e!==c&&(o.addGroup(h,t-h,c),c=e,h=t)})),o.groups.length>0){var f=o.groups[o.groups.length-1],p=f.start+f.count;p!==s.materialIndex.length&&o.addGroup(p,s.materialIndex.length-p,c)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,e,n,i),o},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var r=0;e.LayerElementUV[r];)n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],l=[],u=[],c=[],h=this;return e.vertexIndices.forEach((function(f,p){var d=!1;f<0&&(f^=-1,d=!0);var m=[],v=[];if(o.push(3*f,3*f+1,3*f+2),e.color){var g=y(p,n,f,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach((function(e){v.push(e.weight),m.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var b=[0,0,0,0],x=[0,0,0,0];v.forEach((function(e,t){var n=e,r=m[t];x.forEach((function(e,t,i){if(n>e){i[t]=n,n=e;var o=b[t];b[t]=r,r=o}}))})),m=b,v=x}for(;v.length<4;)v.push(0),m.push(0);for(var w=0;w<4;++w)u.push(v[w]),c.push(m[w])}if(e.normal){g=y(p,n,f,e.normal);a.push(g[0],g[1],g[2])}if(e.material&&"AllSame"!==e.material.mappingType)var q=y(p,n,f,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var r=y(p,n,f,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,d&&(h.genFace(t,e,o,q,a,s,l,u,c,r),n++,r=0,o=[],a=[],s=[],l=[],u=[],c=[])})),t},genFace:function(e,t,n,r,i,o,a,s,l,u){for(var c=2;c<u;c++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(c-1)]]),e.vertex.push(t.vertexPositions[n[3*(c-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(c-1)+2]]),e.vertex.push(t.vertexPositions[n[3*c]]),e.vertex.push(t.vertexPositions[n[3*c+1]]),e.vertex.push(t.vertexPositions[n[3*c+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(c-1)]),e.vertexWeights.push(s[4*(c-1)+1]),e.vertexWeights.push(s[4*(c-1)+2]),e.vertexWeights.push(s[4*(c-1)+3]),e.vertexWeights.push(s[4*c]),e.vertexWeights.push(s[4*c+1]),e.vertexWeights.push(s[4*c+2]),e.vertexWeights.push(s[4*c+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(c-1)]),e.weightsIndices.push(l[4*(c-1)+1]),e.weightsIndices.push(l[4*(c-1)+2]),e.weightsIndices.push(l[4*(c-1)+3]),e.weightsIndices.push(l[4*c]),e.weightsIndices.push(l[4*c+1]),e.weightsIndices.push(l[4*c+2]),e.weightsIndices.push(l[4*c+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(c-1)]),e.colors.push(o[3*(c-1)+1]),e.colors.push(o[3*(c-1)+2]),e.colors.push(o[3*c]),e.colors.push(o[3*c+1]),e.colors.push(o[3*c+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(c-1)]),e.normal.push(i[3*(c-1)+1]),e.normal.push(i[3*(c-1)+2]),e.normal.push(i[3*c]),e.normal.push(i[3*c+1]),e.normal.push(i[3*c+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(c-1)]),e.uvs[n].push(a[n][2*(c-1)+1]),e.uvs[n].push(a[n][2*c]),e.uvs[n].push(a[n][2*c+1])}))},addMorphTargets:function(t,n,r,i){if(0!==r.length){t.morphAttributes.position=[];var o=this;r.forEach((function(r){r.rawTargets.forEach((function(r){var a=e.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(t,n,a,i,r.name)}))}))}},genMorphGeometry:function(e,t,n,i,o){var a=new r.BufferGeometry;n.attrName&&(a.name=n.attrName);for(var s=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],l=void 0!==t.Vertices?t.Vertices.a.slice():[],u=void 0!==n.Vertices?n.Vertices.a:[],c=void 0!==n.Indexes?n.Indexes.a:[],h=0;h<c.length;h++){var f=3*c[h];l[f]+=u[3*h],l[f+1]+=u[3*h+1],l[f+2]+=u[3*h+2]}var p={vertexIndices:s,vertexPositions:l},d=this.genBuffers(p),m=new r.Float32BufferAttribute(d.vertex,3);m.name=o||n.attrName,i.applyToBufferAttribute(m),e.morphAttributes.position.push(m)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===o.a)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new r.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new r.BufferGeometry;for(var n,i,a=t-1,s=e.KnotVector.a,l=[],u=e.Points.a,c=0,h=u.length;c<h;c+=4)l.push((new r.Vector4).fromArray(u,c));if("Closed"===e.Form)l.push(l[0]);else if("Periodic"===e.Form){n=a,i=s.length-1-n;for(c=0;c<a;++c)l.push(l[c])}var f=new o.a(a,s,l,n,i).getPoints(7*l.length),p=new Float32Array(3*f.length);f.forEach((function(e,t){e.toArray(p,3*t)}));var d=new r.BufferGeometry;return d.setAttribute("position",new r.BufferAttribute(p,3)),d}},c.prototype={constructor:c,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var r in t){var i=t[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=e.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(v),values:r[i].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,l=a.parents[0].relationship;l.match(/X/)?n.get(s).curves.x=o:l.match(/Y/)?n.get(s).curves.y=o:l.match(/Z/)?n.get(s).curves.z=o:l.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(i){var o=e.Objects.AnimationLayer,a=new Map;for(var s in o){var l=[],u=t.get(parseInt(s));if(void 0!==u)u.children.forEach((function(o,a){if(i.has(o.ID)){var s=i.get(o.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===l[a])if(void 0!==(d=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){var u={modelName:(c=e.Objects.Model[d.toString()]).attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",ID:c.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(e){e.ID===c.id&&(u.transform=e.matrix,e.userData.transformData&&(u.eulerOrder=e.userData.transformData.eulerOrder))})),u.transform||(u.transform=new r.Matrix4),"PreRotation"in c&&(u.preRotation=c.PreRotation.value),"PostRotation"in c&&(u.postRotation=c.PostRotation.value),l[a]=u}l[a]&&(l[a][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===l[a]){var c,h=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,f=t.get(h).parents[0].ID,p=t.get(f).parents[0].ID,d=t.get(p).parents[0].ID;u={modelName:(c=e.Objects.Model[d]).attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",morphName:e.Objects.Deformer[h].attrName};l[a]=u}l[a][s.attr]=s}}})),a.set(parseInt(s),l)}return a},parseAnimStacks:function(n){var r=e.Objects.AnimationStack,i={};for(var o in r){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new r.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],n=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;if(e.transform&&e.transform.decompose(n,i,o),n=n.toArray(),i=(new r.Euler).setFromQuaternion(i,e.eulerOrder).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==s&&t.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var l=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==l&&t.push(l)}if(void 0!==e.DeformPercent){var u=this.generateMorphTrack(e);void 0!==u&&t.push(u)}return t},generateVectorTrack:function(e,t,n,i){var o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,n);return new r.VectorKeyframeTrack(e+"."+i,o,a)},generateRotationTrack:function(e,t,n,i,o,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(r.Math.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(r.Math.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(r.Math.degToRad));var s=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(s,t,n);void 0!==i&&((i=i.map(r.Math.degToRad)).push(a),i=(new r.Euler).fromArray(i),i=(new r.Quaternion).setFromEuler(i)),void 0!==o&&((o=o.map(r.Math.degToRad)).push(a),o=(new r.Euler).fromArray(o),o=(new r.Quaternion).setFromEuler(o).inverse());for(var u=new r.Quaternion,c=new r.Euler,h=[],f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],a),u.setFromEuler(c),void 0!==i&&u.premultiply(i),void 0!==o&&u.multiply(o),u.toArray(h,f/3*4);return new r.QuaternionKeyframeTrack(e+".quaternion",s,h)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,i=t.values.map((function(e){return e/100})),o=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new r.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+o+"]",t.times,i)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,n){return n.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,n){var r=n,i=[],o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var l=t.y.values[a];i.push(l),r[1]=l}else i.push(r[1]);if(-1!==s){var u=t.z.values[s];i.push(u),r[2]=u}else i.push(r[2])})),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,l=e.times[t-1],u=(e.times[t]-l)/o,c=l+u,h=[],f=[];c<e.times[t];)h.push(c),c+=u,f.push(s),s+=a;e.times=M(e.times,t,h),e.values=M(e.values,t,f)}}}},h.prototype={constructor:h,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new d,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}},parseNodeProperty:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),l=parseInt(a[1]),u=i.split(",").slice(3);r="connections",function(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i=[s,l],u=u.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=_(i))}else this.parseNodeSpecialProperty(e,r,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=_(t.a))},parseNodeSpecialProperty:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=_(l)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),i)}},f.prototype={constructor:f,parse:function(e){var t=new p(e);t.skip(23);var n=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+n);for(var r=new d;!this.endOfContent(t);){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===r)return null;for(var s=[],l=0;l<i;l++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",c=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){var f=this.parseNode(e,t);null!==f&&this.parseSubNode(a,n,f)}return n.propertyList=s,"number"==typeof u&&(n.id=u),""!==c&&(n.attrName=c),""!==h&&(n.attrType=h),""!==a&&(n.name=a),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],l=n.propertyList[2],u=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[a]={type:s,type2:l,flag:u,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(0===o)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}void 0===i.a&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new p(new i.a.Inflate(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},p.prototype={constructor:p,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),r.LoaderUtils.decodeText(new Uint8Array(t))}},d.prototype={constructor:d,add:function(e,t){this[e]=t}};var g=[];function y(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(var i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(g,r.buffer,o,a)}var b=new r.Euler,x=new r.Vector3;function w(e){var t,n=new r.Matrix4,i=new r.Matrix4,o=new r.Matrix4,a=new r.Matrix4,s=new r.Matrix4,l=new r.Matrix4,u=new r.Matrix4,c=new r.Matrix4,h=new r.Matrix4,f=new r.Matrix4,p=new r.Matrix4,d=e.inheritType?e.inheritType:0;(e.translation&&n.setPosition(x.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(r.Math.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(b.fromArray(t)));e.rotation&&((t=e.rotation.map(r.Math.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(b.fromArray(t)));e.postRotation&&((t=e.postRotation.map(r.Math.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(b.fromArray(t)));e.scale&&s.scale(x.fromArray(e.scale)),e.scalingOffset&&u.setPosition(x.fromArray(e.scalingOffset)),e.scalingPivot&&l.setPosition(x.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(x.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(x.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f=e.parentMatrixWorld);var m=i.multiply(o).multiply(a),v=new r.Matrix4;f.extractRotation(v);var g,y,w,q,_=new r.Matrix4;if(_.copyPosition(f),w=_.getInverse(_).multiply(f),y=v.getInverse(v).multiply(w),g=s,0===d)q=v.multiply(m).multiply(y).multiply(g);else if(1===d)q=v.multiply(y).multiply(m).multiply(g);else{var S=(new r.Matrix4).copy(s),M=y.multiply(S.getInverse(S));q=v.multiply(m).multiply(M).multiply(g)}var E=n.multiply(c).multiply(h).multiply(i).multiply(o).multiply(a).multiply(h.getInverse(h)).multiply(u).multiply(l).multiply(s).multiply(l.getInverse(l)),T=(new r.Matrix4).copyPosition(E),P=f.multiply(T);return p.copyPosition(P),E=p.multiply(q)}function q(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function _(e){return e.split(",").map((function(e){return parseFloat(e)}))}function S(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),r.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function M(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return s}()},function(e,t,n){"use strict";var r=n(0),i=n(80),o={vertexShader:["#ifdef USE_LOGDEPTHBUF","#define EPSILON 1e-6","#ifdef USE_LOGDEPTHBUF_EXT","varying float vFragDepth;","#endif","uniform float logDepthBufFC;","#endif","uniform vec2 uvScale;","varying vec2 vUv;","void main()","{","   vUv = uvScale * uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","#ifdef USE_LOGDEPTHBUF","gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;","#ifdef USE_LOGDEPTHBUF_EXT","vFragDepth = 1.0 + gl_Position.w;","#else","gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;","#endif","#endif","}"].join("\n"),fragmentShader:["#ifdef USE_LOGDEPTHBUF","uniform float logDepthBufFC;","#ifdef USE_LOGDEPTHBUF_EXT","#extension GL_EXT_frag_depth : enable","varying float vFragDepth;","#endif","#endif","uniform sampler2D arrowTexture;","uniform vec2 arrowScale;","uniform float time;","varying vec2 vUv;","void main( void )","{","   vec2 arrowUv = vUv * arrowScale;","   arrowUv.x -= time;","   float alpha = texture2D(arrowTexture, arrowUv).a;","   if( alpha > 0.5 ) {","       gl_FragColor = vec4(1, 0, 0, 1);","   } else {","       gl_FragColor = vec4(1, 0, 0, 0.2);","   }","#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)","gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;","#endif","}"].join("\n")};n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return b}));var a=1,s=null,l=null,u=null,c=null,h=[],f=[];function p(){s=new r.SphereBufferGeometry(.5*a,16,16),l=new r.MeshPhongMaterial({color:16711680,shininess:100}),(u=new r.PlaneBufferGeometry(a,a)).rotateX(-.5*Math.PI),u.rotateY(-.5*Math.PI)}function d(e,t){for(var n=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++){var o=e[n][r];i.b(t,o)||t.push(o)}return t}(t),p=0;p<n.length;p++){var d=new r.Mesh(s,l);d.position.copy(n[p]),e.add(d),d.userData.targetFloor=[n[p].targetFloor],h.push(d)}for(var m=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length-1;i++){var o=r[i+0],a=r[i+1];if(!v(t,o,a)){var s=o.clone();s.targetFloor=o.targetFloor;var l=a.clone();l.targetFloor=a.targetFloor,t.push({ptStart:s,ptEnd:l})}}return t}(t),g=0;g<m.length;g++){var y=m[g].ptStart.clone(),b=m[g].ptEnd.clone(),x=y.distanceTo(b),w={uvScale:{value:new r.Vector2(1,1)},arrowScale:{value:new r.Vector2(.25*x*(1/a),1)},time:{value:0},arrowTexture:{value:c},distance:{value:x}};f.push(w);var q=new r.ShaderMaterial({side:r.DoubleSide,transparent:!0,uniforms:w,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}),_=new r.Mesh(u,q);_.renderOrder=-1,e.add(_),_.userData.targetFloor=[m[g].ptStart.targetFloor,m[g].ptEnd.targetFloor],h.push(_),_.scale.set(1,1,x*(1/a)),_.position.copy((new r.Vector3).lerpVectors(y,b,.5)),_.lookAt(b)}}function m(e){for(var t=0;t<h.length;t++){var n=h[t];n.material.uuid!==l.uuid&&n.material.dispose(),e.remove(n)}h=[],f=[]}function v(e,t,n){for(var r=0;r<e.length;r++){if(g(e[r],t,n))return!0}return!1}function g(e,t,n){return e.ptStart.equals(t)&&e.ptEnd.equals(n)}function y(e){for(var t=0;t<f.length;t++){var n=f[t];n.time.value+=e,1<n.time.value&&(n.time.value=0)}}function b(e){for(var t=function(t){var n=h[t],r=n.userData.targetFloor,i=r.length,o=0;r.forEach((function(t){null!==e.getFloor(t).parent&&o++})),n.visible=i===o},n=0;n<h.length;n++)t(n)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return l}));var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,a(t).call(this))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(r=[{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t)for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}])&&i(n.prototype,r),l&&i(n,l),t}(n(0).EventDispatcher)},function(e,t,n){"use strict";(function(t){var r=TypeError,i=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new r},o=n(124)(),a=Object.getPrototypeOf||function(e){return e.__proto__},s=void 0,l="undefined"==typeof Uint8Array?void 0:a(Uint8Array),u={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":o?a([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":s&&o&&Symbol.asyncIterator?s[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":o?a(a([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&o?a((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":void 0===t?void 0:t,"$ %PromisePrototype%":void 0===t?void 0:t.prototype,"$ %PromiseProto_then%":void 0===t?void 0:t.prototype.then,"$ %Promise_all%":void 0===t?void 0:t.all,"$ %Promise_reject%":void 0===t?void 0:t.reject,"$ %Promise_resolve%":void 0===t?void 0:t.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&o?a((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":o?a(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":o?Symbol:void 0,"$ %SymbolPrototype%":o?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":i,"$ %TypedArray%":l,"$ %TypedArrayPrototype%":l?l.prototype:void 0,"$ %TypeError%":r,"$ %TypeErrorPrototype%":r.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},c=n(186).call(Function.call,String.prototype.replace),h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,p=function(e){var t=[];return c(e,h,(function(e,n,r,i){t[t.length]=r?c(i,f,"$1"):n||e})),t},d=function(e,t){var n="$ "+e;if(!(n in u))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===u[n]&&!t)throw new r("intrinsic "+e+" exists, but is not available. Please file an issue!");return u[n]};e.exports=function(e,t){if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var n=p(e);if(0===n.length)return d(e,t);for(var r=d("%"+n[0]+"%",t),i=1;i<n.length;i+=1)null!=r&&(r=r[n[i]]);return r}}).call(this,n(11))},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(5),o=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var p=function(){function e(t,n,r){c(this,e),this.target=t,this.closePos=n,this.openPos=r}return f(e,[{key:"setPositionByRatio",value:function(e,t){"opening"===e?this.target.position.copy((new r.Vector3).lerpVectors(this.closePos,this.openPos,t)):"closing"===e&&this.target.position.copy((new r.Vector3).lerpVectors(this.openPos,this.closePos,t))}}]),e}(),d=function(e){function t(e,n,i,o){var a;return c(this,t),(a=s(this,l(t).call(this))).id=e,a.target=n,a.leftDoor=null,a.rightDoor=null,a.doorTween=null,a.moveTween=null,a.isMoving=!1,a.isDoorClose=!0,a.currentFloor=i,a.targetFloor=o,a.states="default",a.target.traverse((function(e){e.isMesh&&e.userData.hasOwnProperty("direction")&&("left"===e.userData.direction?a.leftDoor=new p(e,new r.Vector3(0,0,0),new r.Vector3(.55,0,0)):"right"===e.userData.direction&&(a.rightDoor=new p(e,new r.Vector3(0,0,0),new r.Vector3(-.55,0,0))))})),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),f(t,[{key:"getCurrentState",value:function(){return this.states}},{key:"doOpen",value:function(e){var t=this;this.doorTween&&this.doorTween.stop(),this.isDoorClose=!1;var n={ratio:0};this.doorTween=new o.a.Tween(n).to({ratio:1},1e3).easing(o.a.Easing.Linear.None).onUpdate((function(){t.leftDoor.setPositionByRatio("opening",n.ratio),t.rightDoor.setPositionByRatio("opening",n.ratio),t.states="doorOpening",t.dispatchEvent({id:t.id,type:"onDoorOpening",currentFloor:t.currentFloor,targetFloor:t.targetFloor})})).onComplete((function(){t.states="default",t.dispatchEvent({id:t.id,type:"onDoorOpenComplete",currentFloor:t.currentFloor,targetFloor:t.targetFloor}),t.isDoorClose=!1,e&&e()})).start(),this.dispatchEvent({id:this.id,type:"onDoorOpenStart",currentFloor:this.currentFloor,targetFloor:this.targetFloor})}},{key:"doClose",value:function(e){var t=this;this.doorTween&&this.doorTween.stop();var n={ratio:0};this.doorTween=new o.a.Tween(n).to({ratio:1},1e3).easing(o.a.Easing.Linear.None).onUpdate((function(){t.leftDoor.setPositionByRatio("closing",n.ratio),t.rightDoor.setPositionByRatio("closing",n.ratio),t.states="doorClosing",t.dispatchEvent({id:t.id,type:"onDoorClosing",currentFloor:t.currentFloor,targetFloor:t.targetFloor})})).onComplete((function(){t.states="default",t.dispatchEvent({id:t.id,type:"onDoorCloseComplete",currentFloor:t.currentFloor,targetFloor:t.targetFloor}),t.isDoorClose=!0,e&&e()})).start(),this.dispatchEvent({id:this.id,type:"onDoorCloseStart",currentFloor:this.currentFloor,targetFloor:this.targetFloor})}},{key:"moveTo",value:function(e,t,n){var i=this;this.moveTween&&this.moveTween.stop(),this.isMoving=!0;var a={ratio:0,start:this.target.position.clone(),end:new r.Vector3(this.target.position.x,e,this.target.position.z)};this.moveTween=new o.a.Tween(a).to({ratio:1},t).easing(o.a.Easing.Linear.None).onUpdate((function(){i.target.position.copy((new r.Vector3).lerpVectors(a.start,a.end,a.ratio)),i.states="moving",i.dispatchEvent({id:i.id,type:"onMoving",currentFloor:i.currentFloor,targetFloor:i.targetFloor})})).onComplete((function(){i.states="default",i.dispatchEvent({id:i.id,type:"onMoveComplete",currentFloor:i.currentFloor,targetFloor:i.targetFloor}),i.isMoving=!1,n&&n()})).start(),this.dispatchEvent({id:this.id,type:"onMoveStart",currentFloor:this.currentFloor,targetFloor:this.targetFloor})}}]),t}(r.EventDispatcher),m=function e(t){var n=this;c(this,e),this.target=t,this.doorGroups={},this.target.traverse((function(e){if(e.userData.hasOwnProperty("elvGroupNo")){var t=e.userData.elvGroupNo;n.doorGroups[t]=new d(t,e)}}))};n.d(t,"setCoreResource",(function(){return T})),n.d(t,"update",(function(){return C})),n.d(t,"LoadModel",(function(){return D})),n.d(t,"MoveTo",(function(){return k})),n.d(t,"DoAutoMove",(function(){return I})),n.d(t,"DoAutoMoveAll",(function(){return R})),n.d(t,"StopAutoMove",(function(){return F})),n.d(t,"StopAutoMoveAll",(function(){return N})),n.d(t,"SetMoveTime",(function(){return H})),n.d(t,"HideAll",(function(){return j})),n.d(t,"ShowAll",(function(){return z})),n.d(t,"Hide",(function(){return B})),n.d(t,"Show",(function(){return U})),n.d(t,"EnableTransparentMode",(function(){return V})),n.d(t,"DisableTransparentMode",(function(){return G})),n.d(t,"AddEventListener",(function(){return Y})),n.d(t,"RemoveEventListener",(function(){return Q})),n.d(t,"GetElevatorBodyState",(function(){return Z})),n.d(t,"beforeModelExpandCollapse",(function(){return W})),n.d(t,"afterModelExpandCollapse",(function(){return X}));var v=!1,g=null,y=null,b=null,x={},w={},q={},_=!1,S="1F",M=1e3,E={};function T(e,t,n,i,o){g=e,y=t,n,i,o,b=new r.Object3D,g.add(b)}function P(e,t){e.traverse((function(e){if(e.isMesh)if(e.material instanceof Array)for(var n=0;n<e.material.length;n++)e.material[n].opacity=t;else e.material.opacity=t}))}function A(e){e.traverse((function(e){if(e.userData.hasOwnProperty("floorName")){var t=e.userData.floorName;"B1"===t&&(t="B1F"),x[t]=new m(e)}else if(e.userData.hasOwnProperty("elvBodyGroupNo")){var n=e.userData.elvBodyGroupNo;w[n]=new d(n,e,"1F","1F"),function(e){e.traverse((function(e){if(e.isMesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t]=e.material[t].clone(),e.material[t].transparent=!0,e.material[t].opacity=1;else e.material=e.material.clone(),e.material.transparent=!0,e.material.opacity=1}))}(e)}})),q[0]=!0,q[1]=!0,q[2]=!0,q[3]=!0,O(0),O(1),O(2),O(3)}function O(e){var t=["B1F","1F","2F","3F","4F","5F"],n=t[Math.floor(Math.random()*t.length)],i=w[e],o=x[n],a=L(i.currentFloor,n),s=M*a;i.isMoving?q[e]&&setTimeout((function(){O(e)}),1e3*r.Math.randFloat(3,6)):(i.targetFloor=n,i.moveTo(o.target.position.y,s,(function(){i.currentFloor=n,i.doOpen((function(){setTimeout((function(){i.doClose()}),3e3)})),o.doorGroups[e].doOpen((function(){setTimeout((function(){o.doorGroups[e].doClose((function(){q[e]&&setTimeout((function(){O(e)}),1e3*r.Math.randFloat(2,5))}))}),3e3)}))})))}function L(e,t){var n={B1F:0,"1F":1,"2F":2,"3F":3,"4F":4,"5F":5};return n.hasOwnProperty(e)&&n.hasOwnProperty(t)?Math.abs(n[e]-n[t]):0}function C(e){if(v&&_&&x.hasOwnProperty(S)){var t=x[S].target.position.y;for(var n in w){var i=w[n],o=r.Math.clamp(1-.15*Math.abs(t-i.target.position.y),0,1);P(i.target,o)}}}function D(e,t){(new i.GLTFLoader).load(e,(function(e){e.scene.scale.setScalar(10),b.add(e.scene),A(e.scene),v=!0,t&&t()}))}function k(e,t,n){if(w.hasOwnProperty(e)&&x.hasOwnProperty(t)){q[e]=!1;var r=w[e];if(!r.isMoving&&r.isDoorClose){var i=x[t],o=L(r.currentFloor,t),a=M*o;r.targetFloor=t,r.moveTo(i.target.position.y,a,(function(){r.currentFloor=t,r.doOpen((function(){setTimeout((function(){r.doClose()}),3e3)})),i.doorGroups[e].doOpen((function(){setTimeout((function(){i.doorGroups[e].doClose()}),3e3),n&&n()}))}))}else setTimeout((function(){k(e,t,n)}),1e3)}}function I(e){q.hasOwnProperty(e)&&(q[e]||(q[e]=!0,O(e)))}function R(){for(var e in q)q[e]||(q[e]=!0,O(e))}function F(e){q.hasOwnProperty(e)&&(q[e]=!1)}function N(){for(var e in q)q[e]=!1}function j(){for(var e in x)x[e].target.visible=!1}function z(){for(var e in x)x[e].target.visible=!0}function B(e){x.hasOwnProperty(e)&&(x[e].target.visible=!1)}function U(e){x.hasOwnProperty(e)&&(x[e].target.visible=!0)}function V(e){_=!0,S=e}function G(){for(var e in _=!1,w){P(w[e].target,1)}}function H(e){M=e}function W(){E={};var e=function(e){var t=x[e].target.parent;y.traverse((function(t){t.userData.hasOwnProperty("property")&&("floor"===t.userData.property.type&&t.name===e&&t.attach(x[e].target))})),E[e]={prevParent:t}};for(var t in x)e(t)}function X(){for(var e in E)E[e].prevParent.attach(x[e].target)}function Y(e,t){for(var n in w)w[n].addEventListener(e,t)}function Q(e,t){for(var n in w)w[n].removeEventListener(e,t)}function Z(e,t){if(w.hasOwnProperty(e)){var n={current:w[e].currentFloor,target:w[e].targetFloor,state:w[e].getCurrentState()};return t&&t(n),n}}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"start",(function(){return s})),n.d(r,"stop",(function(){return l})),n.d(r,"stopAll",(function(){return u}));var i=n(0),o=n(2),a={};function s(e,t,n,r,s){var l=e.getObjectByName(t);if(l){var u={id:t,target:l,isArray:!1,color:null,targetColor:null,opacity:null,targetOpacity:null,transitionRatio:0,tween:null};a[t]=u,l.traverse((function(e){if(e instanceof i.Mesh)if(e.userData.originalMaterial=e.material,e.material instanceof Array){u.isArray=!0,u.color=[],u.targetColor=[],u.opacity=[],u.targetOpacity=[];for(var t=0;t<e.material.length;t++)u.color.push(e.material[t].color),u.targetColor.push(new i.Color(n)),u.opacity.push(e.material[t].opacity),u.targetOpacity.push(r),e.material[t]=e.material[t].clone(),e.material[t].transparent=!0}else u.isArray=!1,u.color=e.material.color,u.targetColor=new i.Color(n),u.opacity=e.material.opacity,u.targetOpacity=r,e.material=e.material.clone(),e.material.transparent=!0})),u.tween=new o.a.Tween(u).to({transitionRatio:1},s).easing(o.a.Easing.Quartic.In).repeat(1/0).yoyo(!0).onUpdate((function(){if(u.isArray)for(var e=0;e<u.color.length;e++){var t=u.color[e].clone();t.lerp(u.targetColor[e],u.transitionRatio),u.target.material[e].color=t;var n=u.opacity[e]+(u.targetOpacity[e]-u.opacity[e])*u.transitionRatio;u.target.material[e].opacity=n}else{var r=u.color.clone();r.lerp(u.targetColor,u.transitionRatio),u.target.material.color=r;var i=u.opacity+(u.targetOpacity-u.opacity)*u.transitionRatio;u.target.material.opacity=i}})).start()}}function l(e){if(e in a){var t=a[e];t.tween.stop(),t.target.traverse((function(e){e instanceof i.Mesh&&(e.material=e.userData.originalMaterial)})),delete a[e]}}function u(){for(var e in a)l(e);a={}}var c=n(64);n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}))},function(e,t,n){var r=n(14),i=n(67);e.exports=n(13)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(6),i=n(26),o=n(30),a=n(68)("src"),s=n(271),l=(""+s).split("toString");n(40).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(1),i=n(7),o=n(46),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"TransformControls",(function(){return i})),n.d(t,"TransformControlsGizmo",(function(){return o})),n.d(t,"TransformControlsPlane",(function(){return a}));var r=n(0),i=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),r.Object3D.call(this),this.visible=!1;var n=new o;this.add(n);var i=new a;this.add(i);var s=this;U("camera",e),U("object",void 0),U("enabled",!0),U("axis",null),U("mode","translate"),U("translationSnap",null),U("rotationSnap",null),U("space","world"),U("size",1),U("dragging",!1),U("showX",!0),U("showY",!0),U("showZ",!0);var l={type:"change"},u={type:"mouseDown"},c={type:"mouseUp",mode:s.mode},h={type:"objectChange"},f=new r.Raycaster,p=new r.Vector3,d=new r.Vector3,m=new r.Quaternion,v={X:new r.Vector3(1,0,0),Y:new r.Vector3(0,1,0),Z:new r.Vector3(0,0,1)},g=new r.Vector3,y=new r.Vector3,b=new r.Vector3,x=new r.Vector3,w=new r.Vector3,q=new r.Vector3,_=0,S=new r.Vector3,M=new r.Quaternion,E=new r.Vector3,T=new r.Vector3,P=new r.Quaternion,A=new r.Quaternion,O=new r.Vector3,L=new r.Vector3,C=new r.Quaternion,D=new r.Vector3,k=new r.Vector3,I=new r.Quaternion,R=new r.Quaternion,F=new r.Vector3,N=new r.Vector3,j=new r.Vector3,z=new r.Quaternion,B=new r.Vector3;function U(e,t){var r=t;Object.defineProperty(s,e,{get:function(){return void 0!==r?r:t},set:function(t){r!==t&&(r=t,i[e]=t,n[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(l))}}),s[e]=t,i[e]=t,n[e]=t}function V(e){if(document.pointerLockElement)return{x:0,y:0,button:e.button};var n=e.changedTouches?e.changedTouches[0]:e,r=t.getBoundingClientRect();return{x:(n.clientX-r.left)/r.width*2-1,y:-(n.clientY-r.top)/r.height*2+1,button:e.button}}function G(e){s.enabled&&s.pointerHover(V(e))}function H(e){s.enabled&&(document.addEventListener("mousemove",W,!1),s.pointerHover(V(e)),s.pointerDown(V(e)))}function W(e){s.enabled&&s.pointerMove(V(e))}function X(e){s.enabled&&(document.removeEventListener("mousemove",W,!1),s.pointerUp(V(e)))}U("worldPosition",k),U("worldPositionStart",L),U("worldQuaternion",I),U("worldQuaternionStart",C),U("cameraPosition",S),U("cameraQuaternion",M),U("pointStart",g),U("pointEnd",y),U("rotationAxis",x),U("rotationAngle",_),U("eye",N),t.addEventListener("mousedown",H,!1),t.addEventListener("touchstart",H,!1),t.addEventListener("mousemove",G,!1),t.addEventListener("touchmove",G,!1),t.addEventListener("touchmove",W,!1),document.addEventListener("mouseup",X,!1),t.addEventListener("touchend",X,!1),t.addEventListener("touchcancel",X,!1),t.addEventListener("touchleave",X,!1),this.dispose=function(){t.removeEventListener("mousedown",H),t.removeEventListener("touchstart",H),t.removeEventListener("mousemove",G),document.removeEventListener("mousemove",W),t.removeEventListener("touchmove",G),t.removeEventListener("touchmove",W),document.removeEventListener("mouseup",X),t.removeEventListener("touchend",X),t.removeEventListener("touchcancel",X),t.removeEventListener("touchleave",X),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),this.object.parent.matrixWorld.decompose(T,P,O),this.object.matrixWorld.decompose(k,I,F),A.copy(P).inverse(),R.copy(I).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(S,M,E),N.copy(S).sub(k).normalize(),r.Object3D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)){f.setFromCamera(e,this.camera);var t=f.intersectObjects(n.picker[this.mode].children,!0)[0]||!1;this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(!(void 0===this.object||!0===this.dragging||void 0!==e.button&&0!==e.button||0!==e.button&&void 0!==e.button||null===this.axis)){f.setFromCamera(e,this.camera);var t=f.intersectObjects([i],!0)[0]||!1;if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var r=this.rotationSnap;"X"===this.axis&&r&&(this.object.rotation.x=Math.round(this.object.rotation.x/r)*r),"Y"===this.axis&&r&&(this.object.rotation.y=Math.round(this.object.rotation.y/r)*r),"Z"===this.axis&&r&&(this.object.rotation.z=Math.round(this.object.rotation.z/r)*r)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),j.copy(this.object.position),z.copy(this.object.quaternion),B.copy(this.object.scale),this.object.matrixWorld.decompose(L,C,D),g.copy(t.point).sub(L)}this.dragging=!0,u.mode=this.mode,this.dispatchEvent(u)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,r=this.object,o=this.space;if("scale"===n?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0!==r&&null!==t&&!1!==this.dragging&&(void 0===e.button||0===e.button)){f.setFromCamera(e,this.camera);var a=f.intersectObjects([i],!0)[0]||!1;if(!1!==a){if(y.copy(a.point).sub(L),"translate"===n)b.copy(y).sub(g),"local"===o&&"XYZ"!==t&&b.applyQuaternion(R),-1===t.indexOf("X")&&(b.x=0),-1===t.indexOf("Y")&&(b.y=0),-1===t.indexOf("Z")&&(b.z=0),"local"===o&&"XYZ"!==t?b.applyQuaternion(z).divide(O):b.applyQuaternion(A).divide(O),r.position.copy(b).add(j),this.translationSnap&&("local"===o&&(r.position.applyQuaternion(m.copy(z).inverse()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(z)),"world"===o&&(r.parent&&r.position.add(p.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(p.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var s=y.length()/g.length();y.dot(g)<0&&(s*=-1),d.set(s,s,s)}else p.copy(g),d.copy(y),p.applyQuaternion(R),d.applyQuaternion(R),d.divide(p),-1===t.search("X")&&(d.x=1),-1===t.search("Y")&&(d.y=1),-1===t.search("Z")&&(d.z=1);r.scale.copy(B).multiply(d)}else if("rotate"===n){b.copy(y).sub(g);var u=20/k.distanceTo(p.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(x.copy(N),_=y.angleTo(g),w.copy(g).normalize(),q.copy(y).normalize(),_*=q.cross(w).dot(N)<0?1:-1):"XYZE"===t?(x.copy(b).cross(N).normalize(),_=b.dot(p.copy(x).cross(this.eye))*u):"X"!==t&&"Y"!==t&&"Z"!==t||(x.copy(v[t]),p.copy(v[t]),"local"===o&&p.applyQuaternion(I),_=b.dot(p.cross(N).normalize())*u),this.rotationSnap&&(_=Math.round(_/this.rotationSnap)*this.rotationSnap),this.rotationAngle=_,"local"===o&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(z),r.quaternion.multiply(m.setFromAxisAngle(x,_)).normalize()):(x.applyQuaternion(A),r.quaternion.copy(m.setFromAxisAngle(x,_)),r.quaternion.multiply(z).normalize())}this.dispatchEvent(l),this.dispatchEvent(h)}}},this.pointerUp=function(e){void 0!==e.button&&0!==e.button||(this.dragging&&null!==this.axis&&(c.mode=this.mode,this.dispatchEvent(c)),this.dragging=!1,void 0===e.button&&(this.axis=null))},this.getMode=function(){return s.mode},this.setMode=function(e){s.mode=e},this.setTranslationSnap=function(e){s.translationSnap=e},this.setRotationSnap=function(e){s.rotationSnap=e},this.setSize=function(e){s.size=e},this.setSpace=function(e){s.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};i.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:i,isTransformControls:!0});var o=function(){r.Object3D.call(this),this.type="TransformControlsGizmo";var e=new r.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:r.DoubleSide,fog:!1}),t=new r.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),n=e.clone();n.opacity=.15;var i=e.clone();i.opacity=.33;var o=e.clone();o.color.set(16711680);var a=e.clone();a.color.set(65280);var s=e.clone();s.color.set(255);var l=e.clone();l.opacity=.25;var u=l.clone();u.color.set(16776960);var c=l.clone();c.color.set(65535);var h=l.clone();h.color.set(16711935),e.clone().color.set(16776960);var f=t.clone();f.color.set(16711680);var p=t.clone();p.color.set(65280);var d=t.clone();d.color.set(255);var m=t.clone();m.color.set(65535);var v=t.clone();v.color.set(16711935);var g=t.clone();g.color.set(16776960);var y=t.clone();y.color.set(7895160);var b=g.clone();b.opacity=.25;var x=new r.CylinderBufferGeometry(0,.05,.2,12,1,!1),w=new r.BoxBufferGeometry(.125,.125,.125),q=new r.BufferGeometry;q.setAttribute("position",new r.Float32BufferAttribute([0,0,0,1,0,0],3));var _,S=function(e,t){for(var n=new r.BufferGeometry,i=[],o=0;o<=64*t;++o)i.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return n.setAttribute("position",new r.Float32BufferAttribute(i,3)),n},M={X:[[new r.Mesh(x,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new r.Mesh(x,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new r.Line(q,f)]],Y:[[new r.Mesh(x,a),[0,1,0],null,null,"fwd"],[new r.Mesh(x,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new r.Line(q,p),null,[0,0,Math.PI/2]]],Z:[[new r.Mesh(x,s),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new r.Mesh(x,s),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new r.Line(q,d),null,[0,-Math.PI/2,0]]],XYZ:[[new r.Mesh(new r.OctahedronBufferGeometry(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new r.Mesh(new r.PlaneBufferGeometry(.295,.295),u.clone()),[.15,.15,0]],[new r.Line(q,g),[.18,.3,0],null,[.125,1,1]],[new r.Line(q,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new r.Mesh(new r.PlaneBufferGeometry(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new r.Line(q,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new r.Line(q,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new r.Mesh(new r.PlaneBufferGeometry(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new r.Line(q,v),[.18,0,.3],null,[.125,1,1]],[new r.Line(q,v),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},E={X:[[new r.Mesh(new r.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new r.Mesh(new r.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new r.Mesh(new r.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.OctahedronBufferGeometry(.2,0),n)]],XY:[[new r.Mesh(new r.PlaneBufferGeometry(.4,.4),n),[.2,.2,0]]],YZ:[[new r.Mesh(new r.PlaneBufferGeometry(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.PlaneBufferGeometry(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},T={START:[[new r.Mesh(new r.OctahedronBufferGeometry(.01,2),i),null,null,null,"helper"]],END:[[new r.Mesh(new r.OctahedronBufferGeometry(.01,2),i),null,null,null,"helper"]],DELTA:[[new r.Line((_=new r.BufferGeometry,_.setAttribute("position",new r.Float32BufferAttribute([0,0,0,1,1,1],3)),_),i),null,null,null,"helper"]],X:[[new r.Line(q,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r.Line(q,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r.Line(q,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},P={X:[[new r.Line(S(1,.5),f)],[new r.Mesh(new r.OctahedronBufferGeometry(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new r.Line(S(1,.5),p),null,[0,0,-Math.PI/2]],[new r.Mesh(new r.OctahedronBufferGeometry(.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new r.Line(S(1,.5),d),null,[0,Math.PI/2,0]],[new r.Mesh(new r.OctahedronBufferGeometry(.04,0),s),[.99,0,0],null,[1,3,1]]],E:[[new r.Line(S(1.25,1),b),null,[0,Math.PI/2,0]],[new r.Mesh(new r.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new r.Mesh(new r.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new r.Mesh(new r.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new r.Mesh(new r.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new r.Line(S(1,1),y),null,[0,Math.PI/2,0]]]},A={AXIS:[[new r.Line(q,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},O={X:[[new r.Mesh(new r.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new r.Mesh(new r.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new r.Mesh(new r.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new r.Mesh(new r.TorusBufferGeometry(1.25,.1,2,24),n)]],XYZE:[[new r.Mesh(new r.SphereBufferGeometry(.7,10,8),n)]]},L={X:[[new r.Mesh(w,o),[.8,0,0],[0,0,-Math.PI/2]],[new r.Line(q,f),null,null,[.8,1,1]]],Y:[[new r.Mesh(w,a),[0,.8,0]],[new r.Line(q,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new r.Mesh(w,s),[0,0,.8],[Math.PI/2,0,0]],[new r.Line(q,d),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new r.Mesh(w,u),[.85,.85,0],null,[2,2,.2]],[new r.Line(q,g),[.855,.98,0],null,[.125,1,1]],[new r.Line(q,g),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new r.Mesh(w,c),[0,.85,.85],null,[.2,2,2]],[new r.Line(q,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new r.Line(q,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new r.Mesh(w,h),[.85,0,.85],null,[2,.2,2]],[new r.Line(q,v),[.855,0,.98],null,[.125,1,1]],[new r.Line(q,v),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new r.Mesh(new r.BoxBufferGeometry(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new r.Mesh(new r.BoxBufferGeometry(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new r.Mesh(new r.BoxBufferGeometry(.125,.125,.125),l.clone()),[0,0,1.1]]]},C={X:[[new r.Mesh(new r.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new r.Mesh(new r.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new r.Mesh(new r.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new r.Mesh(w,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new r.Mesh(w,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new r.Mesh(w,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new r.Mesh(new r.BoxBufferGeometry(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new r.Mesh(new r.BoxBufferGeometry(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new r.Mesh(new r.BoxBufferGeometry(.2,.2,.2),n),[0,0,1.1]]]},D={X:[[new r.Line(q,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r.Line(q,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r.Line(q,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},k=function(e){var t=new r.Object3D;for(var n in e)for(var i=e[n].length;i--;){var o=e[n][i][0].clone(),a=e[n][i][1],s=e[n][i][2],l=e[n][i][3],u=e[n][i][4];o.name=n,o.tag=u,a&&o.position.set(a[0],a[1],a[2]),s&&o.rotation.set(s[0],s[1],s[2]),l&&o.scale.set(l[0],l[1],l[2]),o.updateMatrix();var c=o.geometry.clone();c.applyMatrix(o.matrix),o.geometry=c,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t},I=new r.Vector3(0,0,0),R=new r.Euler,F=new r.Vector3(0,1,0),N=new r.Vector3(0,0,0),j=new r.Matrix4,z=new r.Quaternion,B=new r.Quaternion,U=new r.Quaternion,V=new r.Vector3(1,0,0),G=new r.Vector3(0,1,0),H=new r.Vector3(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=k(M)),this.add(this.gizmo.rotate=k(P)),this.add(this.gizmo.scale=k(L)),this.add(this.picker.translate=k(E)),this.add(this.picker.rotate=k(O)),this.add(this.picker.scale=k(C)),this.add(this.helper.translate=k(T)),this.add(this.helper.rotate=k(A)),this.add(this.helper.scale=k(D)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:U;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var i=0;i<n.length;i++){var o=n[i];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);var a=this.worldPosition.distanceTo(this.cameraPosition);if(o.scale.set(1,1,1).multiplyScalar(a*this.size/7),"helper"!==o.tag){if(o.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==o.name&&"XYZX"!==o.name||Math.abs(F.copy(V).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Y"!==o.name&&"XYZY"!==o.name||Math.abs(F.copy(G).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Z"!==o.name&&"XYZZ"!==o.name||Math.abs(F.copy(H).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XY"===o.name&&Math.abs(F.copy(H).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"YZ"===o.name&&Math.abs(F.copy(V).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XZ"===o.name&&Math.abs(F.copy(G).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),-1!==o.name.search("X")&&(F.copy(V).applyQuaternion(t).dot(this.eye)<0?"fwd"===o.tag?o.visible=!1:o.scale.x*=-1:"bwd"===o.tag&&(o.visible=!1)),-1!==o.name.search("Y")&&(F.copy(G).applyQuaternion(t).dot(this.eye)<0?"fwd"===o.tag?o.visible=!1:o.scale.y*=-1:"bwd"===o.tag&&(o.visible=!1)),-1!==o.name.search("Z")&&(F.copy(H).applyQuaternion(t).dot(this.eye)<0?"fwd"===o.tag?o.visible=!1:o.scale.z*=-1:"bwd"===o.tag&&(o.visible=!1))}else"rotate"===this.mode&&(B.copy(t),F.copy(this.eye).applyQuaternion(z.copy(t).inverse()),-1!==o.name.search("E")&&o.quaternion.setFromRotationMatrix(j.lookAt(this.eye,N,G)),"X"===o.name&&(z.setFromAxisAngle(V,Math.atan2(-F.y,F.z)),z.multiplyQuaternions(B,z),o.quaternion.copy(z)),"Y"===o.name&&(z.setFromAxisAngle(G,Math.atan2(F.x,F.z)),z.multiplyQuaternions(B,z),o.quaternion.copy(z)),"Z"===o.name&&(z.setFromAxisAngle(H,Math.atan2(F.y,F.x)),z.multiplyQuaternions(B,z),o.quaternion.copy(z)));o.visible=o.visible&&(-1===o.name.indexOf("X")||this.showX),o.visible=o.visible&&(-1===o.name.indexOf("Y")||this.showY),o.visible=o.visible&&(-1===o.name.indexOf("Z")||this.showZ),o.visible=o.visible&&(-1===o.name.indexOf("E")||this.showX&&this.showY&&this.showZ),o.material._opacity=o.material._opacity||o.material.opacity,o.material._color=o.material._color||o.material.color.clone(),o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled?this.axis&&(o.name===this.axis||this.axis.split("").some((function(e){return o.name===e}))?(o.material.opacity=1,o.material.color.lerp(new r.Color(1,1,1),.5)):(o.material.opacity*=.25,o.material.color.lerp(new r.Color(1,1,1),.5))):(o.material.opacity*=.5,o.material.color.lerp(new r.Color(1,1,1),.5))}else o.visible=!1,"AXIS"===o.name?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,"X"===this.axis&&(z.setFromEuler(R.set(0,0,0)),o.quaternion.copy(t).multiply(z),Math.abs(F.copy(V).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),"Y"===this.axis&&(z.setFromEuler(R.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(z),Math.abs(F.copy(G).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),"Z"===this.axis&&(z.setFromEuler(R.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(z),Math.abs(F.copy(H).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),"XYZE"===this.axis&&(z.setFromEuler(R.set(0,Math.PI/2,0)),F.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(j.lookAt(N,F,G)),o.quaternion.multiply(z),o.visible=this.dragging),"E"===this.axis&&(o.visible=!1)):"START"===o.name?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):"END"===o.name?(o.position.copy(this.worldPosition),o.visible=this.dragging):"DELTA"===o.name?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),I.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),I.applyQuaternion(this.worldQuaternionStart.clone().inverse()),o.scale.copy(I),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=-1!==this.axis.search(o.name)))}r.Object3D.prototype.updateMatrixWorld.call(this)}};o.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:o,isTransformControlsGizmo:!0});var a=function(){r.Mesh.call(this,new r.PlaneBufferGeometry(1e5,1e5,2,2),new r.MeshBasicMaterial({visible:!1,wireframe:!0,side:r.DoubleSide,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var e=new r.Vector3(1,0,0),t=new r.Vector3(0,1,0),n=new r.Vector3(0,0,1),i=new r.Vector3,o=new r.Vector3,a=new r.Vector3,s=new r.Matrix4,l=new r.Quaternion;this.updateMatrixWorld=function(){var u=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(u="local"),e.set(1,0,0).applyQuaternion("local"===u?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===u?this.worldQuaternion:l),n.set(0,0,1).applyQuaternion("local"===u?this.worldQuaternion:l),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),o.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),o.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(n),o.copy(n).cross(a);break;case"XY":o.copy(n);break;case"YZ":o.copy(e);break;case"XZ":a.copy(n),o.copy(t);break;case"XYZ":case"E":o.set(0,0,0)}break;case"rotate":default:o.set(0,0,0)}0===o.length()?this.quaternion.copy(this.cameraQuaternion):(s.lookAt(i.set(0,0,0),o,a),this.quaternion.setFromRotationMatrix(s)),r.Object3D.prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(r.Mesh.prototype),{constructor:a,isTransformControlsPlane:!0})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(93),i=n(46);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(94),i=n(67),o=n(31),a=n(45),s=n(30),l=n(197),u=Object.getOwnPropertyDescriptor;t.f=n(13)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(30),i=n(18),o=n(139)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){(function(){var t,r,i,o,a,s,l,u,c,h,f,p,d,m,v,g,y,b={}.hasOwnProperty;y=n(53),g=y.isObject,v=y.isFunction,m=y.isEmpty,d=y.getValue,u=null,i=null,o=null,a=null,s=null,f=null,p=null,h=null,l=null,r=null,c=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=n(166),i=n(168),o=n(169),a=n(170),s=n(171),f=n(176),p=n(177),h=n(178),l=n(237),r=n(15),c=n(487),n(167),t=n(488))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,n,i,o;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(o="",t=0,n=(i=this.children).length;t<n;t++)(e=i[t]).textContent&&(o+=e.textContent);return o}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,n,r,i,o;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),o=[],n=0,r=(i=this.children).length;n<r;n++)t=i[n],o.push(t.setParent(this));return o},e.prototype.element=function(e,t,n){var r,i,o,a,s,l,u,c,h,f,p;if(l=null,null===t&&null==n&&(t=(h=[{},null])[0],n=h[1]),null==t&&(t={}),t=d(t),g(t)||(n=(f=[t,n])[0],t=f[1]),null!=e&&(e=d(e)),Array.isArray(e))for(o=0,u=e.length;o<u;o++)i=e[o],l=this.element(i);else if(v(e))l=this.element(e.apply());else if(g(e)){for(s in e)if(b.call(e,s))if(p=e[s],v(p)&&(p=p.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))l=this.attribute(s.substr(this.stringify.convertAttKey.length),p);else if(!this.options.separateArrayItems&&Array.isArray(p)&&m(p))l=this.dummy();else if(g(p)&&m(p))l=this.element(s);else if(this.options.keepNullNodes||null!=p)if(!this.options.separateArrayItems&&Array.isArray(p))for(a=0,c=p.length;a<c;a++)i=p[a],(r={})[s]=i,l=this.element(r);else g(p)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?l=this.element(p):(l=this.element(s)).element(p):l=this.element(s,p);else l=this.dummy()}else l=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==l)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return l},e.prototype.insertBefore=function(e,t,n){var r,i,o,a,s;if(null!=e?e.type:void 0)return a=t,(o=e).setParent(this),a?(i=children.indexOf(a),s=children.splice(i),children.push(o),Array.prototype.push.apply(children,s)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),s=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,s),r},e.prototype.insertAfter=function(e,t,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),r},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=d(e)),t||(t={}),t=d(t),g(t)||(n=(i=[t,n])[0],t=i[1]),r=new u(this,e,t),null!=n&&r.text(n),this.children.push(r),r},e.prototype.text=function(e){var t;return g(e)&&this.element(e),t=new p(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new i(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new o(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.raw=function(e){var t;return t=new f(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new l(this)},e.prototype.instruction=function(e,t){var n,r,i,o,a;if(null!=e&&(e=d(e)),null!=t&&(t=d(t)),Array.isArray(e))for(o=0,a=e.length;o<a;o++)n=e[o],this.instruction(n);else if(g(e))for(n in e)b.call(e,n)&&(r=e[n],this.instruction(n,r));else v(t)&&(t=t.apply()),i=new h(this,e,t),this.children.push(i);return this},e.prototype.instructionBefore=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.instructionAfter=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.declaration=function(e,t,n){var i,o;return i=this.document(),o=new a(i,e,t,n),0===i.children.length?i.children.unshift(o):i.children[0].type===r.Declaration?i.children[0]=o:i.children.unshift(o),i.root()||i},e.prototype.dtd=function(e,t){var n,i,o,a,l,u,c,h,f;for(n=this.document(),i=new s(n,e,t),o=a=0,u=(h=n.children).length;a<u;o=++a)if(h[o].type===r.DocType)return n.children[o]=i,i;for(o=l=0,c=(f=n.children).length;l<c;o=++l)if(f[o].isRoot)return n.children.splice(o,0,i),i;return n.children.push(i),i},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===r.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===r.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,n){return this.element(e,t,n)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var n;return this,this===e?0:this.document()!==e.document()?(n=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?n|=t.Preceding:n|=t.Following,n):this.isAncestor(e)?t.Contains|t.Preceding:this.isDescendant(e)?t.Contains|t.Following:this.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,n,r;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;t=0<=r?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(e===(t=i[n]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n},e.prototype.isFollowing=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n},e.prototype.treePosition=function(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),(function(r){if(n++,!t&&r===e)return t=!0})),t?n:-1},e.prototype.foreachTreeNode=function(e,t){var n,r,i,o,a;for(e||(e=this.document()),r=0,i=(o=e.children).length;r<i;r++){if(a=t(n=o[r]))return a;if(a=this.foreachTreeNode(n,t))return a}},e}()}).call(this)},function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return d}));var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=null,p=function(e){function t(e,n){var i;return o(this,t),(i=l(this,c(t).call(this,e,n))).userData.worldPosition=new r.Vector3,i.userData.visibleFlag=!0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),s(t,[{key:"updateMatrix",value:function(){var e=this.userData.worldPosition.clone();e.project(f.getCamera()),this.position.x=(e.x+1)/2*f.dom.clientWidth,this.position.y=-(e.y-1)/2*f.dom.clientHeight,this.visible=this.userData.visibleFlag&&0<=e.z&&e.z<=1,u(c(t.prototype),"updateMatrix",this).call(this)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.map.dispose(),this.material.dispose()}},{key:"VisibleFlag",set:function(e){this.userData.visibleFlag=e}},{key:"PropertyData",get:function(){return{id:this.userData.id,text:this.userData.text,size:this.userData.size,color:this.userData.color,position:{x:this.userData.worldPosition.x,y:this.userData.worldPosition.y,z:this.userData.worldPosition.z}}}}]),t}(r.Mesh),d=function(){function e(){o(this,e),this.labels={},this.currentLabel=null,this.createCallback=null,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.mouseDownPos=new r.Vector2}return s(e,[{key:"exists",value:function(e){return this.labels.hasOwnProperty(e)}},{key:"createLabel",value:function(e,t,n,i,o){this.createCallback=o;var a=v(t,n),s=new r.PlaneGeometry(a.width,a.height),l=new p(s,a.material);f.orthoScene.add(l),l.name=e,l.material.color=new r.Color(i),l.userData.id=e,l.userData.text=t,l.userData.size=n,l.userData.color=i,this.labels[e]=l,this.currentLabel=l,this.registerEvents()}},{key:"registerEvents",value:function(){f.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),f.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),f.dom.addEventListener("pointerup",this.pointerUpBinder,!1)}},{key:"unRegisterEvents",value:function(){f.dom.removeEventListener("pointerdown",this.pointerDownBinder),f.dom.removeEventListener("pointermove",this.pointerMoveBinder),f.dom.removeEventListener("pointerup",this.pointerUpBinder)}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.offsetX,this.mouseDownPos.y=e.offsetY)}},{key:"onPointerMove",value:function(e){var t=new r.Vector2(e.offsetX/f.dom.clientWidth*2-1,-e.offsetY/f.dom.clientHeight*2+1),n=new r.Raycaster;n.setFromCamera(t,f.getCamera());var i=n.intersectObject(f.workObjGroup,!0);i.length>0&&this.currentLabel.userData.worldPosition.copy(i[0].point)}},{key:"onPointerUp",value:function(e){0===e.button&&(new r.Vector2(e.offsetX,e.offsetY).distanceTo(this.mouseDownPos)<5&&(this.createCallback&&(this.createCallback(this.currentLabel.PropertyData),this.createCallback=null),this.currentLabel=null,this.unRegisterEvents()))}},{key:"deleteLabel",value:function(e){if(this.exists(e)){var t=this.labels[e];t.dispose(),f.orthoScene.remove(t),delete this.labels[e]}}},{key:"clear",value:function(){Object.values(this.labels).forEach((function(e){e.dispose(),f.orthoScene.remove(e)})),this.labels={}}},{key:"getAllData",value:function(){var e=[];return Object.values(this.labels).forEach((function(t){return e.push(t.PropertyData)})),e}},{key:"getData",value:function(e){return this.exists(e)?this.labels[e].PropertyData:null}},{key:"import",value:function(e){var t=this;e.forEach((function(e){var n=v(e.text,e.size),i=new r.PlaneGeometry(n.width,n.height),o=new p(i,n.material);f.orthoScene.add(o),o.name=e.id,o.material.color=new r.Color(e.color),o.userData.id=e.id,o.userData.text=e.text,o.userData.size=e.size,o.userData.color=e.color,o.userData.worldPosition.set(e.position.x,e.position.y,e.position.z),t.labels[e.id]=o}))}},{key:"show",value:function(e){this.exists(e)&&(this.labels[e].VisibleFlag=!0)}},{key:"hide",value:function(e){this.exists(e)&&(this.labels[e].VisibleFlag=!1)}},{key:"showAll",value:function(){Object.values(this.labels).forEach((function(e){return e.VisibleFlag=!0}))}},{key:"hideAll",value:function(){Object.values(this.labels).forEach((function(e){return e.VisibleFlag=!1}))}}]),e}();function m(e){f=e}function v(e,t){var n=document.createElement("canvas"),i=n.getContext("2d");i.font=t+"px sans-serif",i.textBaseline="middle",i.textAlign="center";var o=i.measureText(e).width,a=t;n.width=1.5*o,n.height=1.5*a,i.font=t+"px sans-serif",i.textBaseline="middle",i.textAlign="center",i.fillStyle="rgba(0, 0, 0, 0)",i.fillRect(0,0,n.width,n.height),i.strokeStyle="black",i.lineWidth=2,i.strokeText(e,.5*n.width,.5*n.height),i.fillStyle="white",i.fillText(e,.5*n.width,.5*n.height);var s=new r.CanvasTexture(n,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.LinearMipmapLinearFilter,r.RGBAFormat,r.UnsignedByteType,1);return s.flipY=!1,s.minFilter=r.LinearFilter,s.needsUpdate=!0,{material:new r.MeshBasicMaterial({side:r.DoubleSide,map:s,transparent:!0}),width:n.width,height:n.height}}},function(e,t,n){"use strict";n.r(t),n.d(t,"OBJLoader",(function(){return i}));var r=n(0),i=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /;function i(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,l){var u=this.vertices.length,c=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),f=this.parseVertexIndex(n,u);if(this.addVertex(c,h,f),this.colors.length>0&&this.addColor(c,h,f),void 0!==r&&""!==r){var p=this.uvs.length;c=this.parseUVIndex(r,p),h=this.parseUVIndex(i,p),f=this.parseUVIndex(o,p),this.addUV(c,h,f)}if(void 0!==a&&""!==a){var d=this.normals.length;c=this.parseNormalIndex(a,d),h=a===s?c:this.parseNormalIndex(s,d),f=a===l?c:this.parseNormalIndex(l,d),this.addNormal(c,h,f)}},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return e.startObject("",!1),e}function o(e){r.Loader.call(this,e),this.materials=null}return o.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:o,load:function(e,t,n,i){var o=this,a=new r.FileLoader(o.manager);a.setPath(this.path),a.load(e,(function(e){t(o.parse(e))}),n,i)},setMaterials:function(e){return this.materials=e,this},parse:function(o){console.time("OBJLoader");var a=new i;-1!==o.indexOf("\r\n")&&(o=o.replace(/\r\n/g,"\n")),-1!==o.indexOf("\\\n")&&(o=o.replace(/\\\n/g,""));for(var s=o.split("\n"),l="",u="",c=[],h="function"==typeof"".trimLeft,f=0,p=s.length;f<p;f++)if(l=s[f],0!==(l=h?l.trimLeft():l.trim()).length&&"#"!==(u=l.charAt(0)))if("v"===u){var d=l.split(/\s+/);switch(d[0]){case"v":a.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7&&a.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]));break;case"vn":a.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":a.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===u){for(var m=l.substr(1).trim().split(/\s+/),v=[],g=0,y=m.length;g<y;g++){var b=m[g];if(b.length>0){var x=b.split("/");v.push(x)}}var w=v[0];for(g=1,y=v.length-1;g<y;g++){var q=v[g],_=v[g+1];a.addFace(w[0],q[0],_[0],w[1],q[1],_[1],w[2],q[2],_[2])}}else if("l"===u){var S=l.substring(1).trim().split(" "),M=[],E=[];if(-1===l.indexOf("/"))M=S;else for(var T=0,P=S.length;T<P;T++){var A=S[T].split("/");""!==A[0]&&M.push(A[0]),""!==A[1]&&E.push(A[1])}a.addLineGeometry(M,E)}else if("p"===u){var O=l.substr(1).trim().split(" ");a.addPointGeometry(O)}else if(null!==(c=e.exec(l))){var L=(" "+c[0].substr(1).trim()).substr(1);a.startObject(L)}else if(n.test(l))a.object.startMaterial(l.substring(7).trim(),a.materialLibraries);else if(t.test(l))a.materialLibraries.push(l.substring(7).trim());else{if("s"!==u){if("\0"===l)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+l+'"')}if((c=l.split(" ")).length>1){var C=c[1].trim().toLowerCase();a.object.smooth="0"!==C&&"off"!==C}else a.object.smooth=!0;(W=a.object.currentMaterial())&&(W.smooth=a.object.smooth)}a.finalize();var D=new r.Group;D.materialLibraries=[].concat(a.materialLibraries);for(f=0,p=a.objects.length;f<p;f++){var k=a.objects[f],I=k.geometry,R=k.materials,F="Line"===I.type,N="Points"===I.type,j=!1;if(0!==I.vertices.length){var z=new r.BufferGeometry;z.setAttribute("position",new r.Float32BufferAttribute(I.vertices,3)),I.normals.length>0?z.setAttribute("normal",new r.Float32BufferAttribute(I.normals,3)):z.computeVertexNormals(),I.colors.length>0&&(j=!0,z.setAttribute("color",new r.Float32BufferAttribute(I.colors,3))),I.uvs.length>0&&z.setAttribute("uv",new r.Float32BufferAttribute(I.uvs,2));for(var B,U=[],V=0,G=R.length;V<G;V++){var H=R[V],W=void 0;if(null!==this.materials)if(W=this.materials.create(H.name),!F||!W||W instanceof r.LineBasicMaterial){if(N&&W&&!(W instanceof r.PointsMaterial)){var X=new r.PointsMaterial({size:10,sizeAttenuation:!1});r.Material.prototype.copy.call(X,W),X.color.copy(W.color),X.map=W.map,W=X}}else{var Y=new r.LineBasicMaterial;r.Material.prototype.copy.call(Y,W),Y.color.copy(W.color),W=Y}W||((W=F?new r.LineBasicMaterial:N?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial).name=H.name),W.flatShading=!H.smooth,W.vertexColors=j?r.VertexColors:r.NoColors,U.push(W)}if(U.length>1){for(V=0,G=R.length;V<G;V++){H=R[V];z.addGroup(H.groupStart,H.groupCount,V)}B=F?new r.LineSegments(z,U):N?new r.Points(z,U):new r.Mesh(z,U)}else B=F?new r.LineSegments(z,U[0]):N?new r.Points(z,U[0]):new r.Mesh(z,U[0]);B.name=k.name,D.add(B)}}return console.timeEnd("OBJLoader"),D}}),o}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={vertexShader:["uniform vec2 uvScale;","varying vec2 vUv;","void main()","{","   vUv = uvScale * uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D arrowTexture;","uniform vec2 arrowScale;","uniform float time;","uniform vec3 lineColor;","varying vec2 vUv;","void main( void )","{","   vec2 arrowUv = vUv * arrowScale;","   arrowUv.x -= time;","   float alpha = texture2D(arrowTexture, arrowUv).a;","   if( alpha > 0.5 ) {","       gl_FragColor = vec4(lineColor.xyz, 1);","   } else {","       gl_FragColor = vec4(lineColor.xyz, 0.2);","   }","}"].join("\n")}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(5);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e,n,i,o,a,l,c,h){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(f=s(this,u(t).call(this))).name=e,f.groupId=n,f.isBillboard=o,f.userData.property=l,f.msgTable=c,f.cameraObject=h,f.geometryTable={},f.color=i,f.material=new r.MeshBasicMaterial({color:f.color,side:r.DoubleSide}),f.position.set(a.x,a.y,a.z),f.arrowLocation="",f.arrow=null,f.createTextGeometry("kr"),f.createTextGeometry("en"),f.createTextGeometry("cn"),f.createTextGeometry("jp"),f}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(i=[{key:"createTextGeometry",value:function(e){if(this.msgTable.hasOwnProperty(e)&&V.hasOwnProperty(e)){var t=this.msgTable[e],n=V[e].generateShapes(t,1),i=new r.ShapeBufferGeometry(n);i.rotateX(-.5*Math.PI),i.computeBoundingBox();var o=new r.Vector3,a=new r.Vector3;i.boundingBox.getCenter(o),i.boundingBox.getSize(a),i.translate(-o.x,-o.y,-o.z),this.isBillboard&&(i.translate(0,0,-a.z),i.rotateX(.5*Math.PI)),this.geometryTable[e]=i}}},{key:"calculateArrowBounding",value:function(e){var t=(new r.Box3).makeEmpty();return e.traverse((function(e){e instanceof r.Mesh&&(e.geometry.computeBoundingBox(),t.expandByPoint(e.geometry.boundingBox.min),t.expandByPoint(e.geometry.boundingBox.max))})),t}},{key:"createArrowModel",value:function(e,t,n){var i=this;this.arrowLocation=t,this.arrowDirection=n;var o=this.calculateArrowBounding(e),a=new r.Vector3,s=new r.Vector3;o.getSize(a),o.getCenter(s),this.textMesh.geometry.computeBoundingBox();var l=this.textMesh.geometry.boundingBox,u=new r.Vector3,c=new r.Vector3;l.getSize(u),l.getCenter(c);var h=0,f=0;switch("up"===this.arrowLocation?f=-(.5*a.z+.5*u.z+.25):"down"===this.arrowLocation?f=.5*a.z+.5*u.z+.25:"left"===this.arrowLocation?h=-(.5*u.x+.5*a.x+.25):"right"===this.arrowLocation&&(h=.5*u.x+.5*a.x+.25),this.arrow=e.clone(),this.add(this.arrow),this.isBillboard||this.arrow.position.set(h,0,f),this.arrowDirection){case"up":this.arrow.rotateY(0);break;case"left":this.arrow.rotateY(.5*Math.PI);break;case"right":this.arrow.rotateY(-.5*Math.PI);break;case"down":this.arrow.rotateY(Math.PI);break;default:this.arrow.rotateY(0)}this.arrow.traverse((function(e){if(e.material)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t]=e.material[t].clone(),e.material.color=i.material.color;else e.material=e.material.clone(),e.material.color=i.material.color}))}},{key:"adjustArrowLocation",value:function(){var e=this.calculateArrowBounding(this.arrow),t=new r.Vector3,n=new r.Vector3;e.getSize(t),e.getCenter(n),this.textMesh.geometry.computeBoundingBox();var i=this.textMesh.geometry.boundingBox,o=new r.Vector3,a=new r.Vector3;i.getSize(o),i.getCenter(a);var s=0,l=0;"up"===this.arrowLocation?l=-(.5*t.z+.5*o.z+.25):"down"===this.arrowLocation?l=.5*t.z+.5*o.z+.25:"left"===this.arrowLocation?s=-(.5*o.x+.5*t.x+.25):"right"===this.arrowLocation&&(s=.5*o.x+.5*t.x+.25),this.isBillboard||this.arrow.position.set(s,0,l)}},{key:"setVisibleText",value:function(e){this.geometryTable.hasOwnProperty(e)&&(this.textMesh?(this.textMesh.geometry=this.geometryTable[e],this.adjustArrowLocation()):(this.textMesh=new r.Mesh(this.geometryTable[e],this.material),this.add(this.textMesh),this.textMesh.position.set(0,0,0)))}},{key:"updateMatrix",value:function(){if(l(u(t.prototype),"updateMatrix",this).call(this),this.isBillboard){var e=new r.Vector3;this.cameraObject.getWorldDirection(e),e.y=0,e.multiplyScalar(10),e.normalize(),e.negate();var n=this.quaternion.clone(),i=(new r.Quaternion).setFromRotationMatrix((new r.Matrix4).lookAt(e,new r.Vector3,this.up));n.inverse().multiply(i),this.textMesh.quaternion.copy(n)}}},{key:"dispose",value:function(){Object.values(this.geometryTable).forEach((function(e){e.dispose()})),this.material.dispose(),this.arrow.traverse((function(e){if(e.material)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].dispose();else e.material.dispose()}))}},{key:"ArrowVisible",set:function(e){this.arrow&&(this.arrow.visible=e)}},{key:"ExportData",get:function(){return{id:this.name,groupId:this.groupId,isBillboard:this.isBillboard,msgTable:this.msgTable,color:this.color,arrowLocation:this.arrowLocation,arrowDirection:this.arrowDirection,position:{x:this.position.x,y:this.position.y,z:this.position.z},rotation:{x:this.quaternion.x,y:this.quaternion.y,z:this.quaternion.z,w:this.quaternion.w},scale:this.scale.x,property:this.userData.property}}},{key:"Color",set:function(e){var t=this;this.color=e,this.material.color=new r.Color(this.color),this.arrow.traverse((function(e){if(e.material)if(e.material instanceof Array)for(var n=0;n<e.material.length;n++)e.material.color=t.material.color;else e.material.color=t.material.color}))}}])&&a(n.prototype,i),o&&a(n,o),t}(r.Object3D),f=new r.Raycaster,p=null,d=null,m=null,v=null,g=new r.Plane(new r.Vector3(0,1,0),0),y=new r.Vector2;function b(e){p&&(y.x=e.screenX,y.y=e.screenY)}function x(e){if(p){var t=new r.Vector2;t.x=e.offsetX/v.dom.clientWidth*2-1,t.y=-e.offsetY/v.dom.clientHeight*2+1,f.setFromCamera(t,v.getCamera());var n=f.intersectObjects(v.WorkGroup.children,!0);if(n&&n.length>0){var i=n[0].point;p.position.copy(i)}else{var o=new r.Vector3;f.ray.intersectPlane(g,o)&&p.position.copy(o)}}}function w(e){if(p){var t=new r.Vector2(e.screenX,e.screenY).distanceTo(y);0===e.button&&t<5&&(_(),d&&d())}}function q(e){var t=e.key.toLowerCase();"esc"!==t&&"escape"!==t||(_(),m&&m())}function _(){v.dom.removeEventListener("pointerdown",b),v.dom.removeEventListener("pointermove",x),v.dom.removeEventListener("pointerup",w),v.dom.removeEventListener("keydown",q)}var S=n(29),M=null,E=null,T=new r.Raycaster,P=new r.Vector2,A=null;function O(e){0===e.button&&(P.x=e.screenX,P.y=e.screenY)}function L(e){var t=new r.Vector2;t.x=e.offsetX/M.dom.clientWidth*2-1,t.y=-e.offsetY/M.dom.clientHeight*2+1,T.setFromCamera(t,M.getCamera());var n,i,o=T.intersectObjects(Object.values(G),!0);o&&o.length>0?(n=o[0].object,i=n,n.traverseAncestors((function(e){e instanceof h&&(i=e)})),A=i,M.dom.style.cursor="pointer"):(A=null,M.dom.style.cursor="default")}function C(e){0===e.button&&(new r.Vector2(e.screenX,e.screenY).distanceTo(P)<5&&(E.detach(),A&&E.attach(A)))}function D(e){M.getCameraControl().enabled=!e.value}function k(){"scale"===E.mode&&("X"===E.axis[0]?E.object.scale.setScalar(E.object.scale.x):"Y"===E.axis[0]?E.object.scale.setScalar(E.object.scale.y):"Z"===E.axis[0]&&E.object.scale.setScalar(E.object.scale.z))}function I(){E.detach(),M.SysGroup.remove(E),M.dom.removeEventListener("pointerdown",O),M.dom.removeEventListener("pointermove",L),M.dom.removeEventListener("pointerup",C),M.dom.style.cursor="default"}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?j(e):t}(this,N(t).call(this))).dom=e.getDom(),n.camera=e.getCamera(),n.onPointerDownBinder=n.onPointerDown.bind(j(n)),n.onPointerMoveBinder=n.onPointerMove.bind(j(n)),n.onPointerUpBinder=n.onPointerUp.bind(j(n)),n.onPointerDblClkBinder=n.onPointerDblClk.bind(j(n)),n.mouseDownPos=new r.Vector2,n.textStorage=null,n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),n=t,(i=[{key:"calculateMouseRay",value:function(e,t){var n=new r.Vector2(e/this.dom.clientWidth*2-1,-t/this.dom.clientHeight*2+1),i=new r.Raycaster;return i.setFromCamera(n,this.camera),i}},{key:"on",value:function(){this.dom.addEventListener("pointerdown",this.onPointerDownBinder,!1),this.dom.addEventListener("pointermove",this.onPointerMoveBinder,!1),this.dom.addEventListener("pointerup",this.onPointerUpBinder,!1),this.dom.addEventListener("dblclick",this.onPointerDblClkBinder,!1)}},{key:"off",value:function(){this.dom.removeEventListener("pointerdown",this.onPointerDownBinder),this.dom.removeEventListener("pointermove",this.onPointerMoveBinder),this.dom.removeEventListener("pointerup",this.onPointerUpBinder),this.dom.removeEventListener("dblclick",this.onPointerDblClkBinder)}},{key:"onPointerDown",value:function(e){if(this.textStorage){var t=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(Object.values(this.textStorage),!0);if(t.length>0){var n=null;t[0].object.traverseAncestors((function(e){e instanceof h&&(n=e)})),n&&this.dispatchEvent({type:"pointerdown",eventData:n.ExportData})}}}},{key:"onPointerMove",value:function(e){if(this.textStorage){var t=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(Object.values(this.textStorage),!0);if(t.length>0){var n=null;t[0].object.traverseAncestors((function(e){e instanceof h&&(n=e)})),n&&this.dispatchEvent({type:"pointermove",eventData:n.ExportData})}}}},{key:"onPointerUp",value:function(e){if(this.textStorage){var t=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(Object.values(this.textStorage),!0);if(t.length>0){var n=null;t[0].object.traverseAncestors((function(e){e instanceof h&&(n=e)})),n&&this.dispatchEvent({type:"pointerup",eventData:n.ExportData})}}}},{key:"onPointerDblClk",value:function(e){if(this.textStorage){var t=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(Object.values(this.textStorage),!0);if(t.length>0){var n=null;t[0].object.traverseAncestors((function(e){e instanceof h&&(n=e)})),n&&this.dispatchEvent({type:"dblclick",eventData:n.ExportData})}}}},{key:"TextStorage",set:function(e){this.textStorage=e}}])&&F(n.prototype,i),o&&F(n,o),t}(n(22).a);n.d(t,"initialize",(function(){return X})),n.d(t,"onBeforeModelMove",(function(){return Y})),n.d(t,"onAfterModelMove",(function(){return Q})),n.d(t,"FontMap",(function(){return V})),n.d(t,"TextStorage",(function(){return G})),n.d(t,"LoadFontData",(function(){return Z})),n.d(t,"LoadArrowModel",(function(){return K})),n.d(t,"Create3DText",(function(){return J})),n.d(t,"Create3DTextByMouse",(function(){return $})),n.d(t,"SetLanguageAll",(function(){return ee})),n.d(t,"SetLanguage",(function(){return te})),n.d(t,"ShowAll",(function(){return ne})),n.d(t,"HideAll",(function(){return re})),n.d(t,"Show",(function(){return ie})),n.d(t,"Hide",(function(){return oe})),n.d(t,"SetColorAll",(function(){return ae})),n.d(t,"SetColor",(function(){return se})),n.d(t,"GetProperty",(function(){return le})),n.d(t,"SetProperty",(function(){return ue})),n.d(t,"GetAllProperty",(function(){return ce})),n.d(t,"GetKeys",(function(){return he})),n.d(t,"Export",(function(){return fe})),n.d(t,"Import",(function(){return pe})),n.d(t,"EditStart",(function(){return de})),n.d(t,"EditEnd",(function(){return me})),n.d(t,"SetEditMode",(function(){return ve})),n.d(t,"Remove",(function(){return ge})),n.d(t,"Clear",(function(){return ye})),n.d(t,"SetBillboard",(function(){return be})),n.d(t,"SetArrowLocation",(function(){return xe})),n.d(t,"SetArrowDirection",(function(){return we})),n.d(t,"SetMsgTable",(function(){return qe})),n.d(t,"ShowArrow",(function(){return _e})),n.d(t,"HideArrow",(function(){return Se})),n.d(t,"ShowAllArrow",(function(){return Me})),n.d(t,"HideAllArrow",(function(){return Ee})),n.d(t,"EventOn",(function(){return Te})),n.d(t,"EventOff",(function(){return Pe})),n.d(t,"AddEventListener",(function(){return Ae})),n.d(t,"RemoveEventListener",(function(){return Oe})),n.d(t,"AddOffsetAll",(function(){return Le}));var U=null,V={},G={},H=null,W=null;function X(e){(function(e){v=e})(U=e),function(e){M=e,(E=new S.TransformControls(M.getCamera(),M.dom)).addEventListener("dragging-changed",D),E.addEventListener("objectChange",k),E.setSpace("world"),E.setMode("translate")}(U),(W=new B(U)).TextStorage=G}function Y(){Object.values(G).forEach((function(e){U.WorkGroup.traverse((function(t){t.userData.groupId===e.groupId&&t.attach(e)}))}))}function Q(){Object.values(G).forEach((function(e){U.SysGroup.attach(e)}))}function Z(e,t,n){"string"==typeof e&&(e=[e]),(new r.FontLoader).load(t,(function(t){e.forEach((function(e){V[e]=t})),n&&n()}),null,(function(e){console.error(e)}))}function K(e,t){(new i.GLTFLoader).load(e,(function(e){H=e.scene.children[0],t&&t()}))}function J(e){if(0!==Object.values(V).length)if(H)if(G.hasOwnProperty(e.id))console.warn("".concat(e.id," is already exists."));else{if(!e.position){var t=(new r.Box3).setFromObject(U.workObjGroup),n=new r.Vector3;t.getCenter(n),n.y=t.max.y,e.position={x:n.x,y:n.y,z:n.z}}e.rotation||(e.rotation={x:0,y:0,z:0,w:1}),e.scale||(e.scale=1);var i=new h(e.id,e.groupId,e.color,e.isBillboard,e.position,e.property,e.msgTable,U.getCamera());i.setVisibleText("kr"),i.createArrowModel(H,e.arrowLocation,e.arrowDirection),U.SysGroup.add(i),i.quaternion.copy(new r.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)),i.scale.setScalar(e.scale),G[e.id]=i}else console.warn("arrow model is not loaded.");else console.warn("no font loaded.")}function $(e,t,n){if(0!==Object.values(V).length)if(H)if(G.hasOwnProperty(e.id))console.warn("".concat(e.id," is already exists."));else{var r=new h(e.id,e.groupId,e.color,e.isBillboard,{x:0,y:0,z:0},e.property,e.msgTable,U.getCamera());r.setVisibleText("kr"),r.createArrowModel(H,e.arrowLocation,e.arrowDirection),U.SysGroup.add(r),r.scale.setScalar(e.scale),G[e.id]=r,p=r,d=t,m=function(){U.SysGroup.remove(r),r.dispose(),delete G[e.id],n&&n()},v.dom.addEventListener("pointerdown",b,!1),v.dom.addEventListener("pointermove",x,!1),v.dom.addEventListener("pointerup",w,!1),v.dom.addEventListener("keydown",q,!1)}else console.warn("arrow model is not loaded.");else console.warn("no font loaded.")}function ee(e){Object.values(G).forEach((function(t){t.setVisibleText(e)}))}function te(e,t){G.hasOwnProperty(e)&&G[e].setVisibleText(t)}function ne(){Object.values(G).forEach((function(e){e.visible=!0}))}function re(){Object.values(G).forEach((function(e){e.visible=!1}))}function ie(e){G.hasOwnProperty(e)&&(G[e].visible=!0)}function oe(e){G.hasOwnProperty(e)&&(G[e].visible=!1)}function ae(e){Object.values(G).forEach((function(t){t.Color=e}))}function se(e,t){G.hasOwnProperty(e)&&(G[e].Color=t)}function le(e){if(G.hasOwnProperty(e))return G[e].userData.property}function ue(e,t){G.hasOwnProperty(e)&&(G[e].userData.property=t)}function ce(){var e={};for(var t in G)e[t]=G[t].userData.property;return e}function he(){return Object.keys(G)}function fe(e){var t={};for(var n in G)t[n]=G[n].ExportData;return e?JSON.stringify(t):t}function pe(e){0!==Object.values(V).length?H?(ye(),"string"==typeof e&&(e=JSON.parse(e)),Object.values(e).forEach((function(e){J(e)}))):console.warn("arrow model is not loaded."):console.warn("no font loaded.")}function de(){I(),M.SysGroup.add(E),M.dom.addEventListener("pointerdown",O,!1),M.dom.addEventListener("pointermove",L,!1),M.dom.addEventListener("pointerup",C,!1),M.dom.style.cursor="default"}function me(){I()}function ve(e){!function(e){switch(E.setMode(e),e){case"translate":E.showX=!0,E.showY=!0,E.showZ=!0;break;case"rotate":E.showX=!1,E.showY=!0,E.showZ=!1;break;case"scale":default:E.showX=!0,E.showY=!0,E.showZ=!0}}(e)}function ge(e){if(e in G){var t=G[e];U.SysGroup.remove(t),t.dispose(),delete G[e]}}function ye(){Object.values(G).forEach((function(e){U.SysGroup.remove(e),e.dispose()})),G={},W.TextStorage=G}function be(e,t){if(e in G){var n=G[e].ExportData;ge(e),n.isBillboard=t,J(n)}}function xe(e,t){if(e in G){var n=G[e].ExportData;ge(e),n.arrowLocation=t,J(n)}}function we(e,t){if(e in G){var n=G[e].ExportData;ge(e),n.arrowDirection=t,J(n)}}function qe(e,t){if(e in G){var n=G[e].ExportData;ge(e),Object.assign(n.msgTable,t),J(n)}}function _e(e){G.hasOwnProperty(e)&&(G[e].ArrowVisible=!0)}function Se(e){G.hasOwnProperty(e)&&(G[e].ArrowVisible=!1)}function Me(){Object.values(G).forEach((function(e){return e.ArrowVisible=!0}))}function Ee(){Object.values(G).forEach((function(e){return e.ArrowVisible=!1}))}function Te(){W.on()}function Pe(){W.off()}function Ae(e,t){W.addEventListener(e,t)}function Oe(e,t){W.removeEventListener(e,t)}function Le(e,t,n){Object.values(G).forEach((function(r){r.position.x+=e,r.position.y+=t,r.position.z+=n,r.updateMatrix()}))}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(21);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(1),i=n(40),o=n(7);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(41),i=n(93),o=n(18),a=n(10),s=n(155);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,h=6==e,f=5==e||h,p=t||s;return function(t,s,d){for(var m,v,g=o(t),y=i(g),b=r(s,d,3),x=a(y.length),w=0,q=n?p(t,x):l?p(t,0):void 0;x>w;w++)if((f||w in y)&&(v=b(m=y[w],w,g),e))if(n)q[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:q.push(m)}else if(c)return!1;return h?-1:u||c?c:q}}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"loadPoiData",(function(){return s}));var i={};n.r(i),n.d(i,"loadArrow",(function(){return y})),n.d(i,"loadPowerLine",(function(){return b})),n.d(i,"update",(function(){return x})),n.d(i,"show",(function(){return q})),n.d(i,"hide",(function(){return _}));var o={};n.r(o),n.d(o,"setWalkableObject",(function(){return M})),n.d(o,"updateHeight",(function(){return E}));var a=n(0);n(54);function s(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){if(r.readyState===r.DONE&&200===r.status){var e=r.response;"string"==typeof e&&(e=JSON.parse(e)),console.log("poi types",Object.keys(e));var i=[];for(var o in e)for(var s=e[o],l=s.displayText,u=s.url,c=s.objects,h=0;h<c.length;h++){var f=c[h],p=f.name,d=f.order,m="1F";1===d?m="1F":2===d?m="2F":3===d?m="3F":4===d&&(m="Roof");var v=t.getObjectByName(p);if(v){var g=(new a.Box3).setFromObject(v),y=new a.Vector3;g.getCenter(y),i.push({type:"sphere",id:p,group:o,position:{x:y.x,y:y.y,z:y.z},scale:{x:1,y:1,z:1},iconUrl:u,lineHeight:4,displayText:l,property:{floorNo:d,type:o,floorName:m}})}}n&&n(i)}},r.send()}var l=n(5),u=n(2),c=(n(191),!1),h=null,f=null,p=null,d={},m=[["powerline_point_0","powerline_point_1","powerline_point_8","powerline_point_9","powerline_point_10","powerline_point_11"],["powerline_point_0","powerline_point_1","powerline_point_2","powerline_point_3","powerline_point_4"],["powerline_point_0","powerline_point_1","powerline_point_5","powerline_point_6","powerline_point_7"],["powerline_point_0","powerline_point_1","powerline_point_8","powerline_point_12","powerline_point_13"],["powerline_point_14","powerline_point_15","powerline_point_16","powerline_point_17","powerline_point_18","powerline_point_19"],["powerline_point_14","powerline_point_15","powerline_point_16","powerline_point_20","powerline_point_21","powerline_point_22"],["powerline_point_23","powerline_point_24","powerline_point_25","powerline_point_26","powerline_point_27"],["powerline_point_23","powerline_point_24","powerline_point_28","powerline_point_29","powerline_point_30"],["powerline_point_31","powerline_point_32","powerline_point_33","powerline_point_34","powerline_point_35","powerline_point_36","powerline_point_37","powerline_point_38"],["powerline_point_31","powerline_point_32","powerline_point_33","powerline_point_34","powerline_point_35","powerline_point_36","powerline_point_39","powerline_point_40"],["powerline_point_31","powerline_point_32","powerline_point_33","powerline_point_34","powerline_point_35","powerline_point_41","powerline_point_42","powerline_point_43"],["powerline_point_44","powerline_point_45","powerline_point_46","powerline_point_47","powerline_point_48"],["powerline_point_44","powerline_point_45","powerline_point_49","powerline_point_50","powerline_point_51"],["powerline_point_44","powerline_point_45","powerline_point_52","powerline_point_53","powerline_point_54"],["powerline_point_44","powerline_point_45","powerline_point_55","powerline_point_56","powerline_point_57"]],v=0,g=[];function y(e,t,n){(new l.GLTFLoader).load(t,(function(e){f=e.scene,n&&n()}),null,(function(e){console.error(e)}))}function b(e,t,n){(new l.GLTFLoader).load(t,(function(t){(p=t.scene).visible=c,e.add(p),h=new a.Object3D,e.add(h),d={},p.traverse((function(e){e instanceof a.Mesh&&e.name.includes("powerline_point")&&(e.visible=!1,d[e.name]=e)})),n&&n(),console.log(d)}),null,(function(e){console.error(e)}))}function x(e){if(f&&h&&Object.keys(d).length>0&&(v+=e)>=1){v=0;for(var t=function(e){var t=f.clone();h.add(t);for(var n=m[e],r=[],i=0;i<n.length-1;i++){var o=n[i],s=n[i+1],l=d[o],u=d[s],c=new a.Vector3,p=new a.Vector3;l.getWorldPosition(c),u.getWorldPosition(p),r.push(w(c,p,t)),0===i&&t.position.copy(c)}for(var v=0;v<r.length-1;v++)r[v].chain(r[v+1]);r[r.length-1].onComplete((function(){h.remove(t)})),r[0].start()},n=0;n<m.length;n++)t(n);S()}}function w(e,t,n){var r=e.distanceTo(t),i={ratio:0};return new u.a.Tween(i).to({ratio:1},10*r/.1).easing(u.a.Easing.Linear.None).onUpdate((function(){n.position.copy((new a.Vector3).lerpVectors(e,t,i.ratio)),n.lookAt(t),n.updateMatrix()}))}function q(e){if(c=!0,S(),e){var t=e.parent;t.remove(e),e.traverse((function(e){if(e instanceof a.Mesh&&!e.name.includes("AC")&&!e.name.includes("ceilling")&&!e.name.includes("celling"))if(e.material instanceof Array){g.push({object:e,originalMaterial:e.material.slice()});for(var t=0;t<e.material.length;t++)e.material[t]=e.material[t].clone(),e.material[t].transparent=!0,e.material[t].opacity=.1,e.material[t].side=a.DoubleSide}else g.push({object:e,originalMaterial:e.material}),e.material=e.material.clone(),e.material.transparent=!0,e.material.opacity=.1,e.material.side=a.DoubleSide})),t.add(e)}}function _(e){c=!1,S();for(var t=0;t<g.length;t++){var n=g[t],r=n.object.parent;if(r&&r.remove(n.object),n.object.material instanceof Array)for(var i=0;i<n.object.material.length;i++)n.object.material[i].dispose();else n.object.material.dispose();n.object.material=n.originalMaterial,r&&r.add(n.object)}g=[]}function S(){p.visible=c,h.traverse((function(e){e instanceof a.Mesh&&(e.visible=c)}))}function M(e,t){for(var n=["S_Magic_1F_STR_Floor","S_Magic_2F_STR_Floor","S_Magic_3F_STR_Floor"],r=[],i=0;i<n.length;i++){var o=n[i],a=e.getObjectByName(o);a&&r.push(a)}t.setPickObject(r)}function E(e){e.updateCameraHeight()}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if(n(13)){var i=n(58),o=n(6),a=n(7),s=n(1),l=n(114),u=n(163),c=n(41),h=n(74),f=n(67),p=n(26),d=n(76),m=n(43),v=n(10),g=n(225),y=n(70),b=n(45),x=n(30),w=n(84),q=n(8),_=n(18),S=n(152),M=n(71),E=n(33),T=n(72).f,P=n(154),A=n(68),O=n(9),L=n(48),C=n(104),D=n(96),k=n(157),I=n(86),R=n(109),F=n(73),N=n(156),j=n(214),z=n(14),B=n(32),U=z.f,V=B.f,G=o.RangeError,H=o.TypeError,W=o.Uint8Array,X=Array.prototype,Y=u.ArrayBuffer,Q=u.DataView,Z=L(0),K=L(2),J=L(3),$=L(4),ee=L(5),te=L(6),ne=C(!0),re=C(!1),ie=k.values,oe=k.keys,ae=k.entries,se=X.lastIndexOf,le=X.reduce,ue=X.reduceRight,ce=X.join,he=X.sort,fe=X.slice,pe=X.toString,de=X.toLocaleString,me=O("iterator"),ve=O("toStringTag"),ge=A("typed_constructor"),ye=A("def_constructor"),be=l.CONSTR,xe=l.TYPED,we=l.VIEW,qe=L(1,(function(e,t){return Te(D(e,e[ye]),t)})),_e=a((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Se=!!W&&!!W.prototype.set&&a((function(){new W(1).set({})})),Me=function(e,t){var n=m(e);if(n<0||n%t)throw G("Wrong offset!");return n},Ee=function(e){if(q(e)&&xe in e)return e;throw H(e+" is not a typed array!")},Te=function(e,t){if(!q(e)||!(ge in e))throw H("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Ae(D(e,e[ye]),t)},Ae=function(e,t){for(var n=0,r=t.length,i=Te(e,r);r>n;)i[n]=t[n++];return i},Oe=function(e,t,n){U(e,t,{get:function(){return this._d[n]}})},Le=function(e){var t,n,r,i,o,a,s=_(e),l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,f=P(s);if(null!=f&&!S(f)){for(a=f.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(h&&l>2&&(u=c(u,arguments[2],2)),t=0,n=v(s.length),i=Te(this,n);n>t;t++)i[t]=h?u(s[t],t):s[t];return i},Ce=function(){for(var e=0,t=arguments.length,n=Te(this,t);t>e;)n[e]=arguments[e++];return n},De=!!W&&a((function(){de.call(new W(1))})),ke=function(){return de.apply(De?fe.call(Ee(this)):Ee(this),arguments)},Ie={copyWithin:function(e,t){return j.call(Ee(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(Ee(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(Ee(this),arguments)},filter:function(e){return Pe(this,K(Ee(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Ee(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return te(Ee(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Ee(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Ee(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ne(Ee(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Ee(this),arguments)},lastIndexOf:function(e){return se.apply(Ee(this),arguments)},map:function(e){return qe(Ee(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return le.apply(Ee(this),arguments)},reduceRight:function(e){return ue.apply(Ee(this),arguments)},reverse:function(){for(var e,t=Ee(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return J(Ee(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return he.call(Ee(this),e)},subarray:function(e,t){var n=Ee(this),r=n.length,i=y(e,r);return new(D(n,n[ye]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===t?r:y(t,r))-i))}},Re=function(e,t){return Pe(this,fe.call(Ee(this),e,t))},Fe=function(e){Ee(this);var t=Me(arguments[1],1),n=this.length,r=_(e),i=v(r.length),o=0;if(i+t>n)throw G("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Ne={entries:function(){return ae.call(Ee(this))},keys:function(){return oe.call(Ee(this))},values:function(){return ie.call(Ee(this))}},je=function(e,t){return q(e)&&e[xe]&&"symbol"!=r(t)&&t in e&&String(+t)==String(t)},ze=function(e,t){return je(e,t=b(t,!0))?f(2,e[t]):V(e,t)},Be=function(e,t,n){return!(je(e,t=b(t,!0))&&q(n)&&x(n,"value"))||x(n,"get")||x(n,"set")||n.configurable||x(n,"writable")&&!n.writable||x(n,"enumerable")&&!n.enumerable?U(e,t,n):(e[t]=n.value,e)};be||(B.f=ze,z.f=Be),s(s.S+s.F*!be,"Object",{getOwnPropertyDescriptor:ze,defineProperty:Be}),a((function(){pe.call({})}))&&(pe=de=function(){return ce.call(this)});var Ue=d({},Ie);d(Ue,Ne),p(Ue,me,Ne.values),d(Ue,{slice:Re,set:Fe,constructor:function(){},toString:pe,toLocaleString:ke}),Oe(Ue,"buffer","b"),Oe(Ue,"byteOffset","o"),Oe(Ue,"byteLength","l"),Oe(Ue,"length","e"),U(Ue,ve,{get:function(){return this[xe]}}),e.exports=function(e,t,n,r){var u=e+((r=!!r)?"Clamped":"")+"Array",c="get"+e,f="set"+e,d=o[u],m=d||{},y=d&&E(d),b=!d||!l.ABV,x={},_=d&&d.prototype,S=function(e,n){U(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[c](n*t+r.o,_e)}(this,n)},set:function(e){return function(e,n,i){var o=e._d;r&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[f](n*t+o.o,i,_e)}(this,n,e)},enumerable:!0})};b?(d=n((function(e,n,r,i){h(e,d,u,"_d");var o,a,s,l,c=0,f=0;if(q(n)){if(!(n instanceof Y||"ArrayBuffer"==(l=w(n))||"SharedArrayBuffer"==l))return xe in n?Ae(d,n):Le.call(d,n);o=n,f=Me(r,t);var m=n.byteLength;if(void 0===i){if(m%t)throw G("Wrong length!");if((a=m-f)<0)throw G("Wrong length!")}else if((a=v(i)*t)+f>m)throw G("Wrong length!");s=a/t}else s=g(n),o=new Y(a=s*t);for(p(e,"_d",{b:o,o:f,l:a,e:s,v:new Q(o)});c<s;)S(e,c++)})),_=d.prototype=M(Ue),p(_,"constructor",d)):a((function(){d(1)}))&&a((function(){new d(-1)}))&&R((function(e){new d,new d(null),new d(1.5),new d(e)}),!0)||(d=n((function(e,n,r,i){var o;return h(e,d,u),q(n)?n instanceof Y||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==i?new m(n,Me(r,t),i):void 0!==r?new m(n,Me(r,t)):new m(n):xe in n?Ae(d,n):Le.call(d,n):new m(g(n))})),Z(y!==Function.prototype?T(m).concat(T(y)):T(m),(function(e){e in d||p(d,e,m[e])})),d.prototype=_,i||(_.constructor=d));var P=_[me],A=!!P&&("values"==P.name||null==P.name),O=Ne.values;p(d,ge,!0),p(_,xe,u),p(_,we,!0),p(_,ye,d),(r?new d(1)[ve]==u:ve in _)||U(_,ve,{get:function(){return u}}),x[u]=d,s(s.G+s.W+s.F*(d!=m),x),s(s.S,u,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*a((function(){m.of.call(d,1)})),u,{from:Le,of:Ce}),"BYTES_PER_ELEMENT"in _||p(_,"BYTES_PER_ELEMENT",t),s(s.P,u,Ie),F(u),s(s.P+s.F*Se,u,{set:Fe}),s(s.P+s.F*!A,u,Ne),i||_.toString==pe||(_.toString=pe),s(s.P+s.F*a((function(){new d(1).slice()})),u,{slice:Re}),s(s.P+s.F*(a((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!a((function(){_.toLocaleString.call([1,2])}))),u,{toLocaleString:ke}),I[u]=A?P:O,i||A||p(_,me,O)}}else e.exports=function(){}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(220),o=n(1),a=n(92)("metadata"),s=a.store||(a.store=new(n(223))),l=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o};e.exports={store:s,map:l,has:function(e,t,n){var r=l(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=l(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){l(n,r,!0).set(e,t)},keys:function(e,t){var n=l(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==r(e)?e:String(e)},exp:function(e){o(o.S,"Reflect",e)}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=s(f);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){var t,r,i,o,a,s,l,u=[].slice,c={}.hasOwnProperty;t=function(){var e,t,n,r,i,o;if(o=arguments[0],i=2<=arguments.length?u.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=i.length;e<n;e++)if(null!=(r=i[e]))for(t in r)c.call(r,t)&&(o[t]=r[t]);return o},a=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},s=function(e){var t;return!!e&&("function"===(t=n(e))||"object"===t)},i=function(e){return a(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){var t;if(i(e))return!e.length;for(t in e)if(c.call(e,t))return!1;return!0},l=function(e){var t,n;return s(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return a(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=a,e.exports.isObject=s,e.exports.isArray=i,e.exports.isEmpty=o,e.exports.isPlainObject=l,e.exports.getValue=r}).call(this)},function(e,t,n){"use strict";n.r(t),n.d(t,"PxPoiElement",(function(){return v}));var r=n(0),i=n(2),o=n(126);n(61);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return s(this,t),c(this,f(t).apply(this,arguments))}return p(t,e),u(t,[{key:"raycast",value:function(e,t){}}]),t}(r.Line),v=function(e){function t(e,n,i,o,a,l,u,p,d,v){var g;if(s(this,t),(g=c(this,f(t).call(this))).name=e,g.matrixAutoUpdate=!1,g.pointObject=i.clone(),g.pointObject.name=e+"/Point",g.pointObjDummyRoot=new r.Object3D,g.pointObjDummyRoot.add(g.pointObject),g.add(g.pointObjDummyRoot),g.pointObjDummyRoot.scale.copy(v),g.pointObjDummyRoot.updateMatrix(),g.pointObjectScale=v,g.lightShaftUpdateFunc=null,g.initializeLightShaft(),i.animations&&i.animations.length>0){g.pointObject.animations=[];for(var y=0;y<i.animations.length;y++)g.pointObject.animations[y]=i.animations[y].clone();if(g.mixer=new r.AnimationMixer(g.pointObject),g.action={},g.pointObject.animations.forEach((function(e,t){g.action[e.name.toLowerCase()]=g.mixer.clipAction(g.pointObject.animations[t]),g.action[e.name.toLowerCase()].stop()})),"idle"in g.action)g.action.idle.play();else if("ready"in g.action)g.action.ready.play();else{var b=Object.keys(g.action);g.action[b[0]].play()}}var x=(new r.Box3).setFromObject(i),w=new r.Vector3,q=new r.Vector3;x.getCenter(q),x.getSize(w);q.y,w.y;if(0,o||(o=0),o>0){var _=new r.BufferGeometry;_.setAttribute("position",new r.Float32BufferAttribute([0,0,0,0,0+o,0],3)),g.line=new m(_,a),g.line.matrixAutoUpdate=!1,g.add(g.line)}g.billboardGroup=new r.Object3D,g.billboardGroup.name=e+"/BillboardGroup",g.add(g.billboardGroup),g.billboardGroup.matrixAutoUpdate=!1,g.billboardGroup.position.set(0,0+o,0),g.billboardGroup.updateMatrix(),l&&u&&(g.icon=new r.Mesh(u,l),g.billboardGroup.add(g.icon),g.icon.matrixAutoUpdate=!1,g.icon.name=e+"/Icon"),p&&d&&(g.textScaleRatio=1,g.textRatio=.75,g.textSize=d,g.text=new r.Mesh(u,p),g.billboardGroup.add(g.text),g.text.matrixAutoUpdate=!1,g.text.name=e+"/Text",g.text.position.set(0,1,0),g.text.scale.set(.05*g.textSize.x*g.textRatio*g.textScaleRatio,.05*g.textSize.y*g.textRatio*g.textScaleRatio,1),g.text.updateMatrix()),g.userData.id=e,g.userData.group=n,g.userData.lineHeight=o,g.userData.topHeight=0;var S=h(g);return g.originalMaterials=[],g.clonedMaterials=[],g.traverse((function(e){e.material&&S.originalMaterials.push({object:e,material:e.material})})),g.bIsLineVisible=!0,g.bIsIconVisible=!0,g.bIsTextVisible=p&&d,g}return p(t,e),u(t,[{key:"update",value:function(e,t,n){this.mixer&&this.mixer.update(n);var i=new r.Vector3;e.getWorldDirection(i);var o=new r.Vector3;this.billboardGroup.getWorldPosition(o);var a=(new r.Plane).setFromNormalAndCoplanarPoint(i,e.position),s=.05*a.distanceToPoint(o),l=new r.Vector3;a.projectPoint(o,l);var u=1;if(t.isLodExist){var c=t.findLod(this.userData.group,this.userData.property.subCategory,a.distanceToPoint(o));c&&(u=c.scaleRatio,this.icon&&(c.isShowIcon&&this.bIsIconVisible?this.billboardGroup.add(this.icon):this.billboardGroup.remove(this.icon)),this.text&&(c.isShowText&&this.bIsTextVisible?this.billboardGroup.add(this.text):this.billboardGroup.remove(this.text)),this.line&&((c.isShowIcon||c.isShowText)&&this.bIsLineVisible?this.add(this.line):this.remove(this.line)))}else this.bIsLineVisible?this.add(this.line):this.remove(this.line),this.bIsIconVisible?this.billboardGroup.add(this.icon):this.billboardGroup.remove(this.icon),this.bIsTextVisible?this.billboardGroup.add(this.text):this.billboardGroup.remove(this.text);var h=1;e instanceof r.OrthographicCamera?(h=e.zoom,this.billboardGroup.scale.setScalar(2.5/h)):this.billboardGroup.scale.set(s*u*h,s*u*h,s*u*h),this.billboardGroup.lookAt(l),this.billboardGroup.updateMatrix(),this.lightShaftUpdateFunc&&this.lightShaftUpdateFunc()}},{key:"dispose",value:function(){this.text&&(this.billboardGroup.remove(this.text),this.text.material.map&&this.text.material.map.dispose(),this.text.material.dispose()),this.icon&&this.billboardGroup.remove(this.icon),this.remove(this.billboardGroup),this.line&&(this.remove(this.line),this.line.geometry.dispose()),this.remove(this.pointObject)}},{key:"getData",value:function(){return{type:this.userData.type,url:this.userData.url,id:this.userData.id,group:this.userData.group,lineHeight:this.userData.lineHeight,position:{x:this.position.x,y:this.position.y,z:this.position.z},rotation:{x:this.pointObject.rotation.x,y:this.pointObject.rotation.y,z:this.pointObject.rotation.z},scale:{x:100*this.scale.x,y:100*this.scale.y,z:100*this.scale.z},iconUrl:this.userData.iconUrl,displayText:this.userData.displayText,property:this.userData.property}}},{key:"pickTest",value:function(e){var t=e.intersectObjects([this],!0);return t&&t.length>0?{object:this,distance:t[0].distance,point:t[0].point.clone()}:null}},{key:"get2DPosition",value:function(e){var t=this.position.clone();return t.y+=this.userData.topHeight+this.userData.lineHeight,e.updateMatrixWorld(),t.project(e),t}},{key:"setIconImage",value:function(e,t){this.icon&&(this.icon.material=e)}},{key:"setComponent",value:function(e){this.remove(this.pointObject),this.pointObject=e.clone(),this.pointObject.name=this.userData.id+"/Point",this.add(this.pointObject),this.line&&this.setLineHeight(this.userData.lineHeight,this.line.material)}},{key:"setPosition",value:function(e,t,n,o,a,s,l,u,c,h){if(o||(o=0),a||(a=0),s||(s=0),l||(l=1),u){this.tweenInstance&&this.tweenInstance.stop();var f=this;this.tweenInstance=new i.a.Tween(this.position).to({x:e,y:t,z:n},c).easing(i.a.Easing.Linear.None).onUpdate((function(){f.pointObject.quaternion.copy((new r.Quaternion).set(o,a,s,l)),f.updateMatrix()})).onComplete((function(){h&&h()})).start().console.log(this.tweenInstance)}else this.pointObject.quaternion.copy((new r.Quaternion).set(o,a,s,l)),this.position.set(e,t,n),this.updateMatrix(),h&&h()}},{key:"setLineHeight",value:function(e,t){var n={colorChanged:!1,color:t.color.clone()};this.line&&(this.line.material.uuid!==t.uuid&&(n.colorChanged=!0,n.color=this.line.material.color.clone()),this.remove(this.line),this.line.geometry.dispose(),this.line=null);var i=(new r.Box3).setFromObject(this.pointObject),o=new r.Vector3,a=new r.Vector3;i.getCenter(a),i.getSize(o);a.y,o.y;if(0,e>0){var s=new r.BufferGeometry;s.setAttribute("position",new r.Float32BufferAttribute([0,0,0,0,0+e,0],3)),n.colorChanged?(this.line=new m(s,t.clone()),this.line.material.color=n.color.clone()):this.line=new m(s,t),this.line.matrixAutoUpdate=!1,this.add(this.line),this.billboardGroup.position.set(0,0+e,0),this.billboardGroup.updateMatrix()}this.userData.lineHeight=e,this.userData.topHeight=0}},{key:"setText",value:function(e,t,n,i){this.text&&(this.billboardGroup.remove(this.text),this.text.material.dispose(),this.text.material=null,this.text=null),this.text=new r.Mesh(e,t),this.billboardGroup.add(this.text),this.text.matrixAutoUpdate=!1,this.text.name=this.userData.id+"/Text",this.textSize=n,this.text.position.set(0,1,0),this.text.scale.set(.05*this.textSize.x*this.textRatio*this.textScaleRatio,.05*this.textSize.y*this.textRatio*this.textScaleRatio,1),this.text.updateMatrix(),this.userData.displayText=i}},{key:"setIconSize",value:function(e,t){this.icon.scale.set(e,e,1),this.icon.updateMatrix(),this.text.position.set(0,e,0),this.text.updateMatrix(),t&&t()}},{key:"setTextSize",value:function(e,t){this.textScaleRatio=e,this.text.scale.set(.05*this.textSize.x*this.textRatio*this.textScaleRatio,.05*this.textSize.y*this.textRatio*this.textScaleRatio,1),this.text.updateMatrix(),t&&t()}},{key:"setColor",value:function(e){for(var t=0;t<this.clonedMaterials.length;t++){var n=this.clonedMaterials[t].material;if(n instanceof Array)for(var i=0;i<n.length;i++)n[i].dispose();else n.dispose()}this.clonedMaterials=[];var o=this;this.traverse((function(t){if(t.material instanceof Array){for(var n=[],i=0;i<t.material.length;i++){var a=t.material[i].clone();a.color=new r.Color(e),n.push(a)}t.material=n,o.clonedMaterials.push({object:t,material:n})}else if(t.material){var s=t.material.clone();s.color=new r.Color(e),t.material=s,o.clonedMaterials.push({object:t,material:t.material})}}))}},{key:"restoreColor",value:function(){for(var e=0;e<this.clonedMaterials.length;e++){var t=this.clonedMaterials[e].material;if(t instanceof Array)for(var n=0;n<t.length;n++)t[n].dispose();else t.dispose()}this.clonedMaterials=[];for(var r=0;r<this.originalMaterials.length;r++){var i=this.originalMaterials[r];i.object.material=i.material}}},{key:"setTextColor",value:function(e){this.text.material.color=new r.Color(e)}},{key:"setVisibleOption",value:function(e,t,n){this.bIsLineVisible=e,this.bIsIconVisible=t,this.bIsTextVisible=n}},{key:"animationPlay",value:function(e){e in this.action&&(this.action[e].loop===r.LoopOnce&&this.action[e].reset(),this.action[e].play())}},{key:"animationStop",value:function(e){e in this.action&&this.action[e].stop()}},{key:"animationStopAll",value:function(){Object.values(this.action).forEach((function(e){return e.stop()}))}},{key:"setAnimationLoopType",value:function(e){var t=r.LoopRepeat,n=!1;"repeat"===e?(t=r.LoopRepeat,n=!1):"once"===e?(t=r.LoopOnce,n=!0):"pingpong"===e&&(t=r.LoopPingPong,n=!1),Object.values(this.action).forEach((function(e){e.loop=t,e.clampWhenFinished=n}))}},{key:"setPointSize",value:function(e,t){this.pointObjDummyRoot.scale.setScalar(e),this.pointObjDummyRoot.updateMatrix(),t&&t()}},{key:"setAnimatedIcon",value:function(e){this.animatedIcon?this.animatedIcon.material=e:(this.animatedIcon=new r.Mesh(this.icon.geometry,e),this.billboardGroup.add(this.animatedIcon),this.animatedIcon.matrixAutoUpdate=!1,this.animatedIcon.name=this.id+"/AnimatedIcon",this.animatedIcon.position.set(0,2,0),this.animatedIcon.scale.setScalar(2),this.animatedIcon.updateMatrix())}},{key:"disableAnimatedIcon",value:function(){this.animatedIcon&&(this.billboardGroup.remove(this.animatedIcon),this.animatedIcon=null)}},{key:"initializeLightShaft",value:function(){var e=this;this.pointObject.traverse((function(t){if("lightshaft"===t.name.toLowerCase()){t.updateMatrixWorld(!0);var n=new r.Vector3;t.getWorldPosition(n),t.material=o.createLightShaftShaderMaterial(t.userData.property.attenuation,t.userData.property.anglePower,n),e.lightShaftUpdateFunc=function(){var e=new r.Vector3;t.getWorldPosition(e),t.material.uniforms.objectWorldPosition.value=e},e.lightShaftUpdateFunc(),t.visible=!1}}))}},{key:"setLightShaftVisible",value:function(e){this.pointObject.traverse((function(t){"lightshaft"===t.name.toLowerCase()&&(t.visible=e)}))}},{key:"PointDummyRoot",get:function(){return this.pointObjDummyRoot}}]),t}(r.Object3D)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setCoreInstance",(function(){return M})),n.d(r,"render",(function(){return A})),n.d(r,"onResize",(function(){return L})),n.d(r,"IsUseLightEffect",(function(){return P})),n.d(r,"Enable",(function(){return E})),n.d(r,"Disable",(function(){return T})),n.d(r,"SetLightPoi",(function(){return O})),n.d(r,"SetBloomStrengths",(function(){return C}));var i=n(0),o={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=t.array,o=n.position.array,a=n.normal.array,s=n.uv.array,l=o.length/3;void 0===n.tangent&&e.setAttribute("tangent",new i.BufferAttribute(new Float32Array(4*l),4));for(var u=n.tangent.array,c=[],h=[],f=0;f<l;f++)c[f]=new i.Vector3,h[f]=new i.Vector3;var p=new i.Vector3,d=new i.Vector3,m=new i.Vector3,v=new i.Vector2,g=new i.Vector2,y=new i.Vector2,b=new i.Vector3,x=new i.Vector3,w=e.groups;0===w.length&&(w=[{start:0,count:r.length}]);f=0;for(var q=w.length;f<q;++f)for(var _=D=(C=w[f]).start,S=D+C.count;_<S;_+=3)k(r[_+0],r[_+1],r[_+2]);var M,E,T,P=new i.Vector3,A=new i.Vector3,O=new i.Vector3,L=new i.Vector3;for(f=0,q=w.length;f<q;++f){var C,D;for(_=D=(C=w[f]).start,S=D+C.count;_<S;_+=3)I(r[_+0]),I(r[_+1]),I(r[_+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function k(e,t,n){p.fromArray(o,3*e),d.fromArray(o,3*t),m.fromArray(o,3*n),v.fromArray(s,2*e),g.fromArray(s,2*t),y.fromArray(s,2*n);var r=d.x-p.x,i=m.x-p.x,a=d.y-p.y,l=m.y-p.y,u=d.z-p.z,f=m.z-p.z,w=g.x-v.x,q=y.x-v.x,_=g.y-v.y,S=y.y-v.y,M=1/(w*S-q*_);b.set((S*r-_*i)*M,(S*a-_*l)*M,(S*u-_*f)*M),x.set((w*i-q*r)*M,(w*l-q*a)*M,(w*f-q*u)*M),c[e].add(b),c[t].add(b),c[n].add(b),h[e].add(x),h[t].add(x),h[n].add(x)}function I(e){O.fromArray(a,3*e),L.copy(O),E=c[e],P.copy(E),P.sub(O.multiplyScalar(O.dot(E))).normalize(),A.crossVectors(L,E),T=A.dot(h[e]),M=T<0?-1:1,u[4*e]=P.x,u[4*e+1]=P.y,u[4*e+2]=P.z,u[4*e+3]=M}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),a={},s={},l=new i.BufferGeometry,u=0,c=0;c<e.length;++c){var h=e[c];if(n!==(null!==h.index))return null;for(var f in h.attributes){if(!r.has(f))return null;void 0===a[f]&&(a[f]=[]),a[f].push(h.attributes[f])}for(var f in h.morphAttributes){if(!o.has(f))return null;void 0===s[f]&&(s[f]=[]),s[f].push(h.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),t){var p;if(n)p=h.index.count;else{if(void 0===h.attributes.position)return null;p=h.attributes.position.count}l.addGroup(u,p,c),u+=p}}if(n){var d=0,m=[];for(c=0;c<e.length;++c){for(var v=e[c].index,g=0;g<v.count;++g)m.push(v.getX(g)+d);d+=e[c].attributes.position.count}l.setIndex(m)}for(var f in a){var y=this.mergeBufferAttributes(a[f]);if(!y)return null;l.setAttribute(f,y)}for(var f in s){var b=s[f][0].length;if(0===b)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[f]=[];for(c=0;c<b;++c){var x=[];for(g=0;g<s[f].length;++g)x.push(s[f][g][c]);var w=this.mergeBufferAttributes(x);if(!w)return null;l.morphAttributes[f].push(w)}}return l},mergeBufferAttributes:function(e){for(var t,n,r,o=0,a=0;a<e.length;++a){var s=e[a];if(s.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return null;if(void 0===r&&(r=s.normalized),r!==s.normalized)return null;o+=s.array.length}var l=new t(o),u=0;for(a=0;a<e.length;++a)l.set(e[a].array,u),u+=e[a].array.length;return new i.BufferAttribute(l,n,r)},interleaveAttributes:function(e){for(var t,n=0,r=0,o=0,a=e.length;o<a;++o){var s=e[o];if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;n+=s.array.length,r+=s.itemSize}var l=new i.InterleavedBuffer(new t(n),r),u=0,c=[],h=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"],p=0;for(a=e.length;p<a;p++){var d=(s=e[p]).itemSize,m=s.count,v=new i.InterleavedBufferAttribute(l,d,u,s.normalized);c.push(v),u+=d;for(var g=0;g<m;g++)for(var y=0;y<d;y++)v[f[y]](g,s[h[y]](g))}return c},estimateBytesUsed:function(e){var t=0;for(var n in e.attributes){var r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);for(var n={},r=e.getIndex(),o=e.getAttribute("position"),a=r?r.count:o.count,s=0,l=Object.keys(e.attributes),u={},c={},h=[],f=["getX","getY","getZ","getW"],p=0,d=l.length;p<d;p++){u[x=l[p]]=[],(S=e.morphAttributes[x])&&(c[x]=new Array(S.length).fill().map((function(){return[]})))}var m=Math.log10(1/t),v=Math.pow(10,m);for(p=0;p<a;p++){var g=r?r.getX(p):p,y="",b=0;for(d=l.length;b<d;b++)for(var x=l[b],w=(_=e.getAttribute(x)).itemSize,q=0;q<w;q++)y+="".concat(~~(_[f[q]](g)*v),",");if(y in n)h.push(n[y]);else{for(b=0,d=l.length;b<d;b++){x=l[b];var _=e.getAttribute(x),S=e.morphAttributes[x],M=(w=_.itemSize,u[x]),E=c[x];for(q=0;q<w;q++){var T=f[q];if(M.push(_[T](g)),S)for(var P=0,A=S.length;P<A;P++)E[P].push(S[P][T](g))}}n[y]=s,h.push(s),s++}}var O=e.clone();for(p=0,d=l.length;p<d;p++){x=l[p];var L=e.getAttribute(x),C=new L.array.constructor(u[x]);_=new i.BufferAttribute(C,L.itemSize,L.normalized);if(O.setAttribute(x,_),x in c)for(b=0;b<c[x].length;b++){var D=e.morphAttributes[x][b],k=(C=new D.array.constructor(c[x][b]),new i.BufferAttribute(C,D.itemSize,D.normalized));O.morphAttributes[x][b]=k}}return O.setIndex(h),O}},a=n(16);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var c=function(){function e(t,n){s(this,e),this.p0=t,this.p1=n}return u(e,[{key:"swap",value:function(){var e=[this.p1,this.p0];this.p0=e[0],this.p1=e[1]}},{key:"isConnected",value:function(e){return!!this.p1.equals(e.p0)||!!this.p1.equals(e.p1)&&(e.swap(),!0)}},{key:"createExtrudeGeometry",value:function(e){var t=new i.Shape([new i.Vector2(this.p0.x,-1*this.p0.z),new i.Vector2(this.p1.x,-1*this.p1.z)]),n={steps:1,depth:e,bevelEnabled:!1};return new i.ExtrudeBufferGeometry(t,n)}}]),e}(),h=function(){function e(t,n){s(this,e),this.object=t,this.renderObject=null,this.height=n}return u(e,[{key:"createVolumeObject",value:function(){var e=this;this.object.updateMatrixWorld(!0),this.object.traverse((function(t){if(t instanceof i.Mesh){var n=new i.EdgesGeometry(t.geometry);n.applyMatrix(t.matrixWorld),n.computeBoundingBox();var r=new i.Vector3;n.boundingBox.getCenter(r),n.translate(-r.x,-r.y,-r.z);for(var s=n.getAttribute("position"),l=[],u=0;u<s.array.length;u+=6){var h=new i.Vector3(s.array[u+0],s.array[u+1],s.array[u+2]),f=new i.Vector3(s.array[u+3],s.array[u+4],s.array[u+5]);l.push(new c(h,f))}for(var p=[],d=0;d<l.length;d++){var m=l[d].createExtrudeGeometry(e.height);m.rotateX(-.5*Math.PI),p.push(m)}var v=t.geometry.clone();v.applyMatrix(t.matrixWorld),v.computeBoundingBox(),v.boundingBox.getCenter(r),v.translate(-r.x,-r.y,-r.z),v.translate(0,e.height,0),p.push(v);var g=o.mergeBufferGeometries(p),y=new i.MeshStandardMaterial({color:16777215});e.renderObject=new i.Mesh(g,y),e.renderObject.position.copy(r),a.AddSDTObject(e.renderObject,.5);var b=new i.EdgesGeometry(g),x=new i.LineBasicMaterial({color:0}),w=new i.LineSegments(b,x);w.renderOrder=1,w.position.set(0,0,0),e.renderObject.add(w),n.dispose()}}))}},{key:"setColor",value:function(e){}}]),e}(),f=n(66),p=n(99),d=n(63),m=n(136);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}var b=function(){function e(t){v(this,e);var n=t.getRenderer(),r=t.getCamera();this.dom=t.getDom(),this.scene=t.scene,this.bloomLayer=new i.Layers,this.materials={},this.darkMaterial=new i.MeshBasicMaterial({color:"black"});var o=new p.a(this.scene,r);this.bloomPass=new m.a(new i.Vector2(.3*this.dom.clientWidth,.3*this.dom.clientHeight),0,0,0),this.bloomComposer1=new f.a(n),this.bloomComposer1.renderToScreen=!1,this.bloomComposer1.addPass(o),this.bloomComposer1.addPass(this.bloomPass),this.bloomComposer2=new f.a(n),this.bloomComposer2.renderToScreen=!1,this.bloomComposer2.addPass(o),this.bloomComposer2.addPass(this.bloomPass),this.bloomComposer3=new f.a(n),this.bloomComposer3.renderToScreen=!1,this.bloomComposer3.addPass(o),this.bloomComposer3.addPass(this.bloomPass),this.strengthValues={1:1,2:3,3:7},this.uniforms={baseTexture:{value:null},bloomTexture1:{value:null},bloomTexture2:{value:null},bloomTexture3:{value:null}},this.finalPass=new d.a(new i.ShaderMaterial({uniforms:this.uniforms,vertexShader:"\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"\n                uniform sampler2D baseTexture;\n                uniform sampler2D bloomTexture1;\n                uniform sampler2D bloomTexture2;\n                uniform sampler2D bloomTexture3;\n                varying vec2 vUv;\n                void main() {\n\t\t\t\t\tgl_FragColor = ( texture2D( baseTexture, vUv ) + texture2D( bloomTexture1, vUv )+ texture2D( bloomTexture2, vUv )+ texture2D( bloomTexture3, vUv ) );\n                }",defines:{}}),"baseTexture"),this.finalPass.needsSwap=!0,this.finalComposer=new f.a(n),this.finalComposer.addPass(o),this.finalComposer.addPass(this.finalPass)}return y(e,[{key:"render",value:function(){this.bloomLayer.set(1),this.bloomPass.strength=this.strengthValues[1],this.scene.traverse(this.setDarkMaterial.bind(this)),this.bloomComposer1.render(),this.scene.traverse(this.restoreMaterial.bind(this)),this.uniforms.bloomTexture1.value=this.bloomComposer1.renderTarget2.texture,this.bloomLayer.set(2),this.bloomPass.strength=this.strengthValues[2],this.scene.traverse(this.setDarkMaterial.bind(this)),this.bloomComposer2.render(),this.scene.traverse(this.restoreMaterial.bind(this)),this.uniforms.bloomTexture2.value=this.bloomComposer2.renderTarget2.texture,this.bloomLayer.set(3),this.bloomPass.strength=this.strengthValues[3],this.scene.traverse(this.setDarkMaterial.bind(this)),this.bloomComposer3.render(),this.scene.traverse(this.restoreMaterial.bind(this)),this.uniforms.bloomTexture3.value=this.bloomComposer3.renderTarget2.texture,this.finalComposer.render()}},{key:"resize",value:function(){this.finalComposer.setSize(this.dom.clientWidth,this.dom.clientHeight),this.bloomComposer1.setSize(.3*this.dom.clientWidth,.3*this.dom.clientHeight),this.bloomComposer2.setSize(.3*this.dom.clientWidth,.3*this.dom.clientHeight),this.bloomComposer3.setSize(.3*this.dom.clientWidth,.3*this.dom.clientHeight)}},{key:"setDarkMaterial",value:function(e){(e.isMesh||e instanceof i.Line)&&!1===this.bloomLayer.test(e.layers)&&(this.materials[e.uuid]=e.material,e.material=this.darkMaterial)}},{key:"restoreMaterial",value:function(e){e.uuid in this.materials&&(e.material=this.materials[e.uuid],delete this.materials[e.uuid])}},{key:"setBloomStrengths",value:function(e,t,n){this.strengthValues[1]=e,this.strengthValues[2]=t,this.strengthValues[3]=n}}]),e}(),x=null,w=null,q=!1,_=null,S={};function M(e){w=(x=e).poiMgr,_=new b(x)}function E(){x.getRenderer().setClearColor(new i.Color(0),1),q=!0}function T(){x.getRenderer().setClearColor(x.bgColor,1),q=!1}function P(){return q}function A(e,t){_.render()}function O(e,t,n,r){e in w.poiList&&w.poiList[e].pointObject.traverse((function(e){if(e.isMesh&&"boundingbox"!==e.name.toLowerCase())if(e.layers.set(0),0===r)e.uuid in S&&(e.material.dispose(),e.material=S[e.uuid],delete S[e.uuid]);else{e.uuid in S?e.material.dispose():S[e.uuid]=e.material;var o=new i.Color(t).multiply(function(e){var t=(i.Math.clamp(e,3e3,6500)-3e3)/3500,n=[new i.Color("rgb(255, 147, 41)"),new i.Color("rgb(255, 214, 170)"),new i.Color("rgb(255, 250, 244)"),new i.Color("rgb(255, 255, 255)")];if(t>=.99)return n[n.length-1].clone();var r=t*(n.length-1),o=n[Math.floor(r)],a=n[Math.floor(r)+1],s=r-Math.floor(r);return o.clone().lerp(a,s)}(n));e.material=new i.MeshBasicMaterial({color:o}),e.layers.enable(0+r)}}))}function L(){_.resize()}function C(e,t,n){_.setBloomStrengths(e,t,n)}var D=n(19);n.d(t,"setCoreResource",(function(){return B})),n.d(t,"isPicking",(function(){return re})),n.d(t,"getPickTargets",(function(){return ie})),n.d(t,"Initialize",(function(){return V})),n.d(t,"GetUnitSpaceNames",(function(){return Q})),n.d(t,"GetPoi",(function(){return G})),n.d(t,"SetColor",(function(){return H})),n.d(t,"SetColorAll",(function(){return W})),n.d(t,"RestoreColor",(function(){return X})),n.d(t,"RestoreColorAll",(function(){return Y})),n.d(t,"Show",(function(){return Z})),n.d(t,"Hide",(function(){return K})),n.d(t,"ShowAll",(function(){return J})),n.d(t,"HideAll",(function(){return $})),n.d(t,"MoveTo",(function(){return ee})),n.d(t,"UnitSpacePoiPlaceOn",(function(){return te})),n.d(t,"UnitSpacePoiPlaceOff",(function(){return ne})),n.d(t,"GetLightPosition",(function(){return oe})),n.d(t,"ShowBoundingBox",(function(){return ae})),n.d(t,"HideBoundingBox",(function(){return se})),n.d(t,"Light",(function(){return r}));var k=null,I=null,R=null,F=null,N={},j=!1,z=[];function B(e,t,n,r,o,a,s){e,k=t,I=n,r,o,a,R=s,F=new i.Raycaster}function U(e,t){var n=t.position.clone();n.y+=1e3;var r=new i.Vector3(0,-1,0);F.ray.set(n,r);var o=F.intersectObject(e,!0);return!!(o&&o.length>0)}function V(){k.traverse((function(e){if(e.userData.hasOwnProperty("property")){var t=e.userData.property;if(t.hasOwnProperty("uspace_uk")){var n=.01*parseFloat(t.height);N[e.name]={object:e,sourceMaterialTable:(r=e,o=[],r.traverse((function(e){e instanceof i.Mesh&&o.push({object:e,material:e.material})})),o),volume:new h(e,n)},function(e){e.traverse((function(e){if(e instanceof i.Mesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t]=e.material[t].clone(),e.material[t].sourceColor=e.material[t].color.clone();else e.material=e.material.clone(),e.material.sourceColor=e.material.color.clone()}))}(e)}}var r,o}))}function G(e){var t=[];if(N.hasOwnProperty(e)){var n=N[e].object;for(var r in R.poiList){var i=R.poiList[r];U(n,i)&&t.push(i.getData())}}return t}function H(e,t){if(N.hasOwnProperty(e)){var n=N[e];n.object.traverse((function(e){if(e instanceof i.Mesh)if(e.material instanceof Array)for(var n=0;n<e.material.length;n++)e.material[n].color=new i.Color(t);else e.material.color=new i.Color(t)})),n.volume.setColor(new i.Color(t))}}function W(e){for(var t in N){var n=N[t];n.object.traverse((function(t){if(t instanceof i.Mesh)if(t.material instanceof Array)for(var n=0;n<t.material.length;n++)t.material[n].color=new i.Color(e);else t.material.color=new i.Color(e)})),n.volume.setColor(new i.Color(e))}}function X(e){if(N.hasOwnProperty(e)){var t=N[e];t.object.traverse((function(e){if(e instanceof i.Mesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].color=e.material[t].sourceColor;else e.material.color=e.material.sourceColor})),t.volume.setColor(new i.Color(16777215))}}function Y(){for(var e in N){var t=N[e];t.object.traverse((function(e){if(e instanceof i.Mesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].color=e.material[t].sourceColor;else e.material.color=e.material.sourceColor})),t.volume.setColor(new i.Color(16777215))}}function Q(){var e=[];for(var t in N)e.push(t);return e}function Z(e){if(N.hasOwnProperty(e)){var t=N[e];k.add(t.volume.renderObject)}}function K(e){if(N.hasOwnProperty(e)){var t=N[e];k.remove(t.volume.renderObject)}}function J(){for(var e in N)k.add(N[e].volume.renderObject)}function $(){for(var e in N)k.remove(N[e].volume.renderObject)}function ee(e,t){if(N.hasOwnProperty(e)){var n=N[e];I.fitToObject(n.object,!0,1e3,t)}}function te(e){if(z=[],e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]}else for(var n in N);j=!0}function ne(){z=[],j=!1}function re(){return j}function ie(){return z}function oe(e,t){var n=e,r=(n.substring(0,n.lastIndexOf("/")),n.substring(n.lastIndexOf("/")+1));r.substring(0,r.lastIndexOf("."));(new D.FBXLoader).load(e,(function(e){var n=[];e.updateMatrixWorld(!0),e.traverse((function(e){var t=e.userData;if(t.hasOwnProperty("property")){var r=t.property;if(r.hasOwnProperty("type"))"lightpositionroot"===r.type&&n.push(e)}}));var r=[];n.forEach((function(e){var t="",n="";e.traverseAncestors((function(e){if(e.userData.hasOwnProperty("property")){var r=e.userData.property;if(r.hasOwnProperty("type"))"floor"===r.type&&(e.name,t=r.basement,n=r.sortingorder)}}));var o=e.parent.name,a=e.parent.userData.property.uspace_type,s=e.parent.userData.property.uspace_uk,l=[];e.children.forEach((function(e){var t=e.name,n=new i.Vector3;e.getWorldPosition(n);var r=null;if(e.userData.hasOwnProperty("property")){var o=e.userData.property;r=o.number?o.number:o.Number}l.push({name:t,number:r,position:{x:n.x,y:n.y,z:n.z}})})),r.push({basement:t,sortingorder:n,unitSpaceName:o,unitSpaceType:a,uspace_uk:s,lights:l})})),t&&t(r)}),null,(function(e){console.error(e)}))}function ae(){R.showBoundingBox()}function se(){R.hideBoundingBox()}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setCoreResource",(function(){return w})),n.d(r,"update",(function(){return E})),n.d(r,"Initialize",(function(){return M})),n.d(r,"Show",(function(){return A})),n.d(r,"Hide",(function(){return O})),n.d(r,"EditOn",(function(){return L})),n.d(r,"EditOff",(function(){return C})),n.d(r,"SetLinePosition",(function(){return D}));var i={};n.r(i),n.d(i,"setCoreResource",(function(){return X})),n.d(i,"update",(function(){return Y})),n.d(i,"Initialize",(function(){return J})),n.d(i,"Show",(function(){return te})),n.d(i,"Hide",(function(){return ne})),n.d(i,"EditOn",(function(){return re})),n.d(i,"EditOff",(function(){return oe})),n.d(i,"SetLinePosition",(function(){return ie}));var o={};n.r(o),n.d(o,"setCoreResource",(function(){return he})),n.d(o,"update",(function(){return fe})),n.d(o,"Initialize",(function(){return me})),n.d(o,"Enable",(function(){return ve})),n.d(o,"Disable",(function(){return ge})),n.d(o,"EditOn",(function(){return ye})),n.d(o,"EditOff",(function(){return be})),n.d(o,"SetLinePosition",(function(){return xe}));var a=n(0),s=n(5),l=n(16),u=n(2),c=null,h=null,f=null,p=null,d=null,m=!1,v=null,g=0,y={},b=!1,x=100;function w(e,t){c=e,h=t,f=new a.Object3D,h.add(f)}function q(){p.visible=m,f.traverse((function(e){e.isMesh&&(e.visible=m)}))}function _(e,t,n){var r=d.clone();f.add(r),r.traverse((function(t){t instanceof a.Mesh&&(t.material=t.material.clone(),t.material.color=new a.Color(e))}));for(var i=[],o=0;o<n.length-1;o++){var s=n[o],l=n[o+1],u=p.getObjectByName(s),c=p.getObjectByName(l),h=new a.Vector3,m=new a.Vector3;u.getWorldPosition(h),c.getWorldPosition(m),i.push(S(h,m,t,r)),0===o&&(r.position.copy(h),r.lookAt(m))}for(var v=0;v<i.length-1;v++)i[v].chain(i[v+1]);i[i.length-1].onComplete((function(){f.remove(r)})),i[0].start()}function S(e,t,n,r){var i=e.distanceTo(t),o={ratio:0};return new u.a.Tween(o).to({ratio:1},10*i/(.01*n)).easing(u.a.Easing.Linear.None).onUpdate((function(){r.position.copy((new a.Vector3).lerpVectors(e,t,o.ratio)),r.lookAt(t),r.updateMatrix()}))}function M(e,t,n,r){(new s.GLTFLoader).load(e,(function(e){p=e.scene,h.add(p),q(),(new s.GLTFLoader).load(t,(function(e){d=e.scene,q();var t=new XMLHttpRequest;t.open("GET",n,!0),t.onreadystatechange=function(){t.readyState===t.DONE&&200===t.status&&("string"==typeof(v=t.response)&&(v=JSON.parse(v)),q(),r&&r())},t.send()}))}))}function E(e){if(p&&d&&v){if((g+=e)>=.5)for(var t in g=0,v){var n=v[t],r=n.speed;_(n.color,r,n.pointNames)}if(q(),b){var i=p.position.clone();y.w?i.x+=x*e:y.s&&(i.x-=x*e),y.a?i.z+=x*e:y.d&&(i.z-=x*e),y.r?i.y+=x*e:y.f&&(i.y-=x*e),p.position.copy(i)}}}function T(e){y[e.key]=!0}function P(e){if(y[e.key]=!1,"-"===e.key)x-=10,console.log("moveSpeed",x);else if("="===e.key)x+=10,console.log("moveSpeed",x);else if("p"===e.key)console.log("line position x,y,z:",p.position.x,p.position.y,p.position.z);else if("h"===e.key){console.log({"키설명보기":"h","이동":"w,s,a,d,r,f","이동속도 조절":"-.=","라인위치값보기":"p"})}}function A(){m=!0,l.Restore(),function(){if(c){var e=c.parent;e.remove(c),l.AddSDTObject(c,.4),e.add(c)}}()}function O(){m=!1,l.Restore()}function L(){b=!0,x=100,window.addEventListener("keydown",T,!1),window.addEventListener("keyup",P,!1);console.log({"키설명보기":"h","이동":"w,s,a,d,r,f","이동속도 조절":"-.=","라인위치값보기":"p"})}function C(){b=!1,window.removeEventListener("keydown",T),window.removeEventListener("keyup",P)}function D(e,t,n){p&&p.position.set(e,t,n)}var k=null,I=null,R=null,F=null,N=!1,j=null,z=null,B=null,U=null,V=0,G={},H=!1,W=100;function X(e,t){k=e,I=t,B=new a.Object3D,k.add(B),U=new a.Object3D,k.add(U)}function Y(e){if(R&&F&&j){if((V+=e)>=.5)for(var t in V=0,j){var n=j[t],r=n.speed;Q(n.color,r,n.pointNames)}if(K(),H){var i=R.position.clone();G.w?i.x+=W*e:G.s&&(i.x-=W*e),G.a?i.z+=W*e:G.d&&(i.z-=W*e),G.r?i.y+=W*e:G.f&&(i.y-=W*e),R.position.copy(i),B.position.copy(i)}}}function Q(e,t,n){var r=F.clone();U.add(r),r.traverse((function(t){t instanceof a.Mesh&&(t.material=t.material.clone(),t.material.color=new a.Color(e))}));for(var i=[],o=0;o<n.length-1;o++){var s=n[o],l=n[o+1],u=R.getObjectByName(s),c=R.getObjectByName(l),h=new a.Vector3,f=new a.Vector3;u.getWorldPosition(h),c.getWorldPosition(f),i.push(Z(h,f,t,r)),0===o&&(r.position.copy(h),r.lookAt(f))}for(var p=0;p<i.length-1;p++)i[p].chain(i[p+1]);i[i.length-1].onComplete((function(){U.remove(r)})),i[0].start()}function Z(e,t,n,r){var i=e.distanceTo(t),o={ratio:0};return new u.a.Tween(o).to({ratio:1},10*i/(.01*n)).easing(u.a.Easing.Linear.None).onUpdate((function(){r.position.copy((new a.Vector3).lerpVectors(e,t,o.ratio)),r.lookAt(t),r.updateMatrix()}))}function K(){R.visible=N,B.visible=N,U.traverse((function(e){e.isMesh&&(e.visible=N)}))}function J(e,t,n,r,i){(new s.GLTFLoader).load(e,(function(e){var o=10*(R=e.scene).scale.x;R.scale.set(o,o,o),k.add(R),K(),(new s.GLTFLoader).load(t,(function(e){var t=2*(F=e.scene).scale.x;F.scale.setScalar(t),K();var o=new XMLHttpRequest;o.open("GET",n,!0),o.onreadystatechange=function(){if(o.readyState===o.DONE&&200===o.status){"string"==typeof(j=o.response)&&(j=JSON.parse(j)),K();var e=new XMLHttpRequest;e.open("GET",r,!0),e.onreadystatechange=function(){e.readyState===e.DONE&&200===e.status&&("string"==typeof(z=e.response)&&(z=JSON.parse(z)),function(){if(R&&z){var e={};for(var t in z){var n=z[t];e[t]=new a.CurvePath;for(var r=0;r<n.length-1;r++){var i=n[r],o=n[r+1],s=R.getObjectByName(i),l=R.getObjectByName(o),u=new a.Vector3,c=new a.Vector3;s.getWorldPosition(u),l.getWorldPosition(c),e[t].add(new a.LineCurve3(u.clone(),c.clone()))}}for(var h in e){var f=e[h],p=new a.TubeBufferGeometry(f,256,.5,32,!1);p.computeBoundingBox(),p.computeVertexNormals(!0),p.computeFaceNormals();var d=new a.MeshPhongMaterial({color:16711680,shininess:100}),m=new a.Mesh(p,d);m.name=h,m.frustumCulled=!1,B.add(m)}}}(),i&&i())},e.send()}},o.send()}))}))}function $(e){G[e.key]=!0}function ee(e){if(G[e.key]=!1,"-"===e.key)W-=10,console.log("moveSpeed",W);else if("="===e.key)W+=10,console.log("moveSpeed",W);else if("p"===e.key)console.log("line position x,y,z:",R.position.x,R.position.y,R.position.z);else if("h"===e.key){console.log({"키설명보기":"h","이동":"w,s,a,d,r,f","이동속도 조절":"-.=","라인위치값보기":"p"})}}function te(){N=!0,l.Restore(),function(){if(I){var e=I.parent;e.remove(I),l.AddSDTObject(I,.4),e.add(I)}}()}function ne(){N=!1,l.Restore()}function re(){H=!0,W=100,window.addEventListener("keydown",$,!1),window.addEventListener("keyup",ee,!1);console.log({"키설명보기":"h","이동":"w,s,a,d,r,f","이동속도 조절":"-.=","라인위치값보기":"p"})}function ie(e,t,n){R&&B&&(R.position.set(e,t,n),B.position.set(e,t,n))}function oe(){H=!1,window.removeEventListener("keydown",$),window.removeEventListener("keyup",ee)}var ae,se=null,le={},ue=!1,ce=100;function he(e){se=e}function fe(e){if(ae&&ue){var t=ae.position.clone();le.w?t.x+=ce*e:le.s&&(t.x-=ce*e),le.a?t.z+=ce*e:le.d&&(t.z-=ce*e),le.r?t.y+=ce*e:le.f&&(t.y-=ce*e),ae.position.copy(t)}}function pe(e){le[e.key]=!0}function de(e){if(le[e.key]=!1,"-"===e.key)ce-=10,console.log("moveSpeed",ce);else if("="===e.key)ce+=10,console.log("moveSpeed",ce);else if("p"===e.key)console.log("line position x,y,z:",ae.position.x,ae.position.y,ae.position.z);else if("h"===e.key){console.log({"키설명보기":"h","이동":"w,s,a,d,r,f","이동속도 조절":"-.=","라인위치값보기":"p"})}}function me(e,t){(new s.GLTFLoader).load(e,(function(e){var n=10*(ae=e.scene).scale.x;ae.scale.set(n,n,n),se.getSystemObjectGroup().add(ae),ae.traverse((function(e){e.userData.hasOwnProperty("isLightCone")&&("true"===e.userData.isLightCone&&(e.visible=!1))})),t&&t()}))}function ve(){se.workObjGroup.traverse((function(e){e.isMesh&&e.layers.enable(2)})),ae.traverse((function(e){e.userData.hasOwnProperty("isLightCone")&&("true"===e.userData.isLightCone&&(e.visible=!0,e.layers.enable(1)))})),se.setBloomUse(!0)}function ge(){ae.traverse((function(e){e.userData.hasOwnProperty("isLightCone")&&("true"===e.userData.isLightCone&&(e.visible=!1))})),se.setBloomUse(!1)}function ye(){ue=!0,ce=100,window.addEventListener("keydown",pe,!1),window.addEventListener("keyup",de,!1);console.log({"키설명보기":"h","이동":"w,s,a,d,r,f","이동속도 조절":"-.=","라인위치값보기":"p"})}function be(){ue=!1,window.removeEventListener("keydown",pe),window.removeEventListener("keyup",de)}function xe(e,t,n){ae&&ae.position.set(e,t,n)}n.d(t,"EvacPath",(function(){return i})),n.d(t,"Light",(function(){return o})),n.d(t,"PowerLine",(function(){return r}))},function(e,t){e.exports=!1},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(68)("meta"),o=n(8),a=n(30),s=n(14).f,l=0,u=Object.isExtensible||function(){return!0},c=!n(7)((function(){return u(Object.preventExtensions({}))})),h=function(e){s(e,i,{value:{i:"O"+ ++l,w:{}}})},f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==r(e)?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!u(e))return"F";if(!t)return"E";h(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!u(e))return!0;if(!t)return!1;h(e)}return e[i].w},onFreeze:function(e){return c&&f.NEED&&u(e)&&!a(e,i)&&h(e),e}}},function(e,t,n){var r=n(9)("unscopables"),i=Array.prototype;null==i[r]&&n(26)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";n.r(t),n.d(t,"MTLLoader",(function(){return i}));var r=n(0),i=function(e){r.Loader.call(this,e)};i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(e,t,n,i){var o=this,a=""===this.path?r.LoaderUtils.extractUrlBase(e):this.path,s=new r.FileLoader(this.manager);s.setPath(this.path),s.load(e,(function(e){t(o.parse(e,a))}),n,i)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var n=e.split("\n"),r={},o=/\s+/,a={},s=0;s<n.length;s++){var l=n[s];if(0!==(l=l.trim()).length&&"#"!==l.charAt(0)){var u=l.indexOf(" "),c=u>=0?l.substring(0,u):l;c=c.toLowerCase();var h=u>=0?l.substring(u+1):"";if(h=h.trim(),"newmtl"===c)r={name:h},a[h]=r;else if("ka"===c||"kd"===c||"ks"===c||"ke"===c){var f=h.split(o,3);r[c]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])]}else r[c]=h}}var p=new i.MaterialCreator(this.resourcePath||t,this.materialOptions);return p.setCrossOrigin(this.crossOrigin),p.setManager(this.manager),p.setMaterials(a),p}}),i.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:r.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:r.RepeatWrapping},i.MaterialCreator.prototype={constructor:i.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],i={};for(var o in t[n]=i,r){var a=!0,s=r[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1)}a&&(i[l]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,n=this.materialsInfo[e],i={name:e,side:this.side};function o(e,n){if(!i[e]){var r,o,a=t.getTextureParams(n,i),s=t.loadTexture((r=t.baseUrl,"string"!=typeof(o=a.url)||""===o?"":/^https?:\/\//i.test(o)?o:r+o));s.repeat.copy(a.scale),s.offset.copy(a.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,i[e]=s}}for(var a in n){var s,l=n[a];if(""!==l)switch(a.toLowerCase()){case"kd":i.color=(new r.Color).fromArray(l);break;case"ks":i.specular=(new r.Color).fromArray(l);break;case"ke":i.emissive=(new r.Color).fromArray(l);break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),i.transparent=!0;break;case"ns":i.shininess=parseFloat(l);break;case"d":(s=parseFloat(l))<1&&(i.opacity=s,i.transparent=!0);break;case"tr":s=parseFloat(l),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(i.opacity=1-s,i.transparent=!0)}}return this.materials[e]=new r.MeshPhongMaterial(i),this.materials[e]},getTextureParams:function(e,t){var n,i={scale:new r.Vector2(1,1),offset:new r.Vector2(0,0)},o=e.split(/\s+/);return(n=o.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(o[n+1]),o.splice(n,2)),(n=o.indexOf("-s"))>=0&&(i.scale.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),(n=o.indexOf("-o"))>=0&&(i.offset.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),i.url=o.join(" ").trim(),i},loadTexture:function(e,t,n,i,o){var a,s=void 0!==this.manager?this.manager:r.DefaultLoadingManager,l=s.getHandler(e);return null===l&&(l=new r.TextureLoader(s)),l.setCrossOrigin&&l.setCrossOrigin(this.crossOrigin),a=l.load(e,n,i,o),void 0!==t&&(a.mapping=t),a}}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"initialize",(function(){return z})),n.d(r,"getVisualObject",(function(){return G})),n.d(r,"update",(function(){return Q})),n.d(r,"FindByNodeName",(function(){return re})),n.d(r,"FindByPosition",(function(){return ie})),n.d(r,"FindByPoi",(function(){return oe})),n.d(r,"GetDistances",(function(){return ae})),n.d(r,"Clear",(function(){return se})),n.d(r,"SetSize",(function(){return le})),n.d(r,"SetColor",(function(){return ue})),n.d(r,"Show",(function(){return ce})),n.d(r,"Hide",(function(){return he})),n.d(r,"ShowAll",(function(){return fe})),n.d(r,"HideAll",(function(){return pe})),n.d(r,"ShowDistanceLabel",(function(){return de})),n.d(r,"HideDistanceLabel",(function(){return me})),n.d(r,"SetDistanceLabelScale",(function(){return ve})),n.d(r,"SetDistanceType",(function(){return ge})),n.d(r,"LoadLineTexture",(function(){return ye})),n.d(r,"SetLineStyle",(function(){return be})),n.d(r,"SetLineAnimSpeedRatio",(function(){return xe})),n.d(r,"ShowPoiDetectBounding",(function(){return we})),n.d(r,"HidePoiDetectBounding",(function(){return qe})),n.d(r,"SetPoiDetectRange",(function(){return _e})),n.d(r,"AddIsolatePoi",(function(){return Se})),n.d(r,"ClearIsolatePoi",(function(){return Me}));var i={};n.r(i),n.d(i,"initialize",(function(){return Lt})),n.d(i,"frameUpdate",(function(){return $t})),n.d(i,"SetPoiDetectCallback",(function(){return Dt})),n.d(i,"SetPoiDetectRange",(function(){return kt})),n.d(i,"ShowPoiDetectRange",(function(){return It})),n.d(i,"HidePoiDetectRange",(function(){return Rt})),n.d(i,"Play",(function(){return Ft})),n.d(i,"Pause",(function(){return Nt})),n.d(i,"Resume",(function(){return jt})),n.d(i,"Stop",(function(){return zt})),n.d(i,"IsPlaying",(function(){return Bt})),n.d(i,"IsPause",(function(){return Ut})),n.d(i,"IsStop",(function(){return Vt})),n.d(i,"SetSpeed",(function(){return Gt})),n.d(i,"SetCameraHeight",(function(){return Ht})),n.d(i,"SetCameraRotationSpeed",(function(){return Wt})),n.d(i,"SetViewMode",(function(){return Xt})),n.d(i,"SetSubViewDom",(function(){return Yt})),n.d(i,"ShowTpsPointer",(function(){return Qt})),n.d(i,"HideTpsPointer",(function(){return Zt})),n.d(i,"SetRadius",(function(){return Kt})),n.d(i,"LoadCharacterModel",(function(){return Jt})),n.d(i,"SetCharacterSize",(function(){return en})),n.d(i,"ShowCharacter",(function(){return tn})),n.d(i,"HideCharacter",(function(){return nn})),n.d(i,"SetCharacterPosition",(function(){return rn})),n.d(i,"SetFpsCamHeight",(function(){return on}));var o=n(65),a=n(0),s=n(37),l=n(35);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d,m,v,g,y=function(e){function t(e,n,r,i,o,l,u,c,p,d,m,v){var g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(g=h(this,f(t).call(this))).userData.p1=r.clone(),g.userData.p2=i.clone(),g.userData.distance=r.distanceTo(i),g.userData.center=(new a.Vector3).lerpVectors(r,i,.5),g.userData.size=n,g.userData.color=new a.Color(m),g.userData.p1FloorName=o,g.userData.p2FloorName=l,g.userData.accumulateDistance=u,g.userData.distanceLabel=null,g.userData.labelType=c,g.userData.distanceLabelSize=new a.Vector2,g.userData.distanceLabelScaleValue=p,g.userData.distanceLabelVisibleFlag=d,g.userData.lineAnimSpeedRatio=v,g.geometry=new a.PlaneBufferGeometry(g.userData.size,g.userData.size),g.geometry.rotateX(-.5*Math.PI),g.geometry.rotateY(-.5*Math.PI);var y={uvScale:{value:new a.Vector2(1,1)},arrowScale:{value:new a.Vector2(.25*g.userData.distance*(1/g.userData.size),1)},time:{value:0},arrowTexture:{value:e},lineColor:{value:new a.Vector3(g.userData.color.r,g.userData.color.g,g.userData.color.b)},distance:{value:g.userData.distance}};return g.material=new a.ShaderMaterial({side:a.DoubleSide,transparent:!0,uniforms:y,vertexShader:s.a.vertexShader,fragmentShader:s.a.fragmentShader,polygonOffset:!0,polygonOffsetFactor:-4}),g.scale.set(1,1,g.userData.distance*(1/g.userData.size)),g.position.copy(g.userData.center),g.lookAt(g.userData.p2),g.renderOrder=1,g}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"dispose",value:function(){this.disposeLabel(),this.geometry.dispose(),this.material.dispose()}},{key:"createDistanceLabel",value:function(){if(this.userData.p1FloorName===this.userData.p2FloorName){var e=new a.PlaneBufferGeometry(1,1,1,1);e.rotateX(.5*Math.PI);var t=null;t="add"===this.userData.labelType?l.b(this.userData.accumulateDistance.toFixed(1)+"m",10):l.b(this.userData.distance.toFixed(1)+"m",10),this.userData.distanceLabelSize=new a.Vector2(t.width,t.height),this.userData.distanceLabel=new a.Mesh(e,t.material),this.userData.distanceLabel.scale.set(t.width*this.userData.distanceLabelScaleValue,1,t.height*this.userData.distanceLabelScaleValue),this.userData.distanceLabel.position.set(0,this.userData.size,0),this.parent.add(this.userData.distanceLabel),this.userData.distanceLabel.position.copy(this.position.clone().addScaledVector(new a.Vector3(0,1,0),this.userData.size)),this.userData.distanceLabel.visible=this.userData.distanceLabelVisibleFlag}}},{key:"disposeLabel",value:function(){this.userData.distanceLabel&&(this.parent.remove(this.userData.distanceLabel),this.userData.distanceLabel.geometry.dispose(),this.userData.distanceLabel.material.map.dispose(),this.userData.distanceLabel.material.dispose())}},{key:"updateLabelScale",value:function(e){this.userData.distanceLabel&&(this.userData.distanceLabelScaleValue=e,this.userData.distanceLabel.scale.set(this.userData.distanceLabelSize.x*this.userData.distanceLabelScaleValue,1,this.userData.distanceLabelSize.y*this.userData.distanceLabelScaleValue))}},{key:"updateFrame",value:function(e,t){if(this.material.uniforms.time.value+=e*this.userData.lineAnimSpeedRatio,1<this.material.uniforms.time.value&&(this.material.uniforms.time.value=0),this.userData.distanceLabel&&t){var n=new a.Vector3,r=new a.Vector3;this.userData.distanceLabel.getWorldPosition(n),this.userData.distanceLabel.getWorldDirection(r);var i=new a.Vector3;t.getWorldDirection(i),i=i.projectOnPlane(new a.Vector3(0,1,0));var o=(new a.Matrix4).lookAt(n,n.clone().addScaledVector(i,1),new a.Vector3(0,1,0)),s=(new a.Quaternion).setFromRotationMatrix(o);this.userData.distanceLabel.quaternion.slerp(s,.1)}}},{key:"updateVisual",value:function(){this.geometry.dispose(),this.geometry=new a.PlaneBufferGeometry(this.userData.size,this.userData.size),this.geometry.rotateX(-.5*Math.PI),this.geometry.rotateY(-.5*Math.PI),this.scale.set(1,1,this.userData.distance*(1/this.userData.size)),this.position.copy(this.userData.center),this.lookAt(this.userData.p2),this.material.uniforms.lineColor.value=new a.Vector3(this.userData.color.r,this.userData.color.g,this.userData.color.b),this.material.uniforms.arrowScale.value=new a.Vector2(.25*this.userData.distance*(1/this.userData.size),1)}}])&&c(n.prototype,r),i&&c(n,i),t}(a.Mesh),b=n(3);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e,t,n){return(q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}var A=[],O=1,L=16711680,C=!1,D=1,k="add",I="solid",R=null,F=1,N=10,j=[];function z(e,t,n,r,i){d=e,m=t,v=n,g=r,i}function B(e,t){if(t instanceof Object==!1||0===Object.keys(t).length)return!1;var n=m[e].userData.property,r=0;for(var i in t)n.hasOwnProperty(i)&&n[i]===t[i]&&r++;return r===Object.keys(t).length}function U(e){for(var t=m[e],n=0;n<t.userData.isolateBasePois.length;n++){var r=t.userData.isolateBasePois[n];if(j.indexOf(r)>-1)return!0}return!1}function V(e,t,n){var r=Object.values(m).filter((function(e){return e instanceof b.c&&e.userData.property.floor===t&&!1===B(e.name,n)})),i=[];return r.forEach((function(t){var n=e.distanceTo(t.WorldLocation);i.push({distance:n,node:t})})),i.length>0?(i.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0})),i[0].node):null}function G(){return A.length>0?A[0]:null}var H=function(){function e(t,n,r,i,o){E(this,e),this.target=t,this.gValue=n,this.hValue=r,this.fValue=i,this.parent=o}return P(e,[{key:"reset",value:function(){this.gValue=0,this.hValue=0,this.fValue=0,this.parent=null}},{key:"WorldLocation",get:function(){var e=new a.Vector3;return this.target.updateMatrix(),this.target.getWorldPosition(e),e}}]),e}(),W=function(e){function t(e,n,r,i,o){var s;E(this,t),(s=w(this,_(t).call(this))).p1=e.clone(),s.p2=n.clone(),s.p1FloorName=r,s.p2FloorName=i,s.curve=new a.LineCurve3(s.p1,s.p2),s.geometry=new a.TubeBufferGeometry(s.curve,1,.5*O,16),s.material=new a.MeshPhongMaterial({color:L,shininess:100}),s.geometry.computeBoundingSphere();var l=s.geometry.boundingSphere.center.clone();return s.geometry.translate(-l.x,-l.y,-l.z),s.position.copy(l),s.userData.accumulateDistance=o,s.distanceLabel=null,s.createDistanceLabel(),s}return S(t,e),P(t,[{key:"dispose",value:function(){this.disposeLabel(),this.geometry.dispose(),this.material.dispose()}},{key:"updateVisual",value:function(){this.material.dispose(),this.material=new a.MeshPhongMaterial({color:L,shininess:100}),this.geometry.dispose(),this.geometry=new a.TubeBufferGeometry(this.curve,1,.5*O,16),this.geometry.computeBoundingSphere();var e=this.geometry.boundingSphere.center.clone();this.geometry.translate(-e.x,-e.y,-e.z),this.position.copy(e)}},{key:"animationUpdate",value:function(e){}},{key:"createDistanceLabel",value:function(){if(this.p1FloorName===this.p2FloorName){var e=new a.PlaneBufferGeometry(1,1,1,1);e.rotateX(.5*Math.PI);var t=this.curve.v1.distanceTo(this.curve.v2),n=null;n="add"===k?l.b(this.userData.accumulateDistance.toFixed(1)+"m",10):l.b(t.toFixed(1)+"m",10),this.userData.distanceLabelSize=new a.Vector2(n.width,n.height),this.distanceLabel=new a.Mesh(e,n.material),this.distanceLabel.scale.set(n.width*D,1,n.height*D),this.distanceLabel.position.set(0,O,0),this.add(this.distanceLabel),this.distanceLabel.visible=C}}},{key:"disposeLabel",value:function(){this.distanceLabel&&(this.remove(this.distanceLabel),this.distanceLabel.geometry.dispose(),this.distanceLabel.material.map.dispose(),this.distanceLabel.material.dispose())}},{key:"updateLabelScale",value:function(){this.distanceLabel&&this.distanceLabel.scale.set(this.userData.distanceLabelSize.x*D,1,this.userData.distanceLabelSize.y*D)}},{key:"updateMatrix",value:function(){if(q(_(t.prototype),"updateMatrix",this).call(this),this.distanceLabel&&g){var e=new a.Vector3,n=new a.Vector3;this.distanceLabel.getWorldPosition(e),this.distanceLabel.getWorldDirection(n);var r=new a.Vector3;g.getWorldDirection(r),r=r.projectOnPlane(new a.Vector3(0,1,0));var i=(new a.Matrix4).lookAt(e,e.clone().addScaledVector(r,1),new a.Vector3(0,1,0)),o=(new a.Quaternion).setFromRotationMatrix(i);this.distanceLabel.quaternion.slerp(o,.1)}}},{key:"Point1_FloorName",get:function(){return this.p1FloorName}},{key:"Point2_FloorName",get:function(){return this.p2FloorName}}]),t}(a.Mesh),X=function(e){function t(e,n){var r;return E(this,t),(r=w(this,_(t).call(this))).position.copy(e),r.floorName=n,r.geometry=new a.SphereBufferGeometry(.5*O,16,16),r.material=new a.MeshPhongMaterial({color:L,shininess:1e3}),r}return S(t,e),P(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updateVisual",value:function(){this.material.dispose(),this.material=new a.MeshPhongMaterial({color:L,shininess:1e3}),this.geometry.dispose(),this.geometry=new a.SphereBufferGeometry(.5*O,16,16)}},{key:"FloorName",get:function(){return this.floorName}}]),t}(a.Mesh),Y=function(e){function t(e){var n;E(this,t),(n=w(this,_(t).call(this))).bPoiDetectBoundingVisibleFlag=!1,n.pointsInfo=e;for(var r=0,i=0;i<n.pointsInfo.length-1;i++){var o=n.pointsInfo[i].point,a=n.pointsInfo[i+1].point,s=n.pointsInfo[i].floorName,l=n.pointsInfo[i+1].floorName;s===l&&(r+=o.distanceTo(a));var u=new W(o,a,s,l,r);n.add(u);var c=new y(R,O,o,a,s,l,r,k,D,C,L,F);n.add(c),c.createDistanceLabel(),"solid"===I?(u.visible=!0,c.visible=!1,c.userData.distanceLabel&&(c.userData.distanceLabel.visible=!1)):"animation"===I&&(u.visible=!1,c.visible=!0,c.userData.distanceLabel&&(c.userData.distanceLabel.visible=!0))}for(var h=0;h<n.pointsInfo.length;h++){var f=n.pointsInfo[h].point,p=n.pointsInfo[h].floorName,d=new X(f,p);n.add(d),0!==h&&h!==n.pointsInfo.length-1||d.scale.setScalar(2)}return n}return S(t,e),P(t,[{key:"animationUpdate",value:function(e){this.children.forEach((function(t){t instanceof W?t.animationUpdate(e):t instanceof y&&t.updateFrame(e,g)}))}},{key:"getPathLength",value:function(){for(var e=0,t=0;t<this.pointsInfo.length-1;t++){var n=this.pointsInfo[t].point,r=this.pointsInfo[t+1].point;e+=n.distanceTo(r)}return e}},{key:"dispose",value:function(){this.hidePoiDetectBounding();for(var e=this.children.length,t=0;t<e;t++)this.children[0]&&(this.children[0].dispose(),this.remove(this.children[0]))}},{key:"updateVisuals",value:function(){for(var e=0;e<this.children.length;e++)this.children[e]instanceof y&&(this.children[e].userData.size=O,this.children[e].userData.color=new a.Color(L)),this.children[e].updateVisual&&this.children[e].updateVisual()}},{key:"show",value:function(e){for(var t=0;t<this.children.length;t++){var n=this.children[t];n instanceof W?n.p1FloorName!==e&&n.p2FloorName!==e||(n.visible=!0):n instanceof y?n.userData.p1FloorName!==e&&n.userData.p2FloorName!==e||(n.visible=!0):n instanceof X&&n.floorName===e&&(n.visible=!0)}}},{key:"hide",value:function(e){for(var t=0;t<this.children.length;t++){var n=this.children[t];n instanceof W?n.p1FloorName!==e&&n.p2FloorName!==e||(n.visible=!1):n instanceof y?n.userData.p1FloorName!==e&&n.userData.p2FloorName!==e||(n.visible=!1):n instanceof X&&n.floorName===e&&(n.visible=!1)}}},{key:"showAll",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];this.poiDetectBoundObject&&t.uuid===this.poiDetectBoundObject.uuid||(t.visible=!0,t instanceof W?t.visible="solid"===I:t instanceof y&&(t.visible="animation"===I,t.userData.distanceLabel&&(t.userData.distanceLabel.visible="animation"===I&&C)))}}},{key:"hideAll",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];this.poiDetectBoundObject&&t.uuid===this.poiDetectBoundObject.uuid||(t.visible=!1)}}},{key:"showPoiDetectBounding",value:function(){var e=this;this.poiDetectBoundObject=new a.Object3D,this.add(this.poiDetectBoundObject),this.pointsInfo.forEach((function(t){var n=t.point,r=new a.SphereBufferGeometry(1,16,16),i=new a.MeshBasicMaterial({color:16711680,wireframe:!0}),o=new a.Mesh(r,i);o.position.copy(n),o.scale.setScalar(N),e.poiDetectBoundObject.add(o)}));for(var t=0;t<this.pointsInfo.length-1;t++){var n=this.pointsInfo[t].point,r=this.pointsInfo[t+1].point,i=(new a.Vector3).lerpVectors(n,r,.5),o=n.distanceTo(r),s=new a.CylinderBufferGeometry(N,N,o,16,1,!0);s.rotateX(-.5*Math.PI);var l=new a.MeshBasicMaterial({color:16711680,wireframe:!0}),u=new a.Mesh(s,l);this.poiDetectBoundObject.add(u),u.position.copy(i),u.lookAt(r)}this.bPoiDetectBoundingVisibleFlag=!0}},{key:"hidePoiDetectBounding",value:function(){this.poiDetectBoundObject&&(this.remove(this.poiDetectBoundObject),this.poiDetectBoundObject.traverse((function(e){e instanceof a.Mesh&&(e.geometry.dispose(),e.material.dispose())})),this.poiDetectBoundObject=null),this.bPoiDetectBoundingVisibleFlag=!1}}]),t}(a.Object3D);function Q(e){A.forEach((function(t){return t.animationUpdate(e)}))}function Z(e){var t=null,n=1/0;return e.forEach((function(e){e.fValue<n&&(n=e.fValue,t=e)})),t}function K(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r].target.name===t){n=r;break}e.splice(n,1)}function J(e,t){return Math.floor(10*e.distanceTo(t))}function $(e,t){for(var n=0;n<e.length;n++)if(e[n].target.name===t)return!0;return!1}function ee(e,t){for(var n=0;n<e.length;n++)if(e[n].target.name===t)return e[n];return null}function te(e){for(var t={},n=function(n){var r=e[n].point,i=e[n+1].point,o=new a.Line3(r,i);Object.values(v.poiList).forEach((function(e){var n=new a.Vector3;e.getWorldPosition(n);var r=new a.Vector3;o.closestPointToPoint(n,!1,r);var i=r.distanceTo(n),s=o.closestPointToPointParameter(n,!1);0<=s&&s<=1?i<=N&&(t[e.name]=e.getData()):s<0?o.start.distanceTo(n)<=N&&(t[e.name]=e.getData()):1<s&&o.end.distanceTo(n)<=N&&(t[e.name]=e.getData())}))},r=0;r<e.length-1;r++)n(r);return Object.values(t)}function ne(e,t,n){for(var r=new H(e,0,0,0,null),i=new H(t,0,0,0,null),o=[r],a=[],s=null;o.length>0&&(K(o,(s=Z(o)).target.name),a.push(s),s.target.name!==i.target.name);)for(var l=0;l<s.target.userData.links.length;l++){var u=s.target.userData.links[l];if(!$(a,u))if(!B(u,n))if(!U(u)){var c=m[u];if(c){var h=c.WorldLocation,f=s.gValue+J(s.WorldLocation,h),p=J(h,i.WorldLocation),d=f+p,v=$(o,u),g=ee(o,u);(g&&d<g.fValue||!v)&&(g&&(g.gValue=f,g.hValue=p,g.fValue=d,g.parent=s),v||o.push(new H(c,f,p,d,s)))}}}for(var y=[];s;)y.push({point:s.WorldLocation,floorName:s.target.userData.property.floor,property:s.target.userData.property}),s=s.parent;return y=y.reverse()}function re(e,t,n){if(!(Object.values(m).length<2)){t instanceof Array==!1&&(t=[t]);var r=[],i=m[e];t.forEach((function(e){var t=m[e],o=ne(i,t,n);r.push(o)})),A.forEach((function(e){d.remove(e),e.dispose()})),A=[];var o=[];return r.forEach((function(e){var t=new Y(e);d.add(t),A.push(t);var n={points:[],distanceKM:0,distanceM:0,distanceCM:0,distanceMM:0};e.forEach((function(e){return n.points.push({position:{x:e.point.x,y:e.point.y,z:e.point.z},floor:e.floorName})}));for(var r=0;r<e.length-1;r++){var i=e[r].point.clone(),a=e[r+1].point.clone();n.distanceM+=i.distanceTo(a)}n.distanceKM=n.distanceM*Math.pow(10,-3),n.distanceCM=n.distanceM*Math.pow(10,2),n.distanceMM=n.distanceM*Math.pow(10,3),o.push(n)})),o}console.warn("not enough topology data.")}function ie(e,t,n,r){if(!(Object.values(m).length<2)){t instanceof Array==!1&&(t=[t]);var i=[],o=new a.Vector3(e.x,e.y,e.z),s=V(o,e.floorName,r);t.forEach((function(t){var l=new a.Vector3(t.x,t.y,t.z),u=V(l,t.floorName,r),c=ne(s,u,r);n&&(c.splice(0,0,{point:o.clone(),floorName:e.floorName}),c.push({point:l.clone(),floorName:t.floorName})),i.push(c)})),A.forEach((function(e){d.remove(e),e.dispose()})),A=[];var l=[];return i.forEach((function(e){var t=new Y(e);d.add(t),A.push(t);var n={points:[],distanceKM:0,distanceM:0,distanceCM:0,distanceMM:0};e.forEach((function(e){return n.points.push({position:{x:e.point.x,y:e.point.y,z:e.point.z},floor:e.floorName})}));for(var r=0;r<e.length-1;r++){var i=e[r].point.clone(),o=e[r+1].point.clone();n.distanceM+=i.distanceTo(o)}n.distanceKM=n.distanceM*Math.pow(10,-3),n.distanceCM=n.distanceM*Math.pow(10,2),n.distanceMM=n.distanceM*Math.pow(10,3),n.detectedPoiList=te(e),l.push(n)})),l}console.warn("not enough topology data.")}function oe(e,t,n,r){if(Object.values(m).length<2)console.warn("not enough topology data.");else{t instanceof Array==!1&&(t=[t]);var i=e.id in v.poiList;if(i){var o=v.poiList[e.id];o.updateMatrixWorld(!0);var s=new a.Vector3;o.getWorldPosition(s);var l=[];return t.forEach((function(e){var t=e.id in v.poiList;if(i&&t){var n=v.poiList[e.id];n.updateMatrixWorld(!0);var r=new a.Vector3;n.getWorldPosition(r),l.push({x:r.x,y:r.y,z:r.z,floorName:e.floorName})}})),ie({x:s.x,y:s.y,z:s.z,floorName:e.floorName},l,n,r)}}}function ae(e,t,n){if(Object.values(m).length<2)console.warn("not enough topology data.");else{t instanceof Array==!1&&(t=[t]);var r=e.id in v.poiList;if(r){var i=v.poiList[e.id];i.updateMatrixWorld(!0);var o=new a.Vector3;i.getWorldPosition(o);var s=[];t.forEach((function(e){var t=e.id in v.poiList;if(r&&t){var n=v.poiList[e.id];n.updateMatrixWorld(!0);var i=new a.Vector3;n.getWorldPosition(i),s.push({x:i.x,y:i.y,z:i.z,floorName:e.floorName,poiId:e.id})}}));var l=[],u=V(o,e.floorName,n);s.forEach((function(t){var r=new a.Vector3(t.x,t.y,t.z),i=V(r,t.floorName,n),s=ne(u,i,n);s.splice(0,0,{point:o.clone(),floorName:e.floorName,poiId:e.id}),s.push({point:r.clone(),floorName:t.floorName,poiId:t.poiId}),l.push(s)}));var c=[];return l.forEach((function(e){var t={points:[],distanceKM:0,distanceM:0,distanceCM:0,distanceMM:0,startPoi:v.poiList[e[0].poiId].getData(),endPoi:v.poiList[e[e.length-1].poiId].getData()};e.forEach((function(e){return t.points.push({position:{x:e.point.x,y:e.point.y,z:e.point.z},floor:e.floorName})}));for(var n=0;n<e.length-1;n++){var r=e[n].point.clone(),i=e[n+1].point.clone();t.distanceM+=r.distanceTo(i)}t.distanceKM=t.distanceM*Math.pow(10,-3),t.distanceCM=t.distanceM*Math.pow(10,2),t.distanceMM=t.distanceM*Math.pow(10,3),t.detectedPoiList=te(e),c.push(t)})),c.sort((function(e,t){return e.distanceM<t.distanceM?-1:e.distanceM>t.distanceM?1:0})),c}}}function se(){A.forEach((function(e){d.remove(e),e.dispose()})),A=[]}function le(e){O=e,A.forEach((function(e){return e.updateVisuals()}))}function ue(e){L=e,A.forEach((function(e){return e.updateVisuals()}))}function ce(e){A.forEach((function(t){t.show(e)}))}function he(e){A.forEach((function(t){t.hide(e)}))}function fe(){A.forEach((function(e){e.showAll()}))}function pe(){A.forEach((function(e){e.hideAll()}))}function de(){C=!0,A.forEach((function(e){e.traverse((function(e){e instanceof W&&e.distanceLabel?e.distanceLabel.visible=C:e instanceof y&&e.userData.distanceLabel&&(e.userData.distanceLabel.visible=C)}))}))}function me(){C=!1,A.forEach((function(e){e.traverse((function(e){e instanceof W&&e.distanceLabel?e.distanceLabel.visible=C:e instanceof y&&e.userData.distanceLabel&&(e.userData.distanceLabel.visible=C)}))}))}function ve(e){D=e,A.forEach((function(e){e.traverse((function(e){e instanceof W&&e.distanceLabel?e.updateLabelScale():e instanceof y&&e.userData.distanceLabel&&e.updateLabelScale(D)}))}))}function ge(e){"add"!==(k=e)&&"segment"!==k&&(k="add"),A.forEach((function(e){e.traverse((function(e){e instanceof W&&e.distanceLabel?(e.disposeLabel(),e.createDistanceLabel()):e instanceof y&&e.userData.distanceLabel&&(e.userData.labelType=k,e.disposeLabel(),e.createDistanceLabel())}))}))}function ye(e,t){R&&(R.dispose(),R=null);(new a.TextureLoader).load(e,(function(e){e.wrapS=a.RepeatWrapping,e.wrapT=a.RepeatWrapping,e.needsUpdate=!0,R=e,t&&t()}),null,(function(e){console.error(e)}))}function be(e){I=e,A.forEach((function(e){e.traverse((function(e){e instanceof W?e.visible="solid"===I:e instanceof y&&(e.visible="animation"===I,e.userData.distanceLabel&&(e.userData.distanceLabel.visible="animation"===I))}))}))}function xe(e){F=e,A.forEach((function(e){e.traverse((function(e){e instanceof y&&(e.userData.lineAnimSpeedRatio=F)}))}))}function we(){A.forEach((function(e){e.hidePoiDetectBounding(),e.showPoiDetectBounding()}))}function qe(){A.forEach((function(e){return e.hidePoiDetectBounding()}))}function _e(e){N=e,A.forEach((function(e){e.bPoiDetectBoundingVisibleFlag&&(e.hidePoiDetectBounding(),e.showPoiDetectBounding())}))}function Se(e){j.push(e)}function Me(){j=[]}var Ee=n(5);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce,De,ke,Ie,Re,Fe,Ne,je,ze,Be,Ue,Ve,Ge,He,We,Xe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ae(this,Oe(t).call(this))).mixer=null,e.model=null,e.actions={},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,e),n=t,(r=[{key:"loadModel",value:function(e,t){var n=this,r=this;(new Ee.GLTFLoader).load(e,(function(e){var i,o;r.model=e.scene,r.model.rotateY(Math.PI),n.add(r.model);for(var s=0;s<e.animations.length;s++){var l=e.animations[s];"Idle"===l.name?i=l:"Walking"!==l.name&&"Walk"!==l.name||(o=l)}r.mixer=new a.AnimationMixer(r.model),r.actions.idle=r.mixer.clipAction(i),r.actions.walk=r.mixer.clipAction(o),r.actions.idle.play(),r.actions.walk.play(),r.doIdle(),t&&t()}),null,(function(e){console.error(e)}))}},{key:"setVisible",value:function(e){this.visible=e}},{key:"update",value:function(e){this.mixer&&this.mixer.update(e)}},{key:"doIdle",value:function(){this.prepareCrossFade(this.actions.walk,this.actions.idle,.1)}},{key:"doWalk",value:function(){this.prepareCrossFade(this.actions.idle,this.actions.walk,.1)}},{key:"prepareCrossFade",value:function(e,t,n){this.executeCrossFade(e,t,n)}},{key:"executeCrossFade",value:function(e,t,n){this.setWeight(t,1),t.time=0,e.crossFadeTo(t,n,!0)}},{key:"synchronizeCrossFade",value:function(e,t,n){this.mixer.addEventListener("loop",(function i(o){o.action===e&&(r.mixer.removeEventListener("loop",i),r.executeCrossFade(e,t,n))}));var r=this}},{key:"setWeight",value:function(e,t){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(t)}}])&&Pe(n.prototype,r),i&&Pe(n,i),t}(a.Object3D),Ye=n(2),Qe=0,Ze=0,Ke=null,Je=null,$e=0,et=0,tt="",nt=null,rt=null,it=!1,ot=!1,at=10,st=null,lt=0,ut=a.Math.degToRad(45),ct=a.Math.degToRad(45),ht=50,ft=null,pt=!1,dt=0,mt=null,vt=null,gt=null,yt=null,bt=null,xt=null,wt="fpsBase",qt=[],_t=null,St=null,Mt=10,Et=null,Tt=null,Pt=!1,At=null,Ot=null;function Lt(e,t,n,r,i,o,s,l){Ce=e,yt=t,bt=n,De=r,ke=i,Ie=o,xt=s,Re=l,Fe=new a.Clock,Ke=new a.Object3D;var u=new a.OctahedronBufferGeometry;u.translate(0,.5,0),u.scale(1,2,1);var c=new a.MeshStandardMaterial({color:16711680});st=new a.Mesh(u,c),De.add(st),st.visible=!1,mt=new a.PerspectiveCamera(60,yt.clientWidth/yt.clientHeight,.1,5e4);var h=new a.SphereBufferGeometry(1,32,32),f=new a.MeshBasicMaterial({color:16711680,transparent:!0,opacity:.5});St=new a.Mesh(h,f),De.add(St),St.scale.setScalar(Mt),St.visible=!1}function Ct(){Je=requestAnimationFrame(Ct);var e,t=Fe.getDelta();if(Et&&Et.update(t),it&&!Pt){(lt+=5*t)>=2*Math.PI&&(lt=0);Ne.getPathLength();var n=Ne.pointsInfo,r=n[Qe].point.clone(),i=n[Qe+1].point.clone(),o=r.distanceTo(i);if((Ze+=1/o*t*at)>=1)Ze=0,ft&&n[Qe].floorName!==n[Qe+1].floorName&&ft.doWalk(),++Qe>=n.length-1&&(cancelAnimationFrame(Je),it=!1,ft&&ft.doIdle(),rt&&rt());else{var s=(new a.Vector3).lerpVectors(r,i,Ze);St.position.copy(s),e=s,Object.values(xt.poiList).forEach((function(t){var n=new a.Vector3;t.pointObject.getWorldPosition(n),e.distanceTo(n)<Mt?-1===qt.indexOf(t)&&(_t&&_t("in",t.getData()),qt.push(t)):qt.indexOf(t)>=0&&(_t&&_t("out",t.getData()),qt.splice(qt.indexOf(t),1))}));var l=(new a.Vector3).lerpVectors(r,i,Ze);l.y+=$e;var u=i.clone();u.y=l.y;var c=(new a.Vector3).subVectors(u,l);c.normalize();var h=l.clone().addScaledVector(c,-1);if(Ke.position.copy(l),Ke.lookAt(h),st.position.lerp(Ke.position,.1),st.rotation.y=lt,ft&&(ft.position.lerp(Ke.position,.1),ft.quaternion.slerp(Ke.quaternion,et),ft.visible=pt&&"tpsBase"===wt),"tpsBase"===wt){var f=(new a.Quaternion).setFromAxisAngle(new a.Vector3(1,0,0),ct),p=(new a.Quaternion).setFromAxisAngle(new a.Vector3(0,1,0),ut),d=new a.Vector3(0,0,-1).applyQuaternion(f).applyQuaternion(p);d.normalize(),ke.position.lerp(st.position.clone().addScaledVector(d,ht),.1),ke.lookAt(st.position),Ie.target.copy(st.position),Ie.update(),mt.position.lerp(Ke.position.clone().addScaledVector(new a.Vector3(0,1,0),dt),.1),mt.quaternion.slerp(Ke.quaternion,et)}else if("fpsBase"===wt){var m=(new a.Quaternion).setFromAxisAngle(new a.Vector3(1,0,0),ct),v=(new a.Quaternion).setFromAxisAngle(new a.Vector3(0,1,0),ut),g=new a.Vector3(0,0,-1).applyQuaternion(m).applyQuaternion(v);g.normalize(),mt.position.lerp(st.position.clone().addScaledVector(g,ht),.1),mt.lookAt(st.position),ke.position.lerp(Ke.position.addScaledVector(new a.Vector3(0,1,0),dt),.1),ke.quaternion.slerp(Ke.quaternion,et);var y=new a.Vector3;ke.getWorldDirection(y),Ie.target.copy(ke.position.clone().addScaledVector(y,5)),Ie.update()}var b=n[Qe],x=n[Qe+1];(tt!==x.floorName&&b.floorName!==x.floorName||tt&&tt!==x.floorName)&&(nt&&nt({from:b,to:x}),tt&&ft&&ft.doIdle()),tt=x.floorName}vt&&(ft&&(ft.visible=pt&&"fpsBase"===wt),vt.render(bt,mt),ft&&(ft.visible=pt&&"tpsBase"===wt))}}function Dt(e){_t=e}function kt(e){Mt=e,St.scale.setScalar(Mt)}function It(){St.visible=!0}function Rt(){St.visible=!1}function Ft(e){if(cancelAnimationFrame(Je),Ne=Re()){if(st.position.copy(Ne.pointsInfo[0].point),ut=e.phi?a.Math.degToRad(e.phi):ut,ct=e.theta?a.Math.degToRad(e.theta):ct,ht=e.tpsRadius?e.tpsRadius:ht,at=e.speed?e.speed:at,$e=e.cameraHeight?e.cameraHeight:1,dt=$e,e.moveToStartTime=e.moveToStartTime?e.moveToStartTime:1,e.readyTime=e.readyTime?e.readyTime:1,e.readyTime*=1e3,et=e.cameraRotationSpeed?e.cameraRotationSpeed:.1,nt=e.onChangeFloor,rt=e.onComplete,Qe=0,Ze=0,Fe=new a.Clock,it=!0,ot=!1,lt=0,qt=[],tt="",ft&&ft.position.copy(Ne.pointsInfo[0].point),e.cameraState0)At&&At.stop(),Ot&&Ot.stop(),Object.assign(e.cameraState0,{onComplete:function(){e.cameraState0.onMoveFinished&&e.cameraState0.onMoveFinished(),Ce.setState(e.cameraState1)}}),Object.assign(e.cameraState1,{onComplete:function(){e.cameraState1.onMoveFinished&&e.cameraState1.onMoveFinished();var t=new a.Quaternion,n=new a.Object3D;n.position.copy(ke.position),n.quaternion.copy(ke.quaternion),n.updateMatrix(),n.updateMatrix(),t=n.quaternion.clone().multiply((new a.Quaternion).setFromAxisAngle(new a.Vector3(0,1,0),Math.PI)),Ot=new Ye.a.Tween(ke.position).to({x:Ne.pointsInfo[0].point.x,y:ke.position.y,z:Ne.pointsInfo[0].point.z},1e3).easing(Ye.a.Easing.Quartic.In);(At=new Ye.a.Tween({value:0}).to({value:1},1e3).easing(Ye.a.Easing.Quartic.In).onUpdate((function(e){ke.quaternion.slerp(t,e.value)}))).onComplete((function(){e.onRotationFinished&&e.onRotationFinished(),setTimeout((function(){var e=new a.Vector3;ke.getWorldDirection(e),Ie.target.copy(ke.position.clone().addScaledVector(e,10)),Ie.update(),Et=null,Pt=!1,ft&&ft.doWalk()}),3e3)})),At.start(),Ot.start(),e.onRotationStarted&&e.onRotationStarted()}}),Pt=!0,Ce.setState(e.cameraState0);else if("tpsBase"===wt){var t=(new a.Quaternion).setFromAxisAngle(new a.Vector3(1,0,0),ct),n=(new a.Quaternion).setFromAxisAngle(new a.Vector3(0,1,0),ut),r=new a.Vector3(0,0,-1).applyQuaternion(t).applyQuaternion(n);r.normalize();var i=st.position.clone().addScaledVector(r,ht),o=(new a.Matrix4).lookAt(i,st.position.clone(),new a.Vector3(0,1,0)),s=(new a.Quaternion).setFromRotationMatrix(o);Ie.target.copy(st.position);var l=new a.VectorKeyframeTrack(".position",[0,e.moveToStartTime],[ke.position.x,ke.position.y,ke.position.z,i.x,i.y,i.z]),u=new a.QuaternionKeyframeTrack(".quaternion",[0,e.moveToStartTime],[ke.quaternion.x,ke.quaternion.y,ke.quaternion.z,ke.quaternion.w,s.x,s.y,s.z,s.w]),c=new a.AnimationClip("ready",e.moveToStartTime,[l,u]);Et=new a.AnimationMixer(ke),(Tt=Et.clipAction(c)).loop=a.LoopOnce,Tt.clampWhenFinished=!0,Tt.play(),Pt=!0,Et.addEventListener("finished",(function(){Et=null,Pt=!1,ft&&ft.doWalk()}))}else if("fpsBase"===wt){var h=(new a.Vector3).lerpVectors(Ne.pointsInfo[0].point,Ne.pointsInfo[1].point,.5).addScaledVector(new a.Vector3(0,1,0),dt),f=Ne.pointsInfo[0].point.clone().addScaledVector(new a.Vector3(0,1,0),dt),p=(new a.Matrix4).lookAt(h,f,new a.Vector3(0,1,0)),d=(new a.Quaternion).setFromRotationMatrix(p);Ie.target.copy(f);var m=new a.VectorKeyframeTrack(".position",[0,e.moveToStartTime],[ke.position.x,ke.position.y,ke.position.z,h.x,h.y,h.z]),v=new a.QuaternionKeyframeTrack(".quaternion",[0,.5*e.moveToStartTime,e.moveToStartTime],[ke.quaternion.x,ke.quaternion.y,ke.quaternion.z,ke.quaternion.w,d.x,d.y,d.z,d.w,d.x,d.y,d.z,d.w]),g=new a.AnimationClip("ready",e.moveToStartTime,[m,v]);Et=new a.AnimationMixer(ke),(Tt=Et.clipAction(g)).loop=a.LoopOnce,Tt.clampWhenFinished=!0,Tt.play(),Pt=!0,Et.addEventListener("finished",(function(){setTimeout((function(){Et=null,Pt=!1,ft&&ft.doWalk()}),e.readyTime)}))}Ct()}}function Nt(){it=!1,ot=!0}function jt(){it=!0,ot=!1}function zt(){cancelAnimationFrame(Je),it=!1,ot=!1,ft&&ft.doIdle()}function Bt(){return it}function Ut(){return ot}function Vt(){return!it}function Gt(e){at=e}function Ht(e){$e=e}function Wt(e){et=e}function Xt(e){switch(e){case 0:wt="tpsBase";break;case 1:wt="fpsBase";break;default:wt="tpsBase"}}function Yt(e){e&&(gt=e,vt&&(vt.dispose(),vt.domElement.parentElement.removeChild(vt.domElement)),(vt=new a.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),vt.setSize(gt.clientWidth,gt.clientHeight),gt.appendChild(vt.domElement),mt.aspect=gt.clientWidth/gt.clientHeight,mt.updateProjectionMatrix())}function Qt(){st.visible=!0}function Zt(){st.visible=!1}function Kt(e){ht=e}function Jt(e,t){ft||(ft=new Xe,De.add(ft),ft.loadModel(e,t),pt=!1,ft.visible=pt)}function $t(e){ft&&!ot&&ft.update(e)}function en(e){ft&&ft.scale.setScalar(e)}function tn(){ft&&(pt=!0,ft.visible=pt)}function nn(){ft&&(pt=!1,ft.visible=pt)}function rn(e,t,n){if(ft&&!it)if("string"==typeof e){if(xt.poiList.hasOwnProperty(e)){var r=xt.poiList[e];ft.position.copy(r.position)}}else ft.position.set(e,t,n)}function on(e){dt=e}function an(e,t,n,r,i,a,s,l){je=e,ze=t,Be=n,Ue=r,Ve=i,Ge=a,He=s,We=l;var u=o.initialize(ze,Be,Ue,Ge,He,We);z(Ge,u,We,ze,Ue),Lt(je,Ue,Ve,Ge,ze,Be,We,G)}function sn(e){Q(e),$t(e)}n.d(t,"initialize",(function(){return an})),n.d(t,"update",(function(){return sn})),n.d(t,"Data",(function(){return o})),n.d(t,"PathFinder",(function(){return r})),n.d(t,"Animation",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(17),o=function(e,t){i.a.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r.UniformsUtils.clone(e.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i.a.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}})},function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return u})),n.d(t,"add",(function(){return c})),n.d(t,"remove",(function(){return f})),n.d(t,"clear",(function(){return m})),n.d(t,"set",(function(){return d})),n.d(t,"addObject",(function(){return h})),n.d(t,"removeObject",(function(){return p})),n.d(t,"hoverEventOn",(function(){return v})),n.d(t,"hoverEventOff",(function(){return g})),n.d(t,"addHoverEventCallback",(function(){return b})),n.d(t,"removeHoverEventCallback",(function(){return x}));var r=n(0),i=n(22),o=null,a=null,s=null,l=new i.a;function u(e){o=e}function c(e,t){var n=e.getObjectByName(t);n&&o.selectedObjects.push(n)}function h(e){o.selectedObjects.push(e)}function f(e,t){var n=e.getObjectByName(t);if(n){var r=o.selectedObjects.indexOf(n);r>=0&&o.selectedObjects.splice(r,1)}}function p(e){var t=o.selectedObjects.indexOf(e);t>=0&&o.selectedObjects.splice(t,1)}function d(e){o.selectedObjects.push(e)}function m(){o.selectedObjects=[]}function v(e,t){g(),s=t,(a=e).dom.addEventListener("pointermove",y,!1)}function g(){m(),a&&a.dom.removeEventListener("pointermove",y)}function y(e){m();var t=new r.Vector2(e.offsetX/a.dom.clientWidth*2-1,-e.offsetY/a.dom.clientHeight*2+1),n=new r.Raycaster;n.setFromCamera(t,a.camera.getActiveCamera());var i=n.intersectObjects([a.workObjGroup],!0);if(i.length>0)if(i[0].object.userData.hasOwnProperty("property")){var o=i[0].object.userData.property;o.hasOwnProperty(s)?(d(i[0].object),l.dispatchEvent({type:"onObjectHover",property:o,pointerEventData:e})):l.dispatchEvent({type:"onObjectHover",property:null,pointerEventData:e})}else l.dispatchEvent({type:"onObjectHover",property:null,pointerEventData:e});else l.dispatchEvent({type:"onObjectHover",property:null,pointerEventData:e})}function b(e){l.addEventListener("onObjectHover",e)}function x(e){l.removeEventListener("onObjectHover",e)}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(22),o=n(3);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return u(this,t),(n=f(this,p(t).call(this))).uuid=r.Math.generateUUID(),n.workName=e||"지정되지 않은 작업",n.eventData=null,n}return d(t,e),h(t,[{key:"execute",value:function(){}},{key:"undo",value:function(){}}]),t}(i.a),g=function(e){function t(e,n,r,i,o,a,s,l,c,h,d,m){var v;return u(this,t),(v=f(this,p(t).call(this,"노드 위치점 생성"))).pointId=e,v.linkId=n,v.geometry=r,v.material=i,v.selectMaterial=o,v.property=a,v.position=s.clone(),v.root=l,v.storage=c,v.lastPointId=h,v.pointCreatorCallback=m,v.bIsOneWay=d,v.eventData={name:v.pointId,position:{x:s.x,y:s.y,z:s.z},property:a},v}return d(t,e),h(t,[{key:"execute",value:function(){s(p(t.prototype),"execute",this).call(this);var e=new o.c(this.pointId,this.geometry,this.material,this.selectMaterial,this.property);if(this.root.add(e),e.position.copy(this.position),this.storage[this.pointId]=e,this.lastPointId){var n=new o.b(this.linkId,this.storage[this.lastPointId],e,this.material,this.selectMaterial,{},this.bIsOneWay);this.root.add(n),this.storage[this.linkId]=n}}},{key:"undo",value:function(){if(s(p(t.prototype),"undo",this).call(this),this.storage[this.pointId]){var e=this.storage[this.pointId];this.root.remove(e),e.dispose(),delete this.storage[this.pointId]}if(this.storage[this.linkId]){var n=this.storage[this.linkId];this.root.remove(n),n.dispose(),delete this.storage[this.linkId]}this.pointCreatorCallback(null)}}]),t}(v),y=function(e){function t(e,n,r){var i;for(var o in u(this,t),(i=f(this,p(t).call(this,"객체 편집"))).prevData=e,i.currData=n,i.storage=r,i.eventData=[],i.currData)i.eventData.push({name:o,position:{x:i.currData[o].x,y:i.currData[o].y,z:i.currData[o].z},property:i.storage[o].userData.property});return i}return d(t,e),h(t,[{key:"execute",value:function(){var e=this;s(p(t.prototype),"execute",this).call(this);var n=[],i=function(t){var i=e.currData[t],a=e.storage[t];if(a instanceof o.c)a.position.copy(i),n=n.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===a.name||e.curve.p2.name===a.name)})));else if(a instanceof o.b){var s=a.curve.p1,l=a.curve.p2,u=(new r.Vector3).subVectors(e.currData[t],e.prevData[t]);s.name in e.currData==!1&&(s.position.add(u),n=n.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===s.name||e.curve.p2.name===s.name)})))),l.name in e.currData==!1&&(l.position.add(u),n=n.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===l.name||e.curve.p2.name===l.name)})))),n.push(a)}};for(var l in this.currData)i(l);(n=a(new Set(n))).forEach((function(e){e.updateGeometry()}))}},{key:"undo",value:function(){var e=this;s(p(t.prototype),"undo",this).call(this);var n=[],i=function(t){var i=e.prevData[t],a=e.storage[t];if(a instanceof o.c)a.position.copy(i),n=n.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===a.name||e.curve.p2.name===a.name)})));else if(a instanceof o.b){var s=a.curve.p1,l=a.curve.p2,u=(new r.Vector3).subVectors(e.prevData[t],e.currData[t]);s.name in e.currData==!1&&(s.position.add(u),n=n.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===s.name||e.curve.p2.name===s.name)})))),l.name in e.currData==!1&&(l.position.add(u),n=n.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===l.name||e.curve.p2.name===l.name)})))),n.push(a)}};for(var l in this.prevData)i(l);(n=a(new Set(n))).forEach((function(e){e.updateGeometry()}))}}]),t}(v),b=function(e){function t(e,n,r,i,o,a,s,l,c,h,d){var m;return u(this,t),(m=f(this,p(t).call(this,"중간점 생성"))).targetLinkId=e,m.newPointId=n,m.newLinkId_1=r,m.newLinkId_2=i,m.geometry=o,m.material=a,m.selectMaterial=s,m.property=l,m.position=c.clone(),m.root=h,m.storage=d,m.srcName_p1=m.storage[m.targetLinkId].curve.p1.name,m.srcName_p2=m.storage[m.targetLinkId].curve.p2.name,m.bIsOneWay=m.storage[m.targetLinkId].bIsOneWay,m.eventData={p1:m.storage[m.targetLinkId].curve.p1.name,p2:m.storage[m.targetLinkId].curve.p2.name,mid:m.newPointId,position:{x:m.position.x,y:m.position.y,z:m.position.z}},m}return d(t,e),h(t,[{key:"execute",value:function(){s(p(t.prototype),"execute",this).call(this);var e=new o.c(this.newPointId,this.geometry,this.material,this.selectMaterial,this.property);this.root.add(e),e.position.copy(this.position),this.storage[this.newPointId]=e;var n=this.storage[this.targetLinkId];this.root.remove(n),n.dispose(),delete this.storage[this.targetLinkId];var r=new o.b(this.newLinkId_1,this.storage[this.srcName_p1],this.storage[this.newPointId],this.material,this.selectMaterial,{},this.bIsOneWay);this.root.add(r),this.storage[this.newLinkId_1]=r;var i=new o.b(this.newLinkId_2,this.storage[this.newPointId],this.storage[this.srcName_p2],this.material,this.selectMaterial,{},this.bIsOneWay);this.root.add(i),this.storage[this.newLinkId_2]=i}},{key:"undo",value:function(){if(s(p(t.prototype),"undo",this).call(this),this.storage[this.newPointId]){var e=this.storage[this.newPointId];this.root.remove(e),e.dispose(),delete this.storage[this.newPointId]}if(this.storage[this.newLinkId_1]){var n=this.storage[this.newLinkId_1];this.root.remove(n),n.dispose(),delete this.storage[this.newLinkId_1]}if(this.storage[this.newLinkId_2]){var r=this.storage[this.newLinkId_2];this.root.remove(r),r.dispose(),delete this.storage[this.newLinkId_2]}var i=new o.b(this.targetLinkId,this.storage[this.srcName_p1],this.storage[this.srcName_p2],this.material,this.selectMaterial,{},this.bIsOneWay);this.root.add(i),this.storage[this.targetLinkId]=i}}]),t}(v),x=function(e){function t(e,n){var r;return u(this,t),(r=f(this,p(t).call(this,"연결 형식 변경, 양방향->단방향"))).targetLinkId=e,r.storage=n,r.eventData={p1:r.storage[r.targetLinkId].curve.p1.name,p2:r.storage[r.targetLinkId].curve.p2.name},r}return d(t,e),h(t,[{key:"execute",value:function(){s(p(t.prototype),"execute",this).call(this);var e=this.storage[this.targetLinkId];e.bIsOneWay=!0,e.curve.p2.disconnect(e.curve.p1),e.updateGeometry()}},{key:"undo",value:function(){s(p(t.prototype),"undo",this).call(this);var e=this.storage[this.targetLinkId];e.bIsOneWay=!1,e.curve.p2.connect(e.curve.p1),e.updateGeometry()}}]),t}(v),w=function(e){function t(e,n){var r;return u(this,t),(r=f(this,p(t).call(this,"연결 형식 변경, 단방향->양방향"))).targetLinkId=e,r.storage=n,r.eventData={p1:r.storage[r.targetLinkId].curve.p1.name,p2:r.storage[r.targetLinkId].curve.p2.name},r}return d(t,e),h(t,[{key:"execute",value:function(){s(p(t.prototype),"execute",this).call(this);var e=this.storage[this.targetLinkId];e.bIsOneWay=!1,e.curve.p2.connect(e.curve.p1),e.updateGeometry()}},{key:"undo",value:function(){s(p(t.prototype),"undo",this).call(this);var e=this.storage[this.targetLinkId];e.bIsOneWay=!0,e.curve.p2.disconnect(e.curve.p1),e.updateGeometry()}}]),t}(v),q=function(e){function t(e,n){var r;return u(this,t),(r=f(this,p(t).call(this,"단방향 연결 방향 변경"))).targetLinkId=e,r.storage=n,r.eventData={p1:r.storage[r.targetLinkId].curve.p1.name,p2:r.storage[r.targetLinkId].curve.p2.name},r}return d(t,e),h(t,[{key:"execute",value:function(){s(p(t.prototype),"execute",this).call(this);var e=this.storage[this.targetLinkId];e.curve.p1.connect(e.curve.p2),e.curve.p2.connect(e.curve.p1);var n=[e.curve.p2,e.curve.p1];e.curve.p1=n[0],e.curve.p2=n[1],e.curve.p2.disconnect(e.curve.p1),e.updateGeometry()}},{key:"undo",value:function(){s(p(t.prototype),"undo",this).call(this);var e=this.storage[this.targetLinkId];e.curve.p1.connect(e.curve.p2),e.curve.p2.connect(e.curve.p1);var n=[e.curve.p2,e.curve.p1];e.curve.p1=n[0],e.curve.p2=n[1],e.curve.p2.disconnect(e.curve.p1),e.updateGeometry()}}]),t}(v),_=function(e){function t(e,n,r,i,o,a,s,l,c){var h;return u(this,t),(h=f(this,p(t).call(this,"노드 연결"))).linkId=e,h.startNodeName=n,h.endNodeName=r,h.material=i,h.selectMaterial=o,h.property=a,h.root=s,h.storage=l,h.bIsOneWay=c,h.eventData={p1:h.startNodeName,p2:h.endNodeName},h}return d(t,e),h(t,[{key:"execute",value:function(){s(p(t.prototype),"execute",this).call(this);var e=new o.b(this.linkId,this.storage[this.startNodeName],this.storage[this.endNodeName],this.material,this.selectMaterial,this.property,this.bIsOneWay);this.root.add(e),this.storage[this.linkId]=e}},{key:"undo",value:function(){if(s(p(t.prototype),"undo",this).call(this),this.storage[this.linkId]){var e=this.storage[this.linkId];this.root.remove(e),e.dispose(),delete this.storage[this.linkId]}}}]),t}(v),S=function(e){function t(e,n,r,i,s,l){var c;return u(this,t),(c=f(this,p(t).call(this,"객체 제거"))).delIdList=e,c.storage=n,c.root=r,c.geometry=i,c.material=s,c.selectMaterial=l,c.eventData=c.delIdList,c.delObjDatas=[],c.delIdList.forEach((function(e){var t=c.storage[e];if(t instanceof o.c){var n=t.name,r=t.userData.property,i=a(t.userData.links),s=t.position.clone();Object.values(c.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===n||e.curve.p2.name===n)})).forEach((function(e){c.delObjDatas.push({type:"link",id:e.name,property:e.property,p1Name:e.curve.p1.name,p2Name:e.curve.p2.name,bIsOneWay:e.bIsOneWay})})),c.delObjDatas.push({type:"point",id:n,property:r,links:i,position:s})}else if(t instanceof o.b){var l=t.name,u=t.property,h=t.curve.p1.name,f=t.curve.p2.name;c.delObjDatas.push({type:"link",id:l,property:u,p1Name:h,p2Name:f,bIsOneWay:t.bIsOneWay})}})),c.delObjDatas=c.delObjDatas.filter((function(e,t){return t===c.delObjDatas.findIndex((function(t){return t.id===e.id}))})),c}return d(t,e),h(t,[{key:"execute",value:function(){var e=this;s(p(t.prototype),"execute",this).call(this),this.delObjDatas.filter((function(e){return"link"===e.type})).forEach((function(t){var n=e.storage[t.id];e.root.remove(n),n.dispose(),delete e.storage[t.id]})),this.delObjDatas.filter((function(e){return"point"===e.type})).forEach((function(t){var n=e.storage[t.id];e.root.remove(n),n.dispose(),delete e.storage[t.id]}))}},{key:"undo",value:function(){var e=this;s(p(t.prototype),"undo",this).call(this),this.delObjDatas.filter((function(e){return"point"===e.type})).forEach((function(t){var n=new o.c(t.id,e.geometry,e.material,e.selectMaterial,t.property);e.root.add(n),n.position.copy(t.position),e.storage[t.id]=n})),this.delObjDatas.filter((function(e){return"link"===e.type})).forEach((function(t){var n=new o.b(t.id,e.storage[t.p1Name],e.storage[t.p2Name],e.material,e.selectMaterial,t.property,t.bIsOneWay);e.root.add(n),e.storage[t.id]=n}))}}]),t}(v),M=function(e){function t(e,n,r,i){var o;return u(this,t),(o=f(this,p(t).call(this,"정렬 "+e+" "))).mode=e,o.targetObjectNames=n,o.storage=r,o.alignViewState={position:i.position.clone(),rotation:i.rotation.clone(),target:i.target.clone()},o.prevStates={},o.targetObjectNames.forEach((function(e){var t=o.storage[e];o.prevStates[e]=t.position.clone()})),o.eventData={mode:o.mode,targets:o.targetObjectNames},o}return d(t,e),h(t,[{key:"calculateAlignedAxses",value:function(){var e=new r.Object3D;e.position.copy(this.alignViewState.position),e.rotation.copy(this.alignViewState.rotation),e.updateMatrix();var t=new r.Vector3(0,1,0),n=new r.Vector3(0,0,-1),i=new r.Vector3(1,0,0);return t.applyQuaternion(e.quaternion),n.applyQuaternion(e.quaternion),i.applyQuaternion(e.quaternion),{up:t,front:n,right:i}}},{key:"updateLinkGeometry",value:function(){var e=this,t=[];this.targetObjectNames.forEach((function(n){var r=e.storage[n];t=t.concat(Object.values(e.storage).filter((function(e){return e instanceof o.b&&(e.curve.p1.name===r.name||e.curve.p2.name===r.name)})))})),(t=a(new Set(t))).forEach((function(e){e.updateGeometry()}))}},{key:"calculateTargetPointHorizontal",value:function(e,t){var n=this;if("top"===t){var i={dotValue:-Number.MAX_VALUE,targetPoint:null};return this.targetObjectNames.forEach((function(t){var r=n.storage[t],o=e.dot(r.position.clone());i.dotValue<=o&&(i.dotValue=o,i.targetPoint=r.position.clone())})),i.targetPoint.clone()}if("bottom"===t){var o={dotValue:Number.MAX_VALUE,targetPoint:null};return this.targetObjectNames.forEach((function(t){var r=n.storage[t],i=e.dot(r.position.clone());i<=o.dotValue&&(o.dotValue=i,o.targetPoint=r.position.clone())})),o.targetPoint.clone()}if("middle"===t){var a=(new r.Box3).makeEmpty();this.targetObjectNames.forEach((function(e){var t=n.storage[e];a.expandByPoint(t.position.clone())}));var s=new r.Vector3;return a.getCenter(s),s}return null}},{key:"calculateTargetPointVertical",value:function(e,t){var n=this;if("left"===t){var i={dotValue:Number.MAX_VALUE,targetPoint:null};return this.targetObjectNames.forEach((function(t){var r=n.storage[t],o=e.dot(r.position.clone());o<=i.dotValue&&(i.dotValue=o,i.targetPoint=r.position.clone())})),i.targetPoint.clone()}if("right"===t){var o={dotValue:-Number.MAX_VALUE,targetPoint:null};return this.targetObjectNames.forEach((function(t){var r=n.storage[t],i=e.dot(r.position.clone());o.dotValue<=i&&(o.dotValue=i,o.targetPoint=r.position.clone())})),o.targetPoint.clone()}if("center"===t){var a=(new r.Box3).makeEmpty();this.targetObjectNames.forEach((function(e){var t=n.storage[e];a.expandByPoint(t.position.clone())}));var s=new r.Vector3;return a.getCenter(s),s}return null}},{key:"execute",value:function(){var e=this;s(p(t.prototype),"execute",this).call(this);var n=this.calculateAlignedAxses(),i=new r.Vector3,o=new r.Vector3;if("top"===this.mode||"middle"===this.mode||"bottom"===this.mode){var a=n.up.projectOnPlane(new r.Vector3(0,1,0)),l=n.right.projectOnPlane(new r.Vector3(0,1,0)),u=this.calculateTargetPointHorizontal(a,this.mode);i.copy(u.clone()),o.copy(i.clone().addScaledVector(l,1))}else if("left"===this.mode||"center"===this.mode||"right"===this.mode){var c=n.up.projectOnPlane(new r.Vector3(0,1,0)),h=n.right.projectOnPlane(new r.Vector3(0,1,0)),f=this.calculateTargetPointVertical(h,this.mode);i.copy(f.clone()),o.copy(i.clone().addScaledVector(c,1))}var d=(new r.Vector3).subVectors(o,i),m=d.lengthSq();this.targetObjectNames.forEach((function(t){var n=e.storage[t],o=(new r.Vector3).subVectors(n.position.clone(),i),a=d.dot(o),s=d.clone();s.divideScalar(m).multiplyScalar(a),n.position.copy(i.clone().add(s))})),this.updateLinkGeometry()}},{key:"undo",value:function(){for(var e in s(p(t.prototype),"undo",this).call(this),this.prevStates){this.storage[e].position.copy(this.prevStates[e])}this.updateLinkGeometry()}}]),t}(v),E=function(e){function t(){var e;return u(this,t),(e=f(this,p(t).call(this))).undoItems=[],e.redoItems=[],e}return d(t,e),h(t,[{key:"undo",value:function(){if(!(this.undoItems.length<=0)){var e=this.undoItems.pop();e.undo(),this.redoItems.push(e),this.dispatchEvent({type:"undo",message:e.workName+" 실행취소",eventData:e.eventData})}}},{key:"redo",value:function(){if(!(this.redoItems.length<=0)){var e=this.redoItems.pop();e.execute(),this.undoItems.push(e),this.dispatchEvent({type:"redo",message:e.workName+"실행",eventData:e.eventData})}}},{key:"removeAfter",value:function(){this.redoItems=[]}},{key:"clear",value:function(){this.undoItems=[],this.redoItems=[]}},{key:"addItem",value:function(e){this.removeAfter(),this.redoItems.push(e),this.redo()}}]),t}(i.a),T=n(29),P=n(54);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function k(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z,B,U,V,G,H,W,X=function(e){function t(e,n,i,o,a,s,l,u,c,h){var f;return L(this,t),(f=k(this,F(t).call(this,e,n,i,o))).workGroup=a,f.geometry=s,f.material=l,f.selectMaterial=u,f.root=c,f.storage=h,f.mouseDownPos=new r.Vector2,f.lastCreatedPointId="",f.currentFloor=null,f}return N(t,e),D(t,[{key:"isLinkValid",value:function(e,t){if(e===t)return!1;for(var n=this.storage[e],r=this.storage[t],i=Object.values(this.storage).filter((function(e){return e instanceof o.b})),a=0;a<i.length;a++){var s=i[a],l=s.curve.p1,u=s.curve.p2;if(n.name===l.name&&r.name===u.name||n.name===u.name&&r.name===l.name)return!1}return!0}},{key:"onPointerDown",value:function(e){R(F(t.prototype),"onPointerDown",this).call(this,e),0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){R(F(t.prototype),"onPointerMove",this).call(this,e);var n=this.calculateMouseRay(e.offsetX,e.offsetY),r=Object.values(this.storage).filter((function(e){return e instanceof o.c})),i=n.intersectObjects(r,!1);if(i.length>0)this.lastCreatedPointId&&(this.disposeArrow(),this.isLinkValid(this.lastCreatedPointId,i[0].object.name)&&this.updateArrow(this.storage[this.lastCreatedPointId].position,this.storage[i[0].object.name].position,!0));else{var a=n.intersectObject(this.workGroup,!0);if(a.length>0){var s=a[0].point;this.lastCreatedPointId&&(this.disposeArrow(),this.updateArrow(this.storage[this.lastCreatedPointId].position,s,!1))}}}},{key:"onPointerUp",value:function(e){var n=this;if(R(F(t.prototype),"onPointerUp",this).call(this,e),new r.Vector2(e.screenX,e.screenY).distanceTo(this.mouseDownPos)<=5&&0===e.button){var i=this.calculateMouseRay(e.offsetX,e.offsetY),a=Object.values(this.storage).filter((function(e){return e instanceof o.c})),s=i.intersectObjects(a,!1);if(s.length>0){if(this.lastCreatedPointId&&this.isLinkValid(this.lastCreatedPointId,s[0].object.name)){var l=r.Math.generateUUID(),u=new _(l,this.lastCreatedPointId,s[0].object.name,this.material,this.selectMaterial,{},this.root,this.storage,this.bIsOneWay);this.undoRedoMgr.addItem(u);var c=this.storage[l].curve.p1.EventData,h=this.storage[l].curve.p2.EventData;this.dispatchEvent({type:"connectLink",eventData:{isOneWay:this.bIsOneWay,p1:c,p2:h}})}this.lastCreatedPointId=s[0].object.name}else{var f=i.intersectObject(this.workGroup,!0);if(f.length>0){var p=f[0].point,d=r.Math.generateUUID(),m=r.Math.generateUUID(),v=new g(d,m,this.geometry,this.material,this.selectMaterial,{floor:this.currentFloor},p,this.root,this.storage,this.lastCreatedPointId,this.bIsOneWay,(function(e){n.lastCreatedPointId=e}));this.undoRedoMgr.addItem(v),this.lastCreatedPointId=d,this.dispatchEvent({type:"pointCreate",eventData:this.storage[d].EventData})}}}}},{key:"onKeyDown",value:function(e){var t=e.key.toLowerCase();"esc"!==t&&"escape"!==t||this.off()}},{key:"on",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];R(F(t.prototype),"on",this).call(this),this.bIsOneWay=e,this.lastCreatedPointId=null}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this),this.lastCreatedPointId=null}},{key:"CurrentFloor",set:function(e){this.currentFloor=e}},{key:"Geometry",set:function(e){this.geometry=e}}]),t}(o.a),Y=function(e){function t(e,n,r,i,o,a){var s;return L(this,t),(s=k(this,F(t).call(this,e,n,r,i))).control=o,s.storage=a,s.selectBox=document.createElement("div"),s.selectBox.style.background="rgba(0, 0, 255, 0.5)",s.selectBox.style.border="solid 2px red",s.selectBox.style.position="absolute",s.selectBox.style.pointerEvents="none",s.selectBox.style.display="none",s.dom.appendChild(s.selectBox),s.bLeftButtonDown=!1,s.onPointerDblClkBinder=s.onPointerDblClk.bind(I(s)),s.nodePointerHoverTimerId=null,s}return N(t,e),D(t,[{key:"deselectAll",value:function(){Object.values(this.storage).forEach((function(e){return e.deSelect()}))}},{key:"getSelectedObjects",value:function(){return Object.values(this.storage).filter((function(e){return e.isSelect}))}},{key:"getSelectedObjectNames",value:function(){var e=this.getSelectedObjects(),t=[];return e.forEach((function(e){t.push(e.name)})),t}},{key:"on",value:function(){R(F(t.prototype),"on",this).call(this),clearTimeout(this.nodePointerHoverTimerId),this.dom.addEventListener("dblclick",this.onPointerDblClkBinder,!1),this.bLeftButtonDown=!1,this.selectBox.style.display="initial",this.selectBox.style.left="0px",this.selectBox.style.top="0px",this.selectBox.style.width="0px",this.selectBox.style.height="0px"}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this),clearTimeout(this.nodePointerHoverTimerId),this.dom.removeEventListener("dblclick",this.onPointerDblClkBinder),this.bLeftButtonDown=!1,this.selectBox.style.display="none"}},{key:"onPointerDown",value:function(e){R(F(t.prototype),"onPointerDown",this).call(this,e),0===e.button&&(this.mouseDownPos.set(e.offsetX,e.offsetY),this.bLeftButtonDown=!0,this.selectBox.style.display="initial",this.selectBox.style.left="0px",this.selectBox.style.top="0px",this.selectBox.style.width="0px",this.selectBox.style.height="0px");var n=Object.values(this.storage).filter((function(e){return e instanceof o.c})),r=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(n,!1);r.length>0&&this.dispatchEvent({type:"nodePointerDown",button:e.button,eventData:r[0].object.EventData}),clearTimeout(this.nodePointerHoverTimerId)}},{key:"onPointerMove",value:function(e){if(R(F(t.prototype),"onPointerMove",this).call(this,e),this.bLeftButtonDown){var n=new r.Vector2(e.offsetX,e.offsetY),i=(new r.Box2).makeEmpty();i.expandByPoint(this.mouseDownPos),i.expandByPoint(n),this.selectBox.style.left=i.min.x+"px",this.selectBox.style.top=i.min.y+"px",this.selectBox.style.width=i.max.x-i.min.x+"px",this.selectBox.style.height=i.max.y-i.min.y+"px"}clearTimeout(this.nodePointerHoverTimerId);var a=Object.values(this.storage).filter((function(e){return e instanceof o.c})),s=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(a,!1);s.length>0&&(this.nodePointerHoverTimerId=setTimeout(this.onNodePointHover.bind(this),1e3,s[0].object.EventData))}},{key:"onPointerUp",value:function(e){var n=this;if(R(F(t.prototype),"onPointerUp",this).call(this,e),0===e.button){var i={},a={};e.ctrlKey||Object.values(this.storage).forEach((function(e){var t=e.isSelect;e.deSelect(),t&&e instanceof o.c&&(i[e.name]=e.EventData)}));var s=new r.Vector2(e.offsetX,e.offsetY);if(s.distanceTo(this.mouseDownPos)<=5){var l=Object.values(this.storage),u=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(l,!1);if(u.length>0)if(e.ctrlKey){if(u[0].object.selectToggle(),u[0].object instanceof o.c&&u[0].object.visible)(u[0].object.isSelect?a:i)[u[0].object.name]=u[0].object.EventData}else u[0].object.select(),u[0].object instanceof o.c&&u[0].object.visible&&(a[u[0].object.name]=u[0].object.EventData)}else{var c=(new r.Box2).makeEmpty();c.expandByPoint(this.mouseDownPos),c.expandByPoint(s);var h=Object.values(this.storage).filter((function(e){return n.contains(e,c)&&e.visible}));h.length>0&&h.forEach((function(e){var t=e.isSelect;e.select(),!t&&e instanceof o.c&&(a[e.name]=e.EventData)}))}for(var f=Object.keys(i),p=0;p<f.length;p++){f[p]in i&&f[p]in a&&(delete i[f[p]],delete a[f[p]])}var d=[].concat(A(Object.values(i)),A(Object.values(a)));d.length>0&&this.dispatchEvent({type:"selectStateChange",eventData:d})}var m=Object.values(this.storage).filter((function(e){return e instanceof o.c})),v=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(m,!1);v.length>0&&this.dispatchEvent({type:"nodePointerUp",button:e.button,eventData:v[0].object.EventData}),this.bLeftButtonDown=!1,this.selectBox.style.display="none",this.selectBox.style.left="0px",this.selectBox.style.top="0px",this.selectBox.style.width="0px",this.selectBox.style.height="0px",clearTimeout(this.nodePointerHoverTimerId)}},{key:"onPointerDblClk",value:function(e){var t=Object.values(this.storage).filter((function(e){return e instanceof o.c})),n=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(t,!1);n.length>0&&this.dispatchEvent({type:"nodePointerDblClk",button:e.button,eventData:n[0].object.EventData}),clearTimeout(this.nodePointerHoverTimerId)}},{key:"onNodePointHover",value:function(e){this.dispatchEvent({type:"nodePointerHover",eventData:e})}},{key:"contains",value:function(e,t){if(e instanceof o.c){var n=new r.Vector3;return e.getWorldPosition(n),n.project(this.camera),n.x=(n.x+1)/2*this.dom.clientWidth,n.y=-(n.y-1)/2*this.dom.clientHeight,t.containsPoint(new r.Vector2(n.x,n.y))}return!1}}]),t}(o.a),Q=function(e){function t(e,n,i,o,a,s){var l;return L(this,t),(l=k(this,F(t).call(this,e,n,i,o))).storage=a,l.control=s,l.dummy=new r.Group,l.sysGroup.add(l.dummy),l.gizmo=new T.TransformControls(l.camera,l.dom),l.gizmo.addEventListener("dragging-changed",l.onGizmoDragChange.bind(I(l))),l.gizmo.addEventListener("mouseDown",l.onGizmoMouseDown.bind(I(l))),l.gizmo.addEventListener("objectChange",l.onGizmoObjectChange.bind(I(l))),l.gizmo.addEventListener("mouseUp",l.onGizmoMouseUp.bind(I(l))),l.gizmo.setSpace("world"),l.gizmo.setMode("translate"),l.sysGroup.add(l.gizmo),l.selectObjects=[],l.prevDummyPos=new r.Vector3,l.prevTransformData={},l}return N(t,e),D(t,[{key:"onGizmoDragChange",value:function(e){this.control.enabled=!e.value}},{key:"onGizmoMouseDown",value:function(e){var t=this;this.prevDummyPos.copy(this.dummy.position),this.prevTransformData={},this.selectObjects.forEach((function(e){t.prevTransformData[e.name]=e.position.clone()}))}},{key:"onGizmoObjectChange",value:function(e){var t=(new r.Vector3).subVectors(this.dummy.position,this.prevDummyPos);this.selectObjects.forEach((function(e){e.position.add(t)})),this.prevDummyPos.copy(this.dummy.position)}},{key:"onGizmoMouseUp",value:function(e){var t={};this.selectObjects.forEach((function(e){t[e.name]=e.position.clone()}));var n=new y(this.prevTransformData,t,this.storage);this.undoRedoMgr.addItem(n),this.prevTransformData={};var r=[];this.selectObjects.forEach((function(e){e instanceof o.c&&r.push(e.EventData)})),this.dispatchEvent({type:"moveObject",eventData:r})}},{key:"on",value:function(){if(R(F(t.prototype),"on",this).call(this),this.prevTransformData={},this.selectObjects=Object.values(this.storage).filter((function(e){return e.isSelect})),this.selectObjects.length>0){var e=(new r.Box3).makeEmpty();this.selectObjects.forEach((function(t){var n=new r.Vector3;t.getWorldPosition(n),e.expandByPoint(n)}));var n=new r.Vector3;e.getCenter(n),this.dummy.position.copy(n),this.gizmo.attach(this.dummy)}else this.gizmo.detach(),this.selectObjects=[]}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this),this.gizmo.detach(),this.selectObjects=[],this.prevTransformData={}}}]),t}(o.a),Z=function(e){function t(e,n,i,o,a,s,l,u,c,h){var f;L(this,t),(f=k(this,F(t).call(this,e,n,i,o))).geometry=a,f.material=s,f.selectMaterial=l,f.root=u,f.storage=c,f.splitLinkTarget=null,f.currentFloor=null;var p=new r.SphereBufferGeometry(1,32,32),d=new r.MeshStandardMaterial({color:16711680});return f.pointer=new r.Mesh(p,d),f.sysGroup.add(f.pointer),f.pointer.visible=!1,f}return N(t,e),D(t,[{key:"on",value:function(){R(F(t.prototype),"on",this).call(this)}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this)}},{key:"onPointerDown",value:function(e){R(F(t.prototype),"onPointerDown",this).call(this,e),0===e.button&&this.mouseDownPos.set(e.offsetX,e.offsetY)}},{key:"onPointerMove",value:function(e){R(F(t.prototype),"onPointerMove",this).call(this,e);var n=Object.values(this.storage).filter((function(e){return e instanceof o.b}));if(n.length>0){for(var r=[],i=this.calculateMouseRay(e.offsetX,e.offsetY),a=0;a<n.length;a++){if(n[a].raycastOnLine(i)){var s=n[a].getProjectPoint(i,4),l=s.projectPoint.distanceTo(s.planePoint);l<3&&r.push({distance:l,target:n[a]})}}if(r.sort((function(e,t){var n=e.distance,r=t.distance;return n<r?-1:n>r?1:0})),this.pointer.visible=r.length>0,r.length>0){var u=r[0].target.getProjectPoint(i,4).projectPoint;this.pointer.position.copy(u),this.splitLinkTarget=r[0].target}else this.splitLinkTarget=null}else this.splitLinkTarget=null}},{key:"onPointerUp",value:function(e){R(F(t.prototype),"onPointerUp",this).call(this,e);var n=new r.Vector2(e.offsetX,e.offsetY).distanceTo(this.mouseDownPos);if(0===e.button&&n<=5&&this.splitLinkTarget){var i=r.Math.generateUUID(),o=r.Math.generateUUID(),a=r.Math.generateUUID(),s=new b(this.splitLinkTarget.name,i,o,a,this.geometry,this.material,this.selectMaterial,{floor:this.currentFloor},this.pointer.position.clone(),this.root,this.storage);this.undoRedoMgr.addItem(s),this.pointer.visible=!1,this.dispatchEvent({type:"midPointCreate",eventData:{p1:this.splitLinkTarget.curve.p1.EventData,p2:this.splitLinkTarget.curve.p2.EventData,midPoint:this.storage[i].EventData}})}}},{key:"CurrentFloor",set:function(e){this.currentFloor=e}},{key:"Geometry",set:function(e){this.geometry=e}},{key:"PointerSize",set:function(e){this.pointer.geometry.dispose(),this.pointer.geometry=new r.SphereBufferGeometry(e,32,32)}}]),t}(o.a),K=function(e){function t(e,n,r,i,o,a,s,l,u){var c;return L(this,t),(c=k(this,F(t).call(this,e,n,r,i))).storage=o,c.geometry=a,c.material=s,c.selectMaterial=l,c.root=u,c.hoverObject=null,c}return N(t,e),D(t,[{key:"on",value:function(){R(F(t.prototype),"on",this).call(this),this.dom.style.cursor="default",this.hoverObject=null}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this),this.dom.style.cursor="default",this.hoverObject=null}},{key:"onPointerDown",value:function(e){R(F(t.prototype),"onPointerDown",this).call(this,e),0===e.button&&this.mouseDownPos.set(e.offsetX,e.offsetY)}},{key:"onPointerMove",value:function(e){R(F(t.prototype),"onPointerMove",this).call(this,e);var n=this.calculateMouseRay(e.offsetX,e.offsetY).intersectObjects(Object.values(this.storage));n.length>0?(this.dom.style.cursor="pointer",this.hoverObject=n[0].object):(this.dom.style.cursor="default",this.hoverObject=null)}},{key:"onPointerUp",value:function(e){R(F(t.prototype),"onPointerUp",this).call(this,e);var n=new r.Vector2(e.offsetX,e.offsetY).distanceTo(this.mouseDownPos);if(0===e.button&&n<=5&&this.hoverObject){var i=this.hoverObject.name,o=new S([i],this.storage,this.root,this.geometry,this.material,this.selectMaterial);this.undoRedoMgr.addItem(o),this.dom.style.cursor="default",this.hoverObject=null,this.dispatchEvent({type:"deleteObject",eventData:[i]})}}},{key:"Geometry",set:function(e){this.geometry=e}}]),t}(o.a),J=function(e){function t(e,n,i,o,a,s,l,u){var c;return L(this,t),(c=k(this,F(t).call(this,e,n,i,o))).storage=a,c.material=s,c.selectMaterial=l,c.root=u,c.hoverObject=null,c.prevPickObject=null,c.plane=new r.Plane(new r.Vector3(0,1,0),0),c}return N(t,e),D(t,[{key:"on",value:function(e){R(F(t.prototype),"on",this).call(this),this.bIsOneWay=e,this.dom.style.cursor="default",this.hoverObject=null,this.prevPickObject=null}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this),this.dom.style.cursor="default",this.hoverObject=null,this.prevPickObject=null}},{key:"onPointerMove",value:function(e){var n=this;R(F(t.prototype),"onPointerMove",this).call(this,e);var i=this.calculateMouseRay(e.offsetX,e.offsetY);if(this.prevPickObject){var a=Object.values(this.storage).filter((function(e){return e instanceof o.c&&e.name!==n.prevPickObject.name&&-1===n.prevPickObject.userData.links.indexOf(e.name)&&-1===e.userData.links.indexOf(n.prevPickObject.name)})),s=i.intersectObjects(a,!1);s.length>0?(this.dom.style.cursor="pointer",this.hoverObject=s[0].object):(this.dom.style.cursor="default",this.hoverObject=null);var l=!1,u=new r.Vector3,c=new r.Vector3;if(this.prevPickObject.getWorldPosition(u),this.plane.setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),u),i.ray.intersectPlane(this.plane,c)){var h=c.clone();this.hoverObject&&(this.hoverObject.getWorldPosition(h),l=!0),this.disposeArrow(),this.updateArrow(u,h,l)}else this.disposeArrow()}else{var f=Object.values(this.storage),p=i.intersectObjects(f,!1);p.length>0?(this.dom.style.cursor="pointer",this.hoverObject=p[0].object):(this.dom.style.cursor="default",this.hoverObject=null)}}},{key:"onPointerUp",value:function(e){if(R(F(t.prototype),"onPointerUp",this).call(this,e),0===e.button&&this.hoverObject)if(this.hoverObject instanceof o.c)if(this.prevPickObject){if(this.prevPickObject.name!==this.hoverObject.name){var n=r.Math.generateUUID(),i=this.prevPickObject.name,a=this.hoverObject.name,s=new _(n,i,a,this.material,this.selectMaterial,{},this.root,this.storage,this.bIsOneWay);this.undoRedoMgr.addItem(s),this.prevPickObject=null,this.disposeArrow(),this.dispatchEvent({type:"connectLink",eventData:{isOneWay:this.bIsOneWay,p1:this.storage[i].EventData,p2:this.storage[a].EventData}})}}else this.prevPickObject=this.hoverObject;else if(this.hoverObject instanceof o.b){if(!this.hoverObject.bIsOneWay&&this.bIsOneWay){var l=new x(this.hoverObject.name,this.storage);this.undoRedoMgr.addItem(l),this.dispatchEvent({type:"changeType",eventData:{p1:this.storage[this.hoverObject.name].curve.p1.EventData,p2:this.storage[this.hoverObject.name].curve.p2.EventData}})}else if(this.hoverObject.bIsOneWay&&!this.bIsOneWay){var u=new w(this.hoverObject.name,this.storage);this.undoRedoMgr.addItem(u),this.dispatchEvent({type:"changeType",eventData:{p1:this.storage[this.hoverObject.name].curve.p1.EventData,p2:this.storage[this.hoverObject.name].curve.p2.EventData}})}else if(this.hoverObject.bIsOneWay&&this.bIsOneWay){var c=new q(this.hoverObject.name,this.storage);this.undoRedoMgr.addItem(c),this.dispatchEvent({type:"changeDirection",eventData:{p1:this.storage[this.hoverObject.name].curve.p1.EventData,p2:this.storage[this.hoverObject.name].curve.p2.EventData}})}this.prevPickObject=null}}}]),t}(o.a),$=function(e){function t(e,n,i,o,a,s,l,u,c,h,f){var p;return L(this,t),(p=k(this,F(t).call(this,e,n,i,o))).workGroup=a,p.geometry=s,p.material=l,p.selectMaterial=u,p.topologyRoot=c,p.topologyNodeStorage=h,p.poiMgr=f,p.mouseDownPos=new r.Vector2,p.lastCreatedPointId="",p.currentFloor=null,p.mouseState="selectPoi",p.targetPoi=null,p.targetNodes=[],p.infoLabelRoot=document.createElement("div"),p.infoLabelRoot.style.position="absolute",p.infoLabelRoot.style.pointerEvents="none",p.infoLabelRoot.style.display="none",p.dom.appendChild(p.infoLabelRoot),p.infoLabel=document.createElement("p"),p.infoLabel.innerText="제외처리시 기준이될 Poi를 선택하십시오.",p.infoLabelRoot.appendChild(p.infoLabel),p}return N(t,e),D(t,[{key:"on",value:function(){R(F(t.prototype),"on",this).call(this),this.infoLabelRoot.style.display="inherit",this.infoLabel.innerText="제외처리시 기준이될 Poi를 선택하십시오."}},{key:"off",value:function(){R(F(t.prototype),"off",this).call(this),this.infoLabelRoot.style.display="none"}},{key:"onPointerDown",value:function(e){R(F(t.prototype),"onPointerDown",this).call(this,e),0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){R(F(t.prototype),"onPointerMove",this).call(this,e),this.infoLabelRoot&&(this.infoLabelRoot.style.left=e.pageX+10+"px",this.infoLabelRoot.style.top=e.pageY+"px")}},{key:"onPointerUp",value:function(e){if(R(F(t.prototype),"onPointerUp",this).call(this,e),new r.Vector2(e.screenX,e.screenY).distanceTo(this.mouseDownPos)<=5&&0===e.button){var n=this.calculateMouseRay(e.offsetX,e.offsetY);if("selectPoi"===this.mouseState){var i=Object.values(this.poiMgr.poiList),a=n.intersectObjects(i,!0);a.length>0&&(this.targetPoi=this.getPoiInstance(a[0].object),this.targetPoi.setColor(16711680),this.mouseState="selectIsolateNode",this.infoLabel.innerText="제외시킬 토폴로지 노드를 선택하십시오.",this.selectNodeByPoiId(this.targetPoi.userData.id),this.dispatchEvent({type:"isolateNodeBasePoiSelected",poiData:this.targetPoi.getData()}))}else if("selectIsolateNode"===this.mouseState){var s=Object.values(this.topologyNodeStorage).filter((function(e){return e instanceof o.c})),l=n.intersectObjects(s,!1);if(l.length>0){var u=l[0].object;this.targetNodes.indexOf(u)>=0?(u.deSelect(),u.userData.isolateBasePois.splice(u.userData.isolateBasePois.indexOf(this.targetPoi.userData.id),1),this.targetNodes.splice(this.targetNodes.indexOf(u),1)):(u.select(),this.targetNodes.push(u),this.targetNodes=Array.from(new Set(this.targetNodes))),this.dispatchEvent({type:"isolateNodeTargetNodeSelected",currentSelected:l[0].object,selected:this.targetNodes})}}}}},{key:"getPoiInstance",value:function(e){var t=null;return e.traverseAncestors((function(e){e instanceof P.PxPoiElement&&(t=e)})),t}},{key:"applyIsolate",value:function(){var e=this;this.targetNodes.forEach((function(t){t.userData.isolateBasePois||(t.userData.isolateBasePois=[]),t.userData.isolateBasePois.push(e.targetPoi.userData.id),t.userData.isolateBasePois=Array.from(new Set(t.userData.isolateBasePois))})),this.reset()}},{key:"selectNodeByPoiId",value:function(e){var t=this;Object.values(this.topologyNodeStorage).filter((function(e){return e instanceof o.c})).forEach((function(n){n.userData.isolateBasePois.indexOf(e)>=0&&(n.select(),t.targetNodes.push(n),t.targetNodes=Array.from(new Set(t.targetNodes)))}))}},{key:"reset",value:function(){this.lastCreatedPointId="",this.currentFloor=null,this.mouseState="selectPoi",this.infoLabel&&(this.infoLabel.innerText="제외처리시 기준이될 Poi를 선택하십시오."),this.targetPoi&&this.targetPoi.setColor(16777215),this.targetPoi=null,Object.values(this.topologyNodeStorage).filter((function(e){return e instanceof o.c})).forEach((function(e){return e.deSelect()})),this.targetNodes=[]}}]),t}(o.a);function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"initialize",(function(){return ve})),n.d(t,"beforeExpand",(function(){return ge})),n.d(t,"afterExpand",(function(){return ye})),n.d(t,"Undo",(function(){return xe})),n.d(t,"Redo",(function(){return we})),n.d(t,"AddUndoRedoEventListener",(function(){return qe})),n.d(t,"RemoveUndoRedoEventListener",(function(){return _e})),n.d(t,"AddSelectObjectEventListener",(function(){return Se})),n.d(t,"RemoveSelectObjectEventListener",(function(){return Me})),n.d(t,"AddCreatePointEventListener",(function(){return Ee})),n.d(t,"RemoveCreatePointEventListener",(function(){return Te})),n.d(t,"AddMoveObjectEventListener",(function(){return Pe})),n.d(t,"RemoveMoveObjectEventListener",(function(){return Ae})),n.d(t,"AddCreateMidPointEventListener",(function(){return Oe})),n.d(t,"RemoveCreateMidPointEventListener",(function(){return Le})),n.d(t,"AddDeleteObjectEventListener",(function(){return Ce})),n.d(t,"RemoveDeleteObjectEventListener",(function(){return De})),n.d(t,"AddConnectLinkEventListener",(function(){return ke})),n.d(t,"RemoveConnectLinkEventListener",(function(){return Ie})),n.d(t,"AddIsolateNodeEventListener",(function(){return xt})),n.d(t,"RemoveIsolateNodeEventListener",(function(){return wt})),n.d(t,"Cancel",(function(){return Re})),n.d(t,"CreatePoint",(function(){return Fe})),n.d(t,"SelectObject",(function(){return Ne})),n.d(t,"MoveObject",(function(){return je})),n.d(t,"DeleteObject",(function(){return ze})),n.d(t,"CreateMidPoint",(function(){return Ge})),n.d(t,"ConnectLinkTwoway",(function(){return He})),n.d(t,"ConnectLinkOneway",(function(){return We})),n.d(t,"DeleteObjectPointer",(function(){return Be})),n.d(t,"IsolateNode",(function(){return bt})),n.d(t,"ApplyIsolateNode",(function(){return qt})),n.d(t,"IsolateNodeReset",(function(){return _t})),n.d(t,"FixedZAxis",(function(){return Ue})),n.d(t,"ReleaseZAxis",(function(){return Ve})),n.d(t,"Clear",(function(){return Xe})),n.d(t,"Import",(function(){return Ye})),n.d(t,"Export",(function(){return Qe})),n.d(t,"SetCameraMode",(function(){return Ze})),n.d(t,"SetAlignViewAngle",(function(){return Ke})),n.d(t,"MoveToAlignViewAngle",(function(){return Je})),n.d(t,"AlignNodePoints",(function(){return $e})),n.d(t,"SetCurrentFloor",(function(){return et})),n.d(t,"Hide",(function(){return tt})),n.d(t,"Show",(function(){return nt})),n.d(t,"ShowByProperty",(function(){return ut})),n.d(t,"HideByProperty",(function(){return ct})),n.d(t,"HideAll",(function(){return rt})),n.d(t,"ShowAll",(function(){return it})),n.d(t,"GetSelectedObjectNames",(function(){return ot})),n.d(t,"AssignProperty",(function(){return at})),n.d(t,"GetProperty",(function(){return st})),n.d(t,"ClearProperty",(function(){return lt})),n.d(t,"DeselectAll",(function(){return ht})),n.d(t,"SelectAll",(function(){return ft})),n.d(t,"FloorCopy",(function(){return pt})),n.d(t,"Connect",(function(){return dt})),n.d(t,"ConnectByProperty",(function(){return mt})),n.d(t,"SetColor",(function(){return vt})),n.d(t,"SetSize",(function(){return gt})),n.d(t,"AddOffsetAll",(function(){return yt}));new r.Raycaster,new r.Vector2;var te,ne={},re=null,ie=null,oe=null,ae=null,se=null,le=null,ue=null,ce=null,he=1,fe={position:new r.Vector3,rotation:new r.Euler,target:new r.Vector3,isSetted:!1},pe=new r.CylinderBufferGeometry(1*he,1*he,.5*he,16,1),de=new r.MeshPhongMaterial({color:4244724,shininess:100}),me=new r.MeshBasicMaterial({color:16711680,transparent:!0,opacity:.3});function ve(e,t,n,i,a,s){return z=e,B=t,U=n,V=i,G=a,W=s,H=new r.Object3D,V.add(H),te=new E,re=new X(U,z,te,V,G,pe,de,me,H,ne),ie=new Y(U,z,te,V,B,ne),oe=new Q(U,z,te,V,ne,B),ae=new Z(U,z,te,V,pe,de,me,H,ne,G),se=new J(U,z,te,V,ne,de,me,H),ue=new K(U,z,te,V,ne,pe,de,me,H),le=new $(U,z,te,V,G,pe,de,me,H,ne,W),window.addEventListener("keydown",be,!1),Object(o.e)(z),ne}function ge(){Object.values(ne).forEach((function(e){if(e instanceof o.c){var t=e.userData.property.floor,n=G.getObjectByName(t);n&&n.attach(e)}}))}function ye(){Object.values(ne).forEach((function(e){e instanceof o.c&&H.attach(e)})),Object.values(ne).forEach((function(e){e instanceof o.b&&e.updateGeometry()}))}function be(e){e.ctrlKey&&e.shiftKey&&"z"===e.key.toLowerCase()?we():e.ctrlKey&&"z"===e.key.toLowerCase()?xe():e.ctrlKey&&"y"===e.key.toLowerCase()?we():"esc"===e.key.toLowerCase()||"escape"===e.key.toLowerCase()?(Re(),_t()):"del"!==e.key.toLowerCase()&&"delete"!==e.key.toLowerCase()||ze()}function xe(){ie.deselectAll(),Re(),te.undo()}function we(){ie.deselectAll(),Re(),te.redo()}function qe(e,t){te.addEventListener(e,t)}function _e(e,t){te.removeEventListener(e,t)}function Se(e,t){ie.addEventListener(e,t)}function Me(e,t){ie.removeEventListener(e,t)}function Ee(e,t){re.addEventListener(e,t)}function Te(e,t){re.removeEventListener(e,t)}function Pe(e,t){oe.addEventListener(e,t)}function Ae(e,t){oe.removeEventListener(e,t)}function Oe(e,t){ae.addEventListener(e,t)}function Le(e,t){ae.removeEventListener(e,t)}function Ce(e,t){ue.addEventListener(e,t)}function De(e,t){ue.removeEventListener(e,t)}function ke(e,t){se.addEventListener(e,t)}function Ie(e,t){se.removeEventListener(e,t)}function Re(){re.off(),ie.off(),oe.off(),ae.off(),se.off(),ue.off()}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ce?(Re(),ie.deselectAll(),re.CurrentFloor=ce,re.on(e)):console.warn("currentFloor is not assigned.")}function Ne(){Re(),ie.deselectAll(),ie.on()}function je(){Re(),oe.on()}function ze(){Re();var e=ie.getSelectedObjectNames();if(e.length>0){var t=new S(e,ne,H,pe,de,me);te.addItem(t),ie.deselectAll(),ue.dispatchEvent({type:"deleteObject",eventData:e})}}function Be(){Re(),ie.deselectAll(),ue.on()}function Ue(){oe.gizmo.showY=!1}function Ve(){oe.gizmo.showY=!0}function Ge(){ce?(Re(),ie.deselectAll(),ae.CurrentFloor=ce,ae.on()):console.warn("currentFloor is not assigned.")}function He(){Re(),ie.deselectAll(),se.on(!1)}function We(){Re(),ie.deselectAll(),se.on(!0)}function Xe(){for(var e in Re(),ie.deselectAll(),te.clear(),ne){var t=ne[e];H.remove(t),t.dispose(),delete ne[e]}}function Ye(e){Re(),ie.deselectAll(),te.clear(),Xe(),"string"==typeof e&&(e=JSON.parse(e)),e.forEach((function(e){var t=e.name,n=e.position,r=e.property,i=e.links,a=e.isolateBasePois,s=new o.c(t,pe,de,me,r);H.add(s),s.position.set(n.x,n.y,n.z),s.userData.links=ee(i),s.userData.isolateBasePois=a?ee(a):[],ne[t]=s})),e.forEach((function(t){var n=t.name;t.links.forEach((function(t){for(var i=null,a=0;a<e.length;a++)if(e[a].name===t){i=e[a];break}if(i){var s=i.links.indexOf(n),l=-1===s,u=r.Math.generateUUID(),c=new o.b(u,ne[n],ne[t],de,me,{},l);H.add(c),ne[u]=c,l||i.links.splice(s,1)}}))}))}function Qe(e){var t=Object.values(ne).filter((function(e){return e instanceof o.c})),n=[];return t.forEach((function(e){n.push(e.ExportData)})),e?JSON.stringify(n):n}function Ze(e){B.setControlMode(e)}function Ke(){fe.position=z.position.clone(),fe.rotation=z.rotation.clone(),fe.target=B.target.clone(),fe.isSetted=!0}function Je(){if(!fe.isSetted)throw console.warn("align view state is not setted."),{errorCode:0,message:"align view state is not setted."};z.position.copy(fe.position),z.rotation.copy(fe.rotation),B.target.copy(fe.target),B.update()}function $e(e){if(!fe.isSetted)throw console.warn("align view state is not setted."),{errorCode:0,message:"align view state is not setted."};var t=ie.getSelectedObjectNames();if(0===t.length)throw console.warn("object is not selected."),{errorCode:1,message:"object is not selected."};var n=new M(e,t,ne,fe);te.addItem(n)}function et(e){ce=e,re.CurrentFloor=ce,ae.CurrentFloor=ce}function tt(e){for(var t in ne){var n=ne[t];if(n instanceof o.c)n.userData.property.floor===e&&(n.visible=!1);else if(n instanceof o.b){var r=n.curve.p1,i=n.curve.p2;r.userData.property.floor===e&&(r.visible=!1,n.visible=!1),i.userData.property.floor===e&&(i.visible=!1,n.visible=!1)}}}function nt(e){for(var t in ne){var n=ne[t];if(n instanceof o.c)n.userData.property.floor===e&&(n.visible=!0);else if(n instanceof o.b){var r=n.curve.p1,i=n.curve.p2;r.userData.property.floor===e&&(r.visible=!0),i.userData.property.floor===e&&(i.visible=!0),n.visible=r.visible||i.visible}}}function rt(){for(var e in ne){ne[e].visible=!1}}function it(){for(var e in ne){ne[e].visible=!0}}function ot(){var e=ie.getSelectedObjectNames(),t=[];return e.forEach((function(e){ne[e]instanceof o.c&&t.push(e)})),t}function at(e,t){if(e in ne){var n=ne[e];Object.assign(n.userData.property,t)}}function st(e){if(e in ne)return ne[e].userData.property}function lt(e){if(e in ne){var t=ne[e];t.userData.property={floor:t.userData.property.floor}}}function ut(e,t){for(var n in ne){var r=ne[n];if(r instanceof o.c)r.userData.property.hasOwnProperty(e)&&r.userData.property[e]===t&&(r.visible=!0);else if(r instanceof o.b){var i=r.curve.p1,a=r.curve.p2;i.userData.property.hasOwnProperty(e)&&i.userData.property[e]===t&&(i.visible=!0),a.userData.property.hasOwnProperty(e)&&a.userData.property[e]===t&&(a.visible=!0),r.visible=i.visible&&a.visible}}}function ct(e,t){for(var n in ne){var r=ne[n];if(r instanceof o.c)r.userData.property.hasOwnProperty(e)&&r.userData.property[e]===t&&(r.visible=!1);else if(r instanceof o.b){var i=r.curve.p1,a=r.curve.p2;i.userData.property.hasOwnProperty(e)&&i.userData.property[e]===t&&(i.visible=!1,r.visible=!1),a.userData.property.hasOwnProperty(e)&&a.userData.property[e]===t&&(a.visible=!1,r.visible=!1),r.visible=i.visible&&a.visible}}}function ht(){ie.deselectAll()}function ft(){Object.values(ne).forEach((function(e){e instanceof o.c&&e.visible&&e.select()}))}function pt(e,t){Re(),te.clear();var n=G.getObjectByName(t);if(n){var i=(new r.Box3).setFromObject(n),a=new r.Vector3;i.getCenter(a);var s=Object.values(ne).filter((function(t){if(t instanceof o.c)return t.userData.property.floor===e;if(t instanceof o.b){var n=t.curve.p1,r=t.curve.p2;return n.userData.property.floor===e&&r.userData.property.floor===e}})),l={},u=[];s.forEach((function(e){if(e instanceof o.c){var n=e.clone();n.position.y=a.y,n.userData.property.floor=t,H.add(n),ne[n.name]=n,l[e.name]=n.name,u.push(n)}else if(e instanceof o.b){var r=e.clone();H.add(r),ne[r.name]=r,l[e.name]=r.name,u.push(r)}})),u.forEach((function(e){if(e instanceof o.c)e.userData.links.forEach((function(t,n){e.userData.links[n]=l[t]}));else if(e instanceof o.b){var t=l[e.curve.p1.name],n=l[e.curve.p2.name],r=ne[t],i=ne[n];e.curve.p1=r,e.curve.p2=i,e.updateGeometry()}}))}else console.warn("can't find target floor.",t)}function dt(e,t){if(Re(),ie.deselectAll(),te.clear(),e in ne&&t in ne){var n=ne[e],i=ne[t];if(-1===n.userData.links.indexOf(i.name)&&-1===i.userData.links.indexOf(n.name)){var a=r.Math.generateUUID(),s=new o.b(a,n,i,de,me,{},!1);H.add(s),ne[a]=s}else console.warn(e,"and ",t," are already connected.")}}function mt(e,t,n,r){for(var i=Object.values(ne).filter((function(e){return e instanceof o.c})),a=null,s=null,l=0;l<i.length;l++){var u=i[l];!a&&u.userData.property.hasOwnProperty(e)&&u.userData.property[e]===t&&(a=u.name),!s&&u.userData.property.hasOwnProperty(n)&&u.userData.property[n]===r&&(s=u.name)}a&&s&&dt(a,s)}function vt(e){de.color=new r.Color(e)}function gt(e){he=e,pe=new r.CylinderBufferGeometry(1*he,1*he,.5*he,16,1),re.Geometry=pe,ae.Geometry=pe,ae.PointerSize=he,ue.Geometry=pe,Object(o.d)(e),Object.values(ne).forEach((function(e){e instanceof o.c?e.geometry=pe:e instanceof o.b&&e.updateGeometry()}))}function yt(e,t,n){Object.values(ne).forEach((function(r){r instanceof o.c&&(r.position.x+=e,r.position.y+=t,r.position.z+=n,r.updateMatrix())})),Object.values(ne).forEach((function(e){e instanceof o.b&&e.updateGeometry()}))}function bt(){Re(),ie.deselectAll(),le.on()}function xt(e,t){le.addEventListener(e,t)}function wt(e,t){le.removeEventListener(e,t)}function qt(){le.applyIsolate()}function _t(){le.reset(),le.off()}},function(e,t,n){"use strict";var r=n(0),i=n(55),o=n(63),a=n(17),s=function(e,t){a.a.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,render:function(e,t,n){var r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var l=function(){a.a.call(this),this.needsSwap=!1};l.prototype=Object.create(a.a.prototype),Object.assign(l.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}),n.d(t,"a",(function(){return u}));var u=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat,stencilBuffer:!1},a=e.getSize(new r.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=a.width,this._height=a.height,(t=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i.a&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.a&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.a(i.a),this.clock=new r.Clock};Object.assign(u.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(t instanceof s?i=!0:t instanceof l&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var c,h,f,p=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(p.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),p.FullScreenQuad=(c=new r.OrthographicCamera(-1,1,1,-1,0,1),h=new r.PlaneBufferGeometry(2,2),f=function(e){this._mesh=new r.Mesh(h,e)},Object.defineProperty(f.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(f.prototype,{render:function(e){e.render(this._mesh,c)}}),f)},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(199),i=n(140);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(43),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(4),i=n(200),o=n(140),a=n(139)("IE_PROTO"),s=function(){},l=function(){var e,t=n(137)("iframe"),r=o.length;for(t.style.display="none",n(141).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(199),i=n(140).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(6),i=n(14),o=n(13),a=n(9)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(41),i=n(212),o=n(152),a=n(4),s=n(10),l=n(154),u={},c={};(t=e.exports=function(e,t,n,h,f){var p,d,m,v,g=f?function(){return e}:l(e),y=r(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if((v=t?y(a(d=e[b])[0],d[1]):y(e[b]))===u||v===c)return v}else for(m=g.call(e);!(d=m.next()).done;)if((v=i(m,y,d.value,t))===u||v===c)return v}).BREAK=u,t.RETURN=c},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(122),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var o=Object.create(n(97));o.inherits=n(78);var a=n(241),s=n(181);o.inherits(h,a);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(0);n(190);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,o,u){var c=new r.Vector3(e.x,e.y,e.z),h=new r.Vector3(t.x,t.y,t.z),f=n.getNearlestNode(c,e.floorName),p=n.getNearlestNode(h,e.floorName);if(f&&p){var d=function(){var e=[{object:f,name:f.name,fValue:0,gValue:0,hValue:0,wValue:0,parentNode:null}],t=[];f.userData.links.forEach((function(i){var o=n.getNodeByName(i);if(o){var a=new r.Vector3,l=new r.Vector3,u=new r.Vector3;f.getWorldPosition(a),p.getWorldPosition(l),o.getWorldPosition(u);var c=a.distanceTo(u),h=l.distanceTo(u),d=c+h+0;t.push({object:o,name:i,fValue:d,gValue:c,hValue:h,wValue:0,parentNode:e[0]}),s(t)}}));for(var i=null,d=function(){var o=t.shift();if(e.push(o),o.name===p.name)return i=o,"break";o.object.userData.links.forEach((function(i){if(!a(e,i)){var l=n.getNodeByName(i);if(l){var u=new r.Vector3,c=new r.Vector3,h=new r.Vector3;o.object.getWorldPosition(u),p.getWorldPosition(c),l.getWorldPosition(h);var f=o.gValue+u.distanceTo(h),d=c.distanceTo(h),m=f+d+0;if(a(t,i)){var v=function(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null}(t,i);f<v.gValue&&(v.fValue=m,v.hValue=d,v.gValue=f,v.wValue=0,v.parentNode=o)}else t.push({object:l,name:i,fValue:m,gValue:f,hValue:d,wValue:0,parentNode:o});s(t)}}}))};t.length>0;){if("break"===d())break}for(var m=[],v=i;v;){var g=new r.Vector3;if(v.object.getWorldPosition(g),l(m,g)||(v.object.userData.hasOwnProperty("targetFloor")&&(g.targetFloor=v.object.userData.targetFloor),m.push(g)),v.parentNode){var y=new r.Vector3;v.parentNode.object.getWorldPosition(y),l(m,y)||(v.object.userData.hasOwnProperty("targetFloor")&&(y.targetFloor=v.object.userData.targetFloor),m.push(y))}v=v.parentNode}return m.reverse(),o&&(f.userData.hasOwnProperty("targetFloor")&&(c.targetFloor=f.userData.targetFloor),m.splice(0,0,c)),u&&(p.userData.hasOwnProperty("targetFloor")&&(h.targetFloor=p.userData.targetFloor),m.push(h)),{v:m}}();if("object"===i(d))return d.v}else console.error("토폴로지 데이터가 유효하지 않습니다.")}function a(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return!0;return!1}function s(e){e.sort((function(e,t){return e.fValue>t.fValue?1:e.fValue<t.fValue?-1:0}))}function l(e,t){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return!0;return!1}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setCoreResource",(function(){return u})),n.d(r,"GetGroupNames",(function(){return c})),n.d(r,"PlacePoi",(function(){return h}));var i={};n.r(i),n.d(i,"setCoreResource",(function(){return T})),n.d(i,"showEntranceBaseObject",(function(){return P})),n.d(i,"hideEntranceBaseObject",(function(){return A})),n.d(i,"update",(function(){return k})),n.d(i,"Show",(function(){return L})),n.d(i,"Hide",(function(){return C})),n.d(i,"LoadArrow",(function(){return D}));var o={};n.r(o),n.d(o,"setCoreResources",(function(){return j})),n.d(o,"Show",(function(){return B})),n.d(o,"Hide",(function(){return U})),n.d(o,"InitPipe",(function(){return z}));var a=n(0).Vector3,s=null,l=null;function u(e,t){s=e,l=t}function c(){var e=[];return s&&s.traverse((function(t){if(t.userData.hasOwnProperty("type")){var n=t.userData.type;"floorroot"!==n&&"Main"!==n&&-1===e.indexOf(n)&&e.push(n)}})),e}function h(e,t){if(s&&l){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(n.readyState===n.DONE&&200===n.status){var e=n.response;"string"==typeof e&&(e=JSON.parse(e));var r=[];["Gauge","Calibration"].forEach((function(t){if(e.hasOwnProperty(t)){var n=e[t].iconUrl,i=(e[t].displayText,e[t].lineHeight?e[t].lineHeight:10);s.traverse((function(e){if(e.userData.hasOwnProperty("type")){var o=e.userData.type,s=e.userData.id,l=e.userData.name;if(o===t){var u=new a;e.getWorldPosition(u);var c=0,h=null;e.traverseAncestors((function(e){e.userData.hasOwnProperty("type")&&("floorroot"===e.userData.type&&(c=parseInt(e.userData.sortingorder),h=e))})),r.push({type:"sphere",id:s,group:t,lineHeight:i,position:{x:u.x,y:u.y,z:u.z},scale:{x:10,y:10,z:10},iconUrl:n,displayText:l,property:{userDefinedId:s,userDefinedName:l,floorNo:c,type:t,floorName:h?h.name:null}})}}}))}})),l.addPoiArray(r,(function(){l.hideAll()})),t&&t()}},n.send()}}var f=n(0),p=n(5),d=n(2),m=n(16),v=null,g=null,y=[],b=null,x=null,w=null,q=["PathLine_Under","RoadPoint_Under","PathLine_Upper","RoadPoint_Upper"],_=0,S=null,M={},E=[["Point000","Point001","Point002","Point003","Point004","Point005","Point006"],["Point000","Point001","Point002","Point003","Point004","Point007","Point008","Point009","Point010","Point011","Point012","Point013","Point014","Point015","Point016","Point017","Point018","Point019","Point020","Point021","Point022","Point023","Point024"],["Point000","Point001","Point002","Point003","Point004","Point007","Point008","Point009","Point010","Point011","Point012","Point013","Point014","Point015","Point016","Point025","Point026","Point027","Point028","Point029","Point030","Point031"],["Point000","Point001","Point002","Point003","Point004","Point007","Point008","Point009","Point010","Point011","Point032","Point033","Point034","Point035","Point036","Point037","Point038","Point039","Point040","Point041"],["Point000","Point001","Point002","Point003","Point004","Point007","Point008","Point009","Point010","Point011","Point032","Point033","Point034","Point035","Point036","Point036","Point042","Point043"]];function T(e,t){v=e,g=t,S=new f.Object3D,g.add(S)}function P(){q.forEach((function(e){var t=v.getObjectByName(e);t&&(t.visible=!0)}))}function A(){q.forEach((function(e){var t=v.getObjectByName(e);t&&(t.visible=!1)}))}function O(){x&&(x.geometry.dispose(),v.remove(x),x=null)}function L(){y=[],v.traverse((function(e){e.name.includes("ExtrudePoint")&&y.push(e),"PathLine_Upper"===e.name&&e instanceof f.Mesh&&(b=e.material)})),y.sort((function(e,t){return e.userData.extrudePointOrder<t.userData.extrudePointOrder?-1:e.userData.extrudePointOrder<t.userData.extrudePointOrder?1:0})),O(),function(){var e=[];y.forEach((function(t){var n=new f.Vector3;t.getWorldPosition(n),e.push(n.x,n.y,n.z)}));var t=new f.BufferGeometry;t.setIndex([4,3,0,4,7,3,7,2,3,7,6,2,6,1,2,6,5,1,5,0,1,5,4,0]),t.setAttribute("position",new f.Float32BufferAttribute(e,3)),t.computeVertexNormals(),t.computeBoundingBox(),t.computeBoundingSphere(),x=new f.Mesh(t,b),v.add(x),b.flatShading=!0}(),function(){if(v){var e=v.parent;e.remove(v);var t=[],n=[];v.traverse((function(e){e.userData.hasOwnProperty("type")&&("Main"===e.userData.type&&n.push(e))})),n.forEach((function(e){e.traverse((function(e){e instanceof f.Mesh&&m.AddSDTObject(e,.5),t.push(e)}))})),e.add(v)}}(),P(),M={},v.traverse((function(e){e.userData.hasOwnProperty("arrowAnimPoint")&&(M[e.name]=e)})),S.visible=!0}function C(){O(),m.Restore(),A(),S.visible=!1}function D(e,t){(new p.GLTFLoader).load(e,(function(e){w=e.scene,t&&t()}),null,(function(e){console.error(e)}))}function k(e){if(w&&S&&Object.keys(M).length>0&&(_+=e)>=.6){_=0;for(var t=function(e){var t=w.clone();S.add(t);for(var n=E[e],r=[],i=0;i<n.length-1;i++){var o=n[i],a=n[i+1],s=M[o],l=M[a],u=new f.Vector3,c=new f.Vector3;s.getWorldPosition(u),l.getWorldPosition(c),r.push(I(u,c,t)),0===i&&t.position.copy(u)}for(var h=0;h<r.length-1;h++)r[h].chain(r[h+1]);r[r.length-1].onComplete((function(){S.remove(t)})),r[0].start()},n=0;n<E.length;n++)t(n)}}function I(e,t,n){var r=e.distanceTo(t),i={ratio:0};return new d.a.Tween(i).to({ratio:1},10*r/.25).easing(d.a.Easing.Linear.None).onUpdate((function(){n.position.copy((new f.Vector3).lerpVectors(e,t,i.ratio)),n.lookAt(t),n.updateMatrix()}))}var R=null,F=null,N=null;function j(e,t){R=e,F=t,N=new f.Object3D,F.add(N),N.visible=!1}function z(){for(var e=[],t=0;t<R.floorData.length;t++){R.floorData[t].target.traverse((function(t){t.userData.hasOwnProperty("type")&&("pipe"===t.userData.type.toLowerCase()&&e.push(t))}))}e.forEach((function(e){N.attach(e)}))}function B(){N.visible=!0}function U(){N.visible=!1}n.d(t,"Pipe",(function(){return o})),n.d(t,"Poi",(function(){return r})),n.d(t,"EnteringPath",(function(){return i}))},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setCoreResource",(function(){return w})),n.d(r,"update",(function(){return M})),n.d(r,"Initialize",(function(){return q})),n.d(r,"Show",(function(){return _})),n.d(r,"Hide",(function(){return S})),n.d(r,"PositionEditOn",(function(){return C})),n.d(r,"PositionEditOff",(function(){return D})),n.d(r,"SetLineHeight",(function(){return L})),n.d(r,"CauseMalfunction",(function(){return k})),n.d(r,"CancelMalfunction",(function(){return I}));var i={};n.r(i),n.d(i,"setCoreResource",(function(){return W})),n.d(i,"update",(function(){return K})),n.d(i,"Initialize",(function(){return X})),n.d(i,"Show",(function(){return Q})),n.d(i,"Hide",(function(){return Z})),n.d(i,"MovePositionOn",(function(){return ne})),n.d(i,"MovePositionOff",(function(){return re})),n.d(i,"SetLinePosition",(function(){return ie}));var o=n(0),a=n(5),s=n(2),l=n(16),u=!1,c=null,h=null,f=null,p=null,d=null,m=null,v=0,g={},y=!1,b=!1,x=null;function w(e,t){c=e,h=t,f=new o.Object3D,h.add(f)}function q(e,t,n,r){(new a.GLTFLoader).load(e,(function(e){p=e.scene,h.add(p),E(),p.traverse((function(e){"LineBody005"===e.name&&(x=e,e.userData.OriginalMaterial=e.material.clone())})),(new a.GLTFLoader).load(t,(function(e){var t=1.5*(d=e.scene).scale.x;d.scale.setScalar(t),E();var i=new XMLHttpRequest;i.open("GET",n,!0),i.onreadystatechange=function(){i.readyState===i.DONE&&200===i.status&&("string"==typeof(m=i.response)&&(m=JSON.parse(m)),E(),r&&r())},i.send()}))}))}function _(){u=!0,function(){if(c){var e=c.parent;e.remove(c),l.AddSDTObject(c,.4),e.add(c)}}()}function S(){u=!1,l.Restore()}function M(e){if(p&&d&&m){if((v+=e)>=1)for(var t in v=0,m){var n=m[t],r=n.speed,i=n.color,o=n.twoWayColor,a=n.pointNames;if(n.isTwoway){var s=a.slice();s=s.reverse(),T(i,r,a),T(o,r,s)}else T(i,r,a)}if(E(),y)if(g.PageUp){var l=p.position.clone();l.y+=10*e,p.position.copy(l)}else if(g.PageDown){var u=p.position.clone();u.y-=10*e,p.position.copy(u)}else if(g.Home){var c=p.position.clone();c.y+=100*e,p.position.copy(c)}else if(g.End){var h=p.position.clone();h.y-=100*e,p.position.copy(h)}}}function E(){p.visible=u;for(var e=0;e<f.children.length;e++){var t=f.children[e];t.visible=u&&!t.userData.IsMalfunction}}function T(e,t,n){if(b)for(var r=["Point009","Point008","Point004"],i=0;i<n.length;i++){var a=n[i];if(r.indexOf(a)>=0)return}var s=d.clone();f.add(s),s.traverse((function(t){t instanceof o.Mesh&&(t.material=t.material.clone(),t.material.color=new o.Color(e))}));for(var l=[],u=0;u<n.length-1;u++){var c=n[u],h=n[u+1],m=p.getObjectByName(c),v=p.getObjectByName(h),g=new o.Vector3,y=new o.Vector3;m.getWorldPosition(g),v.getWorldPosition(y),l.push(P(g,y,t,s)),0===u&&(s.position.copy(g),s.lookAt(y))}s.userData.pointNames=n.slice();for(var x=0;x<l.length-1;x++)l[x].chain(l[x+1]);l[l.length-1].onComplete((function(){f.remove(s)})),l[0].start()}function P(e,t,n,r){var i=e.distanceTo(t),a={ratio:0};return new s.a.Tween(a).to({ratio:1},10*i/(.01*n)).easing(s.a.Easing.Linear.None).onUpdate((function(){r.position.copy((new o.Vector3).lerpVectors(e,t,a.ratio)),r.lookAt(t),r.updateMatrix()}))}function A(e){g[e.key]=!0}function O(e){if(g[e.key]=!1,"p"===e.key){var t=p.position.clone();console.log("height",t.y)}}function L(e){if(p){var t=p.position.clone();t.y=e,p.position.copy(t)}}function C(){window.addEventListener("keydown",A,!1),window.addEventListener("keyup",O,!1),y=!0}function D(){window.removeEventListener("keydown",A),window.removeEventListener("keyup",O),y=!1}function k(){for(var e=["Point009","Point008","Point004"],t=0;t<f.children.length;t++)for(var n=f.children[t],r=n.userData.pointNames,i=0;i<r.length;i++)if(e.indexOf(r[i])>=0){n.userData.IsMalfunction=!0;break}x&&(x.material=new o.MeshStandardMaterial({color:16711680})),b=!0}function I(){for(var e=["Point009","Point008","Point004"],t=0;t<f.children.length;t++)for(var n=f.children[t],r=n.userData.pointNames,i=0;i<r.length;i++)if(e.indexOf(r[i])>=0){n.userData.IsMalfunction=!0;break}x&&(x.material.dispose(),x.material=x.userData.OriginalMaterial),b=!1}var R=!1,F=null,N=null,j=null,z=null,B=null,U=null,V=0,G={},H=!1;function W(e,t){F=e,N=t,j=new o.Object3D,N.add(j)}function X(e,t,n,r){(new a.GLTFLoader).load(e,(function(e){z=e.scene,N.add(z),(new a.GLTFLoader).load(t,(function(e){var t=1.5*(B=e.scene).scale.x;B.scale.setScalar(t),(new o.FileLoader).load(n,(function(e){U=JSON.parse(e).lines,Y(),r&&r()}))}))}),null,(function(e){console.error(e)}))}function Y(){if(z){z.visible=R;for(var e=0;e<j.children.length;e++){var t=j.children[e];t.visible=R&&!t.userData.IsMalfunction}}}function Q(){R=!0,function(){if(F){var e=F.parent;e.remove(F),l.AddSDTObject(F,.4),e.add(F)}}()}function Z(){R=!1,l.Restore()}function K(e){if(z&&B&&U){if((V+=e)>=1){for(var t in V=0,U){var n=U[t],r=n.color,i=n.points;i.length>1&&J(r,50,i)}Y()}if(H){var o=10;if(G.Shift&&(o*=5),G.w){var a=z.position.clone();for(var s in a.x+=o*e,z.position.copy(a),U)for(var l=U[s].points,u=0;u<l.length;u++)l[u].x+=o*e}else if(G.s){var c=z.position.clone();for(var h in c.x-=o*e,z.position.copy(c),U)for(var f=U[h].points,p=0;p<f.length;p++)f[p].x-=o*e}else if(G.a){var d=z.position.clone();for(var m in d.z+=o*e,z.position.copy(d),U)for(var v=U[m].points,g=0;g<v.length;g++)v[g].z+=o*e}else if(G.d){var y=z.position.clone();for(var b in y.z-=o*e,z.position.copy(y),U)for(var x=U[b].points,w=0;w<x.length;w++)x[w].z-=o*e}else if(G.r){var q=z.position.clone();for(var _ in q.y+=o*e,z.position.copy(q),U)for(var S=U[_].points,M=0;M<S.length;M++)S[M].y+=o*e}else if(G.f){var E=z.position.clone();for(var T in E.y-=o*e,z.position.copy(E),U)for(var P=U[T].points,A=0;A<P.length;A++)P[A].y-=o*e}}}}function J(e,t,n){var r=B.clone();j.add(r),r.traverse((function(t){t instanceof o.Mesh&&(t.material=t.material.clone(),t.material.color=new o.Color(e))}));for(var i=[],a=0;a<n.length-1;a++){var s=new o.Vector3(n[a].x,n[a].y,n[a].z),l=new o.Vector3(n[a+1].x,n[a+1].y,n[a+1].z);i.push($(s,l,t,r)),0===a&&(r.position.copy(s),r.lookAt(l))}for(var u=0;u<i.length-1;u++)i[u].chain(i[u+1]);i[i.length-1].onComplete((function(){j.remove(r),r.traverse((function(e){e instanceof o.Mesh&&e.material.dispose()}))})),i[0].start()}function $(e,t,n,r){var i=e.distanceTo(t),a={ratio:0};return new s.a.Tween(a).to({ratio:1},10*i/(.01*n)).easing(s.a.Easing.Linear.None).onUpdate((function(){r.position.copy((new o.Vector3).lerpVectors(e,t,a.ratio)),r.lookAt(t),r.updateMatrix()}))}function ee(e){G[e.key]=!0}function te(e){if(G[e.key]=!1,"p"===e.key){var t=z.position.clone();console.log(t.x,t.y,t.z)}}function ne(){window.addEventListener("keydown",ee,!1),window.addEventListener("keyup",te,!1),H=!0,console.log("w,s,a,d,r,f,p")}function re(){window.removeEventListener("keydown",ee),window.removeEventListener("keyup",te),H=!1}function ie(e,t,n){var r=z.position.clone();for(var i in r.x+=e,r.y+=t,r.z+=n,z.position.copy(r),U)for(var o=U[i].points,a=0;a<o.length;a++)o[a].x+=e,o[a].y+=t,o[a].z+=n}n.d(t,"AnimateLine",(function(){return r})),n.d(t,"PowerLine",(function(){return i}))},function(e,t,n){var r=n(14).f,i=n(30),o=n(9)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(42),i=n(9)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(1),i=n(46),o=n(7),a=n(143),s="["+a+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"​"!="​"[e]()})),l=i[e]=s?t(h):a[e];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},h=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=c},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(186);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(23),i=n(258),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")?i(n):n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
var r={},i=void 0,o=r;function a(e,t){var n,r=e.split("."),a=o;!(r[0]in a)&&a.execScript&&a.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||t===i?a=a[n]?a[n]:a[n]={}:a[n]=t}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function l(e){var t,n,r,i,o,a,l,u,c,h,f=e.length,p=0,d=Number.POSITIVE_INFINITY;for(u=0;u<f;++u)e[u]>p&&(p=e[u]),e[u]<d&&(d=e[u]);for(t=1<<p,n=new(s?Uint32Array:Array)(t),r=1,i=0,o=2;r<=p;){for(u=0;u<f;++u)if(e[u]===r){for(a=0,l=i,c=0;c<r;++c)a=a<<1|1&l,l>>=1;for(h=r<<16|u,c=a;c<t;c+=o)n[c]=h;++i}++r,i<<=1,o<<=1}return[n,p,d]}function u(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(e):e,this.m=!1,this.i=h,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case c:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case h:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var c=0,h=1,f={t:c,s:h};u.prototype.k=function(){for(;!this.m;){var e=L(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,n=this.a,r=this.c,o=this.b,a=t.length,u=i,f=r.length,p=i;if(this.d=this.f=0,n+1>=a)throw Error("invalid uncompressed block header: LEN");if(u=t[n++]|t[n++]<<8,n+1>=a)throw Error("invalid uncompressed block header: NLEN");if(u===~(t[n++]|t[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+u>t.length)throw Error("input buffer is broken");switch(this.i){case c:for(;o+u>r.length;){if(u-=p=f-o,s)r.set(t.subarray(n,n+p),o),o+=p,n+=p;else for(;p--;)r[o++]=t[n++];this.b=o,r=this.e(),o=this.b}break;case h:for(;o+u>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)r.set(t.subarray(n,n+u),o),o+=u,n+=u;else for(;u--;)r[o++]=t[n++];this.a=n,this.b=o,this.c=r;break;case 1:this.j(P,O);break;case 2:var d,m,g,y,b=L(this,5)+257,x=L(this,5)+1,w=L(this,4)+4,q=new(s?Uint8Array:Array)(v.length),_=i,S=i,M=i,E=i,T=i;for(T=0;T<w;++T)q[v[T]]=L(this,3);if(!s)for(T=w,w=q.length;T<w;++T)q[v[T]]=0;for(d=l(q),_=new(s?Uint8Array:Array)(b+x),T=0,y=b+x;T<y;)switch(S=C(this,d)){case 16:for(E=3+L(this,2);E--;)_[T++]=M;break;case 17:for(E=3+L(this,3);E--;)_[T++]=0;M=0;break;case 18:for(E=11+L(this,7);E--;)_[T++]=0;M=0;break;default:M=_[T++]=S}m=l(s?_.subarray(0,b):_.slice(0,b)),g=l(s?_.subarray(b):_.slice(b)),this.j(m,g);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var p,d,m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v=s?new Uint16Array(m):m,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=s?new Uint16Array(g):g,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],x=s?new Uint8Array(b):b,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],q=s?new Uint16Array(w):w,_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=s?new Uint8Array(_):_,M=new(s?Uint8Array:Array)(288);for(p=0,d=M.length;p<d;++p)M[p]=143>=p?8:255>=p?9:279>=p?7:8;var E,T,P=l(M),A=new(s?Uint8Array:Array)(30);for(E=0,T=A.length;E<T;++E)A[E]=5;var O=l(A);function L(e,t){for(var n,r=e.f,i=e.d,o=e.input,a=e.a,s=o.length;i<t;){if(a>=s)throw Error("input buffer is broken");r|=o[a++]<<i,i+=8}return n=r&(1<<t)-1,e.f=r>>>t,e.d=i-t,e.a=a,n}function C(e,t){for(var n,r,i=e.f,o=e.d,a=e.input,s=e.a,l=a.length,u=t[0],c=t[1];o<c&&!(s>=l);)i|=a[s++]<<o,o+=8;if((r=(n=u[i&(1<<c)-1])>>>16)>o)throw Error("invalid code length: "+r);return e.f=i>>r,e.d=o-r,e.a=s,65535&n}function D(e,t){var n,r;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],r=e[this.a++],15&n){case k:this.method=k;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new u(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}u.prototype.j=function(e,t){var n=this.c,r=this.b;this.o=e;for(var i,o,a,s,l=n.length-258;256!==(i=C(this,e));)if(256>i)r>=l&&(this.b=r,n=this.e(),r=this.b),n[r++]=i;else for(s=y[o=i-257],0<x[o]&&(s+=L(this,x[o])),i=C(this,t),a=q[i],0<S[i]&&(a+=L(this,S[i])),r>=l&&(this.b=r,n=this.e(),r=this.b);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},u.prototype.w=function(e,t){var n=this.c,r=this.b;this.o=e;for(var i,o,a,s,l=n.length;256!==(i=C(this,e));)if(256>i)r>=l&&(l=(n=this.e()).length),n[r++]=i;else for(s=y[o=i-257],0<x[o]&&(s+=L(this,x[o])),i=C(this,t),a=q[i],0<S[i]&&(a+=L(this,S[i])),r+s>l&&(l=(n=this.e()).length);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},u.prototype.e=function(){var e,t,n=new(s?Uint8Array:Array)(this.b-32768),r=this.b-32768,i=this.c;if(s)n.set(i.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=i[e+32768];if(this.g.push(n),this.l+=n.length,s)i.set(i.subarray(r,r+32768));else for(e=0;32768>e;++e)i[e]=i[r+e];return this.b=32768,i},u.prototype.z=function(e){var t,n,r,i=this.input.length/this.a+1|0,o=this.input,a=this.c;return e&&("number"==typeof e.p&&(i=e.p),"number"==typeof e.u&&(i+=e.u)),2>i?n=(r=(o.length-this.a)/this.o[2]/2*258|0)<a.length?a.length+r:a.length<<1:n=a.length*i,s?(t=new Uint8Array(n)).set(a):t=a,this.c=t},u.prototype.n=function(){var e,t,n,r,i,o=0,a=this.c,l=this.g,u=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=l.length;t<n;++t)for(r=0,i=(e=l[t]).length;r<i;++r)u[o++]=e[r];for(t=32768,n=this.b;t<n;++t)u[o++]=a[t];return this.g=[],this.buffer=u},u.prototype.v=function(){var e,t=this.b;return s?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},D.prototype.k=function(){var e,t,n=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=e;if("string"==typeof r){var i,o,a=r.split("");for(i=0,o=a.length;i<o;i++)a[i]=(255&a[i].charCodeAt(0))>>>0;r=a}for(var s,l=1,u=0,c=r.length,h=0;0<c;){c-=s=1024<c?1024:c;do{u+=l+=r[h++]}while(--s);l%=65521,u%=65521}if(t!==(u<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var k=8;a("Zlib.Inflate",D),a("Zlib.Inflate.prototype.decompress",D.prototype.k);var I,R,F,N,j={ADAPTIVE:f.s,BLOCK:f.t};if(Object.keys)I=Object.keys(j);else for(R in I=[],F=0,j)I[F++]=R;for(F=0,N=I.length;F<N;++F)a("Zlib.Inflate.BufferType."+(R=I[F]),j[R]);var z=r.Zlib},function(e,t,n){"use strict";n.r(t),n.d(t,"PxModelVisibility",(function(){return a})),n.d(t,"addEventHandler",(function(){return s})),n.d(t,"removeEventHandler",(function(){return l}));var r=n(20);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=new(n(22).a),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.floorData=[],this.typedObjectList=[]}var t,n,a;return t=e,(n=[{key:"clear",value:function(){this.floorData=[],this.typedObjectList=[]}},{key:"setFloorData",value:function(e){this.floorData=e}},{key:"setTypedObjectList",value:function(e){this.typedObjectList=e}},{key:"showByType",value:function(e,t){for(var n=0;n<this.typedObjectList.length;n++){var i=this.typedObjectList[n];"floorroot"!==i.type&&i.target.name.includes(e)&&(t?i.type.toLowerCase()===t.toLowerCase()&&i.parent.add(i.target):i.parent.add(i.target))}r.e(this),o.dispatchEvent({type:"onShowByType",params:{strFloorName:e,strType:t}})}},{key:"hideByType",value:function(e,t){for(var n=0;n<this.typedObjectList.length;n++){var i=this.typedObjectList[n];"floorroot"!==i.type&&i.target.name.includes(e)&&(t?i.type.toLowerCase()===t.toLowerCase()&&i.parent.remove(i.target):i.parent.remove(i.target))}r.e(this),o.dispatchEvent({type:"onHideByType",params:{strFloorName:e,strType:t}})}},{key:"show",value:function(e){for(var t=0;t<this.floorData.length;t++){var n=this.floorData[t];n.name===e&&n.parent.add(n.target)}r.e(this),o.dispatchEvent({type:"onShow",params:{id:e}})}},{key:"hide",value:function(e){for(var t=0;t<this.floorData.length;t++){var n=this.floorData[t];n.name===e&&n.parent.remove(n.target)}r.e(this),o.dispatchEvent({type:"onHide",params:{id:e}})}},{key:"showArray",value:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var n=e[t];this.show(n)}r.e(this),o.dispatchEvent({type:"onShowArray",params:{idList:e}})}},{key:"hideArray",value:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var n=e[t];this.hide(n)}r.e(this),o.dispatchEvent({type:"onHideArray",params:{idList:e}})}},{key:"showAll",value:function(){for(var e=0;e<this.floorData.length;e++){var t=this.floorData[e];t.parent.add(t.target)}r.e(this),o.dispatchEvent({type:"onShowAll",params:null})}},{key:"hideAll",value:function(){for(var e=0;e<this.floorData.length;e++){var t=this.floorData[e];t.parent.remove(t.target)}r.e(this),o.dispatchEvent({type:"onHideAll",params:null})}},{key:"showOutdoor",value:function(){this.floorData.forEach((function(e){e.target.userData.isOutdoor&&e.parent.add(e.target)})),o.dispatchEvent({type:"onShowOutdoor",params:null})}},{key:"hideOutdoor",value:function(){this.floorData.forEach((function(e){e.target.userData.isOutdoor&&e.parent.remove(e.target)})),o.dispatchEvent({type:"onHideOutdoor",params:null})}},{key:"getFloor",value:function(e){for(var t=0;t<this.floorData.length;t++){var n=this.floorData[t];if(n.name===e)return n.target}return null}},{key:"getVisibleObjects",value:function(){for(var e=[],t=0;t<this.floorData.length;t++){var n=this.floorData[t];n.target.parent&&e.push(n.target)}return e}},{key:"getFloorData",value:function(){return this.floorData}},{key:"setVisibleByProperty",value:function(e,t,n){var r=this.core.workObjGroup,i=null;r.traverse((function(t){if(t.userData.hasOwnProperty("property")){var n=t.userData.property;n.hasOwnProperty("floorname")&&n.floorname===e&&(i=t)}}));var o=null;i&&i.traverse((function(e){if(e.userData.hasOwnProperty("property")){var n=e.userData.property;n.hasOwnProperty("type")&&n.type===t&&(o=e)}})),o?o.visible=n:console.warn("can't find object: ".concat(e,", ").concat(t))}},{key:"getVisibleByProperty",value:function(e,t){var n=this.core.workObjGroup,r=null;n.traverse((function(t){if(t.userData.hasOwnProperty("property")){var n=t.userData.property;n.hasOwnProperty("floorname")&&n.floorname===e&&(r=t)}}));var i=null;return r&&r.traverse((function(e){if(e.userData.hasOwnProperty("property")){var n=e.userData.property;n.hasOwnProperty("type")&&n.type===t&&(i=e)}})),i?{floorname:e,type:t,isVisible:i.visible}:(console.warn("can't find object: ".concat(e,", ").concat(t)),null)}}])&&i(t.prototype,n),a&&i(t,a),e}();function s(e,t){o.addEventListener(e,t)}function l(e,t){o.removeEventListener(e,t)}},function(e,t,n){"use strict";var r=n(0),i={findSpan:function(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;for(var i=e,o=r,a=Math.floor((i+o)/2);t<n[a]||t>=n[a+1];)t<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(e,t,n,r){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=n;++s){o[s]=t-r[e+1-s],a[s]=r[e+s]-t;for(var l=0,u=0;u<s;++u){var c=a[u+1],h=o[s-u],f=i[u]/(c+h);i[u]=l+c*f,l=h*f}i[s]=l}return i},calcBSplinePoint:function(e,t,n,i){for(var o=this.findSpan(e,i,t),a=this.calcBasisFunctions(o,i,e,t),s=new r.Vector4(0,0,0,0),l=0;l<=e;++l){var u=n[o-e+l],c=a[l],h=u.w*c;s.x+=u.x*h,s.y+=u.y*h,s.z+=u.z*h,s.w+=u.w*c}return s},calcBasisFunctionDerivatives:function(e,t,n,r,i){for(var o=[],a=0;a<=n;++a)o[a]=0;var s=[];for(a=0;a<=r;++a)s[a]=o.slice(0);var l=[];for(a=0;a<=n;++a)l[a]=o.slice(0);l[0][0]=1;for(var u=o.slice(0),c=o.slice(0),h=1;h<=n;++h){u[h]=t-i[e+1-h],c[h]=i[e+h]-t;for(var f=0,p=0;p<h;++p){var d=c[p+1],m=u[h-p];l[h][p]=d+m;var v=l[p][h-1]/l[h][p];l[p][h]=f+d*v,f=m*v}l[h][h]=f}for(h=0;h<=n;++h)s[0][h]=l[h][n];for(p=0;p<=n;++p){var g=0,y=1,b=[];for(a=0;a<=n;++a)b[a]=o.slice(0);b[0][0]=1;for(var x=1;x<=r;++x){var w=0,q=p-x,_=n-x;p>=x&&(b[y][0]=b[g][0]/l[_+1][q],w=b[y][0]*l[q][_]);var S=p-1<=_?x-1:n-p;for(h=q>=-1?1:-q;h<=S;++h)b[y][h]=(b[g][h]-b[g][h-1])/l[_+1][q+h],w+=b[y][h]*l[q+h][_];p<=_&&(b[y][x]=-b[g][x-1]/l[_+1][p],w+=b[y][x]*l[p][_]),s[x][p]=w;h=g;g=y,y=h}}for(p=n,x=1;x<=r;++x){for(h=0;h<=n;++h)s[x][h]*=p;p*=n-x}return s},calcBSplineDerivatives:function(e,t,n,i,o){for(var a=o<e?o:e,s=[],l=this.findSpan(e,i,t),u=this.calcBasisFunctionDerivatives(l,i,e,a,t),c=[],h=0;h<n.length;++h){var f=(d=n[h].clone()).w;d.x*=f,d.y*=f,d.z*=f,c[h]=d}for(var p=0;p<=a;++p){for(var d=c[l-e].clone().multiplyScalar(u[p][0]),m=1;m<=e;++m)d.add(c[l-e+m].clone().multiplyScalar(u[p][m]));s[p]=d}for(p=a+1;p<=o+1;++p)s[p]=new r.Vector4(0,0,0);return s},calcKoverI:function(e,t){for(var n=1,r=2;r<=e;++r)n*=r;var i=1;for(r=2;r<=t;++r)i*=r;for(r=2;r<=e-t;++r)i*=r;return n/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,n=[],i=[],o=0;o<t;++o){var a=e[o];n[o]=new r.Vector3(a.x,a.y,a.z),i[o]=a.w}for(var s=[],l=0;l<t;++l){var u=n[l].clone();for(o=1;o<=l;++o)u.sub(s[l-o].clone().multiplyScalar(this.calcKoverI(l,o)*i[o]));s[l]=u.divideScalar(i[0])}return s},calcNURBSDerivatives:function(e,t,n,r,i){var o=this.calcBSplineDerivatives(e,t,n,r,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,n,i,o,a,s,l){for(var u=this.findSpan(e,a,n),c=this.findSpan(t,s,i),h=this.calcBasisFunctions(u,a,e,n),f=this.calcBasisFunctions(c,s,t,i),p=[],d=0;d<=t;++d){p[d]=new r.Vector4(0,0,0,0);for(var m=0;m<=e;++m){var v=o[u-e+m][c-t+d].clone(),g=v.w;v.x*=g,v.y*=g,v.z*=g,p[d].add(v.multiplyScalar(h[m]))}}var y=new r.Vector4(0,0,0,0);for(d=0;d<=t;++d)y.add(p[d].multiplyScalar(f[d]));y.divideScalar(y.w),l.set(y.x,y.y,y.z)}};n.d(t,"a",(function(){return o}));var o=function(e,t,n,i,o){r.Curve.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(var a=0;a<n.length;++a){var s=n[a];this.controlPoints[a]=new r.Vector4(s.x,s.y,s.z,s.w)}};o.prototype=Object.create(r.Curve.prototype),o.prototype.constructor=o,o.prototype.getPoint=function(e){var t=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=i.calcBSplinePoint(this.degree,this.knots,this.controlPoints,t);return 1!=n.w&&n.divideScalar(n.w),new r.Vector3(n.x,n.y,n.z)},o.prototype.getTangent=function(e){var t=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),n=i.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,t,1)[1].clone();return n.normalize(),n}},function(e,t,n){var r=n(40),i=n(6),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(58)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(42);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(4);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(4),i=n(21),o=n(9)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===i(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"===r(e)},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===i(e)},t.isObject=function(e){return"object"===r(e)&&null!==e},t.isDate=function(e){return"[object Date]"===i(e)},t.isError=function(e){return"[object Error]"===i(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===r(e)||void 0===e},t.isBuffer=n(120).Buffer.isBuffer},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"GLTFExporter",(function(){return P}));var r=n(0),i=0,o=1,a=2,s=3,l=4,u=5,c=6,h=5121,f=5123,p=5126,d=5125,m=34962,v=34963,g=9728,y=9729,b=9984,x=9985,w=9986,q=9987,_=33071,S=33648,M=10497,E={};E[r.NearestFilter]=g,E[r.NearestMipmapNearestFilter]=b,E[r.NearestMipmapLinearFilter]=w,E[r.LinearFilter]=y,E[r.LinearMipmapNearestFilter]=x,E[r.LinearMipmapLinearFilter]=q,E[r.ClampToEdgeWrapping]=_,E[r.RepeatWrapping]=M,E[r.MirroredRepeatWrapping]=S;var T={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},P=function(){};P.prototype={constructor:P,parse:function(t,n,g){var y={binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],forceIndices:!1,forcePowerOfTwoTextures:!1,includeCustomExtensions:!1};(g=Object.assign({},y,g)).animations.length>0&&(g.trs=!0);var b,x={asset:{version:"2.0",generator:"GLTFExporter"}},w=0,q=[],_=[],S=new Map,M=[],A={},O={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},L=new Map,C=0;function D(e){return L.has(e)||L.set(e,C++),L.get(e)}function k(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function I(e){return 4*Math.ceil(e/4)}function R(e,t){t=t||0;var n=I(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function F(e,t){if(0!==Object.keys(e.userData).length)try{var n=JSON.parse(JSON.stringify(e.userData));if(g.includeCustomExtensions&&n.gltfExtensions){for(var r in void 0===t.extensions&&(t.extensions={}),n.gltfExtensions)t.extensions[r]=n.gltfExtensions[r],A[r]=!0;delete n.gltfExtensions}Object.keys(n).length>0&&(t.extras=n)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}function N(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,A.KHR_texture_transform=!0)}function j(e){return x.buffers||(x.buffers=[{byteLength:0}]),q.push(e),0}function z(e,t,n,r){var i;if(e.array.constructor===Float32Array)i=p;else if(e.array.constructor===Uint32Array)i=d;else if(e.array.constructor===Uint16Array)i=f;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");i=h}if(void 0===n&&(n=0),void 0===r&&(r=e.count),g.truncateDrawRange&&void 0!==t&&null===t.index){var o=n+r,a=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;n=Math.max(n,t.drawRange.start),(r=Math.min(o,a)-n)<0&&(r=0)}if(0===r)return null;var s,l=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+n;i++)for(var o=0;o<e.itemSize;o++){var a=e.array[i*e.itemSize+o];r.min[o]=Math.min(r.min[o],a),r.max[o]=Math.max(r.max[o],a)}return r}(e,n,r);void 0!==t&&(s=e===t.index?v:m);var u=function(e,t,n,r,i){var o;x.bufferViews||(x.bufferViews=[]),o=t===h?1:t===f?2:4;for(var a=I(r*e.itemSize*o),s=new DataView(new ArrayBuffer(a)),l=0,u=n;u<n+r;u++)for(var c=0;c<e.itemSize;c++){var v=e.array[u*e.itemSize+c];t===p?s.setFloat32(l,v,!0):t===d?s.setUint32(l,v,!0):t===f?s.setUint16(l,v,!0):t===h&&s.setUint8(l,v),l+=o}var g={buffer:j(s.buffer),byteOffset:w,byteLength:a};return void 0!==i&&(g.target=i),i===m&&(g.byteStride=e.itemSize*o),w+=a,x.bufferViews.push(g),{id:x.bufferViews.length-1,byteLength:0}}(e,i,n,r,s),c={bufferView:u.id,byteOffset:u.byteOffset,componentType:i,count:r,max:l.max,min:l.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return x.accessors||(x.accessors=[]),x.accessors.push(c),x.accessors.length-1}function B(t,n,i){O.images.has(t)||O.images.set(t,{});var o=O.images.get(t),a=n===r.RGBAFormat?"image/png":"image/jpeg",s=a+":flipY/"+i.toString();if(void 0!==o[s])return o[s];x.images||(x.images=[]);var l={mimeType:a};if(g.embedImages){var u=b=b||document.createElement("canvas");u.width=Math.min(t.width,g.maxTextureSize),u.height=Math.min(t.height,g.maxTextureSize),g.forcePowerOfTwoTextures&&!function(e){return r.Math.isPowerOfTwo(e.width)&&r.Math.isPowerOfTwo(e.height)}(u)&&(console.warn("GLTFExporter: Resized non-power-of-two image.",t),u.width=r.Math.floorPowerOfTwo(u.width),u.height=r.Math.floorPowerOfTwo(u.height));var c=u.getContext("2d");!0===i&&(c.translate(0,u.height),c.scale(1,-1)),c.drawImage(t,0,0,u.width,u.height),!0===g.binary?_.push(new e((function(t){u.toBlob((function(n){(function(t){return x.bufferViews||(x.bufferViews=[]),new e((function(e){var n=new window.FileReader;n.readAsArrayBuffer(t),n.onloadend=function(){var t=R(n.result),r={buffer:j(t),byteOffset:w,byteLength:t.byteLength};w+=t.byteLength,x.bufferViews.push(r),e(x.bufferViews.length-1)}}))})(n).then((function(e){l.bufferView=e,t()}))}),a)}))):l.uri=u.toDataURL(a)}else l.uri=t.src;x.images.push(l);var h=x.images.length-1;return o[s]=h,h}function U(e){x.samplers||(x.samplers=[]);var t={magFilter:E[e.magFilter],minFilter:E[e.minFilter],wrapS:E[e.wrapS],wrapT:E[e.wrapT]};return x.samplers.push(t),x.samplers.length-1}function V(e){if(O.textures.has(e))return O.textures.get(e);x.textures||(x.textures=[]);var t={sampler:U(e),source:B(e.image,e.format,e.flipY)};e.name&&(t.name=e.name),x.textures.push(t);var n=x.textures.length-1;return O.textures.set(e,n),n}function G(e){if(O.materials.has(e))return O.materials.get(e);if(x.materials||(x.materials=[]),e.isShaderMaterial&&!e.isGLTFSpecularGlossinessMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;var t={pbrMetallicRoughness:{}};e.isMeshBasicMaterial?(t.extensions={KHR_materials_unlit:{}},A.KHR_materials_unlit=!0):e.isGLTFSpecularGlossinessMaterial?(t.extensions={KHR_materials_pbrSpecularGlossiness:{}},A.KHR_materials_pbrSpecularGlossiness=!0):e.isMeshStandardMaterial||console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var n=e.color.toArray().concat([e.opacity]);if(k(n,[1,1,1,1])||(t.pbrMetallicRoughness.baseColorFactor=n),e.isMeshStandardMaterial?(t.pbrMetallicRoughness.metallicFactor=e.metalness,t.pbrMetallicRoughness.roughnessFactor=e.roughness):e.isMeshBasicMaterial?(t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9):(t.pbrMetallicRoughness.metallicFactor=.5,t.pbrMetallicRoughness.roughnessFactor=.5),e.isGLTFSpecularGlossinessMaterial){t.pbrMetallicRoughness.baseColorFactor&&(t.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var i=[1,1,1];e.specular.toArray(i,0),t.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor=i,t.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor=e.glossiness}if(e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var o={index:V(e.metalnessMap)};N(o,e.metalnessMap),t.pbrMetallicRoughness.metallicRoughnessTexture=o}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var a={index:V(e.map)};N(a,e.map),e.isGLTFSpecularGlossinessMaterial&&(t.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture=a),t.pbrMetallicRoughness.baseColorTexture=a}if(e.isGLTFSpecularGlossinessMaterial&&e.specularMap){var s={index:V(e.specularMap)};N(s,e.specularMap),t.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture=s}if(e.isMeshBasicMaterial||e.isLineBasicMaterial||e.isPointsMaterial);else{var l=e.emissive.clone().multiplyScalar(e.emissiveIntensity).toArray();if(k(l,[0,0,0])||(t.emissiveFactor=l),e.emissiveMap){var u={index:V(e.emissiveMap)};N(u,e.emissiveMap),t.emissiveTexture=u}}if(e.normalMap){var c={index:V(e.normalMap)};e.normalScale&&-1!==e.normalScale.x&&(e.normalScale.x!==e.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),c.scale=e.normalScale.x),N(c,e.normalMap),t.normalTexture=c}if(e.aoMap){var h={index:V(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(h.strength=e.aoMapIntensity),N(h,e.aoMap),t.occlusionTexture=h}e.transparent?t.alphaMode="BLEND":e.alphaTest>0&&(t.alphaMode="MASK",t.alphaCutoff=e.alphaTest),e.side===r.DoubleSide&&(t.doubleSided=!0),""!==e.name&&(t.name=e.name),F(e,t),x.materials.push(t);var f=x.materials.length-1;return O.materials.set(e,f),f}function H(e){var t=e.geometry.uuid+":"+e.material.uuid;if(O.meshes.has(t))return O.meshes.get(t);var n,h=e.geometry;if(e.isLineSegments)n=o;else if(e.isLineLoop)n=a;else if(e.isLine)n=s;else if(e.isPoints)n=i;else{if(!h.isBufferGeometry){console.warn("GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead.");var f=new r.BufferGeometry;f.fromGeometry(h),h=f}e.drawMode===r.TriangleFanDrawMode?(console.warn("GLTFExporter: TriangleFanDrawMode and wireframe incompatible."),n=c):n=e.drawMode===r.TriangleStripDrawMode?e.material.wireframe?s:u:e.material.wireframe?o:l}var p={},d={},m=[],v=[],y={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},b=h.getAttribute("normal");void 0===b||function(e){if(O.attributesNormalized.has(e))return!1;for(var t=new r.Vector3,n=0,i=e.count;n<i;n++)if(Math.abs(t.fromArray(e.array,3*n).length()-1)>5e-4)return!1;return!0}(b)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),h.setAttribute("normal",function(e){if(O.attributesNormalized.has(e))return O.attributesNormalized.get(e);for(var t=e.clone(),n=new r.Vector3,i=0,o=t.count;i<o;i++)n.fromArray(t.array,3*i),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),n.toArray(t.array,3*i);return O.attributesNormalized.set(e,t),t}(b)));var w=null;for(var q in h.attributes)if("morph"!==q.substr(0,5)){var _=h.attributes[q];q=y[q]||q.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(q)||(q="_"+q),O.attributes.has(D(_)))d[q]=O.attributes.get(D(_));else{w=null;var S=_.array;"JOINTS_0"!==q||S instanceof Uint16Array||S instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),w=new r.BufferAttribute(new Uint16Array(S),_.itemSize,_.normalized));var M=z(w||_,h);null!==M&&(d[q]=M,O.attributes.set(D(_),M))}}if(void 0!==b&&h.setAttribute("normal",b),0===Object.keys(d).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var E=[],T=[],P={};if(void 0!==e.morphTargetDictionary)for(var A in e.morphTargetDictionary)P[e.morphTargetDictionary[A]]=A;for(var L=0;L<e.morphTargetInfluences.length;++L){var C={},k=!1;for(var q in h.morphAttributes)if("position"===q||"normal"===q){_=h.morphAttributes[q][L];var I=q.toUpperCase(),R=h.attributes[q];if(O.attributes.has(D(_)))C[I]=O.attributes.get(D(_));else{for(var N=_.clone(),j=0,B=_.count;j<B;j++)N.setXYZ(j,_.getX(j)-R.getX(j),_.getY(j)-R.getY(j),_.getZ(j)-R.getZ(j));C[I]=z(N,h),O.attributes.set(D(R),C[I])}}else k||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),k=!0);v.push(C),E.push(e.morphTargetInfluences[L]),void 0!==e.morphTargetDictionary&&T.push(P[L])}p.weights=E,T.length>0&&(p.extras={},p.extras.targetNames=T)}var U=g.forceIndices,V=Array.isArray(e.material);if(V&&0===h.groups.length)return null;!U&&null===h.index&&V&&(console.warn("THREE.GLTFExporter: Creating index for non-indexed multi-material mesh."),U=!0);var H=!1;if(null===h.index&&U){for(var W=[],X=(L=0,h.attributes.position.count);L<X;L++)W[L]=L;h.setIndex(W),H=!0}var Y=V?e.material:[e.material],Q=V?h.groups:[{materialIndex:0,start:void 0,count:void 0}];for(L=0,X=Q.length;L<X;L++){var Z={mode:n,attributes:d};if(F(h,Z),v.length>0&&(Z.targets=v),null!==h.index){t=D(h.index);void 0===Q[L].start&&void 0===Q[L].count||(t+=":"+Q[L].start+":"+Q[L].count),O.attributes.has(t)?Z.indices=O.attributes.get(t):(Z.indices=z(h.index,h,Q[L].start,Q[L].count),O.attributes.set(t,Z.indices)),null===Z.indices&&delete Z.indices}var K=G(Y[Q[L].materialIndex]);null!==K&&(Z.material=K),m.push(Z)}H&&h.setIndex(null),p.primitives=m,x.meshes||(x.meshes=[]),x.meshes.push(p);var J=x.meshes.length-1;return O.meshes.set(t,J),J}function W(e,t){x.animations||(x.animations=[]);for(var n=(e=P.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,i=[],o=[],a=0;a<n.length;++a){var s=n[a],l=r.PropertyBinding.parseTrackName(s.name),u=r.PropertyBinding.findNode(t,l.nodeName),c=T[l.propertyName];if("bones"===l.objectName&&(u=!0===u.isSkinnedMesh?u.skeleton.getBoneByName(l.objectIndex):void 0),!u||!c)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',s.name),null;var h,f=s.values.length/s.times.length;c===T.morphTargetInfluences&&(f/=u.morphTargetInfluences.length),!0===s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",f/=3):h=s.getInterpolation()===r.InterpolateDiscrete?"STEP":"LINEAR",o.push({input:z(new r.BufferAttribute(s.times,1)),output:z(new r.BufferAttribute(s.values,f)),interpolation:h}),i.push({sampler:o.length-1,target:{node:S.get(u),path:c}})}return x.animations.push({name:e.name||"clip_"+x.animations.length,samplers:o,channels:i}),x.animations.length-1}function X(e){var t=x.nodes[S.get(e)],n=e.skeleton,i=e.skeleton.bones[0];if(void 0===i)return null;for(var o=[],a=new Float32Array(16*n.bones.length),s=0;s<n.bones.length;++s)o.push(S.get(n.bones[s])),n.boneInverses[s].toArray(a,16*s);return void 0===x.skins&&(x.skins=[]),x.skins.push({inverseBindMatrices:z(new r.BufferAttribute(a,16)),joints:o,skeleton:S.get(i)}),t.skin=x.skins.length-1}function Y(e){var t={};e.name&&(t.name=e.name),t.color=e.color.toArray(),t.intensity=e.intensity,e.isDirectionalLight?t.type="directional":e.isPointLight?(t.type="point",e.distance>0&&(t.range=e.distance)):e.isSpotLight&&(t.type="spot",e.distance>0&&(t.range=e.distance),t.spot={},t.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,t.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");var n=x.extensions.KHR_lights_punctual.lights;return n.push(t),n.length-1}function Q(e){x.nodes||(x.nodes=[]);var t={};if(g.trs){var n=e.quaternion.toArray(),i=e.position.toArray(),o=e.scale.toArray();k(n,[0,0,0,1])||(t.rotation=n),k(i,[0,0,0])||(t.translation=i),k(o,[1,1,1])||(t.scale=o)}else e.matrixAutoUpdate&&e.updateMatrix(),k(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(t.matrix=e.matrix.elements);if(""!==e.name&&(t.name=String(e.name)),F(e,t),e.isMesh||e.isLine||e.isPoints){var a=H(e);null!==a&&(t.mesh=a)}else if(e.isCamera)t.camera=function(e){x.cameras||(x.cameras=[]);var t=e.isOrthographicCamera,n={type:t?"orthographic":"perspective"};return t?n.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:r.Math.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(n.name=e.type),x.cameras.push(n),x.cameras.length-1}(e);else if(e.isDirectionalLight||e.isPointLight||e.isSpotLight)A.KHR_lights_punctual||(x.extensions=x.extensions||{},x.extensions.KHR_lights_punctual={lights:[]},A.KHR_lights_punctual=!0),t.extensions=t.extensions||{},t.extensions.KHR_lights_punctual={light:Y(e)};else if(e.isLight)return console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e),null;if(e.isSkinnedMesh&&M.push(e),e.children.length>0){for(var s=[],l=0,u=e.children.length;l<u;l++){var c=e.children[l];if(c.visible||!1===g.onlyVisible){var h=Q(c);null!==h&&s.push(h)}}s.length>0&&(t.children=s)}x.nodes.push(t);var f=x.nodes.length-1;return S.set(e,f),f}function Z(e){x.scenes||(x.scenes=[],x.scene=0);var t={nodes:[]};""!==e.name&&(t.name=e.name),e.userData&&Object.keys(e.userData).length>0&&(t.extras=F(e)),x.scenes.push(t);for(var n=[],r=0,i=e.children.length;r<i;r++){var o=e.children[r];if(o.visible||!1===g.onlyVisible){var a=Q(o);null!==a&&n.push(a)}}n.length>0&&(t.nodes=n),F(e,t)}!function(e){e=e instanceof Array?e:[e];for(var t=[],n=0;n<e.length;n++)e[n]instanceof r.Scene?Z(e[n]):t.push(e[n]);for(t.length>0&&function(e){var t=new r.Scene;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);Z(t)}(t),n=0;n<M.length;++n)X(M[n]);for(n=0;n<g.animations.length;++n)W(g.animations[n],e[0])}(t),e.all(_).then((function(){var e=new Blob(q,{type:"application/octet-stream"}),t=Object.keys(A);if(t.length>0&&(x.extensionsUsed=t),x.buffers&&x.buffers.length>0){x.buffers[0].byteLength=e.size;var r=new window.FileReader;if(!0===g.binary){r.readAsArrayBuffer(e),r.onloadend=function(){var e=R(r.result),t=new DataView(new ArrayBuffer(8));t.setUint32(0,e.byteLength,!0),t.setUint32(4,5130562,!0);var i=R(function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);t[n]=i>255?32:i}return t.buffer}(JSON.stringify(x)),32),o=new DataView(new ArrayBuffer(8));o.setUint32(0,i.byteLength,!0),o.setUint32(4,1313821514,!0);var a=new ArrayBuffer(12),s=new DataView(a);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0);var l=12+o.byteLength+i.byteLength+t.byteLength+e.byteLength;s.setUint32(8,l,!0);var u=new Blob([a,o,i,t,e],{type:"application/octet-stream"}),c=new window.FileReader;c.readAsArrayBuffer(u),c.onloadend=function(){n(c.result)}}}else r.readAsDataURL(e),r.onloadend=function(){var e=r.result;x.buffers[0].uri=e,n(x)}}else n(x)}))}},P.Utils={insertKeyframe:function(e,t){var n,r=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+r),a=e.createInterpolant(new e.ValueBufferType(r));if(0===e.times.length){i[0]=t;for(var s=0;s<r;s++)o[s]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<.001)return 0;i[0]=t,i.set(e.times,1),o.set(a.evaluate(t),0),o.set(e.values,r),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<.001)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),o.set(e.values,0),o.set(a.evaluate(t),e.values.length),n=i.length-1}else for(s=0;s<e.times.length;s++){if(Math.abs(e.times[s]-t)<.001)return s;if(e.times[s]<t&&e.times[s+1]>t){i.set(e.times.slice(0,s+1),0),i[s+1]=t,i.set(e.times.slice(s+1),s+2),o.set(e.values.slice(0,(s+1)*r),0),o.set(a.evaluate(t),(s+1)*r),o.set(e.values.slice((s+1)*r),(s+2)*r),n=s+1;break}}return e.times=i,e.values=o,n},mergeMorphTargetTracks:function(e,t){for(var n=[],i={},o=e.tracks,a=0;a<o.length;++a){var s=o[a],l=r.PropertyBinding.parseTrackName(s.name),u=r.PropertyBinding.findNode(t,l.nodeName);if("morphTargetInfluences"===l.propertyName&&void 0!==l.propertyIndex){if(s.createInterpolant!==s.InterpolantFactoryMethodDiscrete&&s.createInterpolant!==s.InterpolantFactoryMethodLinear){if(s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(s=s.clone()).setInterpolation(r.InterpolateLinear)}var c,h=u.morphTargetInfluences.length,f=u.morphTargetDictionary[l.propertyIndex];if(void 0===f)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);if(void 0!==i[u.uuid]){var p=s.createInterpolant(new s.ValueBufferType(1));c=i[u.uuid];for(v=0;v<c.times.length;v++)c.values[v*h+f]=p.evaluate(c.times[v]);for(v=0;v<s.times.length;v++){var d=this.insertKeyframe(c,s.times[v]);c.values[d*h+f]=s.values[v]}}else{for(var m=new((c=s.clone()).ValueBufferType)(h*c.times.length),v=0;v<c.times.length;v++)m[v*h+f]=c.values[v];c.name=".morphTargetInfluences",c.values=m,i[u.uuid]=c,n.push(c)}}else n.push(s)}return e.tracks=n,e}}}.call(this,n(11))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(17),i=function(e,t,n,i,o){r.a.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};i.prototype=Object.assign(Object.create(r.a.prototype),{constructor:i,render:function(e,t,n){var r,i,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),this.scene.overrideMaterial=null,e.autoClear=o}})},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"setCoreInstance",(function(){return x})),n.d(t,"LoadBaseModel",(function(){return w})),n.d(t,"SetPosition",(function(){return M})),n.d(t,"SetSize",(function(){return E})),n.d(t,"Fire",(function(){return _})),n.d(t,"Water",(function(){return S})),n.d(t,"CoordinateTest",(function(){return T}));var r=n(0),i=n(5),o=n(266),a=n(103);n.d(t,"Smoke",(function(){return a}));var s=n(193);n.d(t,"SmartFence",(function(){return s}));var l=n(194);n.d(t,"PowerLine",(function(){return l}));var u=n(195);n.d(t,"Robot",(function(){return u}));var c,h,f=null,p=null,d=[],m=[],v=null,g=null,y=null,b=null;function x(e){f=e,c=new r.Vector3,h=1,v=new r.MeshStandardMaterial({color:"white"}),g=new r.MeshStandardMaterial({color:"white"}),y=new r.MeshStandardMaterial({color:"lightblue"}),a.setCoreInstance(f),s.setCoreInstance(f),l.initialize(f),u.setCoreInstance(f)}function w(t,n){return new e((function(e){(new i.GLTFLoader).load(t,(function(t){(p=t.scene).traverse((function(e){if(e.userData.hasOwnProperty("type")){var t=e.userData.type;"target"===t?(e,e.material=v):"upper"===t?(d.push(e),e.material=g):"under"===t&&(m.push(e),e.material=g)}})),f.sysObjGroup.add(p),n&&n(),e()}),null,(function(e){console.error(e)}))}))}var q="Skt5GDT_Fire",_={LoadFireTexture:function(t,n){return new e((function(e){f.fireMgr.loadFireTexture(t,n),f.fireMgr.createFire(q),f.fireMgr.setSize(q,.8),f.fireMgr.setPosition(q,0,-.8,0),f.fireMgr.setVisible(q,!1),e()}))},On:function(){f.fireMgr.setVisible(q,!0)},Off:function(){f.fireMgr.setVisible(q,!1)}},S={LoadWaterTexture:function(t,n){return new e((function(e){var i=new r.TextureLoader,a=new r.PlaneBufferGeometry(10,10);(b=new o.a(a,{color:y.color.clone(),scale:1,textureWidth:512,textureHeight:512,flowSpeed:.1,flowDirection:new r.Vector2(.1,0),normalMap0:i.load(t),normalMap1:i.load(n)})).position.set(0,0,0),b.rotation.x=-.5*Math.PI,f.sysObjGroup.add(b),b.visible=!1,e()}))},On:function(){m.forEach((function(e){e.material=y})),b.visible=!0},Off:function(){m.forEach((function(e){e.material=g})),b.visible=!1}};function M(e,t,n){c.set(e,t,n),p.position.copy(c),f.fireMgr.setPosition(q,c.x,c.y-.8*h,c.z),b.position.copy(c),a.setPosition(c)}function E(e){h=e,p.scale.setScalar(h),f.fireMgr.setSize(q,.8*h),b.scale.setScalar(h),a.setScale(h)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=.5*e,n=f.camera.testTopOrthoView(f.workObjGroup,e),i=n.camera,o=n.center,a=[],s=new r.SphereBufferGeometry(e/100*2,16,16),l=new r.MeshStandardMaterial({color:16711680,depthTest:!1,depthWrite:!1}),u=new r.Mesh(s,l);function c(e){var t=e.position.clone();i.updateMatrixWorld(),i.updateProjectionMatrix(),t.project(i),t.x=(t.x+1)/2*f.getDom().clientWidth,t.y=-(t.y-1)/2*f.getDom().clientHeight;var n=document.createElement("label");n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.innerText="[".concat(e.position.x.toFixed(0),", ",0,", ").concat(e.position.z.toFixed(0),"]"),document.body.appendChild(n)}f.sysObjGroup.add(u),u.position.set(t,0,0),u.position.add(o),a.push(u),u=new r.Mesh(s,l),f.sysObjGroup.add(u),u.position.set(e,0,0),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(-t,0,0),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(-e,0,0),u.position.add(o),a.push(u),(u=u.clone()).material=u.material.clone(),u.material.color=new r.Color(255),f.sysObjGroup.add(u),u.position.set(0,0,t),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(0,0,e),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(0,0,-t),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(0,0,-e),u.position.add(o),a.push(u),(u=u.clone()).material=u.material.clone(),u.material.color=new r.Color(65280),f.sysObjGroup.add(u),u.position.set(e,0,e),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(e,0,-e),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(-e,0,-e),u.position.add(o),a.push(u),u=u.clone(),f.sysObjGroup.add(u),u.position.set(-e,0,e),u.position.add(o),a.push(u),(u=u.clone()).material=u.material.clone(),u.material.color=new r.Color(16776960),f.sysObjGroup.add(u),u.position.set(0,0,0),u.position.add(o),a.push(u),a.forEach((function(e){c(e)}))}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Get",(function(){return v}));var i={};n.r(i),n.d(i,"initialize",(function(){return b})),n.d(i,"Show",(function(){return _})),n.d(i,"Hide",(function(){return S})),n.d(i,"ShowAll",(function(){return M})),n.d(i,"HideAll",(function(){return E})),n.d(i,"SetOpacity",(function(){return T})),n.d(i,"RestoreOpacity",(function(){return P})),n.d(i,"SetOpacityAll",(function(){return A})),n.d(i,"RestoreOpacityAll",(function(){return O}));var o={};n.r(o),n.d(o,"initialize",(function(){return D})),n.d(o,"Add",(function(){return R})),n.d(o,"Remove",(function(){return F})),n.d(o,"Clear",(function(){return N}));var a={};n.r(a),n.d(a,"initialize",(function(){return Pe})),n.d(a,"CreatePoint",(function(){return ke})),n.d(a,"MovePoint",(function(){return Ie})),n.d(a,"Cancel",(function(){return Re})),n.d(a,"Undo",(function(){return Fe})),n.d(a,"Redo",(function(){return Ne})),n.d(a,"GetCurrentPathName",(function(){return je})),n.d(a,"AddEventListener",(function(){return ze})),n.d(a,"RemoveEventListener",(function(){return Be})),n.d(a,"Show",(function(){return Ue})),n.d(a,"Hide",(function(){return Ve})),n.d(a,"ShowAll",(function(){return Ge})),n.d(a,"HideAll",(function(){return He})),n.d(a,"SetDefaultSize",(function(){return We})),n.d(a,"SetSize",(function(){return Xe})),n.d(a,"SetDefaultColor",(function(){return Ye})),n.d(a,"SetColor",(function(){return Qe})),n.d(a,"Export",(function(){return Ze})),n.d(a,"Import",(function(){return Ke})),n.d(a,"Clear",(function(){return Je})),n.d(a,"Delete",(function(){return $e})),n.d(a,"ClearUndoRedoStack",(function(){return et})),n.d(a,"DeletePoint",(function(){return tt})),n.d(a,"DeleteLine",(function(){return nt}));var s={};n.r(s),n.d(s,"initialize",(function(){return it})),n.d(s,"Extend",(function(){return ot}));var l={};n.r(l),n.d(l,"initialize",(function(){return lt})),n.d(l,"LoadTable",(function(){return ut})),n.d(l,"SetMaterial",(function(){return ht})),n.d(l,"GetMaterialKeyList",(function(){return ct}));var u={};n.r(u),n.d(u,"initialize",(function(){return dt})),n.d(u,"LoadModel",(function(){return mt})),n.d(u,"SetLocation",(function(){return vt})),n.d(u,"Show",(function(){return gt})),n.d(u,"Hide",(function(){return yt})),n.d(u,"ShowAll",(function(){return bt})),n.d(u,"HideAll",(function(){return xt})),n.d(u,"GetModelKeys",(function(){return wt}));var c={};n.r(c),n.d(c,"initialize",(function(){return Et})),n.d(c,"LoadWireModel",(function(){return Tt})),n.d(c,"Show",(function(){return Pt})),n.d(c,"Hide",(function(){return At})),n.d(c,"ShowAll",(function(){return Ot})),n.d(c,"HideAll",(function(){return Lt})),n.d(c,"SetColorAll",(function(){return Ct})),n.d(c,"SetColor",(function(){return Dt}));var h=n(0),f=n(19);function p(e,t){if(!(e instanceof Array))throw"유효하지 않은 층 객체";for(var n=0;n<e.length;n++){var r=e[n].name.split("|"),i=r[0],o=r[1];t.push({code:i,name:o})}}function d(e,t){if(!(e instanceof Array))throw"유효하지 않은 층그룹";for(var n=0;n<e.length;n++){var r=e[n],i=r.name.split("|"),o=i[0],a={code:i[1],name:i[2],order:o,objects:[]};t.push(a),p(r.children,a.objects)}}function m(e,t){if(!(e instanceof Array))throw"유효하지 않은 객체그룹.";for(var n=0;n<e.length;n++){var r=e[n],i=r.name.split("|"),o=i[0].toLowerCase();i[1];"floors"===o?d(r.children,t.floors):"facility"===o&&d(r.children,t.facilities)}}function v(e,t){var n=[];(new f.FBXLoader).load(e,(function(e){e.traverse((function(e){0<=e.name.indexOf("*")&&(e.name=e.name.split("*")[0])})),console.log(e),function(e,t){for(var n=0;n<e.length;n++){var r=e[n].name.split("|"),i=r[0],o={code:r[1],name:r[2],order:i,floors:[],facilities:[]};t.push(o),m(e[n].children,o)}}(e.children,n),t&&t(n)}),null,(function(e){console.error(e)}))}var g=null,y=!1;function b(e){g=e}function x(){y||(g.workObjGroup.traverse((function(e){e instanceof h.Mesh&&(e.material instanceof Array?e.userData.sourceMaterial=e.material.map((function(e){return e.clone()})):e.userData.sourceMaterial=e.material.clone(),e.userData.setOpacity=function(t){if(e.material instanceof Array){for(var n=0;n<e.material.length;n++)e.material[n]=e.material[n].clone();e.material.forEach((function(e){e.transparent=!0,e.opacity=t,e.side=h.DoubleSide,e.depthTest=!1,e.depthWrite=!1}))}else e.material=e.material.clone(),e.material.transparent=!0,e.material.opacity=t,e.material.side=h.DoubleSide,e.material.depthTest=!1,e.material.depthWrite=!1},e.userData.restoreOpacity=function(){e.material instanceof Array?(e.material.forEach((function(e){return e.dispose()})),e.material=e.userData.sourceMaterial.map((function(e){return e.clone()}))):(e.material.dispose(),e.material=e.userData.sourceMaterial.clone())})})),y=!0)}function w(e,t,n,r){var i=[];g.workObjGroup.traverse((function(t){t.name.search(e)>=0&&(t.name.split("|")[1]===e&&i.push(t))})),i.length>0&&i.forEach((function(e){var i=[];e.traverse((function(e){var n=e.name.split("|");3===n.length&&n[1]===t&&i.push(e)})),i.length&&i.forEach((function(e){e.traverse((function(e){var t=e.name.split("|");2===t.length&&(n?t[0]===n&&(e.visible=!0,r.expandByObject(e)):(e.visible=!0,r.expandByObject(e)))}))}))}))}function q(e,t,n){var r=[];g.workObjGroup.traverse((function(t){t.name.search(e)>=0&&(t.name.split("|")[1]===e&&r.push(t))})),r.length>0&&r.forEach((function(e){var r=[];e.traverse((function(e){var n=e.name.split("|");3===n.length&&n[1]===t&&r.push(e)})),r.length&&r.forEach((function(e){e.traverse((function(e){var t=e.name.split("|");2===t.length&&(n?t[0]===n&&(e.visible=!1):e.visible=!1)}))}))}))}function _(e,t,n,r){var i=(new h.Box3).makeEmpty();if(e instanceof Array)for(var o=e,a=0;a<o.length;a++)w(o[a][0],o[a][1],o[a][2],i);else w(e,t,n,i);if(!i.isEmpty()&&r){var s=new h.Vector3,l=new h.Vector3;i.getCenter(s),i.getSize(l);var u=Math.max(l.x,l.y);u=Math.max(u,l.z);var c=new h.Vector3;g.getCamera().getWorldDirection(c),c.negate();var f=s.clone().addScaledVector(c,u),p=g.getCameraControl();p.target.copy(s),p.object.position.copy(f),p.object.lookAt(s),p.update()}}function S(e,t,n){if(e instanceof Array)for(var r=e,i=0;i<r.length;i++)q(r[i][0],r[i][1],r[i][2]);else q(e,t,n)}function M(){g.workObjGroup.traverse((function(e){e instanceof h.Mesh&&0===e.children.length&&(e.visible=!0)}))}function E(){g.workObjGroup.traverse((function(e){e instanceof h.Mesh&&0===e.children.length&&(e.visible=!1)}))}function T(e,t,n,r){x();var i=[];g.workObjGroup.traverse((function(e){e.name.search(t)>=0&&(e.name.split("|")[1]===t&&i.push(e))})),i.length>0&&i.forEach((function(t){var i=[];t.traverse((function(e){var t=e.name.split("|");3===t.length&&t[1]===n&&i.push(e)})),i.length&&i.forEach((function(t){t.traverse((function(t){var n=t.name.split("|");2===n.length&&(r?n[0]===r&&t.userData.hasOwnProperty("setOpacity")&&(t.userData.restoreOpacity(),t.userData.setOpacity(e)):t.userData.hasOwnProperty("setOpacity")&&(t.userData.restoreOpacity(),t.userData.setOpacity(e)))}))}))}))}function P(e,t,n){x();var r=[];g.workObjGroup.traverse((function(t){t.name.search(e)>=0&&(t.name.split("|")[1]===e&&r.push(t))})),r.length>0&&r.forEach((function(e){var r=[];e.traverse((function(e){var n=e.name.split("|");3===n.length&&n[1]===t&&r.push(e)})),r.length&&r.forEach((function(e){e.traverse((function(e){var t=e.name.split("|");2===t.length&&(n?t[0]===n&&e.userData.hasOwnProperty("restoreOpacity")&&e.userData.restoreOpacity():e.userData.hasOwnProperty("restoreOpacity")&&e.userData.restoreOpacity())}))}))}))}function A(e){x(),g.workObjGroup.traverse((function(t){t instanceof h.Mesh&&0===t.children.length&&(t.userData.restoreOpacity(),t.userData.setOpacity(e))}))}function O(){x(),g.workObjGroup.traverse((function(e){e instanceof h.Mesh&&0===e.children.length&&e.userData.restoreOpacity()}))}var L=n(64),C=null;function D(e){C=e}function k(e,t,n){var r=[];C.workObjGroup.traverse((function(t){t.name.search(e)>=0&&(t.name.split("|")[0]===e&&r.push(t))})),r.length>0&&r.forEach((function(e){var r=[];e.traverse((function(e){var n=e.name.split("|");3===n.length&&n[1]===t&&r.push(e)})),r.length&&r.forEach((function(e){e.traverse((function(e){var t=e.name.split("|");2===t.length&&(n?t[0]===n&&L.addObject(e):L.addObject(e))}))}))}))}function I(e,t,n){var r=[];C.workObjGroup.traverse((function(t){t.name.search(e)>=0&&(t.name.split("|")[0]===e&&r.push(t))})),r.length>0&&r.forEach((function(e){var r=[];e.traverse((function(e){var n=e.name.split("|");3===n.length&&n[1]===t&&r.push(e)})),r.length&&r.forEach((function(e){e.traverse((function(e){var t=e.name.split("|");2===t.length&&(n?t[0]===n&&L.removeObject(e):L.removeObject(e))}))}))}))}function R(e,t,n){if(e instanceof Array)for(var r=e,i=0;i<r.length;i++)k(r[i][0],r[i][1],r[i][2]);else k(e,t,n)}function F(e,t,n){if(e instanceof Array)for(var r=e,i=0;i<r.length;i++)I(r[i][0],r[i][1],r[i][2]);else I(e,t,n)}function N(){L.clear()}var j=n(22);function z(e,t,n){return(z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function H(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=null;var Z=function(e){function t(e,n){return U(this,t),H(this,W(t).call(this,e,n))}return X(t,e),G(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(h.Mesh),K=function(e){function t(e,n){var r;return U(this,t),(r=H(this,W(t).call(this))).p1=e,r.p2=n,r}return X(t,e),G(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.Vector3,n=new h.Vector3,r=new h.Vector3;this.p1.getWorldPosition(n),this.p2.getWorldPosition(r);var i=(new h.Vector3).lerpVectors(n,r,e);return t.copy(i)}}]),t}(h.Curve),J=function(e){function t(e,n,r,i){var o;U(this,t),(o=H(this,W(t).call(this))).size=r,o.color=i,o.curve=new K(e,n),o.geometry=new h.TubeBufferGeometry(o.curve,1,o.size,32),o.geometry.computeBoundingSphere();var a=o.geometry.boundingSphere.center.clone();return o.geometry.translate(-a.x,-a.y,-a.z),o.material=new h.MeshStandardMaterial({color:o.color}),o.position.copy(a),o.p1_dummy=new h.Object3D,o.p1_dummy.position.copy(o.curve.getPoint(0)),o.attach(o.p1_dummy),o.p2_dummy=new h.Object3D,o.p2_dummy.position.copy(o.curve.getPoint(1)),o.attach(o.p2_dummy),o}return X(t,e),G(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"applyLineToPoint",value:function(){var e=new h.Vector3,t=new h.Vector3;this.p1_dummy.getWorldPosition(e),this.p2_dummy.getWorldPosition(t),this.curve.p1.position.copy(e),this.curve.p2.position.copy(t)}},{key:"Size",set:function(e){this.size=e,this.geometry.dispose(),this.geometry=new h.TubeBufferGeometry(this.curve,1,this.size,32),this.geometry.computeBoundingSphere();var t=this.geometry.boundingSphere.center.clone();this.geometry.translate(-t.x,-t.y,-t.z),this.position.copy(t)}},{key:"LineCenter",get:function(){return this.curve.getPoint(.5)}},{key:"LineLength",get:function(){var e=new h.Vector3,t=new h.Vector3;return this.curve.p1.getWorldPosition(e),this.curve.p2.getWorldPosition(t),e.distanceTo(t)}}]),t}(h.Mesh),$=function(){function e(t,n,r){U(this,e),this.uuid=h.Math.generateUUID(),this.name=t,this.size=n,this.color=r,this.points=[],this.lines=[],this.cones=[],this._visible=!0}return G(e,[{key:"dispose",value:function(){this.lines.forEach((function(e){Q.remove(e),e.dispose()})),this.points.forEach((function(e){Q.remove(e),e.dispose()})),this.cones.forEach((function(e){Q.remove(e),e.geometry.dispose(),e.material.dispose()}))}},{key:"createPoint",value:function(e){var t=new h.SphereBufferGeometry(this.size,32,32),n=new h.MeshStandardMaterial({color:this.color}),r=new Z(t,n);Q.add(r),r.position.copy(e),this.points.push(r),this.updateLine()}},{key:"deletePoint",value:function(e){var t=this.points[e];Q.remove(t),t.dispose(),this.points.splice(e,1),this.updateLine()}},{key:"insertPoint",value:function(e,t){var n=new h.SphereBufferGeometry(this.size,32,32),r=new h.MeshStandardMaterial({color:this.color}),i=new Z(n,r);Q.add(i),i.position.copy(t),this.points.splice(e,0,i),this.updateLine()}},{key:"createCone",value:function(e,t){var n=new h.ConeBufferGeometry(2*this.size,4*this.size,32);n.translate(0,this.size,0),n.rotateX(-.5*Math.PI);var r=new h.MeshStandardMaterial({color:this.color}),i=new h.Mesh(n,r);Q.add(i);var o=new h.Vector3;e.updateMatrixWorld(!0),e.getWorldPosition(o),i.position.copy(o);var a=(new h.Matrix4).lookAt(t,new h.Vector3,new h.Vector3(0,1,0)),s=(new h.Quaternion).setFromRotationMatrix(a);i.quaternion.copy(s),this.cones.push(i)}},{key:"removeLastPoint",value:function(){var e=this.points.pop();Q.remove(e),e.dispose(),this.updateLine()}},{key:"updateLine",value:function(){if(this.lines.forEach((function(e){Q.remove(e),e.dispose()})),this.lines=[],this.cones.forEach((function(e){Q.remove(e),e.geometry.dispose(),e.material.dispose()})),this.points.length>1){for(var e=0;e<this.points.length-1;e++){var t=this.points[e],n=this.points[e+1],r=new J(t,n,this.size,this.color);Q.add(r),this.lines.push(r)}var i=this.points[this.points.length-2],o=this.points[this.points.length-1];i.updateMatrixWorld(!0),o.updateMatrixWorld(!0);var a=new h.Vector3,s=new h.Vector3;i.getWorldPosition(a),o.getWorldPosition(s);var l=(new h.Vector3).subVectors(a,s);l.normalize(),this.createCone(this.points[this.points.length-1],l)}}},{key:"getPickObjects",value:function(){return this.points.concat(this.lines)}},{key:"Visible",set:function(e){var t=this;this._visible=e,this.points.forEach((function(e){e.visible=t._visible})),this.lines.forEach((function(e){e.visible=t._visible})),this.cones.forEach((function(e){e.visible=t._visible}))},get:function(){return this._visible}},{key:"Size",set:function(e){var t=this;if(this.size=e,this.points.forEach((function(e){e.geometry.dispose(),e.geometry=new h.SphereBufferGeometry(t.size,32,32)})),this.lines.forEach((function(e){e.Size=t.size})),this.cones.forEach((function(e){Q.remove(e),e.geometry.dispose(),e.material.dispose()})),this.points.length>1){var n=this.points[this.points.length-2],r=this.points[this.points.length-1];n.updateMatrixWorld(!0),r.updateMatrixWorld(!0);var i=new h.Vector3,o=new h.Vector3;n.getWorldPosition(i),r.getWorldPosition(o);var a=(new h.Vector3).subVectors(i,o);a.normalize(),this.createCone(this.points[this.points.length-1],a)}},get:function(){return this.size}},{key:"Color",set:function(e){var t=this;this.color=e,this.points.forEach((function(e){e.material.color=t.color})),this.lines.forEach((function(e){e.material.color=t.color})),this.cones.forEach((function(e){e.material.color=t.color}))},get:function(){return this.color.clone()}},{key:"ExportData",get:function(){var e=[];return this.points.forEach((function(t){var n=new h.Vector3;t.updateMatrixWorld(!0),t.getWorldPosition(n),e.push({x:n.x,y:n.y,z:n.z})})),{name:this.name,size:this.size,color:this.color.getHex(),points:e}}}]),e}(),ee=function(){function e(){U(this,e),this.uuid=h.Math.generateUUID(),this.workName=""}return G(e,[{key:"execute",value:function(){}},{key:"undo",value:function(){}}]),e}(),te=function(e){function t(e,n){var r;return U(this,t),(r=H(this,W(t).call(this))).path=e,r.location=n,r.workName=r.path.name+" 위치점 생성",r}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this),this.path.createPoint(this.location)}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this),this.path.removeLastPoint()}}]),t}(ee),ne=function(e){function t(e,n,r,i){var o;return U(this,t),(o=H(this,W(t).call(this))).path=e,o.path.points.indexOf(n)>=0?(o.targetType="point",o.targetIndex=o.path.points.indexOf(n)):o.path.lines.indexOf(n)>=0&&(o.targetType="line",o.targetIndex=o.path.lines.indexOf(n)),o.prevLocation=r.clone(),o.destLocation=i.clone(),o.workName=o.path.name+" 객체 이동",o}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this),"point"===this.targetType?(this.path.points[this.targetIndex].position.copy(this.destLocation),this.path.points[this.targetIndex].updateMatrixWorld(!0)):"line"===this.targetType&&(this.path.lines[this.targetIndex].position.copy(this.destLocation),this.path.lines[this.targetIndex].updateMatrixWorld(!0),this.path.lines[this.targetIndex].applyLineToPoint()),this.path.updateLine()}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this),"point"===this.targetType?(this.path.points[this.targetIndex].position.copy(this.prevLocation),this.path.points[this.targetIndex].updateMatrixWorld(!0)):"line"===this.targetType&&(this.path.lines[this.targetIndex].position.copy(this.prevLocation),this.path.lines[this.targetIndex].updateMatrixWorld(!0),this.path.lines[this.targetIndex].applyLineToPoint()),this.path.updateLine()}}]),t}(ee),re=function(e){function t(e){var n;U(this,t),(n=H(this,W(t).call(this))).targets=e,n.savedStatus={};for(var r=0;r<n.targets.length;r++){var i=n.targets[r];n.savedStatus[i.uuid]=i.Visible}return n.workName="경로 보이기",n}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this);for(var e=0;e<this.targets.length;e++){this.targets[e].Visible=!0}}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this);for(var e=0;e<this.targets.length;e++){var n=this.targets[e];n.Visible=this.savedStatus[n.uuid]}}}]),t}(ee),ie=function(e){function t(e){var n;U(this,t),(n=H(this,W(t).call(this))).targets=e,n.savedStatus={};for(var r=0;r<n.targets.length;r++){var i=n.targets[r];n.savedStatus[i.uuid]=i.Visible}return n.workName="경로 숨기기",n}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this);for(var e=0;e<this.targets.length;e++){this.targets[e].Visible=!1}}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this);for(var e=0;e<this.targets.length;e++){var n=this.targets[e];n.Visible=this.savedStatus[n.uuid]}}}]),t}(ee),oe=function(e){function t(e){var n;return U(this,t),(n=H(this,W(t).call(this,e))).workName="모든 경로 보이기",n}return X(t,e),t}(re),ae=function(e){function t(e){var n;return U(this,t),(n=H(this,W(t).call(this,e))).workName="모든 경로 숨기기",n}return X(t,e),t}(ie),se=function(e){function t(e,n){var r;U(this,t),(r=H(this,W(t).call(this))).targets=e,r.newSize=n,r.savedStatus={};for(var i=0;i<r.targets.length;i++){var o=r.targets[i];r.savedStatus[o.uuid]=o.Size}return r.workName="크기 설정",r}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this);for(var e=0;e<this.targets.length;e++){this.targets[e].Size=this.newSize}}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this);for(var e=0;e<this.targets.length;e++){var n=this.targets[e];n.Size=this.savedStatus[n.uuid]}}}]),t}(ee),le=function(e){function t(e,n,r,i){var o;return U(this,t),(o=H(this,W(t).call(this,e,r))).oldSize=n,o.setDefaultSizeCallback=i,o.workName="기본 크기 설정",o}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this),this.setDefaultSizeCallback(this.newSize)}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this),this.setDefaultSizeCallback(this.oldSize)}}]),t}(se),ue=function(e){function t(e,n){var r;U(this,t),(r=H(this,W(t).call(this))).targets=e,r.newColor=n,r.savedStatus={};for(var i=0;i<r.targets.length;i++){var o=r.targets[i];r.savedStatus[o.uuid]=o.Color}return r.workName="색상 설정",r}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this);for(var e=0;e<this.targets.length;e++){this.targets[e].Color=this.newColor}}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this);for(var e=0;e<this.targets.length;e++){var n=this.targets[e];n.Color=this.savedStatus[n.uuid]}}}]),t}(ee),ce=function(e){function t(e,n,r,i){var o;return U(this,t),(o=H(this,W(t).call(this,e,r))).oldColor=n,o.callback=i,o.workName="기본 색상 설정",o}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this),this.callback(this.newColor)}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this),this.callback(this.oldColor)}}]),t}(ue),he=function(e){function t(e,n){var r;return U(this,t),(r=H(this,W(t).call(this))).targetPath=e,r.delPointArray=n,r.indexInPointArray=[],r.location=[],r.delPointArray.forEach((function(e){r.indexInPointArray.push(r.targetPath.points.indexOf(e)),r.location.push(e.position.clone())})),r.workName="위치점 제거",r}return X(t,e),G(t,[{key:"execute",value:function(){z(W(t.prototype),"execute",this).call(this);for(var e=this.indexInPointArray.length-1;e>=0;e--)this.targetPath.deletePoint(this.indexInPointArray[e])}},{key:"undo",value:function(){z(W(t.prototype),"undo",this).call(this);for(var e=0;e<this.indexInPointArray.length;e++)this.targetPath.insertPoint(this.indexInPointArray[e],this.location[e])}}]),t}(ee),fe=function(e){function t(e,n){var r;return U(this,t),(r=H(this,W(t).call(this,e,n))).workName="라인 제거",r}return X(t,e),t}(he),pe=function(e){function t(){var e;return U(this,t),(e=H(this,W(t).call(this))).undoItems=[],e.redoItems=[],e}return X(t,e),G(t,[{key:"undo",value:function(){if(!(this.undoItems.length<=0)){var e=this.undoItems.pop();e.undo(),this.redoItems.push(e),this.dispatchEvent({type:"onUndo",message:e.workName+" 실행취소"})}}},{key:"redo",value:function(){if(!(this.redoItems.length<=0)){var e=this.redoItems.pop();e.execute(),this.undoItems.push(e),this.dispatchEvent({type:"onRedo",message:e.workName+" 실행"})}}},{key:"addItem",value:function(e){this.removeAfter(),this.redoItems.push(e),this.redo()}},{key:"removeAfter",value:function(){this.redoItems=[]}},{key:"clear",value:function(){this.undoItems=[],this.redoItems=[]}}]),t}(j.a),de=null,me=null,ve=1,ge=new h.Color(65357),ye=null,be={},xe=null,we="default",qe=new h.Vector2,_e=(new h.Plane).setFromNormalAndCoplanarPoint(new h.Vector3(0,1,0),new h.Vector3(0,0,0)),Se=null,Me=null,Ee=null,Te=null;function Pe(e){de=e,me=new h.Object3D,de.sysObjGroup.add(me),Q=me,Me=new h.Object3D,ye=new pe}function Ae(e){var t=new h.Vector2(e.x/de.getRenderer().domElement.clientWidth*2-1,-e.y/de.getRenderer().domElement.clientHeight*2+1),n=new h.Raycaster;return n.setFromCamera(t,de.getCamera()),n}function Oe(e,t){if("point"===t){for(var n=0;n<e.length;n++)if(e[n].object instanceof Z)return e[n]}else if("line"===t)for(var r=0;r<e.length;r++)if(e[r].object instanceof J)return e[r];return null}function Le(e){"default"===we||0!==e.button&&2!==e.button||(qe.x=e.offsetX,qe.y=e.offsetY,"movePoint_SelectObject"===we&&2===e.button&&Se&&(Me.position.copy(Se.position),de.getCameraControl().enabled=!1,we="movePoint_MoveObject"))}function Ce(e){if("movePoint_SelectObject"!==we&&"deletePoint"!==we&&"deleteLine"!==we||!xe){if("movePoint_MoveObject"===we&&xe&&Se){var t=Ae(new h.Vector2(e.offsetX,e.offsetY)),n=t.intersectObjects(de.workObjGroup.children,!0);if(n&&n.length>0){Me.position.copy(n[0].point),Ee&&me.remove(Ee);var r=16711680;Se instanceof Z?r=16711680:Se instanceof J&&(r=255);var i=Se.position.clone(),o=Me.position.clone(),a=(new h.Vector3).subVectors(o,i);a.normalize();var s=i.distanceTo(o);Ee=new h.ArrowHelper(a,i,s,r,3*ve,3*ve*.25),me.add(Ee)}else{var l=new h.Vector3;if(t.ray.intersectPlane(_e,l)){Me.position.copy(l),Ee&&me.remove(Ee);var u=16711680;Se instanceof Z?u=16711680:Se instanceof J&&(u=255);var c=Se.position.clone(),f=Me.position.clone(),p=(new h.Vector3).subVectors(f,c);p.normalize();var d=c.distanceTo(f);Ee=new h.ArrowHelper(p,c,d,u,3*ve,3*ve*.25),me.add(Ee)}}}}else{var m=new h.Vector2(e.offsetX,e.offsetY),v=xe.getPickObjects(),g=Ae(m).intersectObjects(v,!1);if(g&&g.length>0){if(g.sort((function(e,t){return e.object instanceof Z&&t.object instanceof J?-1:e.object instanceof J&&t.object instanceof Z?1:0})),Se=g[0].object,Te&&me.remove(Te),Se instanceof Z&&("movePoint_SelectObject"===we||"deletePoint"===we)){var y=(new h.Box3).setFromObject(Se);(Te=new h.Box3Helper(y,16711680)).geometry.computeBoundingSphere();var b=Te.geometry.boundingSphere.center.clone();Te.geometry.translate(-b.x,-b.y,-b.z),Te.position.copy(b),me.add(Te),Te.updateMatrixWorld(!0)}else if(Se instanceof J&&("movePoint_SelectObject"===we||"deleteLine"===we)){var x=(new h.Box3).makeEmpty();x.setFromCenterAndSize(Se.LineCenter,new h.Vector3(2*ve,2*ve,Se.LineLength)),(Te=new h.Box3Helper(x,16711680)).geometry.computeBoundingSphere();var w=Te.geometry.boundingSphere.center.clone();Te.geometry.translate(-w.x,-w.y,-w.z),Te.position.copy(w);var q=new h.Object3D;q.position.copy(Se.LineCenter),q.lookAt(Se.curve.getPoint(1)),q.updateMatrix(),Te.rotation.copy(q.rotation),me.add(Te),Te.updateMatrixWorld(!0)}"movePoint_SelectObject"===we&&(de.getRenderer().domElement.style.cursor="move")}else Te&&me.remove(Te),Se=null,de.getRenderer().domElement.style.cursor="default"}}function De(e){if("createPoint"===we&&0===e.button){var t=new h.Vector2(e.offsetX,e.offsetY);if(qe.distanceTo(t)<=5){var n=Ae(t),r=n.intersectObjects(de.workObjGroup.children,!0);if(r&&r.length>0){var i=new te(xe,r[0].point.clone());ye.addItem(i)}else{var o=new h.Vector3;if(n.ray.intersectPlane(_e,o)){var a=new te(xe,o);ye.addItem(a)}}}qe=t.clone(),de.getCameraControl().enabled=!0}else if("movePoint_MoveObject"===we&&Se){Ee&&me.remove(Ee);var s=new ne(xe,Se,Se.position.clone(),Me.position.clone());ye.addItem(s),de.getCameraControl().enabled=!0,we="movePoint_SelectObject",Se=null}else if("deletePoint"===we||"deleteLine"===we){var l=new h.Vector2(e.offsetX,e.offsetY);if(qe.distanceTo(l)<=5){var u=Ae(l).intersectObjects(xe.getPickObjects(),!1);if(u&&u.length>0)if("deletePoint"===we&&Oe(u,"point")){var c=Oe(u,"point"),f=new he(xe,[c.object]);ye.addItem(f)}else if("deleteLine"===we&&Oe(u,"line")){var p=Oe(u,"line"),d=p.object.curve.p1,m=p.object.curve.p2,v=new fe(xe,[d,m]);ye.addItem(v)}}}Te&&me.remove(Te)}function ke(e){e?(be.hasOwnProperty(e)||(be[e]=new $(e,ve,ge)),xe=be[e],de.getRenderer().domElement.addEventListener("pointerdown",Le,!1),de.getRenderer().domElement.addEventListener("pointermove",Ce,!1),de.getRenderer().domElement.addEventListener("pointerup",De,!1),de.getCameraControl().enabled=!0,we="createPoint",Se=null):console.warn(e,"is not valid.")}function Ie(e){e?(be.hasOwnProperty(e)||(be[e]=new $(e,ve,ge)),xe=be[e],de.getRenderer().domElement.addEventListener("pointerdown",Le,!1),de.getRenderer().domElement.addEventListener("pointermove",Ce,!1),de.getRenderer().domElement.addEventListener("pointerup",De,!1),de.getCameraControl().enabled=!0,we="movePoint_SelectObject",Se=null):console.warn(e,"is not valid.")}function Re(){we="default",xe=null,Se=null,de.getRenderer().domElement.removeEventListener("pointerdown",Le),de.getRenderer().domElement.removeEventListener("pointermove",Ce),de.getRenderer().domElement.removeEventListener("pointerup",De),de.getCameraControl().enabled=!0,Te&&me.remove(Te)}function Fe(){ye.undo()}function Ne(){ye.redo()}function je(){return xe?xe.name:null}function ze(e,t){ye.addEventListener(e,t)}function Be(e,t){ye.removeEventListener(e,t)}function Ue(e){if(e){var t=[];if(e instanceof Array)for(var n=0;n<e.length;n++)t.push(be[e[n]]);else be.hasOwnProperty(e)&&t.push(be[e]);var r=new re(t);ye.addItem(r)}else console.warn(e,"is not valid.")}function Ve(e){if(e){var t=[];if(e instanceof Array)for(var n=0;n<e.length;n++)t.push(be[e[n]]);else be.hasOwnProperty(e)&&t.push(be[e]);var r=new ie(t);ye.addItem(r)}else console.warn(e,"is not valid.")}function Ge(){var e=new oe(Object.values(be));ye.addItem(e)}function He(){var e=new ae(Object.values(be));ye.addItem(e)}function We(e){var t=new le(Object.values(be),ve,e,(function(e){ve=e}));ye.addItem(t)}function Xe(e,t){if(e){if(be.hasOwnProperty(e)){var n=new se([be[e]],t);ye.addItem(n)}}else console.warn(e,"is not valid.")}function Ye(e){var t=new ce(Object.values(be),ge,new h.Color(e),(function(e){ge=e}));ye.addItem(t)}function Qe(e,t){if(e){if(be.hasOwnProperty(e)){var n=new ue([be[e]],new h.Color(t));ye.addItem(n)}}else console.warn(e,"is not valid.")}function Ze(e,t){ye.clear();var n=[];for(var r in be)n.push(be[r].ExportData);if(t){var i=document.createElement("a");i.style.display="none",document.body.appendChild(i),i.href=URL.createObjectURL(new Blob([JSON.stringify(n,null,4)],{type:"text/plain"})),i.download="pathdata.json",i.click(),document.body.removeChild(i),i=null}return e?JSON.stringify(n,null,4):n}function Ke(e){Je();var t=e;"string"==typeof t&&(t=JSON.parse(t)),t.forEach((function(e){var t=e.name,n=e.size,r=(new h.Color).set(e.color),i=e.points,o=new $(t,n,r);i.forEach((function(e){o.createPoint(new h.Vector3(e.x,e.y,e.z))})),be[t]=o}))}function Je(){for(var e in ye.clear(),be)be[e].dispose(),delete be[e];Te&&me.remove(Te)}function $e(e){ye.clear(),e?be.hasOwnProperty(e)&&(be[e].dispose(),delete be[e]):console.warn(e,"is not valid.")}function et(){ye.clear()}function tt(e){e&&be.hasOwnProperty(e)?(xe=be[e],de.getRenderer().domElement.addEventListener("pointerdown",Le,!1),de.getRenderer().domElement.addEventListener("pointermove",Ce,!1),de.getRenderer().domElement.addEventListener("pointerup",De,!1),de.getCameraControl().enabled=!0,we="deletePoint",Se=null):console.warn(e,"is not valid.")}function nt(e){e&&be.hasOwnProperty(e)?(xe=be[e],de.getRenderer().domElement.addEventListener("pointerdown",Le,!1),de.getRenderer().domElement.addEventListener("pointermove",Ce,!1),de.getRenderer().domElement.addEventListener("pointerup",De,!1),de.getCameraControl().enabled=!0,we="deleteLine",Se=null):console.warn(e,"is not valid.")}var rt=null;function it(e){rt=e}function ot(){var e=(new h.Box3).makeEmpty();if(rt.workObjGroup.traverse((function(t){t instanceof h.Mesh&&t.visible&&e.expandByObject(t)})),!e.isEmpty()){var t=new h.Vector3,n=new h.Vector3;e.getCenter(t),e.getSize(n);var r=Math.max(n.x,n.z),i=rt.getCamera();if(i instanceof h.PerspectiveCamera){var o=new h.Vector3;i.getWorldDirection(o),o.negate();var a=t.clone().addScaledVector(o,r),s=rt.getCameraControl();s.target.copy(t),s.object.position.copy(a),s.object.lookAt(t),s.update()}else if(i instanceof h.OrthographicCamera){i.position.copy(new h.Vector3(t.x,t.y+r,t.z)),i.rotation.copy(new h.Euler(-.5*Math.PI,0,0));var l=rt.dom.clientWidth/rt.dom.clientHeight;i.left=r*l/-2,i.right=r*l/2,i.top=r/2,i.bottom=r/-2,i.zoom=1,i.updateProjectionMatrix();var u=rt.getCameraControl();u.target.copy(t),u.update()}}}var at=null,st={};function lt(e){at=e}function ut(e,t){(new f.FBXLoader).load(e,(function(e){e.traverse((function(e){e instanceof h.Mesh&&(st[e.name]=e.material)})),t&&t()}),null,(function(e){console.error(e)}))}function ct(){return Object.keys(st)}function ht(e,t,n,r){if(e in st){var i=st[e],o=[];at.workObjGroup.traverse((function(e){e.name.search(t)>=0&&(e.name.split("|")[1]===t&&o.push(e))})),o.length>0&&o.forEach((function(e){var t=[];e.traverse((function(e){var r=e.name.split("|");3===r.length&&r[1]===n&&t.push(e)})),t.length&&t.forEach((function(e){e.traverse((function(e){var t=e.name.split("|");2===t.length&&(r?t[0]===r&&(e.material=i):e.material=i)}))}))}))}}var ft=null,pt={};function dt(e){ft=e}function mt(e,t,n){(new f.FBXLoader).load(t,(function(t){t.traverse((function(e){if(e instanceof h.Mesh){if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].vertexColors=!1;else e.material.vertexColors=!1;e.geometry.deleteAttribute("color")}})),pt[e]=t,ft.sysObjGroup.add(t),n&&n()}))}function vt(e,t,n){if(e in pt){var r=null;if(ft.workObjGroup.traverse((function(e){r||e.name.search(t)>=0&&e.name.split("|")[1]===t&&(r=e)})),r){var i=null;if(r.traverse((function(e){if(!i){var t=e.name.split("|");3===t.length&&t[1]===n&&(i=e)}})),i){var o=new h.Vector3;i.getWorldPosition(o),pt[e].position.copy(o)}}}}function gt(e){e in pt&&(pt[e].visible=!0)}function yt(e){e in pt&&(pt[e].visible=!1)}function bt(){Object.values(pt).forEach((function(e){return e.visible=!0}))}function xt(){Object.values(pt).forEach((function(e){return e.visible=!1}))}function wt(){return Object.keys(pt)}var qt=null,_t=null,St=new h.LineBasicMaterial({color:0}),Mt={};function Et(e){qt=e,_t=new h.Object3D,qt.sysObjGroup.add(_t)}function Tt(e,t,n){if(e in Mt)console.warn("".concat(e," is already exists."));else{var r=new h.Object3D;r.name=e,_t.add(r),Mt[e]=r,(new f.FBXLoader).load(t,(function(e){e.updateMatrixWorld(!0),e.traverse((function(e){if(e instanceof h.Mesh){var t=new h.EdgesGeometry(e.geometry);t.applyMatrix(e.matrixWorld);var n=St.clone();n.transparent=!0;var i=new h.LineSegments(t,n);r.add(i)}})),n&&n()}),null,(function(e){console.error(e)}))}}function Pt(e){e in Mt!=!1?Mt[e].visible=!0:console.warn("can't find outline: ".concat(e))}function At(e){e in Mt!=!1?Mt[e].visible=!1:console.warn("can't find outline: ".concat(e))}function Ot(){for(var e in Mt)Mt[e].visible=!0}function Lt(){for(var e in Mt)Mt[e].visible=!1}function Ct(e,t){for(var n in Mt)Dt(n,e,t)}function Dt(e,t,n){e in Mt!=!1?Mt[e].traverse((function(e){e.material&&(e.material.color=new h.Color(t),e.material.opacity=n)})):console.warn("can't find outline: ".concat(e))}n.d(t,"initialize",(function(){return It})),n.d(t,"Initialize",(function(){return Rt})),n.d(t,"Hierarchy",(function(){return r})),n.d(t,"Visible",(function(){return i})),n.d(t,"Outline",(function(){return o})),n.d(t,"Path",(function(){return a})),n.d(t,"View",(function(){return s})),n.d(t,"Material",(function(){return l})),n.d(t,"GangForm",(function(){return u})),n.d(t,"Wireframe",(function(){return c}));var kt=null;function It(e){D(kt=e),Pe(kt),it(kt),lt(kt),dt(kt),Et(kt)}function Rt(){kt.workObjGroup.traverse((function(e){0<=e.name.indexOf("*")&&(e.name=e.name.split("*")[0])}))}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"initialize",(function(){return f})),n.d(r,"SetRobotPoi",(function(){return d})),n.d(r,"ImportLaneData",(function(){return m})),n.d(r,"SetRobotPosition",(function(){return v})),n.d(r,"MoveTo",(function(){return g})),n.d(r,"SetSpeed",(function(){return y})),n.d(r,"Stop",(function(){return b})),n.d(r,"Test",(function(){return x}));var i,o=n(0),a=n(19);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l={},u=null,c=[],h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.points=n,this.poiObject=r,this.animIndex=0,this.curve=new o.CatmullRomCurve3(this.points,!1,"catmullrom"),this.curve.tension=0,this.curve.updateArcLengths(),this.poiObject.userData.CurrentRatio=0,this.poiObject.userData.TargetRatio=0,this.poiObject.userData.ReachedTargetDistance=1e-4,this.poiObject.userData.IsMoving=!1,this.poiObject.userData.Speed=.05,this.dummy=new o.Object3D,this.setRobotPosition(0,1)}var t,n,r;return t=e,(n=[{key:"calculateTransform",value:function(e){e=o.Math.clamp(e,0,1);for(var t=this.TotalPointLength*e,n=0;n<this.points.length-1;n++){var r=this.points[n],i=this.points[n+1],a=r.distanceTo(i);if(t<=a){var s=t/a;return{position:(new o.Vector3).lerpVectors(r,i,s),lookAtPoint:i.clone()}}t-=a}return this.points[0].clone()}},{key:"setRobotPosition",value:function(e,t){var n=e/t,r=this.calculateTransform(n);this.poiObject.position.copy(r.position),this.poiObject.pointObject.lookAt(r.lookAtPoint),this.poiObject.updateMatrix(),this.poiObject.userData.CurrentRatio=n,this.poiObject.userData.TargetRatio=n,this.poiObject.userData.IsMoving=!1}},{key:"moveTo",value:function(e,t){this.poiObject.userData.TargetRatio=e/t,this.poiObject.userData.IsMoving=!0}},{key:"stop",value:function(){this.poiObject.userData.TargetRatio=this.poiObject.userData.CurrentRatio,this.poiObject.userData.IsMoving=!1}},{key:"update",value:function(e){if(this.poiObject.userData.IsMoving){var t=Math.abs(this.poiObject.userData.TargetRatio-this.poiObject.userData.CurrentRatio);if(this.poiObject.userData.ReachedTargetDistance<t){var n=this.poiObject.userData.TargetRatio<this.poiObject.userData.CurrentRatio?-1:1,r=.01*this.TotalPointLength,i=this.points[this.animIndex],o=this.points[this.animIndex+1],a=r/i.distanceTo(o);this.poiObject.userData.CurrentRatio+=a*e*this.poiObject.userData.Speed*n;var s=this.calculateTransform(this.poiObject.userData.CurrentRatio);this.dummy.position.copy(s.position),this.dummy.lookAt(s.lookAtPoint),this.poiObject.position.lerp(this.dummy.position,.1),this.poiObject.pointObject.quaternion.slerp(this.dummy.quaternion,.1),this.poiObject.updateMatrix()}}}},{key:"Speed",set:function(e){this.poiObject.userData.Speed=e}},{key:"TotalPointLength",get:function(){for(var e=0,t=0;t<this.points.length-1;t++){var n=this.points[t],r=this.points[t+1];e+=n.distanceTo(r)}return e}}])&&s(t.prototype,n),r&&s(t,r),e}();function f(e){i=e,u=new o.Clock,p()}function p(){requestAnimationFrame(p);var e=u.getDelta();for(var t in l)l[t].update(e)}function d(e){c=e}function m(e,t){(new o.FileLoader).load(e,(function(e){var n=JSON.parse(e),r=function(e){var t=n.lines[e].points,r=[];t.forEach((function(e){r.push(new o.Vector3(e.x,e.y,e.z))})),c.forEach((function(t){var n=t.laneName,o=t.poiId;if(n===e&&i.poiMgr.poiList.hasOwnProperty(o)){var a=i.poiMgr.poiList[o];l[o]=new h(e,r,a),l[o].setRobotPosition(0,1e3)}}))};for(var a in n.lines)r(a);t&&t()}),null,(function(e){console.error(e)}))}function v(e,t,n){e in l?l[e].setRobotPosition(t,n):console.warn("can't find robot poi:",e)}function g(e,t,n){e in l?l[e].moveTo(t,n):console.warn("can't find robot poi",e)}function y(e,t){e in l?l[e].Speed=t:console.warn("can't find robot poi",e)}function b(e){e in l?l[e].stop():console.warn("can't find robot poi",e)}function x(e){var t=6.5,n=3,r=[];(new a.FBXLoader).load(e,(function(e){for(var a=0;a<10;a++){var s=new o.Vector3;s.x=o.Math.randFloatSpread(30),s.z=o.Math.randFloatSpread(30);var l=e.clone();l.position.copy(s),i.sysObjGroup.add(l),l.updateMatrixWorld(!0),l.traverse((function(e){if("LightShaft"===e.name){e.material=new o.ShaderMaterial({vertexShader:"\n        varying vec3 vNormal;\n        varying vec3 vWorldPosition;\n\n        void main() {\n            vNormal = normalize( normalMatrix * normal );\n            // normalize(normalMatrix * normal); // viewspace normal\n            //(vec4( position, 1.0 ) * viewMatrix).xyz;\n            //normalize( normalMatrix * normal );\n            \n            vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n            vWorldPosition = worldPosition.xyz;\n\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n    ",fragmentShader:"\n        varying vec3 vNormal;\n        varying vec3 vWorldPosition;\n\n        uniform vec3 lightColor;\n        uniform vec3 spotPosition;\n\n        uniform float attenuation;\n        uniform float anglePower;\n\n        void main() {\n            float intensity = distance(vWorldPosition, spotPosition) / attenuation;\n            intensity = 1.0 - clamp(intensity, 0.0, 1.0);\n\n            // float softEdge = pow(dot(vWorldPosition, vNormal), 1.0);\n            // intensity = intensity * softEdge;\n\n            vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n            float angleIntensity = pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower);\n            intensity = intensity * angleIntensity;\n\n            gl_FragColor = vec4(lightColor, intensity);\n        }\n    ",side:o.DoubleSide,uniforms:{attenuation:{value:t},anglePower:{value:n},spotPosition:{value:new o.Vector3},lightColor:{value:new o.Color("cyan")}},transparent:!0,depthWrite:!1});var i=new o.Vector3;e.getWorldPosition(i),e.material.uniforms.lightColor.value.set("white"),e.material.uniforms.spotPosition.value=i,r.push(e.material)}}))}window.addEventListener("keydown",(function(e){"q"===e.key?t+=.5:"a"===e.key?t-=.5:"w"===e.key?n+=.5:"s"===e.key&&(n-=.5),r.forEach((function(e){e.uniforms.attenuation.value=t,e.uniforms.anglePower.value=n})),console.log("attenuation",t,"anglePower",n)}))}),null,(function(e){console.error(e)}))}var w=n(126);n.d(t,"Robot",(function(){return r})),n.d(t,"LightShaft",(function(){return w}))},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(130),o=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];function n(e){return e*e*e*(e*(6*e-15)+10)}function r(e,t,n){return t+e*(n-t)}function i(e,t,n,r){var i=15&e,o=i<8?t:n,a=i<4?n:12==i||14==i?t:r;return(0==(1&i)?o:-o)+(0==(2&i)?a:-a)}return{noise:function(t,o,a){var s=Math.floor(t),l=Math.floor(o),u=Math.floor(a),c=255&s,h=255&l,f=255&u,p=(t-=s)-1,d=(o-=l)-1,m=(a-=u)-1,v=n(t),g=n(o),y=n(a),b=e[c]+h,x=e[b]+f,w=e[b+1]+f,q=e[c+1]+h,_=e[q]+f,S=e[q+1]+f;return r(y,r(g,r(v,i(e[x],t,o,a),i(e[_],p,o,a)),r(v,i(e[w],t,d,a),i(e[S],p,d,a))),r(g,r(v,i(e[x+1],t,o,m),i(e[_+1],p,o,a-1)),r(v,i(e[w+1],t,d,m),i(e[S+1],p,d,m))))}}};n.d(t,"setCoreInstance",(function(){return u})),n.d(t,"update",(function(){return c})),n.d(t,"setPosition",(function(){return d})),n.d(t,"setScale",(function(){return m})),n.d(t,"CheckWebGL2Support",(function(){return h})),n.d(t,"On",(function(){return f})),n.d(t,"Off",(function(){return p}));var a=null,s=null,l=null;function u(e){a=e,function(){if(h()){for(var e=new Uint8Array(2097152),t=0,n=new o,i=new r.Vector3,a=0;a<128;a++)for(var l=0;l<128;l++)for(var u=0;u<128;u++){var c=1-i.set(u,l,a).subScalar(64).divideScalar(128).length();e[t]=(128+128*n.noise(.05*u/1.5,.05*l,.05*a/1.5))*c*c,t++}s&&s.dispose(),(s=new r.DataTexture3D(e,128,128,128)).format=r.RedFormat,s.minFilter=r.LinearFilter,s.magFilter=r.LinearFilter,s.unpackAlignment=1}}(),function(){if(h()){var e=new r.BoxBufferGeometry(1,1,1),t=new r.RawShaderMaterial({glslVersion:"300 es",uniforms:{base:{value:new r.Color(7965344)},map:{value:s},cameraPos:{value:new r.Vector3},threshold:{value:.25},opacity:{value:.25},range:{value:.1},steps:{value:100},frame:{value:0}},vertexShader:"#version 300 es\n    in vec3 position;\n\n    uniform mat4 modelMatrix;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform vec3 cameraPos;\n\n    out vec3 vOrigin;\n    out vec3 vDirection;\n\n    void main() {\n        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n        vOrigin = vec3( inverse(modelMatrix) * vec4(cameraPos, 1.0)).xyz;\n        vDirection = position - vOrigin;\n\n        gl_Position = projectionMatrix * mvPosition;\n    }\n",fragmentShader:"#version 300 es\n    precision highp float;\n    precision highp sampler3D;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    in vec3 vOrigin;\n    in vec3 vDirection;\n\n    out vec4 color;\n\n    uniform vec3 base;\n    uniform sampler3D map;\n\n    uniform float threshold;\n    uniform float range;\n    uniform float opacity;\n    uniform float steps;\n    uniform float frame;\n\n    uint wang_hash(uint seed) {\n        seed = (seed ^ 61u) ^ (seed >> 16u);\n        seed *= 9u;\n        seed = seed ^ (seed >> 4u);\n        seed *= 0x27d4eb2du;\n        seed = seed ^ (seed >> 15u);\n        return seed;\n    }\n\n    float randomFloat(inout uint seed) {\n        return float(wang_hash(seed)) / 4294967296.;\n    }\n\n    vec2 hitBox(vec3 orig, vec3 dir) {\n        const vec3 box_min = vec3( -0.5 );\n        const vec3 box_max = vec3( 0.5 );\n        vec3 inv_dir = 1.0 / dir;\n        vec3 tmin_tmp = (box_min - orig) * inv_dir;\n        vec3 tmax_tmp = (box_max - orig) * inv_dir;\n        vec3 tmin = min(tmin_tmp, tmax_tmp);\n        vec3 tmax = max(tmin_tmp, tmax_tmp);\n        float t0 = max(tmin.x, max(tmin.y, tmin.z));\n        float t1 = min(tmax.x, min(tmax.y, tmax.z));\n        return vec2(t0, t1);\n    }\n\n    float sample1(vec3 p) {\n        return texture(map, p).r;\n    }\n\n    float shading(vec3 coord) {\n        float step = 0.01;\n        return sample1( coord + vec3( - step ) ) - sample1( coord + vec3( step ) );\n    }\n\n    void main(){\n        vec3 rayDir = normalize( vDirection );\n        vec2 bounds = hitBox( vOrigin, rayDir );\n        if ( bounds.x > bounds.y ) discard;\n        bounds.x = max( bounds.x, 0.0 );\n        vec3 p = vOrigin + bounds.x * rayDir;\n        vec3 inc = 1.0 / abs( rayDir );\n        float delta = min( inc.x, min( inc.y, inc.z ) );\n        delta /= steps;\n        // Jitter\n        // Nice little seed from\n        // https://blog.demofox.org/2020/05/25/casual-shadertoy-path-tracing-1-basic-camera-diffuse-emissive/\n        uint seed = uint( gl_FragCoord.x ) * uint( 1973 ) + uint( gl_FragCoord.y ) * uint( 9277 ) + uint( frame ) * uint( 26699 );\n        vec3 size = vec3( textureSize( map, 0 ) );\n        float randNum = randomFloat( seed ) * 2.0 - 1.0;\n        p += rayDir * randNum * ( 1.0 / size );\n        //\n        vec4 ac = vec4( base, 0.0 );\n        for ( float t = bounds.x; t < bounds.y; t += delta ) {\n            float d = sample1( p + 0.5 );\n            d = smoothstep( threshold - range, threshold + range, d ) * opacity;\n            float col = shading( p + 0.5 ) * 3.0 + ( ( p.x + p.y ) * 0.25 ) + 0.2;\n            ac.rgb += ( 1.0 - ac.a ) * d * col;\n            ac.a += ( 1.0 - ac.a ) * d;\n            if ( ac.a >= 0.95 ) break;\n            p += rayDir * delta;\n        }\n        color = ac;\n        if ( color.a == 0.0 ) discard;\n    }\n",transparent:!0,depthTest:!0,depthWrite:!1});l&&(l.material.dispose(),l.geometry.dispose()),(l=new r.Mesh(e,t)).scale.setScalar(200),a.sysObjGroup.add(l),l.visible=!1}}()}function c(e,t){l&&(l.material.uniforms.cameraPos.value.copy(t.position),l.material.uniforms.frame.value++)}function h(){return i.a.isWebGL2Available()}function f(){l&&(l.visible=!0)}function p(){l&&(l.visible=!1)}function d(e){l&&l.position.copy(e)}function m(e){l&&l.scale.setScalar(9*e)}},function(e,t,n){var r=n(31),i=n(10),o=n(70);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(42);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(43),i=n(46);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(8),i=n(42),o=n(9)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(9)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(84),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!==r(a))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";n(216);var r=n(27),i=n(26),o=n(7),a=n(46),s=n(9),l=n(158),u=s("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),p=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),d=p?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t})):void 0;if(!p||!d||"replace"===e&&!c||"split"===e&&!h){var m=/./[f],v=n(a,f,""[e],(function(e,t,n,r,i){return t.exec===l?p&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=v[0],y=v[1];r(String.prototype,e,g),i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){var r=n(6).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(6),i=n(1),o=n(27),a=n(76),s=n(59),l=n(75),u=n(74),c=n(8),h=n(7),f=n(109),p=n(83),d=n(144);e.exports=function(e,t,n,m,v,g){var y=r[e],b=y,x=v?"set":"add",w=b&&b.prototype,q={},_=function(e){var t=w[e];o(w,e,"delete"==e||"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||w.forEach&&!h((function(){(new b).entries().next()})))){var S=new b,M=S[x](g?{}:-0,1)!=S,E=h((function(){S.has(1)})),T=f((function(e){new b(e)})),P=!g&&h((function(){for(var e=new b,t=5;t--;)e[x](t,t);return!e.has(-0)}));T||((b=t((function(t,n){u(t,b,e);var r=d(new y,t,b);return null!=n&&l(n,v,r[x],r),r}))).prototype=w,w.constructor=b),(E||P)&&(_("delete"),_("has"),v&&_("get")),(P||M)&&_(x),g&&w.clear&&delete w.clear}else b=m.getConstructor(t,e,v,x),a(b.prototype,n),s.NEED=!0;return p(b,e),q[e]=b,i(i.G+i.W+i.F*(b!=y),q),g||m.setStrong(b,e,v),b}},function(e,t,n){for(var r,i=n(6),o=n(26),a=n(68),s=a("typed_array"),l=a("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,n){"use strict";e.exports=n(58)||!n(7)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(6)[e]}))},function(e,t,n){"use strict";var r=n(1);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(1),i=n(21),o=n(41),a=n(75);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,l=arguments[1];return i(this),(t=void 0!==l)&&i(l),null==e?new this:(n=[],t?(r=0,s=o(l,arguments[2],2),a(e,!1,(function(e){n.push(s(e,r++))}))):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(34),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(t)}).call(this)},function(e,t){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(493),i=n(494),o=n(240);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function d(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(u(e,o+f)!==u(t,f)){h=!1;break}if(h)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return U(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function q(e,t,n,r){return w(e,t,n,r)}function _(e,t,n,r){return U(B(t),e,n,r)}function S(e,t,n,r){return U(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),h=0;h<s;++h)if(u[h]!==c[h]){o=u[h],a=c[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return q(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function I(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,o){return o||I(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||I(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||C(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||C(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);C(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);C(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:z(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(39))},function(e,t,n){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,i="object"===("undefined"==typeof Reflect?"undefined":n(Reflect))?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,n){return new t((function(t,r){function i(t){e.removeListener(n,o),r(t)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),t([].slice.call(arguments))}g(e,n,o,{once:!0}),"error"!==n&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+n(e))}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+n(e));e.addEventListener(t,(function n(o){i.once&&e.removeEventListener(t,n),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,c=v(l,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}}).call(this,n(11))},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n(52))},function(e,t,n){var r=n(120),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="undefined"!=typeof Symbol&&Symbol,o=n(519);e.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"===r(i("foo"))&&("symbol"===r(Symbol("bar"))&&o())))}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"load",(function(){return o})),n.d(t,"loadAsync",(function(){return a})),n.d(t,"loadInstanced",(function(){return s})),n.d(t,"analyzeFloorInfo",(function(){return l}));var r=n(0),i=n(5);function o(e,t,n){(new i.GLTFLoader).load(e,(function(e){e.scene.traverse((function(e){if(e instanceof r.Mesh)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].side=r.FrontSide,e.material[t].metalness=0;else e.material.side=r.FrontSide,e.material.metalness=0})),t&&t(e)}),null,n)}function a(t){return new e((function(e,n){(new i.GLTFLoader).load(t,(function(t){console.log(t),e(t)}),null,(function(e){n(e)}))}))}function s(e,t,n){(new i.GLTFLoader).load(e,(function(e){var n=[];e.scene.updateMatrixWorld(!0),e.scene.traverse((function(e){if(e instanceof r.Mesh){var t=[],i=[];if(e.material instanceof Array)for(var o=0;o<e.material.length;o++)t.push(e.material[o].uuid),i.push(e.material[o]);else t.push(e.material.uuid),i.push(e.material);(function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r].geometryId,o=e[r].materialIdList;if(i===t&&o.length===n.length){for(var a=0,s=0;s<o.length;s++)o[s]===n[s]&&a++;return a===o.length}}return!1})(n,e.geometry.uuid,t)||n.push({parentName:e.parent.name,objectName:e.name,geometryId:e.geometry.uuid,geometry:e.geometry,materialIdList:t,materialList:i,modelWorldMatrixList:[]});for(var a=0;a<n.length;a++)if(n[a].geometryId===e.geometry.uuid){n[a].modelWorldMatrixList.push(e.matrixWorld.clone());for(var s=new r.Vector3(0,0,50),l=0;l<19;l++){for(var u=0;u<20;u++){var c=e.matrixWorld.clone(),h=(new r.Vector3).setFromMatrixPosition(c);h.x+=s.x,h.z+=s.z,c.setPosition(h.x,h.y,h.z),n[a].modelWorldMatrixList.push(c.clone()),s.x+=50}s.x=0,s.z+=50}}}}));for(var i=[],o=0;o<n.length;o++){for(var a=new r.InstancedMesh(n[o].geometry,n[o].materialList[0],n[o].modelWorldMatrixList.length),s=0;s<n[o].modelWorldMatrixList.length;s++)a.setMatrixAt(s,n[o].modelWorldMatrixList[s]);i.push(a)}t&&t(i)}),null,n)}function l(e){var t=[];return e.traverse((function(e){if(e.userData.hasOwnProperty("type")){var n={type:e.userData.type,name:e.name,order:0,target:e,parent:e.parent};e.userData.hasOwnProperty("sortingorder")&&(n.order=parseInt(e.userData.sortingorder),e.userData.hasOwnProperty("property")||(e.userData.property={}),e.userData.property.sortingorder=n.order),t.push(n)}})),t}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return o})),n.d(t,"createLightShaftShaderMaterial",(function(){return a})),n.d(t,"Enable",(function(){return s})),n.d(t,"Disable",(function(){return l})),n.d(t,"EnableAll",(function(){return u})),n.d(t,"DisableAll",(function(){return c}));var r=n(0),i=null;function o(e){i=e}function a(e,t,n){return new r.ShaderMaterial({vertexShader:"\n    varying vec3 vNormal;\n    varying vec3 vWorldPosition;\n\n    void main() {\n        vNormal = normalize( normalMatrix * normal );\n        \n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",fragmentShader:"\n    varying vec3 vNormal;\n    varying vec3 vWorldPosition;\n\n    uniform vec3 lightColor;\n    uniform vec3 objectWorldPosition;\n\n    uniform float attenuation;\n    uniform float anglePower;\n\n    void main() {\n        float intensity = distance(vWorldPosition, objectWorldPosition) / attenuation;\n        intensity = 1.0 - clamp(intensity, 0.0, 1.0);\n\n        vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n        float angleIntensity = pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower);\n        intensity = intensity * angleIntensity;\n\n        gl_FragColor = vec4(lightColor, intensity);\n    }\n",side:r.DoubleSide,uniforms:{attenuation:{value:e},anglePower:{value:t},objectWorldPosition:{value:n},lightColor:{value:new r.Color("white")}},transparent:!0,depthWrite:!1})}function s(e){i&&(i.poiMgr.poiList.hasOwnProperty(e)&&i.poiMgr.poiList[e].setLightShaftVisible(!0))}function l(e){i&&(i.poiMgr.poiList.hasOwnProperty(e)&&i.poiMgr.poiList[e].setLightShaftVisible(!1))}function u(){if(i)for(var e in i.poiMgr.poiList){i.poiMgr.poiList[e].setLightShaftVisible(!0)}}function c(){if(i)for(var e in i.poiMgr.poiList){i.poiMgr.poiList[e].setLightShaftVisible(!1)}}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"loadSingleSbm",(function(){return s})),n.d(t,"loadSbmUrlArray",(function(){return l}));var r=n(0);function i(t,n,r,i,o,a,s){try{var l=t[a](s),u=l.value}catch(e){return void r(e)}l.done?n(u):e.resolve(u).then(i,o)}function o(t){return function(){var n=this,r=arguments;return new e((function(e,o){var a=t.apply(n,r);function s(t){i(a,e,o,s,l,"next",t)}function l(t){i(a,e,o,s,l,"throw",t)}s(void 0)}))}}var a=n(128);function s(t,n,i,o,a){var s=t,l=s.substring(0,s.lastIndexOf("/"))+"/";s.substring(s.lastIndexOf("/")+1);return new e((function(e,s){try{var u=new XMLHttpRequest;u.open("GET",t,!0),u.responseType="arraybuffer",u.onload=function(){if(u.readyState===u.DONE)if(200===u.status){var c={view:new DataView(u.response),isLE:!0,fileOffset:0,xhr:u};m=c.xhr.response,v=c.fileOffset,g=8,String.fromCharCode.apply(null,new Uint8Array(m,v,g));c.fileOffset+=8;c.view.getUint8(c.fileOffset);c.fileOffset+=1;var h=c.view.getUint16(c.fileOffset,c.isLE);c.fileOffset+=2;var f=c.view.getUint16(c.fileOffset,c.isLE);c.fileOffset+=2;var p={};!function(e,t,n,r){for(var i=0;i<t;i++){var o=n.view.getUint16(n.fileOffset,n.isLE);n.fileOffset+=2;var a=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var s=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var l=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var u=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var c=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var h=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var f=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var p=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var d=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var m=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var v=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var g=n.view.getFloat32(n.fileOffset,n.isLE);n.fileOffset+=4;var y=n.view.getUint8(n.fileOffset);n.fileOffset+=1;var b=n.view.getUint16(n.fileOffset,n.isLE);n.fileOffset+=2;var x="";if(b>0){for(var w=n.xhr.response.slice(n.fileOffset,n.fileOffset+b),q=new Uint8Array(w,0,b),_=0;_<b;_++)x+=String.fromCharCode(q[_]);x=(x=e+"/"+x).replace("\\","/").replace("//","/"),n.fileOffset+=b}r[o]={id:o,ambient:{r:a,g:s,b:l,a:u},diffuse:{r:c,g:h,b:f,a:p},specular:{r:d,g:m,b:v,a:g},facing:y,texPath:x}}}(l,h,c,p);var d={};!function(e,t,n){for(var i=0;i<e;i++){var o=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;var a=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;var s=[],l=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;for(var u=0;u<l;u++){var c=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4;var h=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4;var f=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4,s.push(c,h,f)}var p=[],d=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;for(var m=0;m<d;m++){var v=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4;var g=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4;var y=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4;var b=new r.Vector3(v,g,y);b=b.normalize(),p.push(b.x,b.y,b.z)}var x=[],w=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;for(var q=0;q<w;q++){var _=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4;var S=t.view.getFloat32(t.fileOffset,t.isLE);t.fileOffset+=4,x.push(_,S)}var M=[],E=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;for(var T=0;T<E;T++){var P=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;var A=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2;var O=t.view.getUint16(t.fileOffset,t.isLE);t.fileOffset+=2,M.push(P,A,O)}n[o]={id:o,usedMatId:a,vertices:s,normals:p,texCoords:x,indices:M}}}(f,c,d),e({materialList:p,meshList:d,id:n,displayName:i,baseFloor:o,groupId:a})}else s(t+", xhr request error("+u.status+")");var m,v,g},u.onabort=function(){s(t+", aborted.")},u.onerror=function(){s(t+", error.")},u.send(null)}catch(e){s(e)}}))}function l(e,t,n,r,i){return u.apply(this,arguments)}function u(){return(u=o(regeneratorRuntime.mark((function e(t,n,i,o,l){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(regeneratorRuntime.mark((function e(){var u,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=[],c=regeneratorRuntime.mark((function e(t){var n,r,o,a,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i[t].url,r=i[t].id,o=i[t].displayName,a=i[t].baseFloor,l=i[t].groupId,c=i[t].isOutdoor,e.next=8,s(n,r,o,a,l).then((function(e){e.isOutdoor=c,u.push(e)}));case 8:case"end":return e.stop()}}),e)})),h=0;case 3:if(!(h<i.length)){e.next=8;break}return e.delegateYield(c(h),"t0",5);case 5:h++,e.next=3;break;case 8:return e.next=10,a.createObjectFromSbmDataArray(u,n).then((function(e){for(var n=(new r.Box3).makeEmpty(),i=0;i<e.length;i++)n.expandByObject(e[i].mesh);var a=new r.Vector3;if(n.getCenter(a),o){var s=new r.Vector3(o.x,o.y,o.z);a.equals(s)||(console.warn("sbm center is not valid, center offset will be adjusted."),console.warn("loaded sbm center:",a.x,a.y,a.z),a.x=a.x+(s.x-a.x),a.y=a.y+(s.y-a.y),a.z=a.z+(s.z-a.z),console.warn("passed sbm center:",a.x,a.y,a.z))}for(var u=0;u<e.length;u++)t.workObjGroup.add(e[u].mesh),e[u].mesh.position.sub(a),e[u].mesh.updateMatrix(),e[u].mesh.userData.SourceLocalPosition=e[u].mesh.position.clone();t.camera.fitToObject(t.workObjGroup);for(var c=[],h=0;h<e.length;h++)c.push({name:e[h].id,order:parseInt(e[h].mesh.userData.groupId),target:e[h].mesh,parent:e[h].mesh.parent});t.modelVisibility.setFloorData(c),l&&l(),t.setSbmCenter(a)}));case 10:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=7;break;case 4:e.prev=4,e.t1=e.catch(0),console.error(e.t1);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"createObjectFromSbmData",(function(){return i})),n.d(t,"createObjectFromSbmDataArray",(function(){return a})),n.d(t,"remove",(function(){return s})),n.d(t,"removeByArray",(function(){return l})),n.d(t,"removeAll",(function(){return u})),n.d(t,"clearModel",(function(){return c}));var r=n(0);function i(t,n){return n||(n=.1),new e((function(e,i){var a=new r.Group,s={},l={};for(var u in t.materialList){var c=t.materialList[u];l[u]=new r.MeshBasicMaterial({color:new r.Color(c.diffuse.r,c.diffuse.g,c.diffuse.b),opacity:c.diffuse.a,transparent:c.diffuse.a<1,side:0===c.facing?r.FrontSide:r.DoubleSide}),c.texPath&&(c.texPath in s==!1&&(s[c.texPath]={url:c.texPath,affectMaterials:[]}),s[c.texPath].affectMaterials.push(l[u]))}for(var h in t.meshList){var f=t.meshList[h],p=new r.BufferGeometry;p.setIndex(f.indices),p.setAttribute("position",new r.Float32BufferAttribute(f.vertices,3)),p.setAttribute("normal",new r.Float32BufferAttribute(f.normals,3)),f.texCoords.length>0&&p.setAttribute("uv",new r.Float32BufferAttribute(f.texCoords,2)),p.computeBoundingBox(),p.computeBoundingSphere();var d=new r.Vector3;p.boundingBox.getCenter(d),p.translate(-d.x,-d.y,-d.z),p.scale(n,n,n),p.computeVertexNormals(),d.multiplyScalar(n);var m=new r.Mesh(p,l[f.usedMatId]);m.name="#SBMMesh/"+f.id,m.matrixAutoUpdate=!1,m.position.copy(d),m.updateMatrix(),a.add(m)}var v=(new r.Box3).setFromObject(a),g=new r.Vector3;v.getCenter(g),a.matrixAutoUpdate=!1,a.position.copy(g),a.updateMatrix();for(var y=0;y<a.children.length;y++){var b=a.children[y];b.position.x-=g.x,b.position.y-=g.y,b.position.z-=g.z,b.updateMatrix()}for(var x in a.name=t.id,a.userData.ID=t.id,a.userData.DisplayName=t.displayName,a.userData.BaseFloor=t.baseFloor,a.userData.Type="SBMFLOOR",s)o(s[x]);e({id:t.id,mesh:a})}))}function o(e){(new r.TextureLoader).load(e.url,(function(t){t.wrapS=r.RepeatWrapping,t.wrapT=r.RepeatWrapping,t.flipY=!1;var n=!1;-1!==e.url.indexOf(".png")&&(n=!0);for(var i=0;i<e.affectMaterials.length;i++)e.affectMaterials[i].map=t,e.affectMaterials[i].transparent=n,e.affectMaterials[i].needsUpdate=!0}),null,(function(t){console.log("텍스쳐 로딩 실패",e.url)}))}function a(t,n){return n||(n=.1),new e((function(e,i){try{for(var a=[],s={},l=0;l<t.length;l++){var u=t[l],c=new r.Group,h={};for(var f in u.materialList){var p=u.materialList[f];h[f]=new r.MeshBasicMaterial({color:new r.Color(p.diffuse.r,p.diffuse.g,p.diffuse.b),opacity:p.diffuse.a,transparent:p.diffuse.a<1,side:0===p.facing?r.FrontSide:r.DoubleSide}),p.texPath&&(p.texPath in s==!1&&(s[p.texPath]={url:p.texPath,affectMaterials:[]}),s[p.texPath].affectMaterials.push(h[f]))}for(var d in u.meshList){var m=u.meshList[d],v=new r.BufferGeometry;v.setIndex(m.indices),v.setAttribute("position",new r.Float32BufferAttribute(m.vertices,3)),v.setAttribute("normal",new r.Float32BufferAttribute(m.normals,3)),m.texCoords.length>0&&v.setAttribute("uv",new r.Float32BufferAttribute(m.texCoords,2)),v.computeBoundingBox(),v.computeBoundingSphere();var g=new r.Vector3;v.boundingBox.getCenter(g),v.translate(-g.x,-g.y,-g.z),v.scale(n,n,n),v.computeVertexNormals(),g.multiplyScalar(n);var y=new r.Mesh(v,h[m.usedMatId]);y.name="#SBMMesh/"+m.id,y.matrixAutoUpdate=!1,y.position.copy(g),y.updateMatrix(),c.add(y)}var b=(new r.Box3).setFromObject(c),x=new r.Vector3;b.getCenter(x),c.matrixAutoUpdate=!1,c.position.copy(x),c.updateMatrix();for(var w=0;w<c.children.length;w++){var q=c.children[w];q.position.x-=x.x,q.position.y-=x.y,q.position.z-=x.z,q.updateMatrix()}c.name=u.id,c.userData.ID=u.id,c.userData.DisplayName=u.displayName,c.userData.BaseFloor=u.baseFloor,c.userData.Type="SBMFLOOR",c.userData.groupId=u.groupId,c.userData.isOutdoor=u.isOutdoor,a.push({id:u.id,mesh:c})}for(var _ in s)o(s[_]);e(a)}catch(e){i(e)}}))}function s(e,t,n){var i=e.getObjectByName(t);i&&(e.remove(i),e.traverse((function(e){e instanceof r.Mesh&&(e.material.dispose(),e.geometry.dispose())})),n&&n(t))}function l(e,t,n){for(var r=0;r<t.length;r++)s(e,t[r],null);n&&n(t)}function u(e,t){for(var n=e.children.length,r=0;r<n;r++)s(e,e.children[0].name,null);t&&t()}function c(e){for(e.traverse((function(e){e instanceof r.Mesh&&(e.geometry.dispose(),e.material instanceof Array?e.material.forEach((function(e){e.map&&e.map.dispose(),e.dispose()})):(e.material.map&&e.material.dispose(),e.material.dispose()))}));e.children.length>0;)e.remove(e.children[0])}}.call(this,n(11))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(5);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.bReady=!1,this.mixer=null,this.model=null,this.actions={}}var t,n,a;return t=e,(n=[{key:"startSetPosition",value:function(){var e=this;window.addEventListener("mouseup",(function t(n){if(0===n.button){var i=new r.Vector2;i.x=n.offsetX/e.manager.core.dom.clientWidth*2-1,i.y=-n.offsetY/e.manager.core.dom.clientHeight*2+1;var o=new r.Raycaster;o.setFromCamera(i,e.manager.core.getCamera());var a=o.intersectObjects(e.manager.core.workObjGroup.children,!0);if(a&&a.length){var s=a[0].point;e.model.position.copy(s),e.setVisible(!0),e.manager.core.dom.style.cursor="default",window.removeEventListener("mouseup",t)}}}),!1),this.manager.core.dom.style.cursor="pointer"}},{key:"setVisible",value:function(e){this.model&&(this.model.visible=e)}},{key:"update",value:function(e){this.mixer&&this.mixer.update(e)}},{key:"doIdle",value:function(){this.bReady&&this.prepareCrossFade(this.actions.walk,this.actions.idle,.1)}},{key:"doWalk",value:function(){this.bReady&&this.prepareCrossFade(this.actions.idle,this.actions.walk,.1)}},{key:"loadCharacterModel",value:function(e,t){var n=this;(new i.GLTFLoader).load(e,(function(e){var i,o;n.model=e.scene.children[0],n.model.scale.set(.0158,.0158,.0158),n.manager.core.sysObjGroup.add(n.model),n.model.visible=!1;for(var a=0;a<e.animations.length;a++){var s=e.animations[a];"Idle"===s.name?i=s:"Walking"!==s.name&&"Walk"!==s.name||(o=s)}n.mixer=new r.AnimationMixer(n.model),n.actions.idle=n.mixer.clipAction(i),n.actions.walk=n.mixer.clipAction(o),n.actions.idle.play(),n.actions.walk.play(),t&&t(),n.bReady=!0}))}},{key:"prepareCrossFade",value:function(e,t,n){this.executeCrossFade(e,t,n)}},{key:"executeCrossFade",value:function(e,t,n){this.setWeight(t,1),t.time=0,e.crossFadeTo(t,n,!0)}},{key:"synchronizeCrossFade",value:function(e,t,n){this.mixer.addEventListener("loop",(function i(o){o.action===e&&(r.mixer.removeEventListener("loop",i),r.executeCrossFade(e,t,n))}));var r=this}},{key:"setWeight",value:function(e,t){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(t)}},{key:"updateTransform",value:function(e,t){this.model&&(this.model.position.copy(e),this.model.lookAt(new r.Vector3(t.x,e.y,t.z)))}},{key:"setSize",value:function(e){var t=.01*e*.0158;this.model.scale.set(t,t,t)}},{key:"dispose",value:function(){this.bReady=!1,this.manager.core.sysObjGroup.remove(this.model),this.model.traverse((function(e){if(e instanceof r.Mesh){if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].map&&e.material[t].map.dispose(),e.material[t].dispose();else e.material.map&&e.material.map.dispose(),e.material.dispose();e.geometry.dispose()}})),this.model=null,this.mixer=null,this.actions={}}}])&&o(t.prototype,n),a&&o(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),r.innerHTML=n,r}}},function(e,t,n){"use strict";n.r(t),n.d(t,"prepareRobotPoi",(function(){return c})),n.d(t,"MoveTo",(function(){return h}));var r=n(0),i=n(2),o=null,a=null,s=null,l=null,u=null;function c(e,t,n){o=e,t,a=n,s=new r.Object3D,o.add(s),s.scale.setScalar(9.950589089641413),s.position.set(-1.8501169523554353,5,130.9522864914203),s.rotation.set(.005960306613163849,-.7084085464579345,.01559376019653296,"XYZ"),s.rotateX(r.Math.degToRad(-90)),l=new r.Object3D,s.add(l),l.position.z=.1}function h(e){var t=e.id,n=e.duration,s=e.position.x,c=e.position.y,h=(e.position.z,e.quaternion.x),f=e.quaternion.y,p=e.quaternion.z,d=e.quaternion.w;if(a.poiList.hasOwnProperty(t)){u&&u.stop();var m=a.poiList[t];l.position.x=s,l.position.y=c,l.quaternion.set(h,f,p,d),o.updateMatrixWorld(!0);var v=new r.Vector3;(v=l.getWorldPosition(v)).y=m.position.y;var g=new r.Quaternion;l.getWorldQuaternion(g);var y=new r.Vector3(1,0,0);y.applyQuaternion(g),y.x=v.x+2*y.x,y.y=v.y+2*y.y,y.z=v.z+2*y.z;var b=y.clone(),x={positionFrom:m.position.clone(),positionTo:v.clone(),lookAtTo:b,ratio:0};u=new i.a.Tween(x).to({ratio:1},n).easing(i.a.Easing.Linear.None).onUpdate((function(){m.position.copy((new r.Vector3).lerpVectors(x.positionFrom,x.positionTo,x.ratio)),m.pointObject.lookAt(x.positionTo),m.updateMatrix()})).onComplete((function(){m.position.copy(x.positionTo),m.pointObject.lookAt(x.lookAtTo),m.updateMatrix()})).start()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"setCoreResource",(function(){return p})),n.d(t,"SetBoxPosition",(function(){return w})),n.d(t,"Cancel",(function(){return q})),n.d(t,"ShowBox",(function(){return b})),n.d(t,"HideBox",(function(){return x})),n.d(t,"GetPoi",(function(){return _})),n.d(t,"SetSize",(function(){return S}));var r=n(0),i=null,o=null,a=null,s=null,l=null,u=new r.Vector2,c=new r.Raycaster,h=new r.Plane(new r.Vector3(0,1,0),0),f=null;function p(e,t,n,u,c,h){i=e,o=t,a=n,u,s=c,l=h;var p=new r.BoxBufferGeometry(1,1,1),d=new r.MeshBasicMaterial({color:16711680,transparent:!0,opacity:.5});f=new r.Mesh(p,d);var m=new r.EdgesGeometry(p),v=new r.LineBasicMaterial({color:0}),g=new r.LineSegments(m,v);f.add(g),f.renderOrder=1e3,f.scale.setScalar(50)}function d(e){0===e.button&&(u.x=e.screenX,u.y=e.screenY)}function m(e){}function v(e){var t=new r.Vector2(e.screenX,e.screenY);if(0===e.button&&t.distanceTo(u)<5){t.x=e.offsetX/s.clientWidth*2-1,t.y=-e.offsetY/s.clientHeight*2+1,c.setFromCamera(t,a);var n=c.intersectObjects(o.children,!0);if(n&&n.length>0){var l=n[0].point;f.position.copy(l),i.add(f),q()}else{var p=new r.Vector3;c.ray.intersectPlane(h,p)&&(f.position.copy(p),i.add(f),q())}}}function g(e){}function y(e){}function b(){i.add(f)}function x(){i.remove(f)}function w(){s.addEventListener("pointerdown",d,!1),s.addEventListener("pointermove",m,!1),s.addEventListener("pointerup",v,!1),window.addEventListener("keydown",g,!1),window.addEventListener("keyup",y,!1)}function q(){s.removeEventListener("pointerdown",d),s.removeEventListener("pointermove",m),s.removeEventListener("pointerup",v),window.removeEventListener("keydown",g),window.removeEventListener("keyup",y)}function _(){var e=(new r.Box3).setFromObject(f);return l.getPoiByRegion(e)}function S(e,t,n){f.scale.set(e,t,n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return M})),n.d(t,"SetSize",(function(){return I})),n.d(t,"SetColor",(function(){return R})),n.d(t,"Stop",(function(){return k})),n.d(t,"Distance",(function(){return F})),n.d(t,"Area",(function(){return N}));var r,i,o,a,s,l=n(0);function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y={},b=1,x="distance",w=[],q=[],_=null,S=null;function M(e){r=e.getCamera(),e.getCameraControl(),i=e.getDom(),o=e.sysObjGroup,a=e.workObjGroup,(s=new l.Object3D).name="#Measure",o.add(s),y.PointGeometry=new l.CylinderBufferGeometry(1*b,1*b,.5*b,16,1),y.PointMaterial=new l.MeshPhongMaterial({color:5533183,shininess:100,side:l.DoubleSide}),y.LineMaterial=new l.MeshPhongMaterial({color:16728832,shininess:100,side:l.DoubleSide}),y.FaceMaterial=new l.MeshBasicMaterial({color:5533183,transparent:!0,opacity:.5,side:l.DoubleSide,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),_=new C(a.children),S=new D(a.children)}function E(){for(var e=0;e<q.length;e++)q[e].dispose(),s.remove(q[e]);if(q=[],"distance"===x){for(var t=0;t<w.length;t++){var n=new P(y.PointGeometry,y.PointMaterial);n.position.copy(w[t]),s.add(n),q.push(n)}for(var r=0;r<w.length-1;r++){var i=w[r],o=w[r+1],a=new A(i,o,y.PointMaterial);s.add(a),q.push(a)}}else if("area"===x){for(var l=0;l<w.length;l++){var u=new P(y.PointGeometry,y.PointMaterial);u.position.copy(w[l]),s.add(u),q.push(u)}for(var c=0;c<w.length-1;c++){var h=w[c],f=w[c+1],p=new A(h,f,y.LineMaterial);s.add(p),q.push(p)}if(w.length>=3){var d=new A(w[w.length-1],w[0],y.LineMaterial);s.add(d),q.push(d);var m=new O(y.FaceMaterial);s.add(m),q.push(m)}}}var T=function(e){function t(e,n){return h(this,t),d(this,m(t).call(this,e,n))}return v(t,e),p(t,[{key:"dispose",value:function(){}}]),t}(l.Mesh),P=function(e){function t(e,n){return h(this,t),d(this,m(t).call(this,e,n))}return v(t,e),t}(T),A=function(e){function t(e,n,r){var i;h(this,t),(i=d(this,m(t).call(this))).p0=e.clone(),i.p1=n.clone(),i.curve=new l.LineCurve3(i.p0,i.p1),i.geometry=new l.TubeBufferGeometry(i.curve,1,.25*b,16),i.geometry.computeBoundingSphere();var o=i.geometry.boundingSphere.center.clone();i.geometry.translate(-o.x,-o.y,-o.z),i.material=r,i.position.copy(o),i.updateMatrixWorld(!0),i.coneGeometry=new l.ConeBufferGeometry(.25*b,1*b,16,1),i.coneGeometry.rotateX(.5*Math.PI),i.coneGeometry.translate(0,0,-.5*b);var a=i.worldToLocal(i.p1.clone());return i.arrow=new l.Mesh(i.coneGeometry,i.material),i.arrow.lookAt(a),i.arrow.scale.setScalar(3),i.arrow.position.copy(a),i.add(i.arrow),i}return v(t,e),p(t,[{key:"dispose",value:function(){u(m(t.prototype),"dispose",this).call(this),this.remove(this.arrow),this.coneGeometry.dispose(),this.geometry.dispose()}}]),t}(T),O=function(e){function t(e){var n;h(this,t),n=d(this,m(t).call(this));for(var r=[],i=0;i<w.length;i++)r.push(new l.Vector2(w[i].x,w[i].z));r.push(new l.Vector2(w[0].x,w[0].z)),n.shape=new l.Shape(r),n.geometry=new l.ShapeBufferGeometry(n.shape),n.geometry.rotateX(.5*Math.PI),n.geometry.computeBoundingSphere();var o=n.geometry.boundingSphere.center.clone();return n.geometry.translate(-o.x,-o.y,-o.z),n.material=e,n.position.copy(o),n.position.y=w[0].y,n.updateMatrixWorld(!0),n}return v(t,e),p(t,[{key:"dispose",value:function(){u(m(t.prototype),"dispose",this).call(this),this.geometry.dispose()}}]),t}(T),L=function(){function e(){h(this,e),this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.mouseDownPos=new l.Vector2,this.mouseMovePos=new l.Vector2,this.mouseUpPos=new l.Vector2,this.onFinish=null}return p(e,[{key:"on",value:function(e){i.addEventListener("pointerdown",this.pointerDownBinder),i.addEventListener("pointermove",this.pointerMoveBinder),i.addEventListener("pointerup",this.pointerUpBinder),this.onFinish=e}},{key:"off",value:function(){i.removeEventListener("pointerdown",this.pointerDownBinder),i.removeEventListener("pointermove",this.pointerMoveBinder),i.removeEventListener("pointerup",this.pointerUpBinder)}},{key:"onPointerDown",value:function(e){this.mouseDownPos.x=e.offsetX,this.mouseDownPos.y=e.offsetY}},{key:"onPointerMove",value:function(e){this.mouseMovePos.x=e.offsetX,this.mouseMovePos.y=e.offsetY}},{key:"onPointerUp",value:function(e){this.mouseUpPos.x=e.offsetX,this.mouseUpPos.y=e.offsetY}},{key:"getMouseRay",value:function(e){var t=new l.Vector2(e.x/i.clientWidth*2-1,-e.y/i.clientHeight*2+1),n=new l.Raycaster;return n.setFromCamera(t,r),n}},{key:"calculate",value:function(){}},{key:"getLastPoint2DPos",value:function(){if(w.length>0){var e=w[w.length-1].clone();return r.updateMatrixWorld(),e.project(r),e.x=(e.x+1)/2*i.clientWidth,e.y=-(e.y-1)/2*i.clientHeight,e}return null}}]),e}(),C=function(e){function t(e){var n;return h(this,t),(n=d(this,m(t).call(this))).pickTarget=e,n.pickPlane=(new l.Plane).setFromNormalAndCoplanarPoint(new l.Vector3(0,1,0),new l.Vector3),n}return v(t,e),p(t,[{key:"onPointerUp",value:function(e){if(u(m(t.prototype),"onPointerUp",this).call(this,e),0===e.button){if(this.mouseDownPos.distanceTo(this.mouseUpPos)<5){var n=this.getMouseRay(this.mouseUpPos),r=n.intersectObjects(this.pickTarget,!0);if(r&&r.length>0)w.push(r[0].point),this.pickPlane.setFromNormalAndCoplanarPoint(new l.Vector3(0,1,0),w[0].clone()),E();else{var i=new l.Vector3;n.ray.intersectPlane(this.pickPlane,i)&&(w.push(i),E())}}}else if(2===e.button){this.mouseDownPos.distanceTo(this.mouseUpPos)<5&&this.onFinish&&this.onFinish(this.calculate(),this.getLastPoint2DPos())}}},{key:"calculate",value:function(){u(m(t.prototype),"calculate",this).call(this);for(var e=0,n=0;n<w.length-1;n++){var r=w[n],i=w[n+1];e+=r.distanceTo(i)}return e}}]),t}(L),D=function(e){function t(e){var n;return h(this,t),(n=d(this,m(t).call(this))).pickTarget=e,n.pickPlane=(new l.Plane).setFromNormalAndCoplanarPoint(new l.Vector3(0,1,0),new l.Vector3),n}return v(t,e),p(t,[{key:"onPointerUp",value:function(e){if(u(m(t.prototype),"onPointerUp",this).call(this,e),0===e.button){if(this.mouseDownPos.distanceTo(this.mouseUpPos)<5){var n=this.getMouseRay(this.mouseUpPos),r=n.intersectObjects(this.pickTarget,!0);if(r&&r.length>0&&0===w.length){w.push(r[0].point),1===w.length&&this.pickPlane.setFromNormalAndCoplanarPoint(new l.Vector3(0,1,0),w[0].clone());for(var i=1;i<w.length;i++)w[i].y=w[0].y;E()}else{var o=new l.Vector3;if(n.ray.intersectPlane(this.pickPlane,o)){w.push(o);for(var a=1;a<w.length;a++)w[a].y=w[0].y;E()}}}}else if(2===e.button){this.mouseDownPos.distanceTo(this.mouseUpPos)<5&&this.onFinish&&this.onFinish(this.calculate(),this.getLastPoint2DPos())}}},{key:"calculate",value:function(){u(m(t.prototype),"calculate",this).call(this);for(var e=[],n=0;n<w.length;n++)e.push(new l.Vector2(w[n].x,w[n].z));return Math.abs(l.ShapeUtils.area(e))}}]),t}(L);function k(){for(var e=0;e<q.length;e++)q[e].dispose(),s.remove(q[e]);q=[],w=[],_.off(),S.off()}function I(e){b=e,y.PointGeometry.dispose(),y.PointGeometry=new l.CylinderBufferGeometry(1*b,1*b,.5*b,16,1),E()}function R(e,t,n){y.PointMaterial.color=new l.Color(e),y.LineMaterial.color=new l.Color(t),y.FaceMaterial.color=new l.Color(n)}function F(e){k(),_.on(e),S.off(),x="distance"}function N(e){k(),_.off(),S.on(e),x="area"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),i=function(e){r.Loader.call(this,e),this.debug=!1,this.group=null,this.position=0,this.materials=[],this.meshes=[]};i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(e,t,n,i){var o=this,a=""===o.path?r.LoaderUtils.extractUrlBase(e):o.path,s=new r.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.load(e,(function(e){t(o.parse(e,a))}),n,i)},parse:function(e,t){this.group=new r.Group,this.position=0,this.materials=[],this.meshes=[],this.readFile(e,t);for(var n=0;n<this.meshes.length;n++)this.group.add(this.meshes[n]);return this.group},readFile:function(e,t){var n=new DataView(e),r=this.readChunk(n);if(r.id===a||r.id===s||r.id===o)for(var i=this.nextChunk(n,r);0!==i;){if(i===l){var u=this.readDWord(n);this.debugMessage("3DS file version: "+u)}else i===p?(this.resetPosition(n),this.readMeshData(n,t)):this.debugMessage("Unknown main chunk: "+i.toString(16));i=this.nextChunk(n,r)}this.debugMessage("Parsed "+this.meshes.length+" meshes")},readMeshData:function(e,t){for(var n=this.readChunk(e),r=this.nextChunk(e,n);0!==r;){if(r===d){var i=+this.readDWord(e);this.debugMessage("Mesh Version: "+i)}else if(r===m){var o=this.readFloat(e);this.debugMessage("Master scale: "+o),this.group.scale.set(o,o,o)}else r===R?(this.debugMessage("Named Object"),this.resetPosition(e),this.readNamedObject(e)):r===v?(this.debugMessage("Material"),this.resetPosition(e),this.readMaterialEntry(e,t)):this.debugMessage("Unknown MDATA chunk: "+r.toString(16));r=this.nextChunk(e,n)}},readNamedObject:function(e){var t=this.readChunk(e),n=this.readString(e,64);t.cur=this.position;for(var r=this.nextChunk(e,t);0!==r;){if(r===F){this.resetPosition(e);var i=this.readMesh(e);i.name=n,this.meshes.push(i)}else this.debugMessage("Unknown named object chunk: "+r.toString(16));r=this.nextChunk(e,t)}this.endChunk(t)},readMaterialEntry:function(e,t){for(var n=this.readChunk(e),i=this.nextChunk(e,n),o=new r.MeshPhongMaterial;0!==i;){if(i===g)o.name=this.readString(e,64),this.debugMessage("   Name: "+o.name);else if(i===M)this.debugMessage("   Wireframe"),o.wireframe=!0;else if(i===E){var a=this.readByte(e);o.wireframeLinewidth=a,this.debugMessage("   Wireframe Thickness: "+a)}else if(i===_)o.side=r.DoubleSide,this.debugMessage("   DoubleSided");else if(i===S)this.debugMessage("   Additive Blending"),o.blending=r.AdditiveBlending;else if(i===b)this.debugMessage("   Diffuse Color"),o.color=this.readColor(e);else if(i===x)this.debugMessage("   Specular Color"),o.specular=this.readColor(e);else if(i===y)this.debugMessage("   Ambient color"),o.color=this.readColor(e);else if(i===w){var s=this.readWord(e);o.shininess=s,this.debugMessage("   Shininess : "+s)}else if(i===q){var l=this.readWord(e);o.opacity=.01*l,this.debugMessage("  Opacity : "+l),o.transparent=l<100}else i===T?(this.debugMessage("   ColorMap"),this.resetPosition(e),o.map=this.readMap(e,t)):i===A?(this.debugMessage("   BumpMap"),this.resetPosition(e),o.bumpMap=this.readMap(e,t)):i===P?(this.debugMessage("   OpacityMap"),this.resetPosition(e),o.alphaMap=this.readMap(e,t)):i===O?(this.debugMessage("   SpecularMap"),this.resetPosition(e),o.specularMap=this.readMap(e,t)):this.debugMessage("   Unknown material chunk: "+i.toString(16));i=this.nextChunk(e,n)}this.endChunk(n),this.materials[o.name]=o},readMesh:function(e){var t=this.readChunk(e),n=this.nextChunk(e,t),i=new r.BufferGeometry,o=[],a=new r.MeshPhongMaterial,s=new r.Mesh(i,a);for(s.name="mesh";0!==n;){if(n===N){var l=this.readWord(e);this.debugMessage("   Vertex: "+l);for(var u=[],c=0;c<l;c++)u.push(this.readFloat(e)),u.push(this.readFloat(e)),u.push(this.readFloat(e));i.setAttribute("position",new r.Float32BufferAttribute(u,3))}else if(n===j)this.resetPosition(e),this.readFaceArray(e,s);else if(n===B){var h=this.readWord(e);this.debugMessage("   UV: "+h);for(o=[],c=0;c<h;c++)o.push(this.readFloat(e)),o.push(this.readFloat(e));i.setAttribute("uv",new r.Float32BufferAttribute(o,2))}else if(n===U){this.debugMessage("   Tranformation Matrix (TODO)");var f=[];for(c=0;c<12;c++)f[c]=this.readFloat(e);var p=new r.Matrix4;p.elements[0]=f[0],p.elements[1]=f[6],p.elements[2]=f[3],p.elements[3]=f[9],p.elements[4]=f[2],p.elements[5]=f[8],p.elements[6]=f[5],p.elements[7]=f[11],p.elements[8]=f[1],p.elements[9]=f[7],p.elements[10]=f[4],p.elements[11]=f[10],p.elements[12]=0,p.elements[13]=0,p.elements[14]=0,p.elements[15]=1,p.transpose();var d=new r.Matrix4;d.getInverse(p,!0),i.applyMatrix(d),p.decompose(s.position,s.quaternion,s.scale)}else this.debugMessage("   Unknown mesh chunk: "+n.toString(16));n=this.nextChunk(e,t)}return this.endChunk(t),i.computeVertexNormals(),s},readFaceArray:function(e,t){var n=this.readChunk(e),r=this.readWord(e);this.debugMessage("   Faces: "+r);for(var i=[],o=0;o<r;++o)i.push(this.readWord(e),this.readWord(e),this.readWord(e)),this.readWord(e);for(t.geometry.setIndex(i);this.position<n.end;){if((n=this.readChunk(e)).id===z){this.debugMessage("      Material Group"),this.resetPosition(e);var a=this.readMaterialGroup(e),s=this.materials[a.name];void 0!==s&&(t.material=s,""===s.name&&(s.name=t.name))}else this.debugMessage("      Unknown face array chunk: "+n.toString(16));this.endChunk(n)}this.endChunk(n)},readMap:function(e,t){var n=this.readChunk(e),i=this.nextChunk(e,n),o={},a=new r.TextureLoader(this.manager);for(a.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);0!==i;){if(i===L){var s=this.readString(e,128);o=a.load(s),this.debugMessage("      File: "+t+s)}else i===k?(o.offset.x=this.readFloat(e),this.debugMessage("      OffsetX: "+o.offset.x)):i===I?(o.offset.y=this.readFloat(e),this.debugMessage("      OffsetY: "+o.offset.y)):i===C?(o.repeat.x=this.readFloat(e),this.debugMessage("      RepeatX: "+o.repeat.x)):i===D?(o.repeat.y=this.readFloat(e),this.debugMessage("      RepeatY: "+o.repeat.y)):this.debugMessage("      Unknown map chunk: "+i.toString(16));i=this.nextChunk(e,n)}return this.endChunk(n),o},readMaterialGroup:function(e){this.readChunk(e);var t=this.readString(e,64),n=this.readWord(e);this.debugMessage("         Name: "+t),this.debugMessage("         Faces: "+n);for(var r=[],i=0;i<n;++i)r.push(this.readWord(e));return{name:t,index:r}},readColor:function(e){var t=this.readChunk(e),n=new r.Color;if(t.id===c||t.id===h){var i=this.readByte(e),o=this.readByte(e),a=this.readByte(e);n.setRGB(i/255,o/255,a/255),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else if(t.id===u||t.id===f){i=this.readFloat(e),o=this.readFloat(e),a=this.readFloat(e);n.setRGB(i,o,a),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else this.debugMessage("      Unknown color chunk: "+t.toString(16));return this.endChunk(t),n},readChunk:function(e){var t={};return t.cur=this.position,t.id=this.readWord(e),t.size=this.readDWord(e),t.end=t.cur+t.size,t.cur+=6,t},endChunk:function(e){this.position=e.end},nextChunk:function(e,t){if(t.cur>=t.end)return 0;this.position=t.cur;try{var n=this.readChunk(e);return t.cur+=n.size,n.id}catch(e){return this.debugMessage("Unable to read chunk at "+this.position),0}},resetPosition:function(){this.position-=6},readByte:function(e){var t=e.getUint8(this.position,!0);return this.position+=1,t},readFloat:function(e){try{var t=e.getFloat32(this.position,!0);return this.position+=4,t}catch(t){this.debugMessage(t+" "+this.position+" "+e.byteLength)}},readInt:function(e){var t=e.getInt32(this.position,!0);return this.position+=4,t},readShort:function(e){var t=e.getInt16(this.position,!0);return this.position+=2,t},readDWord:function(e){var t=e.getUint32(this.position,!0);return this.position+=4,t},readWord:function(e){var t=e.getUint16(this.position,!0);return this.position+=2,t},readString:function(e,t){for(var n="",r=0;r<t;r++){var i=this.readByte(e);if(!i)break;n+=String.fromCharCode(i)}return n},debugMessage:function(e){this.debug&&console.log(e)}});var o=19789,a=15786,s=49725,l=2,u=16,c=17,h=18,f=19,p=15677,d=15678,m=256,v=45055,g=40960,y=40976,b=40992,x=41008,w=41024,q=41040,_=41089,S=41091,M=41093,E=41095,T=41472,P=41488,A=41520,O=41476,L=41728,C=41812,D=41814,k=41816,I=41818,R=16384,F=16640,N=16656,j=16672,z=16688,B=16704,U=16736},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(22);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e,n,i){var o;return a(this,t),(o=u(this,f(t).call(this,e,n))).camera=i,o.pickPlane=new r.Plane,o}return p(t,e),l(t,[{key:"updateMatrix",value:function(){h(f(t.prototype),"updateMatrix",this).call(this);var e=this.camera.position.clone();e.y=this.position.y;var n=(new r.Vector3).subVectors(e,this.position).normalize(),i=Math.atan2(n.x,n.z);this.rotation.y=i,this.pickPlane.setFromNormalAndCoplanarPoint(n,this.position)}}]),t}(r.Mesh),v=function(e){function t(e){var n;a(this,t),(n=u(this,f(t).call(this))).core=e,n.snapObject=null,n.pointer=null,n.pointerBaseSize=1,n.linePoints=[],n.mouseState="drawShape",n.shape=null,n.extrudeMesh=null,n.extrudeMeshList={},n.objectId=null,n.color=16711680,n.properties=null,n.rayCast=new r.Raycaster,n.leftDownPos=new r.Vector2,n.rightDownPos=new r.Vector2;var i=new r.PlaneBufferGeometry(1e5,1e5,1,1),o=new r.MeshBasicMaterial({color:"white",transparent:!0,opacity:.1});return n.heightPlane=new m(i,o,n.core.getCamera()),n.heightPlane.visible=!1,n.onKeyDownBinder=n.onKeyDown.bind(c(n)),n.onKeyUpBinder=n.onKeyUp.bind(c(n)),n.onPointerDownBinder=n.onPointerDown.bind(c(n)),n.onPointerMoveBinder=n.onPointerMove.bind(c(n)),n.onPointerUpBinder=n.onPointerUp.bind(c(n)),n.core.dom.addEventListener("pointerdown",n.volumePointerDown.bind(c(n))),n.core.dom.addEventListener("pointerup",n.volumePointerUp.bind(c(n))),n.core.dom.addEventListener("dblclick",n.volumePointerDblClk.bind(c(n))),n}return p(t,e),l(t,[{key:"exists",value:function(e){return this.extrudeMeshList.hasOwnProperty(e)}},{key:"addPoint",value:function(e){var t=new r.SphereBufferGeometry(.5,32,32),n=new r.MeshStandardMaterial({color:"red"}),i=new r.Mesh(t,n);this.core.sysObjGroup.add(i),i.position.copy(e),this.linePoints.push(i)}},{key:"getShapeCenter",value:function(){var e=(new r.Box3).makeEmpty();if(this.linePoints.forEach((function(t){return e.expandByPoint(t.position)})),e.isEmpty())return null;var t=new r.Vector3;return e.getCenter(t),t}},{key:"clearLinePoints",value:function(){var e=this;this.linePoints.forEach((function(t){e.core.sysObjGroup.remove(t),t.geometry.dispose(),t.material.dispose()})),this.linePoints=[]}},{key:"deleteExtrudeMesh",value:function(){this.extrudeMesh&&(this.core.sysObjGroup.remove(this.extrudeMesh),this.extrudeMesh.geometry.dispose(),this.extrudeMesh.material.dispose(),this.extrudeMesh.children[0].geometry.dispose(),this.extrudeMesh.children[0].material.dispose(),this.extrudeMesh=null)}},{key:"createPointer",value:function(){this.pointer&&this.deletePointer();var e=new r.SphereBufferGeometry(.5,32,32),t=new r.MeshStandardMaterial({color:"red"});this.pointer=new r.Mesh(e,t),this.core.sysObjGroup.add(this.pointer)}},{key:"deletePointer",value:function(){this.pointer&&(this.core.sysObjGroup.remove(this.pointer),this.pointer.geometry.dispose(),this.pointer.material.dispose())}},{key:"createSnapObject",value:function(){this.deleteSnapObject();var e=[],t=this.core.workObjGroup;t.updateMatrix(),t.updateMatrixWorld(!0),t.traverse((function(t){if(t instanceof r.Mesh)for(var n=t.geometry.getAttribute("position"),i=0;i<n.count;i++){var o=n.array[3*i+0],a=n.array[3*i+1],s=n.array[3*i+2],l=new r.Vector3(o,a,s);l=l.applyMatrix4(t.matrixWorld),e.push(l)}}));var n=(new r.BufferGeometry).setFromPoints(e),i=new r.PointsMaterial({color:"red"});this.snapObject=new r.Points(n,i),this.core.sysObjGroup.add(this.snapObject),this.snapObject.visible=!1}},{key:"deleteSnapObject",value:function(){this.snapObject&&(this.core.sysObjGroup.remove(this.snapObject),this.snapObject.geometry.dispose(),this.snapObject.material.dispose())}},{key:"finishDrawShape",value:function(){if(this.linePoints.length>2){this.shape=new r.Shape,this.shape.moveTo(this.linePoints[0].position.x,-this.linePoints[0].position.z);for(var e=1;e<this.linePoints.length;e++)this.shape.lineTo(this.linePoints[e].position.x,-this.linePoints[e].position.z)}}},{key:"finishSetHeight",value:function(){var e=this.extrudeMesh.clone();this.core.sysObjGroup.add(e),this.deleteExtrudeMesh(),e.name=this.objectId,e.userData.id=this.objectId,e.userData.property=this.properties,e.userData.linePoints=this.linePoints.map((function(e){return{x:e.position.x,y:e.position.y,z:e.position.z}})),e.userData.color=this.color,this.extrudeMeshList[e.name]=e,this.clearLinePoints(),this.off()}},{key:"updateExtrudeGeometry",value:function(e){this.deleteExtrudeMesh();var t=new r.ExtrudeBufferGeometry(this.shape,{steps:1,depth:e,bevelEnabled:!1});t.rotateX(-.5*Math.PI),t.computeBoundingSphere();var n=t.boundingSphere.center.clone();n.y=0,t.translate(-n.x,-n.y,-n.z);var i=new r.MeshStandardMaterial({color:new r.Color(this.color),transparent:!0,opacity:.5,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1});this.extrudeMesh=new r.Mesh(t,i),this.extrudeMesh.position.copy(n),this.extrudeMesh.position.y=this.linePoints[0].position.y,this.core.sysObjGroup.add(this.extrudeMesh);var o=new r.EdgesGeometry(t),a=new r.LineBasicMaterial({color:"black"}),s=new r.LineSegments(o,a);this.extrudeMesh.add(s),this.extrudeMesh.userData.height=e,this.extrudeMesh.userData.color=this.color}},{key:"on",value:function(){this.off(),this.mouseState="drawShape",this.core.dom.addEventListener("keydown",this.onKeyDownBinder,!1),this.core.dom.addEventListener("keyup",this.onKeyUpBinder,!1),this.core.dom.addEventListener("pointerdown",this.onPointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.onPointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.onPointerUpBinder,!1),this.createPointer(),this.createSnapObject()}},{key:"off",value:function(){this.core.sysObjGroup.remove(this.heightPlane),this.mouseState="none",this.deleteSnapObject(),this.deletePointer(),this.clearLinePoints(),this.deleteExtrudeMesh(),this.core.dom.removeEventListener("keydown",this.onKeyDownBinder),this.core.dom.addEventListener("keyup",this.onKeyUpBinder),this.core.dom.removeEventListener("pointerdown",this.onPointerDownBinder),this.core.dom.removeEventListener("pointermove",this.onPointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.onPointerUpBinder)}},{key:"onKeyDown",value:function(e){(this.snapObject&&"drawShape"===this.mouseState||"setHeight"===this.mouseState)&&(this.snapObject.visible=e.shiftKey)}},{key:"onKeyUp",value:function(e){(this.snapObject&&"drawShape"===this.mouseState||"setHeight"===this.mouseState)&&(this.snapObject.visible=e.shiftKey)}},{key:"onPointerDown",value:function(e){0===e.button?this.leftDownPos.set(e.offsetX,e.offsetY):2===e.button&&this.rightDownPos.set(e.offsetX,e.offsetY)}},{key:"onPointerMove",value:function(e){var t=new r.Vector2(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1);if(this.rayCast.setFromCamera(t,this.core.getCamera()),"drawShape"===this.mouseState){var n=this.rayCast.intersectObject(this.snapObject,!0);if(e.shiftKey&&n.length>0){var i=n[0].index,o=n[0].object.geometry.getAttribute("position"),a=o.getX(i),s=o.getY(i),l=o.getZ(i),u=new r.Vector3(a,s,l);this.pointer.position.copy(u)}else(n=this.rayCast.intersectObject(this.core.workObjGroup,!0)).length>0&&this.pointer.position.copy(n[0].point)}else if("setHeight"===this.mouseState){var c=this.rayCast.intersectObject(this.snapObject,!0);if(e.shiftKey&&c.length>0){var h=c[0].index,f=c[0].object.geometry.getAttribute("position"),p=f.getX(h),d=f.getY(h),m=f.getZ(h),v=new r.Vector3(p,d,m);this.pointer.position.copy(v);var g=v.y-this.linePoints[0].position.y;this.updateExtrudeGeometry(g)}else{var y=new r.Vector3;if(this.rayCast.ray.intersectPlane(this.heightPlane.pickPlane,y)){this.pointer.position.copy(y);var b=y.y-this.linePoints[0].position.y;this.updateExtrudeGeometry(b)}}}var x=this.core.getCamera().position.distanceTo(this.pointer.position);this.pointer.scale.setScalar(this.pointerBaseSize*x*.01)}},{key:"onPointerUp",value:function(e){if(0===e.button)"drawShape"===this.mouseState&&new r.Vector2(e.offsetX,e.offsetY).distanceTo(this.leftDownPos)<=5&&this.addPoint(this.pointer.position.clone());else if(2===e.button){new r.Vector2(e.offsetX,e.offsetY).distanceTo(this.rightDownPos)<=5&&("drawShape"===this.mouseState?(this.finishDrawShape(),this.updateExtrudeGeometry(1),this.core.sysObjGroup.add(this.heightPlane),this.heightPlane.position.copy(this.getShapeCenter()),this.mouseState="setHeight"):"setHeight"===this.mouseState&&this.finishSetHeight())}}},{key:"show",value:function(e){this.exists(e)&&(this.extrudeMeshList[e].visible=!0)}},{key:"showByProperty",value:function(e,t){if(this.exists(e)){var n=this.extrudeMeshList[e],r=n.userData.property,i=0;for(var o in t)r.hasOwnProperty(o)&&r[o]===t[o]&&i++;i===Object.keys(t).length&&(n.visible=!0)}}},{key:"showAll",value:function(){var e=this;Object.keys(this.extrudeMeshList).forEach((function(t){return e.show(t)}))}},{key:"hide",value:function(e){this.exists(e)&&(this.extrudeMeshList[e].visible=!1)}},{key:"hideByProperty",value:function(e,t){if(this.exists(e)){var n=this.extrudeMeshList[e],r=n.userData.property,i=0;for(var o in t)r.hasOwnProperty(o)&&r[o]===t[o]&&i++;i===Object.keys(t).length&&(n.visible=!1)}}},{key:"hideAll",value:function(){var e=this;Object.keys(this.extrudeMeshList).forEach((function(t){return e.hide(t)}))}},{key:"deleteVolume",value:function(e){var t=this.extrudeMeshList[e];this.core.sysObjGroup.remove(t),t.geometry.dispose(),t.material.dispose(),t.children[0].geometry.dispose(),t.children[0].material.dispose(),delete this.extrudeMeshList[e]}},{key:"deleteAllVolume",value:function(){for(var e in this.extrudeMeshList)this.deleteVolume(e)}},{key:"exportData",value:function(e){var t=[];return Object.values(this.extrudeMeshList).forEach((function(e){return t.push({id:e.userData.id,property:e.userData.property,linePoints:e.userData.linePoints,height:e.userData.height,color:e.userData.color})})),e?JSON.stringify(t):t}},{key:"importData",value:function(e){var t=this;this.off(),this.deleteAllVolume(),"string"==typeof e&&(e=JSON.parse(e)),e.forEach((function(e){var n=e.id,i=e.linePoints,o=e.height,a=e.property,s=e.color,l=new r.Shape;l.moveTo(i[0].x,-i[0].z);for(var u=1;u<i.length;u++)l.lineTo(i[u].x,-i[u].z);var c=new r.ExtrudeBufferGeometry(l,{steps:1,depth:o,bevelEnabled:!1});c.rotateX(-.5*Math.PI),c.computeBoundingSphere();var h=c.boundingSphere.center.clone();c.translate(-h.x,0,-h.z);var f=new r.MeshStandardMaterial({color:new r.Color(s),transparent:!0,opacity:.5,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),p=new r.Mesh(c,f);p.position.copy(h),p.position.y=i[0].y,t.core.sysObjGroup.add(p);var d=new r.EdgesGeometry(c),m=new r.LineBasicMaterial({color:"black"}),v=new r.LineSegments(d,m);p.add(v),p.name=n,p.userData.id=n,p.userData.property=a,p.userData.height=o,p.userData.linePoints=i,p.userData.color=s,t.extrudeMeshList[p.name]=p}))}},{key:"volumePointerDown",value:function(e){var t=new r.Vector2(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1),n=new r.Raycaster;n.setFromCamera(t,this.core.getCamera());var i=n.intersectObjects(Object.values(this.extrudeMeshList),!1);if(i.length>0){var o=i[0].object;this.dispatchEvent({type:"volumePointerDown",button:e.button,volumeObject:{id:o.userData.id,property:o.userData.property,linePoints:o.userData.linePoints,height:o.userData.height}})}}},{key:"volumePointerUp",value:function(e){var t=new r.Vector2(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1),n=new r.Raycaster;n.setFromCamera(t,this.core.getCamera());var i=n.intersectObjects(Object.values(this.extrudeMeshList),!1);if(i.length>0){var o=i[0].object;this.dispatchEvent({type:"volumePointerUp",button:e.button,volumeObject:{id:o.userData.id,property:o.userData.property,linePoints:o.userData.linePoints,height:o.userData.height}})}}},{key:"volumePointerDblClk",value:function(e){var t=new r.Vector2(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1),n=new r.Raycaster;n.setFromCamera(t,this.core.getCamera());var i=n.intersectObjects(Object.values(this.extrudeMeshList),!1);if(i.length>0){var o=i[0].object;this.dispatchEvent({type:"volumePointerDblClick",button:e.button,volumeObject:{id:o.userData.id,property:o.userData.property,linePoints:o.userData.linePoints,height:o.userData.height}})}}},{key:"containsPoint",value:function(e){var t=e.x,n=e.z,r=[];return Object.values(this.extrudeMeshList).forEach((function(i){for(var o=i.userData.linePoints,a=!1,s=0,l=o.length-1;s<o.length;l=s++){var u=o[s].x,c=o[s].z,h=o[l].x,f=o[l].z;c>n!=f>n&&t<(h-u)*(n-c)/(f-c)+u&&(a=!a)}a&&o[0].y<e.y&&e.y<o[0].y+i.userData.height&&r.push({id:i.userData.id,property:i.userData.property,linePoints:i.userData.linePoints,height:i.userData.height})})),r}},{key:"setVolumeColor",value:function(e,t){if(this.exists(e)){var n=this.extrudeMeshList[e];n.userData.color=t,n.material.color=new r.Color(t)}}},{key:"setVolumeColorAll",value:function(e){Object.values(this.extrudeMeshList).forEach((function(t){t.userData.color=e,t.material.color=new r.Color(e)}))}},{key:"ObjectId",get:function(){return this.objectId},set:function(e){this.objectId=e}},{key:"Color",get:function(){return this.color},set:function(e){this.color=e}},{key:"Properties",get:function(){return this.properties},set:function(e){this.properties=e}},{key:"PointerBaseSize",set:function(e){this.pointerBaseSize=e}}]),t}(i.a);n.d(t,"initialize",(function(){return b})),n.d(t,"Create",(function(){return x})),n.d(t,"Delete",(function(){return w})),n.d(t,"DeleteAll",(function(){return q})),n.d(t,"Cancel",(function(){return _})),n.d(t,"Show",(function(){return S})),n.d(t,"Hide",(function(){return T})),n.d(t,"ShowAll",(function(){return E})),n.d(t,"HideAll",(function(){return A})),n.d(t,"ShowByProperty",(function(){return M})),n.d(t,"HideByProperty",(function(){return P})),n.d(t,"Export",(function(){return O})),n.d(t,"Import",(function(){return L})),n.d(t,"AddEventListener",(function(){return C})),n.d(t,"RemoveEventListener",(function(){return D})),n.d(t,"ContainsPoint",(function(){return k})),n.d(t,"SetColor",(function(){return I})),n.d(t,"SetColorAll",(function(){return R})),n.d(t,"SetPointerSize",(function(){return F}));var g=null,y=null;function b(e){g||(y=new v(g=e))}function x(e,t,n){if(y){if(!e)return void console.warn("invalid id: ".concat(e));if(y.exists(e))return void console.warn("".concat(e," already exists."));y.ObjectId=e,y.Properties=n,y.Color=t,y.on()}}function w(e){y&&y.exists(e)&&y.deleteVolume(e)}function q(){y&&y.deleteAllVolume()}function _(){y&&y.off()}function S(e){y&&y.show(e)}function M(e,t){y&&y.showByProperty(e,t)}function E(){y&&y.showAll()}function T(e){y&&y.hide(e)}function P(e,t){y&&y.hideByProperty(e,t)}function A(){y&&y.hideAll()}function O(e){if(y)return y.exportData(e)}function L(e){y&&y.importData(e)}function C(e,t){y&&y.addEventListener(e,t)}function D(e,t){y&&y.removeEventListener(e,t)}function k(e,t,n){return y?y.containsPoint(new r.Vector3(e,t,n)):[]}function I(e,t){y&&y.setVolumeColor(e,t)}function R(e){y&&y.setVolumeColorAll(e)}function F(e){y&&(y.PointerBaseSize=e)}},function(e,t,n){"use strict";var r=n(0),i=n(17),o=n(55),a={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new r.Color(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")};n.d(t,"a",(function(){return s}));var s=function(e,t,n,s){i.a.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=s,this.resolution=void 0!==e?new r.Vector2(e.x,e.y):new r.Vector2(256,256),this.clearColor=new r.Color(0,0,0);var l={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var u=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new r.WebGLRenderTarget(u,c,l),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var h=0;h<this.nMips;h++){var f=new r.WebGLRenderTarget(u,c,l);f.texture.name="UnrealBloomPass.h"+h,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);var p=new r.WebGLRenderTarget(u,c,l);p.texture.name="UnrealBloomPass.v"+h,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),u=Math.round(u/2),c=Math.round(c/2)}void 0===a&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var d=a;this.highPassUniforms=r.UniformsUtils.clone(d.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new r.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var m=[3,5,7,9,11];for(u=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2),h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(m[h])),this.separableBlurMaterials[h].uniforms.texSize.value=new r.Vector2(u,c),u=Math.round(u/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===o.a&&console.error("UnrealBloomPass relies on CopyShader");var v=o.a;this.copyUniforms=r.UniformsUtils.clone(v.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new r.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new r.Color,this.oldClearAlpha=1,this.basic=new r.MeshBasicMaterial,this.fsQuad=new i.a.FullScreenQuad(null)};s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(var o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(n,i),this.renderTargetsVertical[o].setSize(n,i),this.separableBlurMaterials[o].uniforms.texSize.value=new r.Vector2(n,i),n=Math.round(n/2),i=Math.round(i/2)},render:function(e,t,n,r,i){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var a=this.renderTargetBright,l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=s.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=s.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new r.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},direction:{value:new r.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new r.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),s.BlurDirectionX=new r.Vector2(1,0),s.BlurDirectionY=new r.Vector2(0,1)},function(e,t,n){var r=n(8),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(6),i=n(40),o=n(58),a=n(198),s=n(14).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(92)("keys"),i=n(68);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(8),i=n(4),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(41)(Function.call,n(32).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(8),i=n(142).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(43),i=n(46);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";var r=n(58),i=n(1),o=n(27),a=n(26),s=n(86),l=n(149),u=n(83),c=n(33),h=n(9)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,d,m,v,g){l(n,t,d);var y,b,x,w=function(e){if(!f&&e in M)return M[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},q=t+" Iterator",_="values"==m,S=!1,M=e.prototype,E=M[h]||M["@@iterator"]||m&&M[m],T=E||w(m),P=m?_?w("entries"):T:void 0,A="Array"==t&&M.entries||E;if(A&&(x=c(A.call(new e)))!==Object.prototype&&x.next&&(u(x,q,!0),r||"function"==typeof x[h]||a(x,h,p)),_&&E&&"values"!==E.name&&(S=!0,T=function(){return E.call(this)}),r&&!g||!f&&!S&&M[h]||a(M,h,T),s[t]=T,s[q]=p,m)if(y={values:_?T:w("values"),keys:v?T:w("keys"),entries:P},g)for(b in y)b in M||o(M,b,y[b]);else i(i.P+i.F*(f||S),t,y);return y}},function(e,t,n){"use strict";var r=n(71),i=n(67),o=n(83),a={};n(26)(a,n(9)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(108),i=n(46);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(9)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(86),i=n(9)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(14),i=n(67);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(84),i=n(9)("iterator"),o=n(86);e.exports=n(40).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(360);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(18),i=n(70),o=n(10);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:i(l,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(60),i=n(215),o=n(86),a=n(31);e.exports=n(148)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i,o=n(95),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function(e){var t,n,r,i,l=this;return c&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),u&&(t=l.lastIndex),r=a.call(l,e),u&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),c&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t,n){"use strict";var r=n(107)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(41),s=n(205),l=n(141),u=n(137),c=n(6),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n(42)(h)?r=function(e){h.nextTick(a(y,e,1))}:m&&m.now?r=function(e){m.now(a(y,e,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,n){var r=n(6),i=n(160).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==n(42)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(l&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(l)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){i.call(r,u)};else{var h=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(21);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(6),i=n(13),o=n(58),a=n(114),s=n(26),l=n(76),u=n(7),c=n(74),h=n(43),f=n(10),p=n(225),d=n(72).f,m=n(14).f,v=n(156),g=n(83),y=r.ArrayBuffer,b=r.DataView,x=r.Math,w=r.RangeError,q=r.Infinity,_=y,S=x.abs,M=x.pow,E=x.floor,T=x.log,P=x.LN2,A=i?"_b":"buffer",O=i?"_l":"byteLength",L=i?"_o":"byteOffset";function C(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,u=l>>1,c=23===t?M(2,-24)-M(2,-77):0,h=0,f=e<0||0===e&&1/e<0?1:0;for((e=S(e))!=e||e===q?(i=e!=e?1:0,r=l):(r=E(T(e)/P),e*(o=M(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?c/o:c*M(2,1-u))*o>=2&&(r++,o/=2),r+u>=l?(i=0,r=l):r+u>=1?(i=(e*o-1)*M(2,t),r+=u):(i=e*M(2,u-1)*M(2,t),r=0));t>=8;a[h++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function D(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-q:q;r+=M(2,t),c-=a}return(u?-1:1)*r*M(2,c-t)}function k(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function I(e){return[255&e]}function R(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function N(e){return C(e,52,8)}function j(e){return C(e,23,4)}function z(e,t,n){m(e.prototype,t,{get:function(){return this[n]}})}function B(e,t,n,r){var i=p(+n);if(i+t>e[O])throw w("Wrong index!");var o=e[A]._b,a=i+e[L],s=o.slice(a,a+t);return r?s:s.reverse()}function U(e,t,n,r,i,o){var a=p(+n);if(a+t>e[O])throw w("Wrong index!");for(var s=e[A]._b,l=a+e[L],u=r(+i),c=0;c<t;c++)s[l+c]=u[o?c:t-c-1]}if(a.ABV){if(!u((function(){y(1)}))||!u((function(){new y(-1)}))||u((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var V,G=(y=function(e){return c(this,y),new _(p(e))}).prototype=_.prototype,H=d(_),W=0;H.length>W;)(V=H[W++])in y||s(y,V,_[V]);o||(G.constructor=y)}var X=new b(new y(2)),Y=b.prototype.setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||l(b.prototype,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else y=function(e){c(this,y,"ArrayBuffer");var t=p(e);this._b=v.call(new Array(t),0),this[O]=t},b=function(e,t,n){c(this,b,"DataView"),c(e,y,"DataView");var r=e[O],i=h(t);if(i<0||i>r)throw w("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw w("Wrong length!");this[A]=e,this[L]=i,this[O]=n},i&&(z(y,"byteLength","_l"),z(b,"buffer","_b"),z(b,"byteLength","_l"),z(b,"byteOffset","_o")),l(b.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return k(B(this,4,e,arguments[1]))},getUint32:function(e){return k(B(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D(B(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D(B(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){U(this,1,e,I,t)},setUint8:function(e,t){U(this,1,e,I,t)},setInt16:function(e,t){U(this,2,e,R,t,arguments[2])},setUint16:function(e,t){U(this,2,e,R,t,arguments[2])},setInt32:function(e,t){U(this,4,e,F,t,arguments[2])},setUint32:function(e,t){U(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){U(this,4,e,j,t,arguments[2])},setFloat64:function(e,t){U(this,8,e,N,t,arguments[2])}});g(y,"ArrayBuffer"),g(b,"DataView"),s(b.prototype,a.VIEW,!0),t.ArrayBuffer=y,t.DataView=b},function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(e,t,n){(function(){var t,r,i,o,a,s,l,u,c={}.hasOwnProperty;u=n(53),l=u.isObject,s=u.isFunction,a=u.getValue,o=n(34),t=n(15),r=n(236),i=n(167),e.exports=function(e){function n(e,r,i){var o,a,s,l;if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=i&&this.attribute(i),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(a=0,s=(l=e.children).length;a<s;a++)if((o=l[a]).type===t.DocType){o.name=this.name;break}}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),n.prototype.clone=function(){var e,t,n,r;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},r=this.attribs)c.call(r,t)&&(e=r[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)})),n},n.prototype.attribute=function(e,t){var n,i;if(null!=e&&(e=a(e)),l(e))for(n in e)c.call(e,n)&&(i=e[n],this.attribute(n,i));else s(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new r(this,e,""):null!=t&&(this.attribs[e]=new r(this,e,t));return this},n.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=a(e),Array.isArray(e))for(n=0,r=e.length;n<r;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this},n.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},n.prototype.att=function(e,t){return this.attribute(e,t)},n.prototype.a=function(e,t){return this.attribute(e,t)},n.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},n.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},n.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},n.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},n.prototype.setIdAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(e){var t,r,i;if(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,i=this.attribs.length-1;0<=i?r<=i:r>=i;t=0<=i?++r:--r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},n}(o)}).call(this)},function(e,t){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(15),r=n(118),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(15),r=n(118),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i,o={}.hasOwnProperty;i=n(53).isObject,r=n(34),t=n(15),e.exports=function(e){function n(e,r,o,a){var s;n.__super__.constructor.call(this,e),i(r)&&(r=(s=r).version,o=s.encoding,a=s.standalone),r||(r="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(r),null!=o&&(this.encoding=this.stringify.xmlEncoding(o)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i,o,a,s,l,u,c={}.hasOwnProperty;u=n(53).isObject,l=n(34),t=n(15),r=n(172),o=n(173),i=n(174),a=n(175),s=n(167),e.exports=function(e){function n(e,r,i){var o,a,s,l,c,h;if(n.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(a=0,s=(l=e.children).length;a<s;a++)if((o=l[a]).type===t.Element){this.name=o.name;break}this.documentObject=e,u(r)&&(r=(c=r).pubID,i=c.sysID),null==i&&(i=(h=[r,i])[0],r=h[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"entities",{get:function(){var e,n,r,i,o;for(i={},n=0,r=(o=this.children).length;n<r;n++)(e=o[n]).type!==t.EntityDeclaration||e.pe||(i[e.name]=e);return new s(i)}}),Object.defineProperty(n.prototype,"notations",{get:function(){var e,n,r,i,o;for(i={},n=0,r=(o=this.children).length;n<r;n++)(e=o[n]).type===t.NotationDeclaration&&(i[e.name]=e);return new s(i)}}),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),n.prototype.element=function(e,t){var n;return n=new i(this,e,t),this.children.push(n),this},n.prototype.attList=function(e,t,n,i,o){var a;return a=new r(this,e,t,n,i,o),this.children.push(a),this},n.prototype.entity=function(e,t){var n;return n=new o(this,!1,e,t),this.children.push(n),this},n.prototype.pEntity=function(e,t){var n;return n=new o(this,!0,e,t),this.children.push(n),this},n.prototype.notation=function(e,t){var n;return n=new a(this,e,t),this.children.push(n),this},n.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},n.prototype.ele=function(e,t){return this.element(e,t)},n.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},n.prototype.ent=function(e,t){return this.entity(e,t)},n.prototype.pent=function(e,t){return this.pEntity(e,t)},n.prototype.not=function(e,t){return this.notation(e,t)},n.prototype.up=function(){return this.root()||this.documentObject},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&(e.name===this.name&&(e.publicId===this.publicId&&e.systemId===this.systemId))},n}(l)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(34),t=n(15),e.exports=function(e){function n(e,r,i,o,a,s){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(s&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(o),s&&(this.defaultValue=this.stringify.dtdAttDefault(s)),this.defaultValueType=a}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i,o={}.hasOwnProperty;i=n(53).isObject,r=n(34),t=n(15),e.exports=function(e){function n(e,r,o,a){if(n.__super__.constructor.call(this,e),null==o)throw new Error("Missing DTD entity name. "+this.debugInfo(o));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(o));if(this.pe=!!r,this.name=this.stringify.name(o),this.type=t.EntityDeclaration,i(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(o));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(o));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(o))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(34),t=n(15),e.exports=function(e){function n(e,r,i){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(34),t=n(15),e.exports=function(e){function n(e,r,i){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(15),r=n(34),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(15),r=n(118),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},n.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(r)}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(15),r=n(118),e.exports=function(e){function n(e,r,i){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},n}(r)}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(239),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var n,r,i,o,a;for(t=this.filterOptions(t),o="",r=0,i=(a=e.children).length;r<i;r++)n=a[r],o+=this.writeChildNode(n,t,0);return t.pretty&&o.slice(-t.newline.length)===t.newline&&(o=o.slice(0,-t.newline.length)),o},t}(t)}).call(this)},function(e,t,n){(t=e.exports=n(241)).Stream=t,t.Readable=t,t.Writable=n(181),t.Duplex=n(79),t.Transform=n(244),t.PassThrough=n(501)},function(e,t,n){"use strict";(function(t,r,i){var o=n(122);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=y;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=g;var u=Object.create(n(97));u.inherits=n(78);var c={deprecate:n(500)},h=n(242),f=n(123).Buffer,p=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var d,m=n(243);function v(){}function g(e,t){s=s||n(79),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,u=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}(e,n,r,t,i);else{var a=q(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?l(x,e,n,a,i):x(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(e){if(s=s||n(79),!(d.call(y,this)||this instanceof s))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,b(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,h=n.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,c,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function q(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n=q(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}u.inherits(y,h),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===y&&(e&&e._writableState instanceof g)}})):d=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=e,f.isBuffer(r)||r instanceof p);return s&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,e,n))&&(i.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,r,i,o);return l}(this,i,s,e,t,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(52),n(182).setImmediate,n(39))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(499),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(39))},function(e,t,n){"use strict";var r=n(123).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(245),o="function"==typeof Symbol&&"symbol"===r(Symbol("foo")),a=Object.prototype.toString,s=Array.prototype.concat,l=Object.defineProperty,u=l&&function(){var e={};try{for(var t in l(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),c=function(e,t,n,r){var i;(!(t in e)||"function"==typeof(i=r)&&"[object Function]"===a.call(i)&&r())&&(u?l(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},h=function(e,t){var n=arguments.length>2?arguments[2]:{},r=i(t);o&&(r=s.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)c(e,r[a],t[r[a]],n[r[a]])};h.supportsDescriptors=!!u,e.exports=h},function(e,t,n){(function(e,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])g(s)||!q(s)?o+=" "+s:o+=" "+u(s);return o},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var s,l={};function u(e,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,e,r.depth)}function c(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function h(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&M(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=f(e,i,r)),i}var o=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(M(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return p(n)}var u,c="",h=!1,q=["{","}"];(m(n)&&(h=!0,q=["[","]"]),M(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(c=" "+RegExp.prototype.toString.call(n)),_(n)&&(c=" "+Date.prototype.toUTCString.call(n)),S(n)&&(c=" "+p(n)),0!==a.length||h&&0!=n.length?r<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=h?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return d(e,n,r,s,t,h)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,c,q)):q[0]+c+q[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?f(e,l.value,null):f(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function m(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return void 0===e}function w(e){return q(e)&&"[object RegExp]"===E(e)}function q(e){return"object"===i(e)&&null!==e}function _(e){return q(e)&&"[object Date]"===E(e)}function S(e){return q(e)&&("[object Error]"===E(e)||e instanceof Error)}function M(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(x(s)&&(s=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!l[n])if(new RegExp("\\b"+n+"\\b","i").test(s)){var r=e.pid;l[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else l[n]=function(){};return l[n]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=b,t.isSymbol=function(e){return"symbol"===i(e)},t.isUndefined=x,t.isRegExp=w,t.isObject=q,t.isDate=_,t.isError=S,t.isFunction=M,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===i(e)||void 0===e},t.isBuffer=n(509);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(78),t._extend=function(e,t){if(!t||!q(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var L="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(L&&e[L]){var t;if("function"!=typeof(t=e[L]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new r((function(e,r){t=e,n=r})),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),L&&Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=L,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(C,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,o(t)),n}}).call(this,n(52),n(11))},function(e,t,n){"use strict";var r=n(514);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Function.prototype.toString,o=/^\s*class\b/,a=function(e){try{var t=i.call(e);return o.test(t)}catch(e){return!1}},s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!==r(e))return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return!a(e)&&(i.call(e),!0)}catch(e){return!1}}(e);if(a(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"load",(function(){return o})),n.d(t,"loadPromise",(function(){return a})),n.d(t,"getFbxHierarchy",(function(){return s})),n.d(t,"analyzeFloorInfo",(function(){return l}));var r=n(0),i=n(19);function o(e,t,n){(new i.FBXLoader).load(e,(function(e){e.traverse((function(e){if(e instanceof r.Mesh){if(e.matrixAutoUpdate=!1,e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].vertexColors=!1;else e.material.vertexColors=!1;e.geometry.deleteAttribute("color")}})),t&&t(e)}),null,n)}function a(t){return console.log("fbx loadPromise called."),new e((function(e,n){o(t,(function(t){e(t)}),(function(e){n(e)}))}))}function s(e,t){var n=[];(new i.FBXLoader).load(e,(function(e){e.traverse((function(e){if(e.userData.hasOwnProperty("property")){var t=e.userData.property;if(t.hasOwnProperty("type"))if("floor"===t.type){var r=t.basement,i=0;t.hasOwnProperty("sortingorder")&&(i=parseInt(t.sortingorder));var o=null;t.hasOwnProperty("floorId")&&(o=parseInt(t.floorId)),n.push({name:e.name,order:i,basement:r,floorId:o})}}})),n.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0})),t&&t(n)}),null,(function(e){e&&console.error(e)}))}function l(e){var t=[];return e.traverse((function(e){if(e.userData.hasOwnProperty("property")){var n=e.userData.property;if(n.hasOwnProperty("type"))if("floor"===n.type){var r=n.basement,i=0;n.hasOwnProperty("sortingorder")&&(i=parseInt(n.sortingorder)),e.userData.SourceLocalPosition=e.position.clone(),t.push({name:e.name,order:i,basement:r,target:e,parent:e.parent})}}})),t.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0})),t}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"load",(function(){return a})),n.d(t,"loadPromise",(function(){return s}));var r=n(0),i=n(61),o=n(36);function a(e,t,n,a){e?(new i.MTLLoader).load(e,(function(e){e.preload(),(new o.OBJLoader).setMaterials(e).load(t,(function(e){e.traverse((function(e){if(e instanceof r.Mesh&&(e.matrixAutoUpdate=!1,e.material instanceof Array))for(var t=0;t<e.material.length;t++);})),n&&n(e)}),null,a)}),null,a):(new o.OBJLoader).load(t,(function(e){e.traverse((function(e){if(e instanceof r.Mesh)if(e.matrixAutoUpdate=!1,e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].side=r.DoubleSide;else e.material.side=r.DoubleSide})),n&&n(e)}),null,a)}function s(t,n){return console.log("obj loadPromise called."),new e((function(e,r){a(n,t,(function(t){e(t)}),(function(e){r(e)}))}))}}.call(this,n(11))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),i=n(29),o=n(80),a=n(20);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var c=function(){function e(t,n,r,i,o,a){s(this,e),this.name=t,this.helper=null,this.p1=n,this.p2=r,this.createHelper(i,o,a)}return u(e,[{key:"createHelper",value:function(e,t,n){var i=new r.Vector3,o=new r.Vector3;this.p1.getWorldPosition(i),this.p2.getWorldPosition(o);var a=(new r.Vector3).subVectors(o,i);a.normalize();var s=i.distanceTo(o);this.helper=new r.ArrowHelper(a,i,s-.5*n,16776960,e,t)}},{key:"containsPoint",value:function(e){return e.name===this.p1.name||e.name===this.p2.name}},{key:"equal",value:function(e,t){return this.p1.name===e.name&&this.p2.name===t.name}},{key:"disconnect",value:function(){var e=this.p1.userData.links.indexOf(this.p2.name);e>=0&&this.p1.userData.links.splice(e,1)}}]),e}(),h=function(){function e(t,n,o,a,l){s(this,e),this.dom=t,this.camera=n,this.control=o,this.systemGroup=a,this.modelRoot=l,this.linkHeadLength=3,this.linkHeadWidth=1,this.uiPanel=null,this.bDrag=!1,this.dragTarget=null,this.dragCoordinate=new r.Vector2,this.dragOffset=new r.Vector2,this.uiDraggingEventBinder=this.uiDragging.bind(this),this.uiKeyUpEventBinder=this.onKeyUp.bind(this),this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.rayCaster=new r.Raycaster,this.pointerDownPos=new r.Vector2;var u=new r.SphereBufferGeometry(.5,16,16),c=new r.MeshPhongMaterial({color:16711680,shininess:100});this.pointMeshSource=new r.Mesh(u,c),this.sharedRedMaterial=c,this.testStart=this.pointMeshSource.clone(),this.testStart.material=new r.MeshPhongMaterial({color:65280,shininess:100}),this.testStart.scale.setScalar(2),this.testEnd=this.testStart.clone(),this.floors={},this.topologyNodes={},this.linkHelpers=[],this.connectLinkP0=null,this.bDataVisibility=!1,this.mouseMode="default",this.gizmo=new i.TransformControls(this.camera,this.dom),this.gizmo.addEventListener("dragging-changed",this.onGizmoDragChange.bind(this)),this.gizmo.addEventListener("mouseUp",this.onGizmoMouseUp.bind(this)),this.gizmo.setSpace("world"),this.gizmo.setMode("translate"),this.systemGroup.add(this.gizmo)}return u(e,[{key:"on",value:function(e){var t=this;if(!this.uiPanel&&e){this.uiPanel=document.createElement("div"),this.uiPanel.style.position="fixed",this.uiPanel.style.fontSize="11px",this.uiPanel.style.left="10px",this.uiPanel.style.top="10px",this.uiPanel.style.padding="5px",this.uiPanel.style.background="rgba(0, 0, 0, 0.5)",this.uiPanel.style.border="1px solid",this.uiPanel.style.cursor="move",this.uiPanel.onmousedown=this.uiStartDrag.bind(this),this.uiPanel.onmouseup=this.uiStopDrag.bind(this);var n=document.createElement("label");n.style.color="white",n.innerText="토폴로지",this.uiPanel.appendChild(n),this.uiPanel.appendChild(document.createElement("br"));for(var r=this.getFloorNames(),i=0;i<r.length;i++)this.createUI_CheckBox(r[i]),this.uiPanel.appendChild(document.createElement("br"));var o=document.createElement("button");o.innerText="펼치기",o.style.background="white",o.style.fontSize="11px",o.style.fontWeight="bold",o.style.padding="0px 2px",o.onclick=function(){Model.expand(t.modelRoot,"B1",1e3,500,(function(){t.updateLink()}))},this.uiPanel.appendChild(o);var a=document.createElement("button");a.innerText="접기",a.style.background="white",a.style.fontSize="11px",a.style.fontWeight="bold",a.style.padding="0px 2px",a.style.marginLeft="5px",a.onclick=function(){Model.collapse(t.modelRoot,500,(function(){t.updateLink()}))},this.uiPanel.appendChild(a);var s=document.createElement("hr");s.style.border="solid 1px white",this.uiPanel.appendChild(s),(n=document.createElement("label")).style.color="white",n.innerText="작업",this.uiPanel.appendChild(n),this.uiPanel.appendChild(document.createElement("br"));var l=document.createElement("button");l.innerText="새 위치점에서 이어 그리기",l.style.background="white",l.style.fontSize="11px",l.style.fontWeight="bold",l.style.padding="0px 2px",l.onclick=function(){t.startNewPoint()},this.uiPanel.appendChild(l),this.uiPanel.appendChild(document.createElement("br"));var u=document.createElement("button");u.innerText="위치점만 생성하기",u.style.background="white",u.style.fontSize="11px",u.style.fontWeight="bold",u.style.padding="0px 2px",u.style.marginTop="5px",u.onclick=function(){t.startCreatePointOnly()},this.uiPanel.appendChild(u),this.uiPanel.appendChild(document.createElement("br"));var c=document.createElement("button");c.innerText="위치점 연결",c.style.background="white",c.style.fontSize="11px",c.style.fontWeight="bold",c.style.padding="0px 2px",c.style.marginTop="5px",c.onclick=function(){t.startConnect()},this.uiPanel.appendChild(c),this.uiPanel.appendChild(document.createElement("br"));var h=document.createElement("button");h.innerText="위치점 제거",h.style.background="white",h.style.fontSize="11px",h.style.fontWeight="bold",h.style.padding="0px 2px",h.style.marginTop="5px",h.onclick=function(){t.startRemovePoint()},this.uiPanel.appendChild(h),this.uiPanel.appendChild(document.createElement("br"));var p=document.createElement("button");p.innerText="연결 제거",p.style.background="white",p.style.fontSize="11px",p.style.fontWeight="bold",p.style.padding="0px 2px",p.style.marginTop="5px",p.onclick=function(){t.startRemoveLink()},this.uiPanel.appendChild(p),this.uiPanel.appendChild(document.createElement("br"));var d=document.createElement("button");d.innerText="위치점 이동",d.style.background="white",d.style.fontSize="11px",d.style.fontWeight="bold",d.style.padding="0px 2px",d.style.marginTop="5px",d.onclick=function(){t.moveNodePoint()},this.uiPanel.appendChild(d),this.uiPanel.appendChild(document.createElement("br")),this.uiPanel.appendChild(s.cloneNode()),(n=document.createElement("label")).style.color="white",n.innerText="데이터",this.uiPanel.appendChild(n),this.uiPanel.appendChild(document.createElement("br"));var m=document.createElement("button");m.innerText="내보내기",m.style.background="white",m.style.fontSize="11px",m.style.fontWeight="bold",m.style.padding="0px 2px",m.style.marginTop="5px",m.onclick=function(){t.doExport()},this.uiPanel.appendChild(m);var v=document.createElement("button");v.innerText="가져오기",v.style.background="white",v.style.fontSize="11px",v.style.fontWeight="bold",v.style.padding="0px 2px",v.style.marginTop="5px",v.style.marginLeft="5px",v.onclick=function(){t.doImport("../topologySample.json")},this.uiPanel.appendChild(v),this.uiPanel.appendChild(s.cloneNode()),(n=document.createElement("label")).style.color="white",n.innerText="길찾기 테스트",this.uiPanel.appendChild(n),this.uiPanel.appendChild(document.createElement("br"));var g=document.createElement("button");g.innerText="시작점 설정",g.style.background="white",g.style.fontSize="11px",g.style.fontWeight="bold",g.style.padding="0px 2px",g.style.marginTop="5px",g.onclick=function(){t.startSetStartPoint()},this.uiPanel.appendChild(g);var y=document.createElement("button");y.innerText="종료점 설정",y.style.background="white",y.style.fontSize="11px",y.style.fontWeight="bold",y.style.padding="0px 2px",y.style.marginTop="5px",y.style.marginLeft="5px",y.onclick=function(){t.startSetEndPoint()},this.uiPanel.appendChild(y),this.uiPanel.appendChild(document.createElement("br"));var b=document.createElement("button");b.innerText="테스트",b.style.background="white",b.style.fontSize="11px",b.style.fontWeight="bold",b.style.padding="0px 2px",b.style.marginTop="5px",b.onclick=function(){t.doTest()},this.uiPanel.appendChild(b),this.logWindow=new f,this.logWindow.create(),this.logWindow.getDom().onmousedown=this.uiStartDrag.bind(this),this.logWindow.getDom().onmouseup=this.uiStopDrag.bind(this),e?(this.uiPanel.style.display="",this.logWindow.getDom().style.display=""):(this.uiPanel.style.display="none",this.logWindow.getDom().style.display="none"),this.dom.appendChild(this.uiPanel),this.dom.appendChild(this.logWindow.getDom())}this.dom.addEventListener("keyup",this.uiKeyUpEventBinder),this.dom.addEventListener("pointerdown",this.pointerDownBinder),this.dom.addEventListener("pointermove",this.pointerMoveBinder),this.dom.addEventListener("pointerup",this.pointerUpBinder),this.systemGroup.add(this.testStart),this.systemGroup.add(this.testEnd)}},{key:"off",value:function(){this.lastCreatedNode=null,this.mouseMode="default",this.uiPanel&&this.dom.removeChild(this.uiPanel),this.logWindow&&this.dom.removeChild(this.logWindow.getDom()),this.dom.removeEventListener("keyup",this.uiKeyUpEventBinder),this.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.dom.removeEventListener("pointerup",this.pointerUpBinder),this.systemGroup.remove(this.testStart),this.systemGroup.remove(this.testEnd)}},{key:"getFloorNames",value:function(){var e=this,t=[];return this.modelRoot.traverse((function(n){if(n.userData.hasOwnProperty("property")){var r=n.userData.property;if(r.hasOwnProperty("type"))"floor"===r.type&&(t.push(n.name),e.floors[n.name]=n)}})),t}},{key:"createUI_CheckBox",value:function(e){var t=document.createElement("input");t.type="checkbox",t.name=e,t.value=e,t.checked=!0,t.setAttribute("checked","true"),t.onchange=this.onFloorCheckboxValueChange.bind(this,t),this.uiPanel.appendChild(t);var n=document.createElement("label");n.style.color="white",n.innerText=e,this.uiPanel.appendChild(n)}},{key:"onFloorCheckboxValueChange",value:function(e){var t=this.modelRoot.getObjectByName(e.value);t&&t.traverse((function(t){t.visible=e.checked,t.layers.set(e.checked?0:1)}))}},{key:"uiStartDrag",value:function(e){e||(e=window.event),this.dragTarget=e.target?e.target:e.srcElement,this.dragOffset.x=e.clientX,this.dragOffset.y=e.clientY,this.dragTarget.style.left||(this.dragTarget.style.left="0px"),this.dragTarget.style.top||(this.dragTarget.style.top="0px"),this.dragCoordinate.x=parseInt(this.dragTarget.style.left),this.dragCoordinate.y=parseInt(this.dragTarget.style.top),this.bDrag=!0,this.dragTarget.onmousemove=this.uiDragging.bind(this)}},{key:"uiDragging",value:function(e){return!!this.bDrag&&(e||(e=window.event),this.dragTarget=e.target?e.target:e.srcElement,this.dragTarget.style.left=this.dragCoordinate.x+e.clientX-this.dragOffset.x+"px",this.dragTarget.style.top=this.dragCoordinate.y+e.clientY-this.dragOffset.y+"px",!1)}},{key:"uiStopDrag",value:function(e){this.bDrag=!1,this.dragTarget.onmousemove=null}},{key:"onKeyUp",value:function(e){"r"===e.key||"R"===e.key?(this.uiPanel.style.left="10px",this.uiPanel.style.top="10px",this.logWindow.getDom().style.left="300px",this.logWindow.getDom().style.top="100px",this.bDrag=!1):"escape"!==e.key.toLowerCase()&&"esc"!==e.key.toLowerCase()||this.gizmo.detach()}},{key:"onPointerDown",value:function(e){var t=e.target;t&&("canvas"===t.tagName.toLowerCase()&&0===e.button&&(this.pointerDownPos.x=e.screenX,this.pointerDownPos.y=e.screenY))}},{key:"onPointerMove",value:function(e){}},{key:"onPointerUp",value:function(e){var t=e.target;if(t&&("canvas"===t.tagName.toLowerCase()&&0===e.button))if("default"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var n=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(n,this.camera);var i=this.rayCaster.intersectObjects(this.modelRoot.children,!0);if(i&&i.length>0){var o=i[0].point.clone(),a=i[0].face.normal.clone();a.transformDirection(i[0].object.matrixWorld),o=o.addScaledVector(a,.5);var s=this.pointMeshSource.clone();s.name=s.uuid,s.userData.links=[],this.systemGroup.add(s),s.position.copy(o);var l=this.findFloorFromParent(i[0].object);l&&(s.userData.targetFloor=l.name,this.systemGroup.remove(s),l.attach(s)),this.topologyNodes[s.name]=s,this.lastCreatedNode&&this.connectLinkBoth(this.lastCreatedNode,s),this.lastCreatedNode=s,this.logWindow&&this.logWindow.addLog("위치점 추가 ["+s.userData.targetFloor+"]")}}}else if("connectLink"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var u=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(u,this.camera);var c=this.rayCaster.intersectObjects(Object.values(this.topologyNodes),!0);if(c&&c.length>0)if(this.connectLinkP0){if(this.connectLinkP0&&this.connectLinkP0.name!==c[0].object.name){var h=this.connectLinkP0,f=c[0].object;this.isAlreadyExistsLink(h,f)?(alert("이미 연결되어 있는 위치점 입니다."),this.logWindow&&this.logWindow.addLog("위치점 연결 오류: 이미 연결된 위치점"),h instanceof r.Mesh&&(h.material=this.sharedRedMaterial),this.connectLinkP0=null):(this.logWindow&&this.logWindow.addLog("위치점 연결 종료 설정"),this.connectLinkOneWay(h,f),this.connectLinkOneWay(f,h),this.logWindow&&this.logWindow.addLog("위치점 연결"),h instanceof r.Mesh&&(h.material=this.sharedRedMaterial),this.connectLinkP0=null)}}else this.connectLinkP0=c[0].object,this.logWindow&&this.logWindow.addLog("위치점 연결 시작 설정"),this.connectLinkP0 instanceof r.Mesh&&(this.connectLinkP0.material=new r.MeshPhongMaterial({color:65280,shininess:100}))}}else if("removePoint"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var p=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(p,this.camera);var d=this.rayCaster.intersectObjects(Object.values(this.topologyNodes),!0);d&&d.length>0&&this.removePoint(d[0].object)}}else if("removeLink"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var m=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(m,this.camera);var v=this.getLinkPickingObjects(),g=this.rayCaster.intersectObjects(v,!0);g&&g.length>0&&"Line"!==g[0].object.type&&this.removeLink(g[0].object)}}else if("setStartPoint"===this.mouseMode||"setEndPoint"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var y=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(y,this.camera);var b=this.rayCaster.intersectObjects(this.modelRoot.children,!0);if(b&&b.length>0){var x=b[0].point.clone();"setStartPoint"===this.mouseMode?this.testStart.position.copy(x):"setEndPoint"===this.mouseMode&&this.testEnd.position.copy(x)}}}else if("createPointOnly"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var w=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(w,this.camera);var q=this.rayCaster.intersectObjects(this.modelRoot.children,!0);if(q&&q.length>0){var _=q[0].point.clone(),S=q[0].face.normal.clone();S.transformDirection(q[0].object.matrixWorld),_=_.addScaledVector(S,.5);var M=this.pointMeshSource.clone();M.name=M.uuid,M.userData.links=[],this.systemGroup.add(M),M.position.copy(_);var E=this.findFloorFromParent(q[0].object);E&&(M.userData.targetFloor=E.name,this.systemGroup.remove(M),E.attach(M)),this.topologyNodes[M.name]=M,this.logWindow&&this.logWindow.addLog("위치점 추가 ["+M.userData.targetFloor+"]")}}}else if("movePoint"===this.mouseMode){if(new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos)<5){var T=new r.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1);this.rayCaster.setFromCamera(T,this.camera);var P=this.rayCaster.intersectObjects(Object.values(this.topologyNodes),!0);P&&P.length>0?this.gizmo.attach(P[0].object):this.gizmo.detach()}}}},{key:"getLinkPickingObjects",value:function(){for(var e=[],t=0;t<this.linkHelpers.length;t++)e.push(this.linkHelpers[t].helper);return e}},{key:"findFloorFromParent",value:function(e){if(e.userData.hasOwnProperty("property")){var t=e.userData.property;if(t.hasOwnProperty("type")){var n=t.type;if("floor"===n||"floorroot"===n)return e}}if(e.userData.hasOwnProperty("Type")&&"SBMFLOOR"===e.userData.Type)return e;if(e.userData.hasOwnProperty("type")&&"floorroot"===e.userData.type)return e;if(e.parent){var r=this.findFloorFromParent(e.parent);if(r)return r}}},{key:"isAlreadyExistsLink",value:function(e,t){for(var n=0;n<this.linkHelpers.length;n++){if(this.linkHelpers[n].equal(e,t))return!0}return!1}},{key:"connectLinkBoth",value:function(e,t){-1===e.userData.links.indexOf(t.name)&&e.userData.links.push(t.name),-1===t.userData.links.indexOf(e.name)&&t.userData.links.push(e.name);var n=new c(r.Math.generateUUID(),e,t,this.headLength,this.headWidth,this.pointMeshSource.scale.x);this.systemGroup.add(n.helper),this.linkHelpers.push(n),n.helper.visible=this.bDataVisibility,n=new c(r.Math.generateUUID(),t,e,this.headLength,this.headWidth,this.pointMeshSource.scale.x),this.systemGroup.add(n.helper),this.linkHelpers.push(n),n.helper.visible=this.bDataVisibility}},{key:"connectLinkOneWay",value:function(e,t){-1===e.userData.links.indexOf(t.name)&&e.userData.links.push(t.name);var n=new c(r.Math.generateUUID(),e,t,this.headLength,this.headWidth,this.pointMeshSource.scale.x);this.systemGroup.add(n.helper),this.linkHelpers.push(n),n.helper.visible=this.bDataVisibility}},{key:"updateLink",value:function(){for(var e=0;e<this.linkHelpers.length;e++){var t=this.linkHelpers[e];this.systemGroup.remove(t.helper),t.helper=null,t.createHelper(this.headLength,this.headWidth,this.pointMeshSource.scale.x),t.helper.visible=this.bDataVisibility,this.systemGroup.add(t.helper)}}},{key:"removePoint",value:function(e){var t=e.parent;t.remove(e),t.updateMatrix();for(var n=[],r=0;r<this.linkHelpers.length;r++){var i=this.linkHelpers[r];i.containsPoint(e)&&n.push(i)}for(var o=0;o<n.length;o++){var a=n[o];a.disconnect(),this.systemGroup.remove(a.helper);var s=this.linkHelpers.indexOf(a);s>=0&&this.linkHelpers.splice(s,1)}var l=e.name;this.topologyNodes.hasOwnProperty(l)&&delete this.topologyNodes[l],this.logWindow&&this.logWindow.addLog("위치점 제거")}},{key:"removeLink",value:function(e){if(e.parent instanceof r.ArrowHelper){for(var t=e.parent,n=null,i=0;i<this.linkHelpers.length;i++)if(this.linkHelpers[i].helper.uuid===t.uuid){n=this.linkHelpers[i];break}if(n){n.disconnect(),this.systemGroup.remove(n.helper);var o=this.linkHelpers.indexOf(n);o>=0&&this.linkHelpers.splice(o,1),this.logWindow&&this.logWindow.addLog("연결 제거")}}}},{key:"startNewPoint",value:function(){this.lastCreatedNode=null,this.logWindow&&this.logWindow.addLog("새로 이어 그리기 시작"),this.mouseMode="default",this.gizmo.detach()}},{key:"startCreatePointOnly",value:function(){this.lastCreatedNode=null,this.logWindow&&this.logWindow.addLog("위치점만 생성하기 시작"),this.mouseMode="createPointOnly",this.gizmo.detach()}},{key:"startConnect",value:function(){this.logWindow&&this.logWindow.addLog("위치점 연결 시작"),this.mouseMode="connectLink",this.gizmo.detach()}},{key:"startRemovePoint",value:function(){this.logWindow&&this.logWindow.addLog("위치점 제거 시작"),this.mouseMode="removePoint",this.gizmo.detach()}},{key:"startRemoveLink",value:function(){this.logWindow&&this.logWindow.addLog("연결 제거 시작"),this.mouseMode="removeLink",this.gizmo.detach()}},{key:"startSetStartPoint",value:function(){this.logWindow&&this.logWindow.addLog("길찾기 테스트: 시작점 설정"),this.mouseMode="setStartPoint",this.gizmo.detach()}},{key:"startSetEndPoint",value:function(){this.logWindow&&this.logWindow.addLog("길찾기 테스트: 종료점 설정"),this.mouseMode="setEndPoint",this.gizmo.detach()}},{key:"moveNodePoint",value:function(){this.logWindow&&this.logWindow.addLog("위치점 이동"),this.mouseMode="movePoint"}},{key:"doTest",value:function(){this.gizmo.detach();var e=this.testStart.position.clone(),t=this.testEnd.position.clone(),n=o.a(e,t,this);n.length>0?(a.a(this.systemGroup),a.c(this.systemGroup,[n]),this.logWindow&&this.logWindow.addLog("길찾기 테스트: 경로찾기 완료")):this.logWindow&&this.logWindow.addLog("길찾기 테스트: 유효한 경로가 없음")}},{key:"clear",value:function(){for(var e=0;e<this.linkHelpers.length;e++){var t=this.linkHelpers[e];this.systemGroup.remove(t.helper)}for(var n in this.linkHelpers=[],this.topologyNodes){var r=this.topologyNodes[n],i=r.parent;i?i.remove(r):this.systemGroup.remove(r)}this.topologyNodes={},this.lastCreatedNode=null,this.logWindow&&this.logWindow.addLog("모든 데이터 제거")}},{key:"doExport",value:function(){for(var e={points:[]},t=Object.values(this.topologyNodes),n=0;n<t.length;n++)e.points.push({name:t[n].name,targetFloor:t[n].userData.targetFloor,localPosition:{x:t[n].position.x,y:t[n].position.y,z:t[n].position.z},links:t[n].userData.links});var r=document.createElement("a");r.style.display="none",document.body.appendChild(r),r.href=URL.createObjectURL(new Blob([JSON.stringify(e,null,4)],{type:"text/plain"})),r.download="topology.json",r.click(),document.body.removeChild(r),this.logWindow&&this.logWindow.addLog("내보내기 완료")}},{key:"doExportToJson",value:function(){for(var e={points:[]},t=Object.values(this.topologyNodes),n=0;n<t.length;n++)e.points.push({name:t[n].name,targetFloor:t[n].userData.targetFloor,localPosition:{x:t[n].position.x,y:t[n].position.y,z:t[n].position.z},links:t[n].userData.links});return e}},{key:"doImport",value:function(e,t,n){var r=this,i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){if(i.readyState===i.DONE&&200===i.status){var t=i.response;if("string"==typeof t&&(t=JSON.parse(t)),r.clear(),t.hasOwnProperty("points")){for(var o=t.points,a=0;a<o.length;a++){var s=o[a],l=r.pointMeshSource.clone();l.name=s.name,l.userData.links=s.links.slice(),l.visible=r.bDataVisibility;var u=e.getFloor(s.targetFloor);u&&(l.userData.targetFloor=s.targetFloor,u.attach(l),l.position.set(s.localPosition.x,s.localPosition.y,s.localPosition.z)),r.topologyNodes[s.name]=l}for(var c in r.topologyNodes)for(var h=r.topologyNodes[c],f=h.userData.links,p=0;p<f.length;p++){var d=r.topologyNodes[f[p]];r.connectLinkOneWay(h,d)}r.logWindow&&r.logWindow.addLog("가져오기 완료")}n&&n()}},i.send()}},{key:"doImportJson",value:function(e,t,n){if("string"==typeof t&&(t=JSON.parse(t)),this.clear(),t.hasOwnProperty("points")){for(var r=t.points,i=0;i<r.length;i++){var o=r[i],a=this.pointMeshSource.clone();a.name=o.name,a.userData.links=o.links.slice(),a.visible=this.bDataVisibility;var s=e.getFloor(o.targetFloor);s&&(a.userData.targetFloor=o.targetFloor,s.attach(a),a.position.set(o.localPosition.x,o.localPosition.y,o.localPosition.z)),this.topologyNodes[o.name]=a}for(var l in this.topologyNodes)for(var u=this.topologyNodes[l],c=u.userData.links,h=0;h<c.length;h++){var f=this.topologyNodes[c[h]];this.connectLinkOneWay(u,f)}this.logWindow&&this.logWindow.addLog("가져오기 완료")}n&&n()}},{key:"setDataVisibility",value:function(e){for(var t in this.topologyNodes){this.topologyNodes[t].visible=e}for(var n=0;n<this.linkHelpers.length;n++){this.linkHelpers[n].helper.visible=e}this.bDataVisibility=e}},{key:"getNearlestNode",value:function(e,t){var n=null,i=1/0;for(var o in this.topologyNodes){var a=this.topologyNodes[o],s=new r.Vector3;a.getWorldPosition(s);var l=!0;t&&(l=t===a.userData.targetFloor);var u=s.distanceTo(e);u<i&&l&&(n=a,i=u)}return n}},{key:"getNodeByName",value:function(e){return this.topologyNodes[e]}},{key:"onGizmoDragChange",value:function(e){this.control.enabled=!e.value}},{key:"onGizmoMouseUp",value:function(){this.updateLink()}},{key:"setPointSize",value:function(e){for(var t in this.pointMeshSource.scale.setScalar(e),this.topologyNodes)this.topologyNodes[t].scale.setScalar(e)}},{key:"setArrowSize",value:function(e,t){this.headLength=e,this.headWidth=t,this.updateLink()}}]),e}(),f=function(){function e(){s(this,e),this.logWindow=null,this.logArea=null}return u(e,[{key:"create",value:function(){this.logWindow=document.createElement("div"),this.logWindow.style.position="fixed",this.logWindow.style.fontSize="11px",this.logWindow.style.left="300px",this.logWindow.style.top="100px",this.logWindow.style.width="300px",this.logWindow.style.height="100px",this.logWindow.style.background="rgba(0, 0, 0, 0.5)",this.logWindow.style.color="white",this.logWindow.style.border="1px solid",this.logWindow.style.borderColor="black",this.logWindow.style.textAlign="center",this.logWindow.style.cursor="move";var e=document.createElement("label");e.innerText="작업로그",this.logWindow.appendChild(e);var t=document.createElement("div");return t.style.height="85px",t.style.overflow="scroll",t.style.textAlign="left",this.logWindow.appendChild(t),this.logArea=document.createElement("ul"),t.appendChild(this.logArea),this.logWindow}},{key:"getDom",value:function(){return this.logWindow}},{key:"addLog",value:function(e){var t=document.createElement("li");t.innerText=e,this.logArea.appendChild(t),this.logArea.childNodes.length>5&&this.logArea.removeChild(this.logArea.firstChild)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(29);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.targetLine=n,this.curveIndex=o,this.editType=a;var s=this.targetLine.getPositionByCurveInfo(o,a);this.dummy=new r.Object3D,this.dummy.position.copy(s),this.core.sysObjGroup.add(this.dummy),this.gizmo=new i.TransformControls(this.core.getCamera(),this.core.dom),this.gizmo.addEventListener("dragging-changed",this.onGizmoDragChange.bind(this)),this.gizmo.addEventListener("objectChange",this.onGizmoObjectChange.bind(this)),this.gizmo.setSpace("world"),this.gizmo.setMode("translate"),this.gizmo.showY=!1,this.core.sysObjGroup.add(this.gizmo),this.gizmo.attach(this.dummy)}var t,n,a;return t=e,(n=[{key:"onGizmoDragChange",value:function(e){this.core.getCameraControl().enabled=!e.value}},{key:"onGizmoObjectChange",value:function(){this.targetLine.updateCurvePoint(this.curveIndex,this.editType,this.dummy.position)}},{key:"finish",value:function(){this.gizmo.detach(),this.core.sysObjGroup.remove(this.gizmo),this.gizmo.dispose(),this.core.sysObjGroup.remove(this.dummy)}}])&&o(t.prototype,n),a&&o(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0),n(2),n(80),n(129);var r=null;function i(e){r&&r.update(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"setCoreInstance",(function(){return o})),n.d(t,"Show",(function(){return a})),n.d(t,"Hide",(function(){return s})),n.d(t,"SetColor",(function(){return l})),n.d(t,"RestoreColor",(function(){return u}));var r,i=n(0);function o(e){r=e}function a(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var n=r.workObjGroup.getObjectByName(e[t]);n&&(n.visible=!0)}else{var i=r.workObjGroup.getObjectByName(e);i&&(i.visible=!0)}}function s(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var n=r.workObjGroup.getObjectByName(e[t]);n&&(n.visible=!1)}else{var i=r.workObjGroup.getObjectByName(e);i&&(i.visible=!1)}}function l(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++){var o=r.workObjGroup.getObjectByName(e[n]);o&&(o.userData.bMaterialCloned?(o.material.dispose(),o.material=o.userData.SourceMaterial.clone()):(o.userData.SourceMaterial=o.material,o.material=o.userData.SourceMaterial.clone()),o.material.color=new i.Color(t),o.userData.bMaterialCloned=!0)}else{var a=r.workObjGroup.getObjectByName(e);a&&(a.userData.bMaterialCloned?(a.material.dispose(),a.material=a.userData.SourceMaterial.clone()):(a.userData.SourceMaterial=a.material,a.material=a.userData.SourceMaterial.clone()),a.material.color=new i.Color(t),a.userData.bMaterialCloned=!0)}}function u(e){if(e instanceof Array)for(var t=0;t<e.length;t++){var n=r.workObjGroup.getObjectByName(e[t]);n&&n.userData.bMaterialCloned&&(n.material.dispose(),n.material=n.userData.SourceMaterial,n.userData.bMaterialCloned=!1)}else{var i=r.workObjGroup.getObjectByName(e);i&&i.userData.bMaterialCloned&&(i.material.dispose(),i.material=i.userData.SourceMaterial,i.userData.bMaterialCloned=!1)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return v})),n.d(t,"Import",(function(){return y})),n.d(t,"GetLineNames",(function(){return b})),n.d(t,"SetSize",(function(){return x})),n.d(t,"SetSizeAll",(function(){return w})),n.d(t,"SetColor",(function(){return q})),n.d(t,"SetColorAll",(function(){return _})),n.d(t,"SetSpeed",(function(){return S})),n.d(t,"SetSpeedAll",(function(){return M})),n.d(t,"SetSpawnTime",(function(){return E})),n.d(t,"SetSpawnTimeAll",(function(){return T})),n.d(t,"Show",(function(){return P})),n.d(t,"ShowAll",(function(){return A})),n.d(t,"Hide",(function(){return O})),n.d(t,"HideAll",(function(){return L})),n.d(t,"ShowLineModel",(function(){return C})),n.d(t,"HideLineModel",(function(){return D}));var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=null,c=null,h=null,f=null,p=[],d=10,m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,s(t).call(this))).SharedGeometry=new r.SphereBufferGeometry(25,16,16),n.SharedMaterial=new r.MeshPhongMaterial({color:16776960,shininess:100}),n.spawnCheck=0,n.spawnTime=1,n.movableObjects=[],n.bVisibleFlag=!0,n.name=e.lineName,n.curves=[],n.createCurves(e),n.moveInterval=1e3/n.TotalLength,n}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(i=[{key:"createCurves",value:function(e){for(var t=0;t<e.points.length-1;t++){var n=new r.Vector3(e.points[t].x,e.points[t].y,e.points[t].z),i=new r.Vector3(e.points[t+1].x,e.points[t+1].y,e.points[t+1].z);n.multiplyScalar(d),i.multiplyScalar(d),this.curves.push(new r.LineCurve3(n.clone(),i.clone()))}}},{key:"update",value:function(e){this.spawnCheck+=e,this.spawnCheck>=this.spawnTime&&(this.spawnCheck=0,this.spawnMovable()),this.updateMovable(e),this.removeFinished()}},{key:"spawnMovable",value:function(){var e=new r.Mesh(this.SharedGeometry,this.SharedMaterial);e.userData.MovableRatio=0,this.add(e),this.movableObjects.push(e)}},{key:"updateMovable",value:function(e){var t=this;this.movableObjects.forEach((function(n){if(n.userData.MovableRatio+=t.moveInterval*e,n.userData.MovableRatio>=1)n.userData.IsFinished=!0;else{var r=t.getMovablePosition(n.userData.MovableRatio);n.position.copy(r)}n.visible=t.bVisibleFlag}))}},{key:"removeFinished",value:function(){for(var e=this.movableObjects.length-1;e>=0;e--)this.movableObjects[e].userData.IsFinished&&(this.remove(this.movableObjects[e]),this.movableObjects.splice(e,1))}},{key:"getMovablePosition",value:function(e){e=r.Math.clamp(e,0,1);for(var t=this.TotalLength*e,n=0;n<this.curves.length;n++){var i=this.curves[n].getLength();if(t<=i){var o=t/i;return this.curves[n].getPoint(o)}t-=i}return null}},{key:"setSize",value:function(e){var t=this;this.SharedGeometry.dispose(),this.SharedGeometry=new r.SphereBufferGeometry(e,16,16),this.movableObjects.forEach((function(e){e.geometry=t.SharedGeometry}))}},{key:"setColor",value:function(e){this.SharedMaterial.color=new r.Color(e)}},{key:"setSpeed",value:function(e){this.moveInterval=e/this.TotalLength}},{key:"setSpawnTime",value:function(e){this.spawnTime=e}},{key:"setVisible",value:function(e){this.bVisibleFlag=e}},{key:"TotalLength",get:function(){for(var e=0,t=0;t<this.curves.length;t++)e+=this.curves[t].getLength();return e}}])&&o(n.prototype,i),u&&o(n,u),t}(r.Object3D);function v(e){u=e.sysObjGroup,c=e.workObjGroup,h=new r.Object3D,u.add(h),f=new r.Clock,g()}function g(){requestAnimationFrame(g);var e=f.getDelta();for(var t in p)p[t].update(e)}function y(e,t,n){d=t||10;var r=e;"string"==typeof r&&(r=JSON.parse(r));var i=r.lines;for(var o in i){var a=i[o];p[a.lineName]=new m(a),h.add(p[a.lineName])}n&&n(b())}function b(){return Object.keys(p)}function x(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n]in p&&p[e[n]].setSize(t);else e in p&&p[e].setSize(t)}function w(e){for(var t in p)p[t].setSize(e)}function q(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n]in p&&p[e[n]].setColor(t);else e in p&&p[e].setColor(t)}function _(e){for(var t in p)p[t].setColor(e)}function S(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n]in p&&p[e[n]].setSpeed(t);else e in p&&p[e].setSpeed(t)}function M(e){for(var t in p)p[t].setSpeed(e)}function E(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n]in p&&p[e[n]].setSpawnTime(t);else e in p&&p[e].setSpawnTime(t)}function T(e){for(var t in p)p[t].setSpawnTime(e)}function P(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]in p&&p[e[t]].setVisible(!0);else e in p&&p[e].setVisible(!0)}function A(){for(var e in p)p[e].setVisible(!0)}function O(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]in p&&p[e[t]].setVisible(!1);else e in p&&p[e].setVisible(!1)}function L(){for(var e in p)p[e].setVisible(!1)}function C(e){var t=c.getObjectByName(e);t&&(t.visible=!0)}function D(e){var t=c.getObjectByName(e);t&&(t.visible=!1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"setCoreInstance",(function(){return l})),n.d(t,"MoveTo",(function(){return u})),n.d(t,"SetPosition",(function(){return c})),n.d(t,"Stop",(function(){return h}));var r=n(0),i=null,o=null,a=null,s=0;function l(e){i=e}function u(e,t,n,l,u){if(e in i.poiMgr.poiList){var c=i.poiMgr.poiList[e],h=c.position.clone(),f=new r.Vector3(n,l,u);a&&cancelAnimationFrame(a),s=0,o=new r.Clock,function e(){a=requestAnimationFrame(e);var n=o.getDelta();s+=t*n;var i=(new r.Vector3).lerpVectors(h,f,s);c.position.copy(i),c.updateMatrix(),c.pointObject.lookAt(f),s>=1&&cancelAnimationFrame(a)}()}}function c(e,t,n,o){if(e in i.poiMgr.poiList){var s=i.poiMgr.poiList[e],l=new r.Vector3(t,n,o);a&&cancelAnimationFrame(a),s.position.copy(l),s.updateMatrix()}}function h(){a&&cancelAnimationFrame(a)}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0),o=i.Raycaster,a=i.Plane,s=i.Vector2,l=i.Vector3,u=n(56),c=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.target=n,this.onComplete=r,this.onCancel=i,this.rayCast=new o,this.groundPlane=new a(new l(0,1,0),0),this.mouseDownPos=new s,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.keyUpBinder=this.onKeyUp.bind(this)}var t,n,i;return t=e,(n=[{key:"on",value:function(){window.addEventListener("pointerdown",this.pointerDownBinder,!1),window.addEventListener("pointermove",this.pointerMoveBinder,!1),window.addEventListener("pointerup",this.pointerUpBinder,!1),window.addEventListener("keyup",this.keyUpBinder,!1)}},{key:"off",value:function(){window.removeEventListener("pointerdown",this.pointerDownBinder),window.removeEventListener("pointermove",this.pointerMoveBinder),window.removeEventListener("pointerup",this.pointerUpBinder),window.removeEventListener("keyup",this.keyUpBinder)}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){if(this.target){var t=new s(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1);if(this.rayCast.setFromCamera(t,this.core.getCamera()),u.isPicking()){var n=u.getPickTargets(),r=this.rayCast.intersectObjects(n,!0);if(r&&r.length>0){var i=r[0].point;this.target.setPosition(i.x,i.y,i.z,!1),this.target.userData.property.floorNo=r[0].object.userData.property.sortingorder,this.target.userData.property.unitSpaceName=r[0].object.userData.property.unitSpaceName}}else{var o=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(o&&o.length>0){var a=o[0].point;this.target.setPosition(a.x,a.y,a.z,!1);var c=this.findFloorFromParent(o[0].object);if(c)if(c.userData.hasOwnProperty("property")){var h=c.userData.property;h.hasOwnProperty("sortingorder")&&(this.target.userData.property.floorNo=h.sortingorder)}else c.userData.hasOwnProperty("groupId")&&(this.target.userData.property.floorNo=c.userData.groupId)}else{var f=new l;this.rayCast.ray.intersectPlane(this.groundPlane,f)&&this.target.setPosition(f.x,f.y,f.z,!1)}}}}},{key:"onPointerUp",value:function(e){var t=new s(e.screenX,e.screenY);0===e.button&&t.distanceTo(this.mouseDownPos)<5&&this.onComplete&&(this.onComplete(),this.off())}},{key:"onKeyUp",value:function(e){"escape"!==e.key.toLowerCase()&&"esc"!==e.key.toLowerCase()||this.onCancel&&(this.onCancel(),this.off())}},{key:"findFloorFromParent",value:function(e){if(e.userData.hasOwnProperty("property")){var t=e.userData.property;if(t.hasOwnProperty("type")&&"floor"===t.type)return e}if(e.userData.hasOwnProperty("Type")&&"SBMFLOOR"===e.userData.Type)return e;if(e.parent){var n=this.findFloorFromParent(e.parent);if(n)return n}}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports={PxPoiMousePlacer:c}},function(e,t,n){e.exports=!n(13)&&!n(7)((function(){return 7!=Object.defineProperty(n(137)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){t.f=n(9)},function(e,t,n){var r=n(30),i=n(31),o=n(104)(!1),a=n(139)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(14),i=n(4),o=n(69);e.exports=n(13)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(31),o=n(72).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(i(e))}},function(e,t,n){"use strict";var r=n(69),i=n(105),o=n(94),a=n(18),s=n(93),l=Object.assign;e.exports=!l||n(7)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=i.f,h=o.f;l>u;)for(var f,p=s(arguments[u++]),d=c?r(p).concat(c(p)):r(p),m=d.length,v=0;m>v;)h.call(p,f=d[v++])&&(n[f]=p[f]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(21),i=n(8),o=n(205),a=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function r(){var i=n.concat(a.call(arguments));return this instanceof r?l(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6).parseInt,i=n(85).trim,o=n(143),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(6).parseFloat,i=n(85).trim;e.exports=1/r(n(143)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(42);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(8),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(146),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),l=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),u=r(e);return i<l?u*(i/l/a+1/o-1/o)*l*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?u*(1/0):u*n}},function(e,t,n){var r=n(4);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(21),i=n(18),o=n(93),a=n(10);e.exports=function(e,t,n,s,l){r(t);var u=i(e),c=o(u),h=a(u.length),f=l?h-1:0,p=l?-1:1;if(n<2)for(;;){if(f in c){s=c[f],f+=p;break}if(f+=p,l?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;l?f>=0:h>f;f+=p)f in c&&(s=t(s,c[f],f,u));return s}},function(e,t,n){"use strict";var r=n(18),i=n(70),o=n(10);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),l=i(t,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:i(u,a))-l,a-s),h=1;for(l<s&&s<l+c&&(h=-1,l+=c-1,s+=c-1);c-- >0;)l in n?n[s]=n[l]:delete n[s],s+=h,l+=h;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(158);n(1)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(13)&&"g"!=/./g.flags&&n(14).f(RegExp.prototype,"flags",{configurable:!0,get:n(95)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(4),i=n(8),o=n(162);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(221),i=n(77);e.exports=n(113)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(14).f,i=n(71),o=n(76),a=n(41),s=n(74),l=n(75),u=n(148),c=n(215),h=n(73),f=n(13),p=n(59).fastKey,d=n(77),m=f?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e((function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&l(r,n,e[u],e)}));return o(c.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=d(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){d(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(d(this,t),e)}}),f&&r(c.prototype,"size",{get:function(){return d(this,t)[m]}}),c},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=d(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))}),n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){"use strict";var r=n(221),i=n(77);e.exports=n(113)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(6),o=n(48)(0),a=n(27),s=n(59),l=n(202),u=n(224),c=n(8),h=n(77),f=n(77),p=!i.ActiveXObject&&"ActiveXObject"in i,d=s.getWeak,m=Object.isExtensible,v=u.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=d(e);return!0===t?v(h(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(h(this,"WeakMap"),e,t)}},b=e.exports=n(113)("WeakMap",g,y,u,!0,!0);f&&p&&(l((r=u.getConstructor(g,"WeakMap")).prototype,y),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=b.prototype,n=t[e];a(t,e,(function(t,i){if(c(t)&&!m(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(76),i=n(59).getWeak,o=n(4),a=n(8),s=n(74),l=n(75),u=n(48),c=n(30),h=n(77),f=u(5),p=u(6),d=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return f(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=d++,e._l=void 0,null!=r&&l(r,n,e[o],e)}));return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(h(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(h(this,t)).has(e):n&&c(n,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(43),i=n(10);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(72),i=n(105),o=n(4),a=n(6).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(106),i=n(8),o=n(10),a=n(41),s=n(9)("isConcatSpreadable");e.exports=function e(t,n,l,u,c,h,f,p){for(var d,m,v=c,g=0,y=!!f&&a(f,p,3);g<u;){if(g in l){if(d=y?y(l[g],g,n):l[g],m=!1,i(d)&&(m=void 0!==(m=d[s])?!!m:r(d)),m&&h>0)v=e(t,n,d,o(d.length),v,h-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=d}v++}g++}return v}},function(e,t,n){var r=n(10),i=n(145),o=n(46);e.exports=function(e,t,n,a){var s=String(o(e)),l=s.length,u=void 0===n?" ":String(n),c=r(t);if(c<=l||""==u)return s;var h=c-l,f=i.call(u,Math.ceil(h/u.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},function(e,t,n){var r=n(69),i=n(31),o=n(94).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),l=s.length,u=0,c=[];l>u;)o.call(a,n=s[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t,n){var r=n(84),i=n(231);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(75);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},function(e,t,n){(function(){var t,r,i,o,a,s,l,u={}.hasOwnProperty;l=n(53).isPlainObject,i=n(234),r=n(484),o=n(34),t=n(15),s=n(238),a=n(179),e.exports=function(e){function n(e){n.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new r,e||(e={}),e.writer||(e.writer=new a),this.options=e,this.stringify=new s(e)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"implementation",{value:new i}),Object.defineProperty(n.prototype,"doctype",{get:function(){var e,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++)if((e=i[n]).type===t.DocType)return e;return null}}),Object.defineProperty(n.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(n.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(n.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(n.prototype,"origin",{get:function(){return null}}),Object.defineProperty(n.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(n.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(n.prototype,"contentType",{get:function(){return null}}),n.prototype.end=function(e){var t;return t={},e?l(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},n.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},n.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.renameNode=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createNodeIterator=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTreeWalker=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(o)}).call(this)},function(e,t,n){(function(){var t;t=n(15),n(34),e.exports=function(){function e(e,n,r){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&(e.prefix===this.prefix&&(e.localName===this.localName&&e.value===this.value))},e}()}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(34),t=n(15),e.exports=function(e){function n(e){n.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return""},n}(r)}).call(this)},function(e,t){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty;e.exports=function(){function e(e){var r,i,o;for(r in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),i=e.stringify||{})n.call(i,r)&&(o=i[r],this[r]=o)}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,n;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+n.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+n.index);return e},e.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},e.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},function(e,t,n){(function(){var t,r,i,o={}.hasOwnProperty;i=n(53).assign,t=n(15),n(170),n(171),n(168),n(169),n(166),n(176),n(177),n(178),n(237),n(172),n(174),n(173),n(175),r=n(119),e.exports=function(){function e(e){var t,n,r;for(t in e||(e={}),this.options=e,n=e.writer||{})o.call(n,t)&&(r=n[t],this["_"+t]=this[t],this[t]=r)}return e.prototype.filterOptions=function(e){var t,n,o,a,s,l,u,c;return e||(e={}),e=i({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(n=e.indent)?n:"  ",t.newline=null!=(o=e.newline)?o:"\n",t.offset=null!=(a=e.offset)?a:0,t.dontPrettyTextNodes=null!=(s=null!=(l=e.dontPrettyTextNodes)?l:e.dontprettytextnodes)?s:0,t.spaceBeforeSlash=null!=(u=null!=(c=e.spaceBeforeSlash)?c:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=r.None,t},e.prototype.indent=function(e,t,n){var r;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(r=(n||0)+t.offset+1)>0?new Array(r).join(t.indent):""},e.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,n){var r;return this.openAttribute(e,t,n),r=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),r},e.prototype.cdata=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<![CDATA[",t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+="]]>"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.comment=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"\x3c!-- ",t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=" --\x3e"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.declaration=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<?xml",t.state=r.InsideTag,i+=' version="'+e.version+'"',null!=e.encoding&&(i+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(i+=' standalone="'+e.standalone+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.docType=function(e,t,n){var i,o,a,s,l;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,s=this.indent(e,t,n),s+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?s+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(s+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(s+=" [",s+=this.endline(e,t,n),t.state=r.InsideTag,o=0,a=(l=e.children).length;o<a;o++)i=l[o],s+=this.writeChildNode(i,t,n+1);t.state=r.CloseTag,s+="]"}return t.state=r.CloseTag,s+=t.spaceBeforeSlash+">",s+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),s},e.prototype.element=function(e,n,i){var a,s,l,u,c,h,f,p,d,m,v,g,y,b;for(d in i||(i=0),m=!1,v="",this.openNode(e,n,i),n.state=r.OpenTag,v+=this.indent(e,n,i)+"<"+e.name,g=e.attribs)o.call(g,d)&&(a=g[d],v+=this.attribute(a,n,i));if(u=0===(l=e.children.length)?null:e.children[0],0===l||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(v+=">",n.state=r.CloseTag,v+="</"+e.name+">"+this.endline(e,n,i)):(n.state=r.CloseTag,v+=n.spaceBeforeSlash+"/>"+this.endline(e,n,i));else if(!n.pretty||1!==l||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(n.dontPrettyTextNodes)for(c=0,f=(y=e.children).length;c<f;c++)if(((s=y[c]).type===t.Text||s.type===t.Raw)&&null!=s.value){n.suppressPrettyCount++,m=!0;break}for(v+=">"+this.endline(e,n,i),n.state=r.InsideTag,h=0,p=(b=e.children).length;h<p;h++)s=b[h],v+=this.writeChildNode(s,n,i+1);n.state=r.CloseTag,v+=this.indent(e,n,i)+"</"+e.name+">",m&&n.suppressPrettyCount--,v+=this.endline(e,n,i),n.state=r.None}else v+=">",n.state=r.InsideTag,n.suppressPrettyCount++,m=!0,v+=this.writeChildNode(u,n,i+1),n.suppressPrettyCount--,m=!1,n.state=r.CloseTag,v+="</"+e.name+">"+this.endline(e,n,i);return this.closeNode(e,n,i),v},e.prototype.writeChildNode=function(e,n,r){switch(e.type){case t.CData:return this.cdata(e,n,r);case t.Comment:return this.comment(e,n,r);case t.Element:return this.element(e,n,r);case t.Raw:return this.raw(e,n,r);case t.Text:return this.text(e,n,r);case t.ProcessingInstruction:return this.processingInstruction(e,n,r);case t.Dummy:return"";case t.Declaration:return this.declaration(e,n,r);case t.DocType:return this.docType(e,n,r);case t.AttributeDeclaration:return this.dtdAttList(e,n,r);case t.ElementDeclaration:return this.dtdElement(e,n,r);case t.EntityDeclaration:return this.dtdEntity(e,n,r);case t.NotationDeclaration:return this.dtdNotation(e,n,r);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<?",t.state=r.InsideTag,i+=e.target,e.value&&(i+=" "+e.value),t.state=r.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.raw=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n),t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.text=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n),t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdAttList=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ATTLIST",t.state=r.InsideTag,i+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(i+=" "+e.defaultValueType),e.defaultValue&&(i+=' "'+e.defaultValue+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdElement=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ELEMENT",t.state=r.InsideTag,i+=" "+e.name+" "+e.value,t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdEntity=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ENTITY",t.state=r.InsideTag,e.pe&&(i+=" %"),i+=" "+e.name,e.value?i+=' "'+e.value+'"':(e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.nData&&(i+=" NDATA "+e.nData)),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdNotation=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!NOTATION",t.state=r.InsideTag,i+=" "+e.name,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?i+=' PUBLIC "'+e.pubID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.openNode=function(e,t,n){},e.prototype.closeNode=function(e,t,n){},e.prototype.openAttribute=function(e,t,n){},e.prototype.closeAttribute=function(e,t,n){},e}()}).call(this)},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(t,r){var i=n(122);e.exports=b;var o,a=n(240);b.ReadableState=y;n(121).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=n(242),u=n(123).Buffer,c=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var h=Object.create(n(97));h.inherits=n(78);var f=n(496),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,m=n(497),v=n(243);h.inherits(b,l);var g=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(o=o||n(79));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(183).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||n(79),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function x(e,t,n,r,i){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}(e,a)):(i||(o=function(e,t){var n;r=t,u.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?w(e,a,t,!1):M(e,a)):w(e,a,t,!1))):r||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),M(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),x(this,e,t,!1,n)},b.prototype.unshift=function(e){return x(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return d||(d=n(183).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};function q(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(S,e):S(e))}function S(e){p("emit readable"),e.emit("readable"),A(e)}function M(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(E,e,t))}function E(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function T(e){p("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function O(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function L(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):_(this),null;if(0===(e=q(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=q(n,t))),null===(r=e>0?O(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,t);var l=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:b;function u(t,r){p("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",h),e.removeListener("error",v),e.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",m),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function c(){p("onend"),e.end()}o.endEmitted?i.nextTick(l):n.once("end",l),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,A(e))}}(n);e.on("drain",h);var f=!1;var d=!1;function m(t){p("ondata"),d=!1,!1!==e.write(t)||d||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==D(o.pipes,e))&&!f&&(p("false write response, pause",o.awaitDrain),o.awaitDrain++,d=!0),n.pause())}function v(t){p("onerror",t),b(),e.removeListener("error",v),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),b()}function y(){p("onfinish"),e.removeListener("close",g),b()}function b(){p("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",v),e.once("close",g),e.once("finish",y),e.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=D(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},b.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):i.nextTick(T,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(P,e,t))}(this,e)),this},b.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){p("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=O}).call(this,n(39),n(52))},function(e,t,n){e.exports=n(121).EventEmitter},function(e,t,n){"use strict";var r=n(122);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(i,this,e)):r.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";e.exports=a;var r=n(79),i=Object.create(n(97));function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){l(e,t,n)})):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(78),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(246),o=Object.keys,a=o?function(e){return o(e)}:n(508),s=Object.keys;a.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)}):Object.keys=a;return Object.keys||a},e.exports=a},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Object.prototype.toString;e.exports=function(e){var t=i.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"===r(e)&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===i.call(e.callee)),n}},function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if(!("function"==typeof Object.defineProperty&&"function"==typeof Object.defineProperties&&"function"==typeof Object.getPrototypeOf&&"function"==typeof Object.setPrototypeOf))throw new TypeError("util.promisify requires a true ES5 environment");var i=n(510);if("function"!=typeof t)throw new TypeError("`Promise` must be globally available for util.promisify to work.");var o=Function.call.bind(Array.prototype.slice),a=Function.call.bind(Array.prototype.concat),s=Function.call.bind(Array.prototype.forEach),l="function"==typeof Symbol&&"symbol"===r(Symbol("")),u=l?Symbol("util.promisify.custom"):null,c=l?Symbol("customPromisifyArgs"):null;e.exports=function(e){if("function"!=typeof e){var n=new TypeError('The "original" argument must be of type function');throw n.name="TypeError [ERR_INVALID_ARG_TYPE]",n.code="ERR_INVALID_ARG_TYPE",n}if(l&&e[u]){var r=e[u];if("function"!=typeof r)throw new TypeError("The [util.promisify.custom] property must be a function");return Object.defineProperty(r,u,{configurable:!0,enumerable:!1,value:r,writable:!1}),r}var h=e[c],f=function(){var n=o(arguments),r=this;return new t((function(t,i){e.apply(r,a(n,(function(e){var n=arguments.length>1?o(arguments,1):[];if(e)i(e);else if(void 0!==h&&n.length>1){var r={};s(h,(function(e,t){r[e]=n[t]})),t(r)}else t(n[0])})))}))};return Object.setPrototypeOf(f,Object.getPrototypeOf(e)),Object.defineProperty(f,u,{configurable:!0,enumerable:!1,value:f,writable:!1}),Object.defineProperties(f,i(e))},e.exports.custom=u,e.exports.customPromisifyArgs=c}).call(this,n(11))},function(e,t,n){"use strict";var r=n(511),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Function.call.bind(Array.prototype.concat),u=Function.call.bind(Array.prototype.reduce),c=s?function(e){return l(a(e),s(e))}:a,h=r.IsCallable(o)&&r.IsCallable(a);e.exports=function(e){if(r.RequireObjectCoercible(e),!h)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var t=r.ToObject(e);return u(c(t),(function(e,n){var r,a,s,l=o(t,n);return void 0!==l&&(r=e,a=n,s=l,i&&a in r?i(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s),e}),{})}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null===e||"function"!=typeof e&&"object"!==n(e)}},function(e,t,n){"use strict";var r=n(23),i=r("%TypeError%"),o=r("%SyntaxError%"),a=n(87),s={"Property Descriptor":function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(a(t,r)&&!n[r])return!1;var o=a(t,"[[Value]]"),s=a(t,"[[Get]]")||a(t,"[[Set]]");if(o&&s)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function(e,t,n,r){var a=s[t];if("function"!=typeof a)throw new o("unknown record type: "+t);if(!a(e,r))throw new i(n+" must be a "+t)}},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return e!=e};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!r(e)&&e!==1/0&&e!==-1/0}},function(e,t,n){"use strict";var r=n(23),i=n(87),o=r("%Object%").assign;e.exports=function(e,t){if(o)return o(e,t);for(var n in t)i(t,n)&&(e[n]=t[n]);return e}},function(e,t,n){"use strict";e.exports=function(e){return e>=0?1:-1}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e%t;return Math.floor(n>=0?n:n+t)}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=0;n<e.length;n+=1)if(!t(e[n],n,e))return!1;return!0}},function(e,t,n){"use strict";var r=n(23),i=n(87),o=r("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(i(t,r)&&!n[r])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}},function(e,t,n){"use strict";var r=n(186),i=n(23)("%Function%"),o=i.apply,a=i.call;e.exports=function(){return r.apply(a,arguments)},e.exports.apply=function(){return r.apply(o,arguments)}},function(e,t,n){"use strict";var r=n(124)(),i=n(23),o=n(88),a=i("%Symbol.iterator%",!0),s=o("Array.prototype.slice"),l=o("Array.prototype.join");e.exports=function(e,t){var n;return r?n=e.GetMethod(t,a):e.IsArray(t)?n=function(){var e=-1,t=this;return{next:function(){return{done:(e+=1)>=t.length,value:t[e]}}}}:"String"===e.Type(t)&&(n=function(){var n=0;return{next:function(){var r=e.AdvanceStringIndex(t,n,!0),i=l(s(t,n,r),"");return n=r,{done:r>t.length,value:i}}}}),n}},function(e,t,n){"use strict";var r=n(23),i=r("%Object.setPrototypeOf%",!0),o=r("%Array.prototype%");e.exports=i||([].__proto__!==o?null:function(e,t){return e.__proto__=t,e})},function(e,t,n){"use strict";var r=n(248);e.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:r}},function(e,t,n){"use strict";var r=n(185),i=n(247);e.exports=function(){return"function"==typeof r.promisify?r.promisify:i}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(0);function i(t,n,r,i,o,a,s){try{var l=t[a](s),u=l.value}catch(e){return void r(e)}l.done?n(u):e.resolve(u).then(i,o)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.workGroup=e,this.textureStorage={}}var n,a,s,l,u;return n=t,(a=[{key:"setTexture",value:(l=regeneratorRuntime.mark((function e(t,n,i){var o,a,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null,!this.textureStorage.hasOwnProperty(i)){e.next=5;break}o=this.textureStorage[i],e.next=7;break;case 5:return e.next=7,this.loadTexture(i).then((function(e){l.textureStorage[i]=e,o=e}));case 7:if(o)try{a=null,this.workGroup.traverse((function(e){if(e.userData.hasOwnProperty("property")){var n=e.userData.property;n.hasOwnProperty("floorname")&&n.floorname===t&&(a=e)}})),s=null,a&&a.traverse((function(e){if(e.userData.hasOwnProperty("property")){var t=e.userData.property;t.hasOwnProperty("type")&&t.type===n&&(s=e)}})),s?(s.traverse((function(e){e instanceof r.Mesh&&(e.userData.isSetTextureUsed&&l.disposeMaterial(e),l.assignTexture(e,o),e.userData.isSetTextureUsed=!0)})),s.userData.UsedTextureUrl=i):console.warn("can't find object: ".concat(t,", ").concat(n))}catch(e){console.error(e)}case 8:case"end":return e.stop()}}),e,this)})),u=function(){var t=this,n=arguments;return new e((function(e,r){var o=l.apply(t,n);function a(t){i(o,e,r,a,s,"next",t)}function s(t){i(o,e,r,a,s,"throw",t)}a(void 0)}))},function(e,t,n){return u.apply(this,arguments)})},{key:"assignTexture",value:function(e,t){if(e.material instanceof Array)for(var n=0;n<e.material.length;n++){var r=e.material[n].clone();r.map=t,r.needsUpdate=!0,e.material[n]=r}else{var i=e.material.clone();i.map=t,i.needsUpdate=!0,e.material=i}}},{key:"disposeMaterial",value:function(e){if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].dispose();else e.material.dispose()}},{key:"loadTexture",value:function(t){return new e((function(e,n){(new r.TextureLoader).load(t,(function(n){n.name=t,n.wrapS=r.RepeatWrapping,n.wrapT=r.RepeatWrapping,e(n)}),null,(function(e){console.error(e),n()}))}))}},{key:"getTexture",value:function(e,t){try{var n=null;this.workGroup.traverse((function(t){if(t.userData.hasOwnProperty("property")){var r=t.userData.property;r.hasOwnProperty("floorname")&&r.floorname===e&&(n=t)}}));var r=null;return n&&n.traverse((function(e){if(e.userData.hasOwnProperty("property")){var n=e.userData.property;n.hasOwnProperty("type")&&n.type===t&&(r=e)}})),r?r.userData.UsedTextureUrl:(console.warn("can't find object: ".concat(e,", ").concat(t)),"")}catch(e){return console.error(e),""}}}])&&o(n.prototype,a),s&&o(n,s),t}()}).call(this,n(11))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),i=n(98),o=n(62),a=n(265),s=n.n(a);function l(e){var t=new r.Object3D;t.name="#PoiRoot";var n=e.poiMgr.getPoiDataAll();n.forEach((function(e){var n=new r.Object3D;n.name=e.id,n.position.set(e.position.x,e.position.y,e.position.z),n.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z),n.scale.set(.01*e.scale.x,.01*e.scale.y,.01*e.scale.z),n.userData.poidata=JSON.stringify(e),t.add(n)})),e.workObjGroup.add(t);var a=new r.Object3D;a.name="#TopologyRoot";var l=o.Data.Export();l.forEach((function(e){var t=new r.Object3D;t.name=e.name,t.position.set(e.position.x,e.position.y,e.position.z),t.userData.nodedata=JSON.stringify(e),a.add(t)})),e.workObjGroup.add(a),(new i.GLTFExporter).parse(e.workObjGroup,(function(e){var t=new s.a;t.file("model.glb",e),t.file("poi.json",JSON.stringify(n,null,4)),t.file("topology.json",JSON.stringify(l,null,4)),t.generateAsync({type:"blob"}).then((function(e){var t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(e),t.download="modelwithpoi.zip",t.click(),document.body.removeChild(t)}))}),{binary:!0,forcePowerOfTwoTextures:!0})}},function(e,t,n){(function(n,r,i,o,a){var s,l,u,c;function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/c=function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,l,u,c=[],h=0,f=e.length,p=f,d="string"!==r.getTypeOf(e);h<e.length;)p=f-h,i=d?(t=e[h++],n=h<f?e[h++]:0,h<f?e[h++]:0):(t=e.charCodeAt(h++),n=h<f?e.charCodeAt(h++):0,h<f?e.charCodeAt(h++):0),a=t>>2,s=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|i>>6:64,u=2<p?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(u));return c.join("")},n.decode=function(e){var t,n,r,a,s,l,u=0,c=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|p):new Array(0|p);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(a=o.indexOf(e.charAt(u++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(l=o.indexOf(e.charAt(u++))),f[c++]=t,64!==s&&(f[c++]=n),64!==l&&(f[c++]=r);return f}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var i;i=void 0!==n?n:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,c){var h,f,p=e.file,d=e.compression,m=c!==s.utf8encode,v=o.transformTo("string",c(p.name)),g=o.transformTo("string",s.utf8encode(p.name)),y=p.comment,b=o.transformTo("string",c(y)),x=o.transformTo("string",s.utf8encode(y)),w=g.length!==p.name.length,q=x.length!==y.length,_="",S="",M="",E=p.dir,T=p.date,P={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(P.crc32=e.crc32,P.compressedSize=e.compressedSize,P.uncompressedSize=e.uncompressedSize);var A=0;t&&(A|=8),m||!w&&!q||(A|=2048);var O=0,L=0;E&&(O|=16),"UNIX"===a?(L=798,O|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(p.unixPermissions,E)):(L=20,O|=function(e){return 63&(e||0)}(p.dosPermissions)),h=T.getUTCHours(),h<<=6,h|=T.getUTCMinutes(),h<<=5,h|=T.getUTCSeconds()/2,f=T.getUTCFullYear()-1980,f<<=4,f|=T.getUTCMonth()+1,f<<=5,f|=T.getUTCDate(),w&&(S=r(1,1)+r(l(v),4)+g,_+="up"+r(S.length,2)+S),q&&(M=r(1,1)+r(l(b),4)+x,_+="uc"+r(M.length,2)+M);var C="";return C+="\n\0",C+=r(A,2),C+=d.magic,C+=r(h,2),C+=r(f,2),C+=r(P.crc32,4),C+=r(P.compressedSize,4),C+=r(P.uncompressedSize,4),C+=r(v.length,2),C+=r(_.length,2),{fileRecord:u.LOCAL_FILE_HEADER+C+v+_,dirRecord:u.CENTRAL_FILE_HEADER+r(L,2)+C+r(b.length,2)+"\0\0\0\0"+r(O,4)+r(i,4)+v+_+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),u=e("../signature");function c(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var s=o.transformTo("string",a(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,u=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(u(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),o=i.files,a=0;a<o.length;a++){var s=o[a],l=s.fileNameStr,u=r.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(u).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:void 0!==r,newBufferFrom:function(e,t){if(r.from&&r.from!==Uint8Array.from)return r.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new r(e,t)},allocBuffer:function(e){if(r.alloc)return r.alloc(e);var t=new r(e);return t.fill(0),t},isBuffer:function(e){return r.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=d(e))&&v.call(this,r,!0);var h,g="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!g),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string"),h=t instanceof u||t instanceof a?t:f.isNode&&f.isStream(t)?new p(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new c(e,h,s);this.files[e]=y}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),u=e("./compressedObject"),c=e("./zipObject"),h=e("./generate"),f=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),d=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(g(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(g(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=v.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),l=e("../support"),u=e("../external"),c=null;if(l.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return function(e,t){return new u.Promise((function(n,o){var a=[],l=e._internalType,u=e._outputType,c=e._mimeType;e.on("data",(function(e,n){a.push(e),t&&t(n)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(u,function(e,t){var n,i=0,o=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(a),n=0;n<t.length;n++)o.set(t[n],i),i+=t[n].length;return o;case"nodebuffer":return r.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,a),c);n(e)}catch(e){o(e)}a=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==r,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),n.blob=0===o.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)l[n++]=i;else if(4<(o=s[i]))l[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(u,a),u.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;a!==t.length&&(i.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),s=e("./external");function l(e){return e}function u(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function f(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=h;var p={};p.string={string:l,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,a.allocBuffer(e.length))}},p.array={string:h,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},p.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:h,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return a.newBufferFrom(e)}},p.nodebuffer={string:h,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:l},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return p[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){i((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,a,l){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var c=n.getTypeOf(t);return c?("arraybuffer"===c?t=n.transformTo("uint8array",t):"string"===c&&(l?t=o.decode(t):i&&!0!==a&&(t=function(e){return u(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),u=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)r.prototype[u[h]]=c;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==h(e)||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=m((function(){t(i,r)}));"error"===a.status&&r(a.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==l?f(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=m(p,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)d(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(i);++l<n;)c(e[l],l);return u;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))}),(function(e){r||(r=!0,o.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<t;)r=e[a],this.resolve(r).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,c)))throw new Error(a[n]);this._dict_set=!0}}function c(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}u.prototype.push=function(e,t){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=u,n.deflate=c,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,c(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,c(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function f(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(e,t){var n,s,l,u,h,f,p=this.strm,d=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?p.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(d),p.next_out=0,p.avail_out=d),(n=r.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(f="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,f)),n===a.Z_BUF_ERROR&&!0===v&&(n=a.Z_OK,v=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),u=p.next_out-l,h=o.buf2string(p.output,l),p.next_out=u,p.avail_out=d-u,u&&i.arraySet(p.output,p.output,l,u,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(v=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=f,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=h(n))throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,u=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)u[r++]=i;else if(4<(o=a[i]))u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return l(u,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),u=-2,c=258,h=262,f=113;function p(e,t){return e.msg=l[t],t}function d(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function v(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function g(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,v(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,u=e.window,f=e.w_mask,p=e.prev,d=e.strstart+c,m=u[o+a-1],v=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===v&&u[n+a-1]===m&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(r=c-(d-o),o=d-c,a<r){if(e.match_start=t,s<=(a=r))break;m=u[o+a-1],v=u[o+a]}}}while((t=p[t&f])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function w(e){var t,n,r,o,l,u,c,f,p,d,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-h)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);o+=m}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,f=e.strstart+e.lookahead,d=void 0,(p=o)<(d=u.avail_in)&&(d=p),n=0===d?0:(u.avail_in-=d,i.arraySet(c,u.input,u.next_in,d,f),1===u.state.wrap?u.adler=a(u.adler,c,d,f):2===u.state.wrap&&(u.adler=s(u.adler,c,d,f)),u.next_in+=d,u.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function q(e,t){for(var n,r;;){if(e.lookahead<h){if(w(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-h&&(e.match_length=x(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function _(e,t){for(var n,r,i;;){if(e.lookahead<h){if(w(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-h&&(e.match_length=x(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(g(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&g(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function S(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function M(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):p(e,u)}function T(e){var t=E(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function P(e,t,n,r,o,a){if(!e)return u;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||8!==n||r<8||15<r||t<0||9<t||a<0||4<a)return p(e,u);8===r&&(r=9);var l=new M;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,T(e)}r=[new S(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(w(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,g(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(g(e,!1),e.strm.avail_out),1)})),new S(4,4,8,4,q),new S(4,5,16,8,q),new S(4,6,32,32,q),new S(4,4,16,16,_),new S(8,16,32,32,_),new S(8,16,128,128,_),new S(8,32,128,256,_),new S(32,128,258,1024,_),new S(32,258,258,4096,_)],n.deflateInit=function(e,t){return P(e,t,8,15,8,0)},n.deflateInit2=P,n.deflateReset=T,n.deflateResetKeep=E,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,0):u},n.deflate=function(e,t){var n,i,a,l;if(!e||!e.state||5<t||t<0)return e?p(e,u):u;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return p(e,0===e.avail_out?-5:u);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,y(i,31),y(i,139),y(i,8),i.gzhead?(y(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),y(i,255&i.gzhead.time),y(i,i.gzhead.time>>8&255),y(i,i.gzhead.time>>16&255),y(i,i.gzhead.time>>24&255),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(y(i,255&i.gzhead.extra.length),y(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(y(i,0),y(i,0),y(i,0),y(i,0),y(i,0),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,3),i.status=f);else{var h=8+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=f,b(i,h),0!==i.strstart&&(b(i,e.adler>>>16),b(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),v(e),a=i.pending,i.pending!==i.pending_buf_size));)y(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),v(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,y(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),v(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,y(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(e),i.pending+2<=i.pending_buf_size&&(y(i,255&e.adler),y(i,e.adler>>8&255),e.adler=0,i.status=f)):i.status=f),0!==i.pending){if(v(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&d(t)<=d(n)&&4!==t)return p(e,-5);if(666===i.status&&0!==e.avail_in)return p(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var x=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(w(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=c){if(w(e),e.lookahead<=c&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+c;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=c-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==x&&4!==x||(i.status=666),1===x||3===x)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===x&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(y(i,255&e.adler),y(i,e.adler>>8&255),y(i,e.adler>>16&255),y(i,e.adler>>24&255),y(i,255&e.total_in),y(i,e.total_in>>8&255),y(i,e.total_in>>16&255),y(i,e.total_in>>24&255)):(b(i,e.adler>>>16),b(i,65535&e.adler)),v(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==f&&666!==t?p(e,u):(e.state=null,t===f?p(e,-3):0):u},n.deflateSetDictionary=function(e,t){var n,r,o,s,l,c,h,f,p=t.length;if(!e||!e.state)return u;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return u;for(1===s&&(e.adler=a(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),l=e.avail_in,c=e.next_in,h=e.input,e.avail_in=p,e.next_in=0,e.input=t,w(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,w(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=h,e.avail_in=l,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,l,u,c,h,f,p,d,m,v,g,y,b,x,w,q,_,S,M,E;n=e.state,r=e.next_in,M=e.input,i=r+(e.avail_in-5),o=e.next_out,E=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{d<15&&(p+=M[r++]<<d,d+=8,p+=M[r++]<<d,d+=8),b=m[p&g];t:for(;;){if(p>>>=x=b>>>24,d-=x,0==(x=b>>>16&255))E[o++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=m[(65535&b)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(x&=15)&&(d<x&&(p+=M[r++]<<d,d+=8),w+=p&(1<<x)-1,p>>>=x,d-=x),d<15&&(p+=M[r++]<<d,d+=8,p+=M[r++]<<d,d+=8),b=v[p&y];n:for(;;){if(p>>>=x=b>>>24,d-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=v[(65535&b)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(q=65535&b,d<(x&=15)&&(p+=M[r++]<<d,(d+=8)<x&&(p+=M[r++]<<d,d+=8)),l<(q+=p&(1<<x)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=x,d-=x,(x=o-a)<q){if(c<(x=q-x)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=f,(_=0)===h){if(_+=u-x,x<w){for(w-=x;E[o++]=f[_++],--x;);_=o-q,S=E}}else if(h<x){if(_+=u+h-x,(x-=h)<w){for(w-=x;E[o++]=f[_++],--x;);if(_=0,h<w){for(w-=x=h;E[o++]=f[_++],--x;);_=o-q,S=E}}}else if(_+=h-x,x<w){for(w-=x;E[o++]=f[_++],--x;);_=o-q,S=E}for(;2<w;)E[o++]=S[_++],E[o++]=S[_++],E[o++]=S[_++],w-=3;w&&(E[o++]=S[_++],1<w&&(E[o++]=S[_++]))}else{for(_=o-q;E[o++]=E[_++],E[o++]=E[_++],E[o++]=E[_++],2<(w-=3););w&&(E[o++]=E[_++],1<w&&(E[o++]=E[_++]))}break}}break}}while(r<i&&o<s);r-=w=d>>3,p&=(1<<(d-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=-2;function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):l}function p(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,f(e))):l}function d(e,t){var n,r;return e?(r=new c,(e.state=r).window=null,0!==(n=p(e,t))&&(e.state=null),n):l}var m,v,g=!0;function y(e){if(g){var t;for(m=new r.Buf32(512),v=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,v,0,e.work,{bits:5}),g=!1}e.lencode=m,e.lenbits=9,e.distcode=v,e.distbits=5}function b(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=f,n.inflateReset2=p,n.inflateResetKeep=h,n.inflateInit=function(e){return d(e,15)},n.inflateInit2=d,n.inflate=function(e,t){var n,c,h,f,p,d,m,v,g,x,w,q,_,S,M,E,T,P,A,O,L,C,D,k,I=0,R=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(n=e.state).mode&&(n.mode=13),p=e.next_out,h=e.output,m=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,v=n.hold,g=n.bits,x=d,w=m,C=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(2&n.wrap&&35615===v){R[n.check=0]=255&v,R[1]=v>>>8&255,n.check=o(n.check,R,2,0),g=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=30;break}if(g-=4,L=8+(15&(v>>>=4)),0===n.wbits)n.wbits=L;else if(L>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<L,e.adler=n.check=1,n.mode=512&v?10:12,g=v=0;break;case 2:for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,n.check=o(n.check,R,2,0)),g=v=0,n.mode=3;case 3:for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.head&&(n.head.time=v),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,R[2]=v>>>16&255,R[3]=v>>>24&255,n.check=o(n.check,R,4,0)),g=v=0,n.mode=4;case 4:for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,n.check=o(n.check,R,2,0)),g=v=0,n.mode=5;case 5:if(1024&n.flags){for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,n.check=o(n.check,R,2,0)),g=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(d<(q=n.length)&&(q=d),q&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,f,q,L)),512&n.flags&&(n.check=o(n.check,c,q,f)),d-=q,f+=q,n.length-=q),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break e;for(q=0;L=c[f+q++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L)),L&&q<d;);if(512&n.flags&&(n.check=o(n.check,c,q,f)),d-=q,f+=q,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break e;for(q=0;L=c[f+q++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L)),L&&q<d;);if(512&n.flags&&(n.check=o(n.check,c,q,f)),d-=q,f+=q,L)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}g=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}e.adler=n.check=u(v),g=v=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=p,e.avail_out=m,e.next_in=f,e.avail_in=d,n.hold=v,n.bits=g,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&g,g-=7&g,n.mode=27;break}for(;g<3;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}switch(n.last=1&v,g-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(y(n),n.mode=20,6!==t)break;v>>>=2,g-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,g=v=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(q=n.length){if(d<q&&(q=d),m<q&&(q=m),0===q)break e;r.arraySet(h,c,f,q,p),d-=q,f+=q,m-=q,p+=q,n.length-=q;break}n.mode=12;break;case 17:for(;g<14;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(n.nlen=257+(31&v),v>>>=5,g-=5,n.ndist=1+(31&v),v>>>=5,g-=5,n.ncode=4+(15&v),v>>>=4,g-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;g<3;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.lens[F[n.have++]]=7&v,v>>>=3,g-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},C=s(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,C){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(I=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,T=65535&I,!((M=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(T<16)v>>>=M,g-=M,n.lens[n.have++]=T;else{if(16===T){for(k=M+2;g<k;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v>>>=M,g-=M,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}L=n.lens[n.have-1],q=3+(3&v),v>>>=2,g-=2}else if(17===T){for(k=M+3;g<k;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}g-=M,L=0,q=3+(7&(v>>>=M)),v>>>=3,g-=3}else{for(k=M+7;g<k;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}g-=M,L=0,q=11+(127&(v>>>=M)),v>>>=7,g-=7}if(n.have+q>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;q--;)n.lens[n.have++]=L}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},C=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,C){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},C=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,C){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=d&&258<=m){e.next_out=p,e.avail_out=m,e.next_in=f,e.avail_in=d,n.hold=v,n.bits=g,a(e,w),p=e.next_out,h=e.output,m=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,v=n.hold,g=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(I=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,T=65535&I,!((M=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(E&&0==(240&E)){for(P=M,A=E,O=T;E=(I=n.lencode[O+((v&(1<<P+A)-1)>>P)])>>>16&255,T=65535&I,!(P+(M=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}v>>>=P,g-=P,n.back+=P}if(v>>>=M,g-=M,n.back+=M,n.length=T,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=12;break}if(64&E){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(k=n.extra;g<k;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,g-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(I=n.distcode[v&(1<<n.distbits)-1])>>>16&255,T=65535&I,!((M=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(0==(240&E)){for(P=M,A=E,O=T;E=(I=n.distcode[O+((v&(1<<P+A)-1)>>P)])>>>16&255,T=65535&I,!(P+(M=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}v>>>=P,g-=P,n.back+=P}if(v>>>=M,g-=M,n.back+=M,64&E){e.msg="invalid distance code",n.mode=30;break}n.offset=T,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(k=n.extra;g<k;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,g-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(q=w-m,n.offset>q){if((q=n.offset-q)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}_=q>n.wnext?(q-=n.wnext,n.wsize-q):n.wnext-q,q>n.length&&(q=n.length),S=n.window}else S=h,_=p-n.offset,q=n.length;for(m<q&&(q=m),m-=q,n.length-=q;h[p++]=S[_++],--q;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;h[p++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;g<32;){if(0===d)break e;d--,v|=c[f++]<<g,g+=8}if(w-=m,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?o(n.check,h,w,p-w):i(n.check,h,w,p-w)),w=m,(n.flags?v:u(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}g=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}g=v=0}n.mode=29;case 29:C=1;break e;case 30:C=-3;break e;case 31:return-4;case 32:default:return l}return e.next_out=p,e.avail_out=m,e.next_in=f,e.avail_in=d,n.hold=v,n.bits=g,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&b(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,w-=e.avail_out,e.total_in+=x,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?o(n.check,h,w,e.next_out-w):i(n.check,h,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===w||4===t)&&0===C&&(C=-5),C)},n.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:((n.head=t).done=!1,0):l},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,t,r,0)!==n.check?-3:b(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,u,c,h,f){var p,d,m,v,g,y,b,x,w,q=f.bits,_=0,S=0,M=0,E=0,T=0,P=0,A=0,O=0,L=0,C=0,D=null,k=0,I=new r.Buf16(16),R=new r.Buf16(16),F=null,N=0;for(_=0;_<=15;_++)I[_]=0;for(S=0;S<l;S++)I[t[n+S]]++;for(T=q,E=15;1<=E&&0===I[E];E--);if(E<T&&(T=E),0===E)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(M=1;M<E&&0===I[M];M++);for(T<M&&(T=M),_=O=1;_<=15;_++)if(O<<=1,(O-=I[_])<0)return-1;if(0<O&&(0===e||1!==E))return-1;for(R[1]=0,_=1;_<15;_++)R[_+1]=R[_]+I[_];for(S=0;S<l;S++)0!==t[n+S]&&(h[R[t[n+S]]++]=S);if(y=0===e?(D=F=h,19):1===e?(D=i,k-=257,F=o,N-=257,256):(D=a,F=s,-1),_=M,g=c,A=S=C=0,m=-1,v=(L=1<<(P=T))-1,1===e&&852<L||2===e&&592<L)return 1;for(;;){for(b=_-A,w=h[S]<y?(x=0,h[S]):h[S]>y?(x=F[N+h[S]],D[k+h[S]]):(x=96,0),p=1<<_-A,M=d=1<<P;u[g+(C>>A)+(d-=p)]=b<<24|x<<16|w|0,0!==d;);for(p=1<<_-1;C&p;)p>>=1;if(0!==p?(C&=p-1,C+=p):C=0,S++,0==--I[_]){if(_===E)break;_=t[n+h[S]]}if(T<_&&(C&v)!==m){for(0===A&&(A=T),g+=M,O=1<<(P=_-A);P+A<E&&!((O-=I[P+A])<=0);)P++,O<<=1;if(L+=1<<P,1===e&&852<L||2===e&&592<L)return 1;u[m=C&v]=T<<24|P<<16|g-c|0}}return 0!==C&&(u[g+C]=_-A<<24|64<<16|0),f.bits=T,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=256,a=286,s=30,l=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var d=new Array(60);i(d);var m=new Array(512);i(m);var v=new Array(256);i(v);var g=new Array(29);i(g);var y,b,x,w=new Array(s);function q(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?m[e]:m[256+(e>>>7)]}function M(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function E(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,M(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function T(e,t,n){E(e,n[2*t],n[2*t+1])}function P(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function A(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=l;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=P(o[s]++,s))}}function O(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function L(e){8<e.bi_valid?M(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function C(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function D(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&C(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!C(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function k(e,t,n){var r,i,a,s,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?T(e,i,t):(T(e,(a=v[i])+o+1,t),0!==(s=u[a])&&E(e,i-=g[a],s),T(e,a=S(--r),n),0!==(s=c[a])&&E(e,r-=w[a],s)),l<e.last_lit;);T(e,256,t)}function I(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)D(e,o,n);for(i=u;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,D(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,u=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(o=0;o<=l;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)&&(o=m,v++),u[2*r+1]=o,c<r||(e.bl_count[o]++,a=0,d<=r&&(a=p[r-d]),s=u[2*r],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(h[2*r+1]+a)));if(0!==v){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,v-=2}while(0<v);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)c<(i=e.heap[--n])||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(e,t),A(o,c,e.bl_count)}function R(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function F(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)for(;T(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(T(e,i,e.bl_tree),s--),T(e,16,e.bl_tree),E(e,s-3,2)):s<=10?(T(e,17,e.bl_tree),E(e,s-3,3)):(T(e,18,e.bl_tree),E(e,s-11,7));o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}i(w);var N=!1;function j(e,t,n,i){E(e,0+(i?1:0),3),function(e,t,n,i){L(e),M(e,n),M(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){N||(function(){var e,t,n,r,i,o=new Array(16);for(r=n=0;r<28;r++)for(g[r]=n,e=0;e<1<<u[r];e++)v[n++]=r;for(v[n-1]=r,r=i=0;r<16;r++)for(w[r]=i,e=0;e<1<<c[r];e++)m[i++]=r;for(i>>=7;r<s;r++)for(w[r]=i<<7,e=0;e<1<<c[r]-7;e++)m[256+i++]=r;for(t=0;t<=l;t++)o[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,o[8]++;for(;e<=255;)p[2*e+1]=9,e++,o[9]++;for(;e<=279;)p[2*e+1]=7,e++,o[7]++;for(;e<=287;)p[2*e+1]=8,e++,o[8]++;for(A(p,287,o),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=P(e,5);y=new q(p,u,257,a,l),b=new q(d,c,0,s,l),x=new q(new Array(0),h,0,19,7)}(),N=!0),e.l_desc=new _(e.dyn_ltree,y),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,x),e.bi_buf=0,e.bi_valid=0,O(e)},n._tr_stored_block=j,n._tr_flush_block=function(e,t,n,r){var i,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),I(e,e.l_desc),I(e,e.d_desc),s=function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),I(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?j(e,t,n,r):4===e.strategy||a===i?(E(e,2+(r?1:0),3),k(e,p,d)):(E(e,4+(r?1:0),3),function(e,t,n,r){var i;for(E(e,t-257,5),E(e,n-1,5),E(e,r-4,4),i=0;i<r;i++)E(e,e.bl_tree[2*f[i]+1],3);F(e,e.dyn_ltree,t-1),F(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),k(e,e.dyn_ltree,e.dyn_dtree)),O(e),r&&L(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(v[n]+o+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){E(e,2,3),T(e,256,p),function(e){16===e.bi_valid?(M(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,o,s=1,l={},u=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,n="[object process]"==={}.toString.call(e.process)?function(e){a.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return l[s]=i,n(s),s++},h.clearImmediate=f}function f(e){delete l[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),u=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},"object"==h(t)&&void 0!==e?e.exports=c():(l=[],void 0===(u="function"==typeof(s=c)?s.apply(t,l):s)||(e.exports=u))}).call(this,n(11),n(120).Buffer,n(182).setImmediate,n(39),n(52))},function(e,t,n){"use strict";var r=n(0),i=function e(t,n){r.Mesh.call(this,t),this.type="Reflector";var i=this,o=void 0!==(n=n||{}).color?new r.Color(n.color):new r.Color(8355711),a=n.textureWidth||512,s=n.textureHeight||512,l=n.clipBias||0,u=n.shader||e.ReflectorShader,c=void 0!==n.recursion?n.recursion:0,h=new r.Plane,f=new r.Vector3,p=new r.Vector3,d=new r.Vector3,m=new r.Matrix4,v=new r.Vector3(0,0,-1),g=new r.Vector4,y=new r.Vector3,b=new r.Vector3,x=new r.Vector4,w=new r.Matrix4,q=new r.PerspectiveCamera,_={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat,stencilBuffer:!1},S=new r.WebGLRenderTarget(a,s,_);r.Math.isPowerOfTwo(a)&&r.Math.isPowerOfTwo(s)||(S.texture.generateMipmaps=!1);var M=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(u.uniforms),fragmentShader:u.fragmentShader,vertexShader:u.vertexShader});M.uniforms.tDiffuse.value=S.texture,M.uniforms.color.value=o,M.uniforms.textureMatrix.value=w,this.material=M,this.onBeforeRender=function(e,t,n){if("recursion"in n.userData){if(n.userData.recursion===c)return;n.userData.recursion++}if(p.setFromMatrixPosition(i.matrixWorld),d.setFromMatrixPosition(n.matrixWorld),m.extractRotation(i.matrixWorld),f.set(0,0,1),f.applyMatrix4(m),y.subVectors(p,d),!(y.dot(f)>0)){y.reflect(f).negate(),y.add(p),m.extractRotation(n.matrixWorld),v.set(0,0,-1),v.applyMatrix4(m),v.add(d),b.subVectors(p,v),b.reflect(f).negate(),b.add(p),q.position.copy(y),q.up.set(0,1,0),q.up.applyMatrix4(m),q.up.reflect(f),q.lookAt(b),q.far=n.far,q.updateMatrixWorld(),q.projectionMatrix.copy(n.projectionMatrix),q.userData.recursion=0,w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(q.projectionMatrix),w.multiply(q.matrixWorldInverse),w.multiply(i.matrixWorld),h.setFromNormalAndCoplanarPoint(f,p),h.applyMatrix4(q.matrixWorldInverse),g.set(h.normal.x,h.normal.y,h.normal.z,h.constant);var r=q.projectionMatrix;x.x=(Math.sign(g.x)+r.elements[8])/r.elements[0],x.y=(Math.sign(g.y)+r.elements[9])/r.elements[5],x.z=-1,x.w=(1+r.elements[10])/r.elements[14],g.multiplyScalar(2/g.dot(x)),r.elements[2]=g.x,r.elements[6]=g.y,r.elements[10]=g.z+1-l,r.elements[14]=g.w,i.visible=!1;var o=e.getRenderTarget(),a=e.vr.enabled,s=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(S),e.clear(),e.render(t,q),e.vr.enabled=a,e.shadowMap.autoUpdate=s,e.setRenderTarget(o);var u=n.viewport;void 0!==u&&e.state.viewport(u),i.visible=!0}},this.getRenderTarget=function(){return S}};(i.prototype=Object.create(r.Mesh.prototype)).constructor=i,i.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var o=function e(t,n){r.Mesh.call(this,t),this.type="Refractor";var i=this,o=void 0!==(n=n||{}).color?new r.Color(n.color):new r.Color(8355711),a=n.textureWidth||512,s=n.textureHeight||512,l=n.clipBias||0,u=n.shader||e.RefractorShader,c=new r.PerspectiveCamera;c.matrixAutoUpdate=!1,c.userData.refractor=!0;var h=new r.Plane,f=new r.Matrix4,p={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat,stencilBuffer:!1},d=new r.WebGLRenderTarget(a,s,p);r.Math.isPowerOfTwo(a)&&r.Math.isPowerOfTwo(s)||(d.texture.generateMipmaps=!1),this.material=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,transparent:!0}),this.material.uniforms.color.value=o,this.material.uniforms.tDiffuse.value=d.texture,this.material.uniforms.textureMatrix.value=f;var m,v,g,y,b,x,w,q,_=(m=new r.Vector3,v=new r.Vector3,g=new r.Matrix4,y=new r.Vector3,b=new r.Vector3,function(e){return m.setFromMatrixPosition(i.matrixWorld),v.setFromMatrixPosition(e.matrixWorld),y.subVectors(m,v),g.extractRotation(i.matrixWorld),b.set(0,0,1),b.applyMatrix4(g),y.dot(b)<0}),S=function(){var e=new r.Vector3,t=new r.Vector3,n=new r.Quaternion,o=new r.Vector3;return function(){i.matrixWorld.decompose(t,n,o),e.set(0,0,1).applyQuaternion(n).normalize(),e.negate(),h.setFromNormalAndCoplanarPoint(e,t)}}(),M=(x=new r.Plane,w=new r.Vector4,q=new r.Vector4,function(e){c.matrixWorld.copy(e.matrixWorld),c.matrixWorldInverse.getInverse(c.matrixWorld),c.projectionMatrix.copy(e.projectionMatrix),c.far=e.far,x.copy(h),x.applyMatrix4(c.matrixWorldInverse),w.set(x.normal.x,x.normal.y,x.normal.z,x.constant);var t=c.projectionMatrix;q.x=(Math.sign(w.x)+t.elements[8])/t.elements[0],q.y=(Math.sign(w.y)+t.elements[9])/t.elements[5],q.z=-1,q.w=(1+t.elements[10])/t.elements[14],w.multiplyScalar(2/w.dot(q)),t.elements[2]=w.x,t.elements[6]=w.y,t.elements[10]=w.z+1-l,t.elements[14]=w.w});this.onBeforeRender=function(e,t,n){!0!==n.userData.refractor&&!0!=!_(n)&&(S(),function(e){f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(e.projectionMatrix),f.multiply(e.matrixWorldInverse),f.multiply(i.matrixWorld)}(n),M(n),function(e,t,n){i.visible=!1;var r=e.getRenderTarget(),o=e.vr.enabled,a=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(d),e.clear(),e.render(t,c),e.vr.enabled=o,e.shadowMap.autoUpdate=a,e.setRenderTarget(r);var s=n.viewport;void 0!==s&&e.state.viewport(s),i.visible=!0}(e,t,n))},this.getRenderTarget=function(){return d}};(o.prototype=Object.create(r.Mesh.prototype)).constructor=o,o.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")},n.d(t,"a",(function(){return a}));var a=function e(t,n){r.Mesh.call(this,t),this.type="Water";var a=this,s=void 0!==(n=n||{}).color?new r.Color(n.color):new r.Color(16777215),l=n.textureWidth||512,u=n.textureHeight||512,c=n.clipBias||0,h=n.flowDirection||new r.Vector2(1,0),f=n.flowSpeed||.03,p=n.reflectivity||.02,d=n.scale||1,m=n.shader||e.WaterShader,v=new r.TextureLoader,g=n.flowMap||void 0,y=n.normalMap0||v.load("textures/water/Water_1_M_Normal.jpg"),b=n.normalMap1||v.load("textures/water/Water_2_M_Normal.jpg"),x=new r.Matrix4,w=new r.Clock;if(void 0!==i)if(void 0!==o){var q=new i(t,{textureWidth:l,textureHeight:u,clipBias:c}),_=new o(t,{textureWidth:l,textureHeight:u,clipBias:c});q.matrixAutoUpdate=!1,_.matrixAutoUpdate=!1,this.material=new r.ShaderMaterial({uniforms:r.UniformsUtils.merge([r.UniformsLib.fog,m.uniforms]),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,transparent:!0,fog:!0}),void 0!==g?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:g}):this.material.uniforms.flowDirection={type:"v2",value:h},y.wrapS=y.wrapT=r.RepeatWrapping,b.wrapS=b.wrapT=r.RepeatWrapping,this.material.uniforms.tReflectionMap.value=q.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=_.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=y,this.material.uniforms.tNormalMap1.value=b,this.material.uniforms.color.value=s,this.material.uniforms.reflectivity.value=p,this.material.uniforms.textureMatrix.value=x,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=.075,this.material.uniforms.config.value.z=.075,this.material.uniforms.config.value.w=d,this.onBeforeRender=function(e,t,n){var r,i;!function(e){x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(e.projectionMatrix),x.multiply(e.matrixWorldInverse),x.multiply(a.matrixWorld)}(n),r=w.getDelta(),(i=a.material.uniforms.config).value.x+=f*r,i.value.y=i.value.x+.075,i.value.x>=.15?(i.value.x=0,i.value.y=.075):i.value.y>=.15&&(i.value.y=i.value.y-.15),a.visible=!1,q.matrixWorld.copy(a.matrixWorld),_.matrixWorld.copy(a.matrixWorld),q.onBeforeRender(e,t,n),_.onBeforeRender(e,t,n),a.visible=!0}}else console.error("THREE.Water: Required component Refractor not found.");else console.error("THREE.Water: Required component Reflector not found.")};a.prototype=Object.create(r.Mesh.prototype),a.prototype.constructor=a,a.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new r.Vector4}},vertexShader:["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\t#include <logdepthbuf_fragment>","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")}},function(e,t,n){n(268),e.exports=n(470)},function(e,t,n){"use strict";(function(e){if(n(269),n(466),n(467),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,n){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:n})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,n(39))},function(e,t,n){n(270),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(350),n(351),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(157),n(374),n(216),n(375),n(217),n(376),n(377),n(378),n(379),n(380),n(220),n(222),n(223),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),e.exports=n(40)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(6),o=n(30),a=n(13),s=n(1),l=n(27),u=n(59).KEY,c=n(7),h=n(92),f=n(83),p=n(68),d=n(9),m=n(198),v=n(138),g=n(272),y=n(106),b=n(4),x=n(8),w=n(31),q=n(45),_=n(67),S=n(71),M=n(201),E=n(32),T=n(14),P=n(69),A=E.f,O=T.f,L=M.f,C=i.Symbol,D=i.JSON,k=D&&D.stringify,I=d("_hidden"),R=d("toPrimitive"),F={}.propertyIsEnumerable,N=h("symbol-registry"),j=h("symbols"),z=h("op-symbols"),B=Object.prototype,U="function"==typeof C,V=i.QObject,G=!V||!V.prototype||!V.prototype.findChild,H=a&&c((function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=A(B,t);r&&delete B[t],O(e,t,n),r&&e!==B&&O(B,t,r)}:O,W=function(e){var t=j[e]=S(C.prototype);return t._k=e,t},X=U&&"symbol"==r(C.iterator)?function(e){return"symbol"==r(e)}:function(e){return e instanceof C},Y=function(e,t,n){return e===B&&Y(z,t,n),b(e),t=q(t,!0),b(n),o(j,t)?(n.enumerable?(o(e,I)&&e[I][t]&&(e[I][t]=!1),n=S(n,{enumerable:_(0,!1)})):(o(e,I)||O(e,I,_(1,{})),e[I][t]=!0),H(e,t,n)):O(e,t,n)},Q=function(e,t){b(e);for(var n,r=g(t=w(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},Z=function(e){var t=F.call(this,e=q(e,!0));return!(this===B&&o(j,e)&&!o(z,e))&&(!(t||!o(this,e)||!o(j,e)||o(this,I)&&this[I][e])||t)},K=function(e,t){if(e=w(e),t=q(t,!0),e!==B||!o(j,t)||o(z,t)){var n=A(e,t);return!n||!o(j,t)||o(e,I)&&e[I][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=L(w(e)),r=[],i=0;n.length>i;)o(j,t=n[i++])||t==I||t==u||r.push(t);return r},$=function(e){for(var t,n=e===B,r=L(n?z:w(e)),i=[],a=0;r.length>a;)!o(j,t=r[a++])||n&&!o(B,t)||i.push(j[t]);return i};U||(l((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function t(n){this===B&&t.call(z,n),o(this,I)&&o(this[I],e)&&(this[I][e]=!1),H(this,e,_(1,n))};return a&&G&&H(B,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),E.f=K,T.f=Y,n(72).f=M.f=J,n(94).f=Z,n(105).f=$,a&&!n(58)&&l(B,"propertyIsEnumerable",Z,!0),m.f=function(e){return W(d(e))}),s(s.G+s.W+s.F*!U,{Symbol:C});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ne=P(d.store),re=0;ne.length>re;)v(ne[re++]);s(s.S+s.F*!U,"Symbol",{for:function(e){return o(N,e+="")?N[e]:N[e]=C(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!U,"Object",{create:function(e,t){return void 0===t?S(e):Q(S(e),t)},defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:$}),D&&s(s.S+s.F*(!U||c((function(){var e=C();return"[null]"!=k([e])||"{}"!=k({a:e})||"{}"!=k(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(x(t)||void 0!==e)&&!X(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,k.apply(D,r)}}),C.prototype[R]||n(26)(C.prototype,R,C.prototype.valueOf),f(C,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){e.exports=n(92)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(69),i=n(105),o=n(94);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(71)})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(13),"Object",{defineProperty:n(14).f})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(13),"Object",{defineProperties:n(200)})},function(e,t,n){var r=n(31),i=n(32).f;n(47)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(18),i=n(33);n(47)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(18),i=n(69);n(47)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(47)("getOwnPropertyNames",(function(){return n(201).f}))},function(e,t,n){var r=n(8),i=n(59).onFreeze;n(47)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(8),i=n(59).onFreeze;n(47)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(8),i=n(59).onFreeze;n(47)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(8);n(47)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(8);n(47)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(8);n(47)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(202)})},function(e,t,n){var r=n(1);r(r.S,"Object",{is:n(203)})},function(e,t,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(142).set})},function(e,t,n){"use strict";var r=n(84),i={};i[n(9)("toStringTag")]="z",i+""!="[object z]"&&n(27)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(1);r(r.P,"Function",{bind:n(204)})},function(e,t,n){var r=n(14).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(13)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(8),i=n(33),o=n(9)("hasInstance"),a=Function.prototype;o in a||n(14).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(1),i=n(206);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(1),i=n(207);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(6),i=n(30),o=n(42),a=n(144),s=n(45),l=n(7),u=n(72).f,c=n(32).f,h=n(14).f,f=n(85).trim,p=r.Number,d=p,m=p.prototype,v="Number"==o(n(71)(m)),g="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=g?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,l=t.slice(2),u=0,c=l.length;u<c;u++)if((a=l.charCodeAt(u))<48||a>i)return NaN;return parseInt(l,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(v?l((function(){m.valueOf.call(n)})):"Number"!=o(n))?a(new d(y(t)),n,p):y(t)};for(var b,x=n(13)?u(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(d,b=x[w])&&!i(p,b)&&h(p,b,c(d,b));p.prototype=m,m.constructor=p,n(27)(r,"Number",p)}},function(e,t,n){"use strict";var r=n(1),i=n(43),o=n(208),a=n(145),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=l(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},d=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,l=o(this,c),u=i(e),m="",v="0";if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*d(2,69,1))-69)<0?l*d(2,-t,1):l/d(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(0,n),r=u;r>=7;)h(1e7,0),r-=7;for(h(d(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),h(1,1),f(2),v=p()}else h(0,n),h(1<<-t,0),v=p()+a.call("0",u);return v=u>0?m+((s=v.length)<=u?"0."+a.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):m+v}})},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(208),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(1),i=n(6).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{isInteger:n(209)})},function(e,t,n){var r=n(1);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(1),i=n(209),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(1),i=n(207);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(1),i=n(206);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(1),i=n(210),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(1),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(1),i=n(146);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(1),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(1),i=n(147);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(1);r(r.S,"Math",{fround:n(211)})},function(e,t,n){var r=n(1),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,l=0;a<s;)l<(n=i(arguments[a++]))?(o=o*(r=l/n)*r+1,l=n):o+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(e,t,n){var r=n(1),i=Math.imul;r(r.S+r.F*n(7)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log1p:n(210)})},function(e,t,n){var r=n(1);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(1);r(r.S,"Math",{sign:n(146)})},function(e,t,n){var r=n(1),i=n(147),o=Math.exp;r(r.S+r.F*n(7)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(1),i=n(147),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(1),i=n(70),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(1),i=n(31),o=n(10);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(85)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(107)(!0);n(148)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(1),i=n(107)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n(150),a="".endsWith;r(r.P+r.F*n(151)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),l=String(e);return a?a.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";var r=n(1),i=n(150);r(r.P+r.F*n(151)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(1);r(r.P,"String",{repeat:n(145)})},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n(150),a="".startsWith;r(r.P+r.F*n(151)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(28)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(28)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(28)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(28)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(28)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(28)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(28)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(28)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(28)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(28)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(28)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(28)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(28)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(1),i=n(18),o=n(45);r(r.P+r.F*n(7)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(1),i=n(349);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(7),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(27)(r,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(9)("toPrimitive"),i=Date.prototype;r in i||n(26)(i,r,n(352))},function(e,t,n){"use strict";var r=n(4),i=n(45);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(1);r(r.S,"Array",{isArray:n(106)})},function(e,t,n){"use strict";var r=n(41),i=n(1),o=n(18),a=n(212),s=n(152),l=n(10),u=n(153),c=n(154);i(i.S+i.F*!n(109)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,h,f=o(e),p="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,v=void 0!==m,g=0,y=c(f);if(v&&(m=r(m,d>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=l(f.length));t>g;g++)u(n,g,v?m(f[g],g):f[g]);else for(h=y.call(f),n=new p;!(i=h.next()).done;g++)u(n,g,v?a(h,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(1),i=n(153);r(r.S+r.F*n(7)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(1),i=n(31),o=[].join;r(r.P+r.F*(n(93)!=Object||!n(44)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(1),i=n(141),o=n(42),a=n(70),s=n(10),l=[].slice;r(r.P+r.F*n(7)((function(){i&&l.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return l.call(this,e,t);for(var i=a(e,n),u=a(t,n),c=s(u-i),h=new Array(c),f=0;f<c;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},function(e,t,n){"use strict";var r=n(1),i=n(21),o=n(18),a=n(7),s=[].sort,l=[1,2,3];r(r.P+r.F*(a((function(){l.sort(void 0)}))||!a((function(){l.sort(null)}))||!n(44)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(1),i=n(48)(0),o=n(44)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(8),i=n(106),o=n(9)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(1),i=n(48)(1);r(r.P+r.F*!n(44)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(48)(2);r(r.P+r.F*!n(44)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(48)(3);r(r.P+r.F*!n(44)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(48)(4);r(r.P+r.F*!n(44)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(213);r(r.P+r.F*!n(44)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(1),i=n(213);r(r.P+r.F*!n(44)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(1),i=n(104)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(44)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(31),o=n(43),a=n(10),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!n(44)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(1);r(r.P,"Array",{copyWithin:n(214)}),n(60)("copyWithin")},function(e,t,n){var r=n(1);r(r.P,"Array",{fill:n(156)}),n(60)("fill")},function(e,t,n){"use strict";var r=n(1),i=n(48)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(60)("find")},function(e,t,n){"use strict";var r=n(1),i=n(48)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(60)(o)},function(e,t,n){n(73)("Array")},function(e,t,n){var r=n(6),i=n(144),o=n(14).f,a=n(72).f,s=n(108),l=n(95),u=r.RegExp,c=u,h=u.prototype,f=/a/g,p=/a/g,d=new u(f)!==f;if(n(13)&&(!d||n(7)((function(){return p[n(9)("match")]=!1,u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")})))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(d?new c(r&&!o?e.source:e,t):c((r=e instanceof u)?e.source:e,r&&o?l.call(e):t),n?this:h,u)};for(var m=function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},v=a(c),g=0;v.length>g;)m(v[g++]);h.constructor=u,u.prototype=h,n(27)(r,"RegExp",u)}n(73)("RegExp")},function(e,t,n){"use strict";n(217);var r=n(4),i=n(95),o=n(13),a=/./.toString,s=function(e){n(27)(RegExp.prototype,"toString",e,!0)};n(7)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(4),i=n(10),o=n(159),a=n(110);n(111)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=r(e),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var h,f=[],p=0;null!==(h=a(l,u));){var d=String(h[0]);f[p]=d,""===d&&(l.lastIndex=o(u,i(l.lastIndex),c)),p++}return 0===p?null:f}]}))},function(e,t,n){"use strict";var r=n(4),i=n(18),o=n(10),a=n(43),s=n(159),l=n(110),u=Math.max,c=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(111)("replace",2,(function(e,t,n,d){return[function(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=d(n,e,this,t);if(i.done)return i.value;var h=r(e),f=String(this),p="function"==typeof t;p||(t=String(t));var v=h.global;if(v){var g=h.unicode;h.lastIndex=0}for(var y=[];;){var b=l(h,f);if(null===b)break;if(y.push(b),!v)break;""===String(b[0])&&(h.lastIndex=s(f,o(h.lastIndex),g))}for(var x,w="",q=0,_=0;_<y.length;_++){b=y[_];for(var S=String(b[0]),M=u(c(a(b.index),f.length),0),E=[],T=1;T<b.length;T++)E.push(void 0===(x=b[T])?x:String(x));var P=b.groups;if(p){var A=[S].concat(E,M,f);void 0!==P&&A.push(P);var O=String(t.apply(void 0,A))}else O=m(S,f,M,E,P,t);M>=q&&(w+=f.slice(q,M)+O,q=M+S.length)}return w+f.slice(q)}];function m(e,t,r,o,a,s){var l=r+e.length,u=o.length,c=p;return void 0!==a&&(a=i(a),c=f),n.call(s,c,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>u){var f=h(c/10);return 0===f?n:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}s=o[c-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(4),i=n(203),o=n(110);n(111)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),l=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var c=o(s,l);return i(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]}))},function(e,t,n){"use strict";var r=n(108),i=n(4),o=n(96),a=n(159),s=n(10),l=n(110),u=n(158),c=n(7),h=Math.min,f=[].push,p="length",d=!c((function(){RegExp(4294967295,"y")}));n(111)("split",2,(function(e,t,n,c){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,d=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,c+"g");(o=u.call(m,i))&&!((a=m.lastIndex)>h&&(l.push(i.slice(h,o.index)),o[p]>1&&o.index<i[p]&&f.apply(l,o.slice(1)),s=o[0][p],h=a,l[p]>=d));)m.lastIndex===o.index&&m.lastIndex++;return h===i[p]?!s&&m.test("")||l.push(""):l.push(i.slice(h)),l[p]>d?l.slice(0,d):l}:"0".split(void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):m.call(String(i),n,r)},function(e,t){var r=c(m,e,this,t,m!==n);if(r.done)return r.value;var u=i(e),f=String(this),p=o(u,RegExp),v=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(d?"y":"g"),y=new p(d?u:"^(?:"+u.source+")",g),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===f.length)return null===l(y,f)?[f]:[];for(var x=0,w=0,q=[];w<f.length;){y.lastIndex=d?w:0;var _,S=l(y,d?f:f.slice(w));if(null===S||(_=h(s(y.lastIndex+(d?0:w)),f.length))===x)w=a(f,w,v);else{if(q.push(f.slice(x,w)),q.length===b)return q;for(var M=1;M<=S.length-1;M++)if(q.push(S[M]),q.length===b)return q;w=x=_}}return q.push(f.slice(x)),q}]}))},function(e,t,n){"use strict";var r,i,o,a,s=n(58),l=n(6),u=n(41),c=n(84),h=n(1),f=n(8),p=n(21),d=n(74),m=n(75),v=n(96),g=n(160).set,y=n(161)(),b=n(162),x=n(218),w=n(112),q=n(219),_=l.TypeError,S=l.process,M=S&&S.versions,E=M&&M.v8||"",T=l.Promise,P="process"==c(S),A=function(){},O=i=b.f,L=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(9)("species")]=function(e){e(A,A)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),C=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&R(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?u(_("Promise-chain cycle")):(o=C(n))?o.call(n,l,u):l(n)):u(r)}catch(e){c&&!a&&c.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&k(e)}))}},k=function(e){g.call(l,(function(){var t,n,r,i=e._v,o=I(e);if(o&&(t=x((function(){P?S.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=P||I(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},I=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){g.call(l,(function(){var t;P?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},N=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw _("Promise can't be resolved itself");(n=C(t))?y((function(){var i={_w:r,_d:!1};try{n.call(t,u(e,i,1),u(F,i,1))}catch(e){F.call(i,e)}})):(r._v=t,r._s=1,D(r,!1))}catch(e){F.call({_w:r,_d:!1},e)}}};L||(T=function(e){d(this,T,"Promise","_h"),p(e),r.call(this);try{e(u(N,this,1),u(F,this,1))}catch(e){F.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(76)(T.prototype,{then:function(e,t){var n=O(v(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(F,e,1)},b.f=O=function(e){return e===T||e===a?new o(e):i(e)}),h(h.G+h.W+h.F*!L,{Promise:T}),n(83)(T,"Promise"),n(73)("Promise"),a=n(40).Promise,h(h.S+h.F*!L,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!L),"Promise",{resolve:function(e){return q(s&&this===a?T:this,e)}}),h(h.S+h.F*!(L&&n(109)((function(e){T.all(e).catch(A)}))),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=x((function(){var n=[],o=0,a=1;m(e,!1,(function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then((function(e){l||(l=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=x((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(224),i=n(77);n(113)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(1),i=n(114),o=n(163),a=n(4),s=n(70),l=n(10),u=n(8),c=n(6).ArrayBuffer,h=n(96),f=o.ArrayBuffer,p=o.DataView,d=i.ABV&&c.isView,m=f.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(c!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return d&&d(e)||u(e)&&v in e}}),r(r.P+r.U+r.F*n(7)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(h(this,f))(l(i-r)),u=new p(this),c=new p(o),d=0;r<i;)c.setUint8(d++,u.getUint8(r++));return o}}),n(73)("ArrayBuffer")},function(e,t,n){var r=n(1);r(r.G+r.W+r.F*!n(114).ABV,{DataView:n(163).DataView})},function(e,t,n){n(50)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(50)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(50)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(1),i=n(21),o=n(4),a=(n(6).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(7)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),l=o(n);return a?a(r,t,l):s.call(r,t,l)}})},function(e,t,n){var r=n(1),i=n(71),o=n(21),a=n(4),s=n(8),l=n(7),u=n(204),c=(n(6).Reflect||{}).construct,h=l((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),f=!l((function(){c((function(){}))}));r(r.S+r.F*(h||f),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!h)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var l=n.prototype,p=i(s(l)?l:Object.prototype),d=Function.apply.call(e,p,t);return s(d)?d:p}})},function(e,t,n){var r=n(14),i=n(1),o=n(4),a=n(45);i(i.S+i.F*n(7)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),i=n(32).f,o=n(4);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(1),i=n(4),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(149)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var r=n(32),i=n(33),o=n(30),a=n(1),s=n(8),l=n(4);a(a.S,"Reflect",{get:function e(t,n){var a,u,c=arguments.length<3?t:arguments[2];return l(t)===c?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:s(u=i(t))?e(u,n,c):void 0}})},function(e,t,n){var r=n(32),i=n(1),o=n(4);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(1),i=n(33),o=n(4);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(1),i=n(4),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(226)})},function(e,t,n){var r=n(1),i=n(4),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(14),i=n(32),o=n(33),a=n(30),s=n(1),l=n(67),u=n(4),c=n(8);s(s.S,"Reflect",{set:function e(t,n,s){var h,f,p=arguments.length<4?t:arguments[3],d=i.f(u(t),n);if(!d){if(c(f=o(t)))return e(f,n,s,p);d=l(0)}if(a(d,"value")){if(!1===d.writable||!c(p))return!1;if(h=i.f(p,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=s,r.f(p,n,h)}else r.f(p,n,l(0,s));return!0}return void 0!==d.set&&(d.set.call(p,s),!0)}})},function(e,t,n){var r=n(1),i=n(142);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(1),i=n(104)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(60)("includes")},function(e,t,n){"use strict";var r=n(1),i=n(227),o=n(18),a=n(10),s=n(21),l=n(155);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=l(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(60)("flatMap")},function(e,t,n){"use strict";var r=n(1),i=n(227),o=n(18),a=n(10),s=n(43),l=n(155);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=l(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(60)("flatten")},function(e,t,n){"use strict";var r=n(1),i=n(107)(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(1),i=n(228),o=n(112),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(1),i=n(228),o=n(112),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(85)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){"use strict";n(85)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){"use strict";var r=n(1),i=n(46),o=n(10),a=n(108),s=n(95),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(149)(u,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){n(138)("asyncIterator")},function(e,t,n){n(138)("observable")},function(e,t,n){var r=n(1),i=n(226),o=n(31),a=n(32),s=n(153);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),l=a.f,u=i(r),c={},h=0;u.length>h;)void 0!==(n=l(r,t=u[h++]))&&s(c,t,n);return c}})},function(e,t,n){var r=n(1),i=n(229)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(1),i=n(229)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(1),i=n(18),o=n(21),a=n(14);n(13)&&r(r.P+n(115),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(1),i=n(18),o=n(21),a=n(14);n(13)&&r(r.P+n(115),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(1),i=n(18),o=n(45),a=n(33),s=n(32).f;n(13)&&r(r.P+n(115),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(1),i=n(18),o=n(45),a=n(33),s=n(32).f;n(13)&&r(r.P+n(115),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(1);r(r.P+r.R,"Map",{toJSON:n(230)("Map")})},function(e,t,n){var r=n(1);r(r.P+r.R,"Set",{toJSON:n(230)("Set")})},function(e,t,n){n(116)("Map")},function(e,t,n){n(116)("Set")},function(e,t,n){n(116)("WeakMap")},function(e,t,n){n(116)("WeakSet")},function(e,t,n){n(117)("Map")},function(e,t,n){n(117)("Set")},function(e,t,n){n(117)("WeakMap")},function(e,t,n){n(117)("WeakSet")},function(e,t,n){var r=n(1);r(r.G,{global:n(6)})},function(e,t,n){var r=n(1);r(r.S,"System",{global:n(6)})},function(e,t,n){var r=n(1),i=n(42);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(1),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var r=n(1),i=n(232),o=n(211);r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,n){var r=n(1);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,n){var r=n(1);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(1),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var r=n(1);r(r.S,"Math",{scale:n(232)})},function(e,t,n){var r=n(1);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(1),i=n(40),o=n(6),a=n(96),s=n(219);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(1),i=n(162),o=n(218);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(51),i=n(4),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(51),i=n(4),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var l=s.get(t);return l.delete(n),!!l.size||s.delete(t)}})},function(e,t,n){var r=n(51),i=n(4),o=n(33),a=r.has,s=r.get,l=r.key,u=function e(t,n,r){if(a(t,n,r))return s(t,n,r);var i=o(n);return null!==i?e(t,i,r):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var r=n(222),i=n(231),o=n(51),a=n(4),s=n(33),l=o.keys,u=o.key,c=function e(t,n){var o=l(t,n),a=s(t);if(null===a)return o;var u=e(a,n);return u.length?o.length?i(new r(o.concat(u))):u:o};o.exp({getMetadataKeys:function(e){return c(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var r=n(51),i=n(4),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(51),i=n(4),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(51),i=n(4),o=n(33),a=r.has,s=r.key,l=function e(t,n,r){if(a(t,n,r))return!0;var i=o(n);return null!==i&&e(t,i,r)};r.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(51),i=n(4),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(51),i=n(4),o=n(21),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){var r=n(1),i=n(161)(),o=n(6).process,a="process"==n(42)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(1),i=n(6),o=n(40),a=n(161)(),s=n(9)("observable"),l=n(21),u=n(4),c=n(74),h=n(76),f=n(26),p=n(75),d=p.RETURN,m=function(e){return null==e?void 0:l(e)},v=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,v(e))},b=function(e,t){u(e),this._c=void 0,this._o=e,e=new x(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:l(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&v(this)};b.prototype=h({},{unsubscribe:function(){y(this)}});var x=function(e){this._s=e};x.prototype=h({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var r=m(n.next);if(r)return r.call(n,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var r=m(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var r=m(n.complete);e=r?r.call(n,e):void 0}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var w=function(e){c(this,w,"Observable","_f")._f=l(e)};h(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)((function(n,r){l(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})}))}}),h(w,{from:function(e){var t="function"==typeof this?this:w,n=m(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}return new t((function(t){var n=!1;return a((function(){if(!n){try{if(p(e,!1,(function(e){if(t.next(e),n)return d}))===d)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)((function(e){var t=!1;return a((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),f(w.prototype,s,(function(){return this})),r(r.G,{Observable:w}),n(73)("Observable")},function(e,t,n){var r=n(6),i=n(1),o=n(112),a=[].slice,s=/MSIE .\./.test(o),l=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},function(e,t,n){var r=n(1),i=n(160);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(157),i=n(69),o=n(27),a=n(6),s=n(26),l=n(86),u=n(9),c=u("iterator"),h=u("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),m=0;m<d.length;m++){var v,g=d[m],y=p[g],b=a[g],x=b&&b.prototype;if(x&&(x[c]||s(x,c,f),x[h]||s(x,h,g),l[g]=f,y))for(v in r)x[v]||o(x,v,r[v],!0)}},function(e,t,n){(function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"use strict";var i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c="object"===r(t),h=e.regeneratorRuntime;if(h)c&&(t.exports=h);else{(h=e.regeneratorRuntime=c?t.exports:{}).wrap=g;var f={},p={};p[s]=function(){return this};var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==i&&o.call(m,s)&&(p=m);var v=w.prototype=b.prototype=Object.create(p);x.prototype=v.constructor=w,w.constructor=x,w[u]=x.displayName="GeneratorFunction",h.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},h.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(v),e},h.awrap=function(e){return{__await:e}},q(_.prototype),_.prototype[l]=function(){return this},h.AsyncIterator=_,h.async=function(e,t,n,r){var i=new _(g(e,t,n,r));return h.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},q(v),v[u]="Generator",v[s]=function(){return this},v.toString=function(){return"[object Generator]"},h.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},h.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}}}function g(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=y(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function b(){}function x(){}function w(){}function q(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(t){function i(e,a,s,l){var u=y(t[e],t,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===r(h)&&o.call(h,"__await")?n.resolve(h.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):n.resolve(h).then((function(e){c.value=e,s(c)}),l)}l(u.arg)}var a;"object"===r(e.process)&&e.process.domain&&(i=e.process.domain.bind(i)),this._invoke=function(e,t){function r(){return new n((function(n,r){i(e,t,n,r)}))}return a=a?a.then(r,r):r()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=y(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}}("object"===(void 0===e?"undefined":r(e))?e:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:this)}).call(this,n(39),n(233)(e),n(11))},function(e,t,n){n(468),e.exports=n(40).RegExp.escape},function(e,t,n){var r=n(1),i=n(469)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";n.r(t),function(e,t){n(80),n(20),n(192);var r=n(25),i=n(49),o=n(12),a=n(81),s=n(82),l=n(57),u=n(131),c=n(24),h=n(132),f=n(56),p=n(100),d=n(62),m=n(133),v=n(101),g=n(102),y=n(135),b=n(264);function x(t,n,r,i,o,a,s){try{var l=t[a](s),u=l.value}catch(e){return void r(e)}l.done?n(u):e.resolve(u).then(i,o)}function w(t){return function(){var n=this,r=arguments;return new e((function(e,i){var o=t.apply(n,r);function a(t){x(o,e,i,a,s,"next",t)}function s(t){x(o,e,i,a,s,"throw",t)}a(void 0)}))}}n(11).polyfill();var q,_,S,M=n(549).PxCore,E=n(127),T=n(480),P=n(188),A=n(189),O=n(125),L=n(537),C=n(128),D=n(538),k=n(539),I=n(540),R=n(541),F=n(542).calculateSbmCenter,N=n(16),j=n(543),z=n(544),B=n(38),U=n(545),V=n(546),G=(n(548),n(551).FBXLoader,null);t.Px={Core:{Initialize:function(e,t,n){G||(G=new M),G.initialize(e)?(z.initialize(G),t&&t()):n&&n()},SetRenderScale:function(e){G?G.setRenderScale(e):console.warn("Px.Core.SetRenderScale: Core 모듈이 초기화 되지 않았습니다.")},Stats:function(){return G.getRenderer().info},Resize:function(){G.onResize()},UseBloom:function(e){G.setBloomUse(e)},Destroy:function(){r.b.clear(),C.clearModel(G.workObjGroup),G.modelVisibility.clear(),R.clear(),G.poiMgr.removeAllPoi(),G.editor.undoRedoHandler.clear(),G.evacPathMgr.clear(),G.fireMgr.clear(),G.destroyWebGLContext()}},Camera:{SetPerspective:function(e){G.camera.setPerspective((function(){G.updateComposerRenderPass(),e&&e()}))},SetOrthographic:function(e){var t=G.poiMgr.getMaxHeight(),n=G.getAllSceneBounding();G.camera.setOrthographic(t,n,(function(){G.updateComposerRenderPass(),e&&e()}))},GetState:function(){return G.camera.getState()},SetState:function(e){G.camera.setState(e)},GetZoomSpeed:function(e){return G.camera.getZoomSpeed(e)},SetZoomSpeed:function(e){G.camera.setZoomSpeed(e)},GetCurrentDistance:function(e){return G.camera.getCurrentDistance(e)},SetMinDistance:function(e){G.camera.setMinDistance(e)},GetMinDistance:function(e){return G.camera.getMinDistance(e)},SetMaxDistance:function(e){G.camera.setMaxDistance(e)},GetMaxDistance:function(e){return G.camera.getMaxDistance(e)},GetCurrentOrthoZoom:function(e){return G.camera.getCurrentOrthoZoom(e)},SetOrthoMinZoom:function(e){G.camera.setOrthoMinZoom(e)},GetOrthoMinZoom:function(e){return G.camera.getOrthoMaxZoom(e)},SetOrthoMaxZoom:function(e){G.camera.setOrthoMaxZoom(e)},GetOrthoMaxZoom:function(e){return G.camera.getOrthoMaxZoom(e)},StartZoomIn:function(){G.camera.startZoomIn()},StopZoomIn:function(){G.camera.stopZoomIn()},StartZoomOut:function(){G.camera.startZoomOut()},StopZoomOut:function(){G.camera.stopZoomOut()},StartRotateLeft:function(){G.camera.startRotateLeft()},StopRotateLeft:function(){G.camera.stopRotateLeft()},StartRotateRight:function(){G.camera.startRotateRight()},StopRotateRight:function(){G.camera.stopRotateRight()},StartRotateUp:function(){G.camera.startRotateUp()},StopRotateUp:function(){G.camera.stopRotateUp()},StartRotateDown:function(){G.camera.startRotateDown()},StopRotateDown:function(){G.camera.stopRotateDown()},Stop:function(){G.camera.stop()},ExtendView:function(e,t,n,r){var i=[G.workObjGroup];i=i.concat(G.poiMgr.getVisiblePois()),G.camera.fitToObject(i,e,t,r,n)},MoveToPoi:function(e){G.camera.moveToPoi(e)},MoveToPosition:function(e,t,n,r,i,o){G.camera.moveToPosition(e,t,n,r,i,o)},MoveToObject:function(e,t,n,r){G.camera.moveToObject(e,G.workObjGroup,t,n,r)},MoveToPoiArray:function(e){G.camera.moveToPoiArray(e)},FPS:{IsOn:function(){return G.camera.fpsCam.isOn},On:function(){G.pointerPicker.on((function(e,t,n){G.camera.fpsCam.on(e,t+1,n)}))},Off:function(){G.camera.fpsCam.off()},StartMoveForward:function(){G.camera.fpsCam.moveForward=!0},StopMoveForward:function(){G.camera.fpsCam.moveForward=!1},StartMoveBackward:function(){G.camera.fpsCam.moveBackward=!0},StopMoveBackward:function(){G.camera.fpsCam.moveBackward=!1},StartMoveLeft:function(){G.camera.fpsCam.moveLeft=!0},StopMoveLeft:function(){G.camera.fpsCam.moveLeft=!1},StartMoveRight:function(){G.camera.fpsCam.moveRight=!0},StopMoveRight:function(){G.camera.fpsCam.moveRight=!1},StartRotateUp:function(){G.camera.fpsCam.rotateUp=!0},StopRotateUp:function(){G.camera.fpsCam.rotateUp=!1},StartRotateDown:function(){G.camera.fpsCam.rotateDown=!0},StopRotateDown:function(){G.camera.fpsCam.rotateDown=!1},StartRotateLeft:function(){G.camera.fpsCam.rotateLeft=!0},StopRotateLeft:function(){G.camera.fpsCam.rotateLeft=!1},StartRotateRight:function(){G.camera.fpsCam.rotateRight=!0},StopRotateRight:function(){G.camera.fpsCam.rotateRight=!1},Stop:function(){G.camera.fpsCam.stop()},SetMoveSpeed:function(e){G.camera.fpsCam.setMoveSpeed(e)},SetRotateSpeed:function(e){G.camera.fpsCam.setRotateSpeed(e)},SetHeightOffset:function(e){G.camera.fpsCam.setHeightOffset(e)}},EnableScreenPanning:function(){G.camera.enableScreenSpacePanning(G.workObjGroup)},DisableScreenPanning:function(){G.camera.disableScreenSpacePanning()}},Effect:{Flashing:{Start:function(e,t,n,i){r.a.start(G.workObjGroup,e,t,n,i)},Stop:function(e){r.a.stop(e)},StopAll:function(){r.a.stopAll()}},Outline:{Add:function(e){r.b.add(G.workObjGroup,e)},Remove:function(e){r.b.remove(G.workObjGroup,e)},Clear:function(){r.b.clear()},HoverEventOn:function(e){r.b.hoverEventOn(G,e)},HoverEventOff:function(){r.b.hoverEventOff()},AddHoverEventCallback:function(e){r.b.addHoverEventCallback(e)},RemoveHoverEventCallback:function(e){r.b.removeHoverEventCallback(e)}},Smoke:{LoadSmokeTexture:function(e){G.smokeSystem.loadSmokeTexture(e)},SetSmokePosition:function(){G.smokeSystem.setSmokePosition()},Pause:function(){G.smokeSystem.pause()},Resume:function(){G.smokeSystem.resume()},Stop:function(){G.smokeSystem.stop()},ShowPointer:function(){G.smokeSystem.showPointer()},HidePointer:function(){G.smokeSystem.hidePointer()},SetSpeedRatio:function(e){G.smokeSystem.setVelocityRatio(e)},SetDensity:function(e){G.smokeSystem.setDensity(e)}}},Event:{On:function(){G.event.on()},Off:function(){G.event.off()},AddEventListener:function(e,t,n){G.event.addEventListener(e,t,n)},RemoveEventListener:function(e,t,n){G.event.removeEventListener(e,t,n)}},Loader:{LoadSingleSbm:function(e){if(G)try{if(!e||!e.url||!e.id)throw"Px.Loader.LoadSingleSbm: 유효하지 않은 옵션입니다.";if(G.workObjGroup.getObjectByName(e.id))throw e.id+"는 이미 지정된 식별자 입니다.";E.loadSingleSbm(e.url,e.id,e.displayName,e.baseFloor).then((function(t){C.createObjectFromSbmData(t,.1).then((function(t){G.workObjGroup.add(t.mesh),e.onLoad&&e.onLoad(t.id)})).catch((function(t){e.onError&&e.onError(t)}))})).catch((function(t){e.onError&&e.onError(t)}))}catch(e){console.error(e)}else console.warn("Px.Loader.LoadSingleSbm: Core 모듈이 초기화 되지 않았습니다.")},LoadSbmUrlArray:function(e){E.loadSbmUrlArray(G,.1,e.urlDataList,e.center,e.onLoad)},LoadSbm:function(e){if(G)try{if(!e||!e.url)throw"Px.Loader.LoadSbm: 유효하지 않은 옵션입니다.";T.loadSbmXml(e.url).then((function(t){C.createObjectFromSbmDataArray(t,.1).then((function(t){for(var n=0;n<t.length;n++)G.workObjGroup.add(t[n].mesh),t[n].mesh.userData.SourceLocalPosition=t[n].mesh.position.clone();e.onLoad&&e.onLoad(e.url)})).catch((function(t){e.onError&&e.onError(t)}))})).catch((function(t){e.onError&&e.onError(t)}))}catch(t){e.onError&&e.onError(t)}else console.warn("Px.Loader.LoadSingleSbm: Core 모듈이 초기화 되지 않았습니다.")},LoadFbx:function(e){try{if(!G)throw"Px.Loader.LoadFbx: Core 모듈이 초기화 되지 않았습니다.";if(!e||!e.url)throw"Px.Loader.LoadFbx: 유효하지 않은 옵션입니다.";P.load(e.url,(function(t){G.workObjGroup.add(t);var n=P.analyzeFloorInfo(t);G.modelVisibility.setFloorData(n),G.camera.fitToObject(t),e.onLoad&&e.onLoad(e.url,n)}),(function(e){throw e}))}catch(t){e&&e.onError&&e.onError(t)}},LoadObj:function(e){try{if(!G)throw"Px.Loader.LoadObj: Core 모듈이 초기화 되지 않았습니다.";if(!e||!e.objUrl)throw"Px.Loader.LoadObj: 유효하지 않은 옵션입니다.";A.load(e.mtlUrl,e.objUrl,(function(t){G.workObjGroup.add(t),e.id&&(t.name=e.id),e.onLoad&&e.onLoad(e.mtlUrl,e.objUrl)}),(function(e){throw e}))}catch(t){e&&e.onError&&e.onError(t)}},LoadGml:function(e){try{D.load(e.url,.1,(function(t,n){console.log("Gml 데이터 로드 완료."),k.createPathData(t,n,(function(){console.log("길찾기 데이터 구성 완료"),e.onLoad&&e.onLoad()}))}))}catch(t){e&&e.onError&&e.onError(t)}},LoadGltf:function(e){try{O.load(e.url,(function(t){G.workObjGroup.add(t.scene);for(var n=O.analyzeFloorInfo(t.scene),r=[],i=0;i<n.length;i++)"floorroot"===n[i].type&&(r.push(n[i]),n[i].target.userData.SourceLocalPosition=n[i].target.position.clone());G.modelVisibility.setFloorData(r),G.modelVisibility.setTypedObjectList(n),e.onLoad&&e.onLoad(e.url)}),e.onError)}catch(t){e&&e.onError&&e.onError(t)}},LoadGltfInstanced:function(e){O.loadInstanced(e.url,(function(e){}),(function(e){console.error(e)}))},Load3DS:function(e){try{L.load(e.url,(function(t){G.workObjGroup.add(t),G.camera.fitToObject(t),e.onLoad&&e.onLoad(e.url)}),e.error)}catch(t){e&&e.onError?e.onError(t):console.error(t)}},LoadModelArray:function(e,t){try{j.loadModelArray(e,(function(e){e.forEach((function(e){e.parent=G.workObjGroup,G.workObjGroup.add(e.target)})),G.modelVisibility.setFloorData(e),G.workObjGroup.updateMatrixWorld(!0),G.camera.fitToObject(G.workObjGroup),t&&t()}))}catch(e){console.error(e)}}},Model:{Expand:function(e){G.modelExpander.expandFbx(e)},Collapse:function(e){G.modelExpander.collapseFbx(e)},Transparent:{Set:function(e,t){t*=.01,G.transparentUtil.set(e,t)},SetAll:function(e){e*=.01,G.transparentUtil.setAll(e)},Restore:function(){G.transparentUtil.restore()}},TransparentLight:{Set:function(e){e||(e=50),e*=.01,N.AddSDTObject(G.workObjGroup,e)},Restore:N.Restore},Visible:{Show:function(e){G.modelVisibility.show(e)},Hide:function(e){G.modelVisibility.hide(e)},ShowByArray:function(e){G.modelVisibility.showArray(e)},HideByArray:function(e){G.modelVisibility.hideArray(e)},ShowAll:function(){G.modelVisibility.showAll()},HideAll:function(){G.modelVisibility.hideAll()},ShowByType:function(e,t){G.modelVisibility.showByType(e,t)},HideByType:function(e,t){G.modelVisibility.hideByType(e,t)},SetVisibleByProperty:function(e,t,n){e instanceof Array?e.forEach((function(e){t instanceof Array?t.forEach((function(t){G.modelVisibility.setVisibleByProperty(e,t,n)})):G.modelVisibility.setVisibleByProperty(e,t,n)})):t instanceof Array?t.forEach((function(t){G.modelVisibility.setVisibleByProperty(e,t,n)})):G.modelVisibility.setVisibleByProperty(e,t,n)},GetVisibleByProperty:function(e,t){var n=[];if(e instanceof Array)e.forEach((function(e){if(t instanceof Array)t.forEach((function(t){var r=G.modelVisibility.getVisibleByProperty(e,t);r&&n.push(r)}));else{var r=G.modelVisibility.getVisibleByProperty(e,t);r&&n.push(r)}}));else if(t instanceof Array)t.forEach((function(t){var r=G.modelVisibility.getVisibleByProperty(e,t);r&&n.push(r)}));else{var r=G.modelVisibility.getVisibleByProperty(e,t);r&&n.push(r)}return n},ShowOutdoor:function(){G.modelVisibility.showOutdoor()},HideOutdoor:function(){G.modelVisibility.hideOutdoor()}},Clear:function(){C.clearModel(G.workObjGroup),G.modelVisibility.clear()},MoveTo:function(e,t,n,r){G.movelMoveTo(e,t,n,r)},GetHierarchy:function(){return G.modelVisibility.getFloorData()},SetTexture:function(e,t,n){e instanceof Array?e.forEach((function(e){t instanceof Array?t.forEach((function(t){G.tipsTextureManager.setTexture(e,t,n)})):G.tipsTextureManager.setTexture(e,t,n)})):t instanceof Array?t.forEach((function(t){G.tipsTextureManager.setTexture(e,t,n)})):G.tipsTextureManager.setTexture(e,t,n)},GetTexture:function(e,t){var n=[];if(e instanceof Array)e.forEach((function(e){if(t instanceof Array)t.forEach((function(t){var r=G.tipsTextureManager.getTexture(e,t);r&&n.push({floorname:e,type:t,textureUrl:r})}));else{var r=G.tipsTextureManager.getTexture(e,t);r&&n.push({floorname:e,type:t,textureUrl:r})}}));else if(t instanceof Array)t.forEach((function(t){var r=G.tipsTextureManager.getTexture(e,t);r&&n.push({floorname:e,type:t,textureUrl:r})}));else{var r=G.tipsTextureManager.getTexture(e,t);r&&n.push({floorname:e,type:t,textureUrl:r})}return n}},Path:{ShowPathDataMap:function(){I.showPathData(G,k.getPathDataRoot())},HidePathDataMap:function(){I.hidePathData(G)},FindPath:function(e){k.findPathByPosition(e,(function(t){R.addVizLine(G.getPathVizGroup(),t,e.type,e.color,e.tubeRadius);for(var n=[],r=0;r<t.length;r++)n.push({x:t[r].x,y:t[r].y,z:t[r].z});e.onComplete&&e.onComplete(n)}))},Clear:function(){R.clear()}},Poi:{Add:(S=w(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.rotation,r={x:100,y:100,z:100},t.scale&&(r=t.scale),e.next=6,G.poiMgr.addPoi(t.type,t.url,t.id,t.group,t.position.x,t.position.y,t.position.z,n.x,n.y,n.z,r.x,r.y,r.z,t.iconUrl,t.lineHeight,t.displayText,t.property,t.onComplete);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return S.apply(this,arguments)}),AddSync:function(e){try{var t=e.rotation,n={x:100,y:100,z:100};e.scale&&(n=e.scale),G.poiMgr.addPoi_Sync(e.type,e.url,e.id,e.group,e.position.x,e.position.y,e.position.z,t.x,t.y,t.z,n.x,n.y,n.z,e.iconUrl,e.lineHeight,e.displayText,e.property,e.onComplete)}catch(e){console.error(e)}},AddByMouse:function(e){G.poiMgr.addPoiByMouse(e.type,e.url,e.id,e.group,e.iconUrl,e.lineHeight,e.displayText,e.property,e.scale,e.onComplete)},AddByMouseSync:function(e){G.poiMgr.addPoiByMouse_Sync(e.type,e.url,e.id,e.group,e.iconUrl,e.lineHeight,e.displayText,e.property,e.scale,e.onComplete)},AddFromDataArray:(_=w(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.poiMgr.addPoiArray(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),r&&r(e.t0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e,t,n){return _.apply(this,arguments)}),AddFromDataArraySync:function(e,t,n){try{G.poiMgr.addPoiArray_Sync(e,t)}catch(e){n&&n(e),console.error(e)}},Remove:function(e,t){G.poiMgr.removePoi(e,t)},RemoveGroup:function(e,t){G.poiMgr.removeGroup(e,t)},Clear:function(e){G.poiMgr.removeAllPoi(e)},SetIcon:function(e,t,n){G.poiMgr.setIconImage(e,t,n)},SetIconGroup:function(e,t,n){G.poiMgr.SetIconImageGroup(e,t,n)},SetComponent:function(e,t,n,r){G.poiMgr.setComponent(e,t,n,r)},SetComponentGroup:function(e,t,n,r){G.poiMgr.setComponentGroup(e,t,n,r)},SetPosition:function(e){G.poiMgr.setPosition(e)},SetLineHeight:function(e,t,n){G.poiMgr.setLineHeight(e,t,n)},SetLineHeightGroup:function(e,t,n){G.poiMgr.setLineHeightGroup(e,t,n)},SetLineColor:function(e,t){G.poiMgr.setLineColor(e,t)},SetText:function(e,t,n){G.poiMgr.setText(e,t,n)},GetData:function(e,t){return G.poiMgr.getPoiData(e,t)},GetDataAll:function(e){return G.poiMgr.getPoiDataAll(e)},Get2DPosition:function(e,t){return G.poiMgr.getPoi2DPos(e,t)},SetIconSize:function(e,t,n){t*=.01,G.poiMgr.setIconSize(e,t,n)},SetTextSize:function(e,t,n){t*=.01,G.poiMgr.setTextSize(e,t,n)},GetProperty:function(e,t){return G.poiMgr.getProperty(e,t)},SetProperty:function(e,t,n,r){return G.poiMgr.setProperty(e,t,n,r)},RemoveProperty:function(e,t,n){return G.poiMgr.removeProperty(e,t,n)},GetPoiDataByProperty:function(e,t,n){return G.poiMgr.getPoiDataByProperty(e,t,n)},Show:function(e,t){G.poiMgr.show(e,t)},Hide:function(e,t){G.poiMgr.hide(e,t)},ShowByGroup:function(e,t){G.poiMgr.showByGroup(e,t)},HideByGroup:function(e,t){G.poiMgr.hideByGroup(e,t)},ShowByProperty:function(e,t,n){G.poiMgr.showByProperty(e,t,n)},ShowByPropertyArray:function(e,t){G.poiMgr.showByPropertyArray(e,t)},HideByProperty:function(e,t,n){G.poiMgr.hideByProperty(e,t,n)},HideByPropertyArray:function(e,t){G.poiMgr.hideByPropertyArray(e,t)},ShowAll:function(e){G.poiMgr.showAll(e)},HideAll:function(e){G.poiMgr.hideAll(e)},SetColor:function(e,t){G.poiMgr.setColor(e,t)},RestoreColor:function(e){G.poiMgr.restoreColor(e)},SetColorByGroup:function(e,t){G.poiMgr.setColorByGroup(e,t)},RestoreColorByGroup:function(e){G.poiMgr.restoreColorByGroup(e)},SetColorByProperty:function(e,t,n){G.poiMgr.setColorByProperty(e,t,n)},RestoreColorByProperty:function(e,t){G.poiMgr.restoreColorByProperty(e,t)},SetColorAll:function(e){G.poiMgr.setColorAll(e)},RestoreColorAll:function(){G.poiMgr.restoreColorAll()},SetTextColor:function(e,t){G.poiMgr.setTextColor(e,t)},SetTextColorByGroup:function(e,t){G.poiMgr.setTextColorByGroup(e,t)},SetTextColorByProperty:function(e,t,n){G.poiMgr.setTextColorByProperty(e,t,n)},Selector:{On:function(){G.poiSelector.on()},Off:function(){G.poiSelector.off()},AddCallbackListener:function(e){G.poiSelector.addCallbackListener(e)},RemoveCallbackListener:function(e){G.poiSelector.removeCallbackListener(e)},ShowRange:function(e,t){G.poiSelector.showRange(e,t)},HideRange:function(){G.poiSelector.hideRange()},GetByRange:function(e,t,n){return G.poiSelector.getByRange(e,t,n)}},MultiSelector:{On:function(){G.poiMultiSelector.on()},Off:function(){G.poiMultiSelector.off()},GetSelected:function(){return G.poiMultiSelector.getSelected()}},SetVisibleOption:function(e,t,n,r){G.poiMgr.setVisibleOption(e,t,n,r)},SetVisibleOptionByProperty:function(e,t,n,r,i){G.poiMgr.setVisibleOptionByProperty(e,t,n,r,i)},SetVisibleOptionAll:function(e,t,n){G.poiMgr.setVisibleOptionAll(e,t,n)},Animation:{Play:function(e,t){G.poiMgr.animationPlay(e,t)},Stop:function(e,t){G.poiMgr.animationStop(e,t)},StopAll:function(e){G.poiMgr.animationStopAll(e)},SetAnimationLoopType:function(e,t){G.poiMgr.setAnimationLoopType(e,t)},SetIcon:function(e){G.poiMgr.setAnimatedIcon(e)},DisableIcon:function(e){G.poiMgr.disableAnimatedIcon(e)}},Robot:u,AddOffsetAll:function(e,t,n){G.poiMgr.addOffsetAll(e,t,n)},Move:function(e,t,n){G.poiMgr.Move(e,t,n)}},Util:{ExportGltf:function(){b.a(G)},OutlineMesh:z,Measure:m,Grid:{On:function(e){G?G.setGridOn(e):console.warn("Px.Util.Grid.On: Core 모듈이 초기화 되지 않았습니다.")},Off:function(e){G?G.setGridOff():console.warn("Px.Util.Grid.On: Core 모듈이 초기화 되지 않았습니다.")}},PointPicker:{On:function(e){G.pointerPicker.on(e)},Off:function(){G.pointerPicker.off()}},SetBackgroundColor:function(e){G.setBackgroundColor(e)},GetSbmCenter:function(){return G.getSbmCenter()},CalculateSbmCenter:function(e,t){F(.1,e.urlDataList,t)},GetFbxHierarchy:function(e,t){P.getFbxHierarchy(e,t)},GetBounding:function(){if(G){var e=G.getWorkGroupBounding();return{minimum:{x:e.min.x,y:e.min.y,z:e.min.z},maximum:{x:e.max.x,y:e.max.y,z:e.max.z}}}return null},TakeScreenshot:function(e){var t=G.takeScreenshot();if(e){var n=document.createElement("a");n.download="screenshot.png",n.href=t,n.target="_blank",n.click()}return t}},Edit:{On:function(e){G.editor.on(e)},Off:function(){G.editor.off()},Undo:function(){G.editor.undoRedoHandler.undo()},Redo:function(){G.editor.undoRedoHandler.redo()},ClearUndoRedo:function(){G.editor.undoRedoHandler.clear()},SetMode:function(e){G.editor.setEditMode(e)},SetMouseUpCallback:function(e){G.editor.setMouseUpCallback(e)}},Subway:{LoadModel:function(e,t,n,r){G.subway.loadSubwayModel(e,t,n,r)},LoadData:function(e,t){G.subway.loadSubwayData(e,t)},GetLineNames:function(){return G.subway.getLineNames()},StartEnter:function(e){G.subway.startEnterAnim(e)},StartExit:function(e){G.subway.startExitAnim(e)},Remove:function(e){G.subway.removeElement(e)},RemoveAll:function(){G.subway.removeAllElement()},SetVisible:function(e,t){G.subway.setVisible(e,t)},SetVisibleAll:function(e){G.subway.setVisibleAll(e)},Editor:{On:function(e){G.subwayLineEditor.on(e)},Off:function(){G.subwayLineEditor.off()}}},VirtualPatrol:{Editor:{On:function(e){G.vpMgr.editorOn(e)},Off:function(){G.vpMgr.editorOff()},SetPointCreateCallback:function(e){G.vpMgr.vpEditor.onPointCreate=e},Finish:function(){return G.vpMgr.finishDrawing()},StartSetPosition:function(){G.vpMgr.character.startSetPosition()}},LoadCharacterModel:function(e,t){G.vpMgr.loadCharacterModel(e,t)},LoadArrowTexture:function(e,t){G.vpMgr.loadArrowTexture(e,t)},Remove:function(e){G.vpMgr.remove(e)},RemoveAll:function(){G.vpMgr.removeAll()},Export:function(){return G.vpMgr.export()},Import:function(e){G.vpMgr.import(e)},GetSize:function(){return G.vpMgr.overallSize},SetSize:function(e){G.vpMgr.setSize(e)},MoveTo:function(e,t,n,r,i){G.vpMgr.moveTo(e,t,n,r,i)},SetCharacterSize:function(e){G.vpMgr.setCharacterSize(e)},DisposeCharacterResources:function(e){G.vpMgr.disposeCharacterResources(e)},Clear:function(){G.vpMgr.removeAll(),G.vpMgr.editorOff()}},Lod:{SetLodData:function(e){G.lodMgr.setLodData(e)},GetMaxDistance:function(){return G.lodMgr.getMaxDistance(G.workObjGroup,G.getCamera().position)}},Minimap:{Attach:function(e){G.minimap.attach(e)},SetZoomLevel:function(e){G.minimap.setZoomLevel(e)},SetTypeShort:function(){G.minimap.changeType("MinimapType1")},SetTypeLong:function(){G.minimap.changeType("MinimapType0")},SetAngle:function(e){G.minimap.setAngle(e)},ShowFov:function(){G.minimap.fovObjectShow()},HideFov:function(){G.minimap.fovObjectHide()},SetFovVisible:function(e){G.minimap.setFovObjectVisible(e)},EnableDynamicZoom:function(){G.minimap.enableDynamicZoom()},DisableDynamicZoom:function(){G.minimap.disableDynamicZoom()},LoadArrowTexture:function(e,t){G.minimap.loadArrowTexture(e,t)},SetArrowSize:function(e,t){G.minimap.setArrowSize(e,t)},ShowArrow:function(){G.minimap.showArrow()},HideArrow:function(){G.minimap.hideArrow()}},Evac:{LoadArrowTexture:function(e,t){G.evacPathMgr.loadArrowTexture(e,t)},DrawEditorOn:function(){G.evacPathMgr.drawEditorOn()},DrawEditorOff:function(){G.evacPathMgr.drawEditorOff()},PointDeleterOn:function(){G.evacPathMgr.pointDeleterOn()},PointDeleterOff:function(){G.evacPathMgr.pointDeleteOff()},LinkDeleterOn:function(){G.evacPathMgr.linkDeleterOn()},LinkDeleterOff:function(){G.evacPathMgr.linkDeleterOff()},Clear:function(){G.evacPathMgr.clear()},Export:function(){return G.evacPathMgr.export()},Import:function(e){G.evacPathMgr.import(e)},SetColor:function(e){G.evacPathMgr.setColor(e)},SetSize:function(e){G.evacPathMgr.setSize(e)},SetSpeed:function(e){G.evacPathMgr.setSpeed(e)},ShowAll:function(){G.evacPathMgr.showAll()},HideAll:function(){G.evacPathMgr.hideAll()},ShowByProperty:function(e,t){return G.evacPathMgr.showByProperty(e,t)},HideByProperty:function(e,t){return G.evacPathMgr.hideByProperty(e,t)}},Fire:{LoadFireTexture:function(e,t){G.fireMgr.loadFireTexture(e,t)},SetVisible:function(e,t){G.fireMgr.setVisible(e,t)},SetVisibleAll:function(e){G.fireMgr.setVisibleAll(e)},GetData:function(){return G.fireMgr.getData()},SetData:function(e){G.fireMgr.setData(e)},SetSize:function(e,t){G.fireMgr.setSize(e,t)},SetSizeAll:function(e){G.fireMgr.setSizeAll(e)},SetPosition:function(e,t,n,r){G.fireMgr.setPosition(e,t,n,r)},PlaceByPointer:function(e){G.fireMgr.placeByPointer(e)},CreateFire:function(e){G.fireMgr.createFire(e)},DeleteById:function(e){G.fireMgr.deleteById(e)},Clear:function(e){G.fireMgr.clear()},DeleteByPointer:function(){G.fireMgr.deleteByPointer()}},Water:{LoadTexture:function(e,t){G.ocean.loadWaterTexture(e,t)},On:function(){G.ocean.on(G.getSystemObjectGroup(),G.getDirectionalLight(),G.getRenderer())},Off:function(){G.ocean.editOff(G.getSystemObjectGroup()),G.ocean.off(G.getSystemObjectGroup())},EditOn:function(){G.ocean.editOn(G.getCameraControl(),G.getCamera(),G.getDom(),G.getSystemObjectGroup())},EditOff:function(){G.ocean.editOff(G.getSystemObjectGroup())},GetPosition:function(){return G.ocean.getPosition()},SetPosition:function(e,t,n){G.ocean.setPosition(e,t,n)}},Space:{EditOn:function(){G.spaceMgr.on()},EditOff:function(){G.spaceMgr.off()},Visible:function(e){G.spaceMgr.box2F.visible=e},Flash:function(e,t,n,r,i){G.spaceMgr.flash("2f",e,t,n,r,i)}},Topology:d,SKMagic:{LoadPoiData:(q=w(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.b.loadPoiData(t,G.workObjGroup,function(){var e=w(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.poiMgr.addPoiArray(t,n);case 2:Px.Poi.SetTextColorByProperty("type","water",10066329),Px.Poi.SetTextColorByProperty("type","temperature",10066329),Px.Poi.SetTextColorByProperty("type","air",10066329);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),function(e,t){return q.apply(this,arguments)}),PowerLine:{LoadPowerLineModel:function(e,t){i.c.loadPowerLine(G.getSystemObjectGroup(),e,t)},LoadArrowModel:function(e,t){i.c.loadArrow(G.getSystemObjectGroup(),e,t)},Show:function(){i.c.show(G.workObjGroup)},Hide:function(){i.c.hide(G.workObjGroup)}},Camera:{SetWalkableObject:function(){i.a.setWalkableObject(G.workObjGroup,G.camera.fpsCam)},UpdateHeight:function(){i.a.updateHeight(G.camera.fpsCam)}}},Saeman:{Focus:{Set:function(e){o.b.setFocusObject(G.workObjGroup,e)},Restore:function(){o.b.restore(G.workObjGroup)}},Bus:{Initialize:function(){o.a.getBusFromModel(G.workObjGroup)},ImportRoutes:function(e,t){o.a.importBusRoutes(e,t)},DoPatrol:function(){o.a.doPatrol()},DoRecharge:function(e){o.a.doRecharge(e)},DoRechargeImmediate:function(){o.a.doRechargeStationImmediate()},Stop:function(){o.a.stop()},Pause:function(){o.a.pause()},Resume:function(){o.a.resume()}},PowerLine:o.d,Poi:o.c,Trailer:o.e},SkShip:a,SktTower:s,Gsdv:l,Nipa5gElevator:c,SysLight:h,SmartLight:f,SubView:{Create:function(e,t){G.createSubView(e,t)}},Skt5GDT:p,Tips:v,ChungBuk:g,Text3D:B,Label:U,Volume:y,Test:function(){V.Plate(G)}}}.call(this,n(11),n(39))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"PxPoiManager",(function(){return p}));var r=n(0),i=n(188),o=n(189),a=n(125),s=n(196),l=n(54);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(t,n,r,i,o,a,s){try{var l=t[a](s),u=l.value}catch(e){return void r(e)}l.done?n(u):e.resolve(u).then(i,o)}function h(t){return function(){var n=this,r=arguments;return new e((function(e,i){var o=t.apply(n,r);function a(t){c(o,e,i,a,s,"next",t)}function s(t){c(o,e,i,a,s,"throw",t)}a(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.core=e,this.lodMgr=n,this.componentStorage={},this.iconList={},this.createSharedResources(),this.poiList={},this.clock=new r.Clock,this.updateHandler=null,this.onUpdate(),this.textMeasureCanvas=document.createElement("canvas"),this.textMeasureCtx=this.textMeasureCanvas.getContext("2d"),this.textMeasureCtx.font="12pt 맑은 고딕",this.animationSpriteFuncArray=[]}var n,c,p,d,m,v,g,y,b,x,w,q,_;return n=t,(c=[{key:"onUpdate",value:function(){this.updateHandler=requestAnimationFrame(this.onUpdate.bind(this));var e=this.clock.getDelta();for(var t in this.poiList)this.poiList[t].update(this.core.getCamera(),this.lodMgr,e),this.poiList[t].move&&this.poiList[t].translateOnAxis(this.poiList[t].direction,this.poiList[t].speed*e);this.animationSpriteFuncArray&&this.animationSpriteFuncArray.length>0&&this.animationSpriteFuncArray.forEach((function(t){t(e)}))}},{key:"createSharedResources",value:function(){this.pointSharedMaterial=new r.MeshPhongMaterial({color:16711680}),this.sharedSphereGeometry=new r.SphereBufferGeometry(.5,16,16),this.sharedSphere=new r.Mesh(this.sharedSphereGeometry,this.pointSharedMaterial),this.sharedBoxGeometry=new r.BoxBufferGeometry(.5,.5,.5),this.sharedBox=new r.Mesh(this.sharedBoxGeometry,this.pointSharedMaterial),this.sharedPlaneGeometry=this.sharedPlaneGeometry=new r.PlaneBufferGeometry(1,1,1,1),this.sharedPlaneGeometry.translate(0,.5,0),this.sharedLineMaterial=new r.LineBasicMaterial({color:16711680})}},{key:"addPoiArray",value:(_=h(regeneratorRuntime.mark((function e(t,n){var i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.length)){e.next=11;break}return o=t[i].rotation,a={x:100,y:100,z:100},t[i].scale&&((a=t[i].scale).x=r.Math.clamp(a.x,.01,a.x),a.y=r.Math.clamp(a.y,.01,a.y),a.z=r.Math.clamp(a.z,.01,a.z)),o||(o={x:0,y:0,z:0}),e.next=8,this.addPoi(t[i].type,t[i].url,t[i].id,t[i].group,t[i].position.x,t[i].position.y,t[i].position.z,o.x,o.y,o.z,a.x,a.y,a.z,t[i].iconUrl,t[i].lineHeight,t[i].displayText,t[i].property);case 8:i++,e.next=1;break;case 11:n&&n();case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return _.apply(this,arguments)})},{key:"addPoi",value:(q=h(regeneratorRuntime.mark((function e(t,n,i,o,a,s,c,h,f,p,d,m,v,g,y,b,x,w){var q,_,S,M,E,T,P,A,O,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i in this.poiList)){e.next=2;break}return e.abrupt("return");case 2:return t||(t=""),e.next=5,this.loadModel(t,n);case 5:if(q=e.sent,_=null,"string"!=typeof g){e.next=15;break}if(_=g,!g||g in this.iconList!=0){e.next=13;break}return S=this,e.next=13,this.loadIcon(g).then((function(e){S.iconList[_]=e}));case 13:e.next=19;break;case 15:if("object"!==u(g)){e.next=19;break}return M=this,e.next=19,this.loadIconSprite(g).then((function(e){_=g,M.iconList[_]=e}));case 19:if(E=null,T=null,!b){e.next=23;break}return e.next=23,this.createTextMaterial(b).then((function(e){E=e.material,T=e.size}));case 23:(P=new l.PxPoiElement(i,o,q,y,this.sharedLineMaterial,this.iconList[_],this.sharedPlaneGeometry,E,T,new r.Vector3(.01*d,.01*m,.01*v))).userData.type=t,P.userData.url=n,P.userData.iconUrl=_,P.userData.displayText=b,P.userData.property=x||{},this.poiList[i]=P,this.core.getPoiRootGroup().add(P),P.position.set(a,s,c),A=(new r.Quaternion).setFromEuler(P.pointObject.rotation),O=(new r.Quaternion).setFromEuler(new r.Euler(h,f,p)),L=(new r.Quaternion).multiplyQuaternions(A,O),P.pointObject.quaternion.copy(L),P.pointObject.updateMatrixWorld(!0),P.updateMatrix(),w&&w();case 39:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i,o,a,s,l,u,c,h,f,p,d,m,v,g){return q.apply(this,arguments)})},{key:"createTextMaterial",value:function(t){var n=this;return new e((function(e,i){try{for(var o=t.split("\n"),a=0,s=0;s<o.length;s++){var l=n.textMeasureCtx.measureText(o[s]).width;a=a<l?l:a}var u=parseInt(n.textMeasureCtx.font.match(/\d+/),10),c=document.createElement("canvas");c.width=a+4,c.height=u*o.length+8;var h=c.getContext("2d");h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,c.width,c.height),h.font="12pt 맑은 고딕";for(var f=.5*c.width,p=0;p<o.length;p++){var d=f-.5*n.textMeasureCtx.measureText(o[p]).width+2,m=u+p*u;h.strokeStyle="black",h.lineWidth=3,h.strokeText(o[p],d,m),h.fillStyle="white",h.fillText(o[p],d,m)}var v=new r.Texture(c);v.needsUpdate=!0,v.minFilter=r.LinearFilter,e({material:new r.MeshBasicMaterial({map:v,transparent:!0}),size:new r.Vector2(a+4,u*o.length+8)})}catch(e){console.error(e),i(e)}}))}},{key:"createTextMaterialSync",value:function(e){for(var t=e.split("\n"),n=0,i=0;i<t.length;i++){var o=this.textMeasureCtx.measureText(t[i]).width;n=n<o?o:n}var a=parseInt(this.textMeasureCtx.font.match(/\d+/),10),s=document.createElement("canvas");s.width=n+4,s.height=a*t.length+8;var l=s.getContext("2d");l.fillStyle="rgba(0, 0, 0, 0)",l.fillRect(0,0,s.width,s.height),l.font="12pt 맑은 고딕";for(var u=.5*s.width,c=0;c<t.length;c++){var h=u-.5*this.textMeasureCtx.measureText(t[c]).width+2,f=a+c*a;l.strokeStyle="black",l.lineWidth=3,l.strokeText(t[c],h,f),l.fillStyle="white",l.fillText(t[c],h,f)}var p=new r.Texture(s);return p.needsUpdate=!0,p.minFilter=r.LinearFilter,{material:new r.MeshBasicMaterial({map:p,transparent:!0}),size:new r.Vector2(n+4,a*t.length+8)}}},{key:"loadIcon",value:function(t){return new e((function(e,n){(new r.TextureLoader).load(t,(function(t){var n=new r.MeshBasicMaterial({map:t,transparent:!0});e(n)}),null,(function(e){console.error(e),n()}))}))}},{key:"loadIconSprite",value:function(t){var n=this,i=t.url,o=t.horizontalTileCount,a=t.verticalTileCount,s=t.totalTileCount,l=t.animationTime;return new e((function(e,t){(new r.TextureLoader).load(i,(function(t){var i=new r.MeshBasicMaterial({map:t,transparent:!0}),u={tilesInHoriz:o,tilesInVert:a,totalTiles:s,transitionTime:l,transitionCheck:0,currentIndex:0};t.wrapS=t.wrapT=r.RepeatWrapping,t.repeat.set(1/u.tilesInHoriz,1/u.tilesInVert),n.animationSpriteFuncArray.push((function(e){u.transitionCheck+=e,u.transitionTime<u.transitionCheck&&(u.transitionCheck=0,u.currentIndex++,u.currentIndex===u.totalTiles&&(u.currentIndex=0),t.offset.x=u.currentIndex%u.tilesInHoriz/u.tilesInHoriz,t.offset.y=Math.floor(u.currentIndex/u.tilesInHoriz)/u.tilesInVert)})),e(i)}),null,(function(e){console.error(e),t()}))}))}},{key:"loadModel",value:(w=h(regeneratorRuntime.mark((function e(t,n){var r,s,l,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,"sphere"!==t.toLowerCase()){e.next=6;break}r=this.sharedSphere,e.next=41;break;case 6:if("box"!==t.toLowerCase()){e.next=10;break}r=this.sharedBox,e.next=41;break;case 10:if("fbx"!==t.toLowerCase()||!n){e.next=19;break}if(!(n in this.componentStorage)){e.next=15;break}r=this.componentStorage[n],e.next=17;break;case 15:return e.next=17,i.loadPromise(n).then((function(e){c.componentStorage[n]=e,(r=e).traverse((function(e){"boundingbox"===e.name.toLowerCase()&&(e.visible=!1)}))}));case 17:e.next=41;break;case 19:if("gltf"!==t.toLowerCase()){e.next=28;break}if(!(n in this.componentStorage)){e.next=24;break}r=this.componentStorage[n],e.next=26;break;case 24:return e.next=26,a.loadAsync(n).then((function(e){e.scene.animations=e.animations,c.componentStorage[n]=e.scene,r=e.scene})).catch((function(e){console.error(e),r=c.sharedSphere}));case 26:e.next=41;break;case 28:if("obj"!==t.toLowerCase()||!n){e.next=40;break}if(s=n,l=null,"object"===u(n)&&(s=n.obj,l=n.mtl),!(s in this.componentStorage)){e.next=36;break}r=this.componentStorage[s],e.next=38;break;case 36:return e.next=38,o.loadPromise(s,l).then((function(e){c.componentStorage[s]=e,r=e}));case 38:e.next=41;break;case 40:r=this.sharedSphere;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(1),console.error(e.t0);case 46:return e.abrupt("return",r);case 47:case"end":return e.stop()}}),e,this,[[1,43]])}))),function(e,t){return w.apply(this,arguments)})},{key:"removePoi",value:function(e,t){e in this.poiList&&(this.core.getPoiRootGroup().remove(this.poiList[e]),this.poiList[e].dispose(),delete this.poiList[e]),t&&t()}},{key:"removeGroup",value:function(e,t){for(var n in this.poiList)this.poiList[n].userData.group===e&&(this.core.getPoiRootGroup().remove(this.poiList[n]),this.poiList[n].dispose(),delete this.poiList[n]);t&&t()}},{key:"removeAllPoi",value:function(e){for(var t in this.poiList)this.core.getPoiRootGroup().remove(this.poiList[t]),this.poiList[t].dispose();this.poiList=[],e&&e()}},{key:"setIconImage",value:(x=h(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n in this.poiList)){e.next=9;break}if(!(t in this.iconList)){e.next=5;break}this.poiList[n].setIconImage(this.iconList[t],this.sharedPlaneGeometry),e.next=9;break;case 5:return i=this,e.next=8,this.loadIcon(t).then((function(e){i.iconList[t]=e}));case 8:this.poiList[n].setIconImage(this.iconList[t],this.sharedPlaneGeometry);case 9:r&&r();case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return x.apply(this,arguments)})},{key:"SetIconImageGroup",value:(b=h(regeneratorRuntime.mark((function e(t,n,r){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t in this.iconList!=0){e.next=4;break}return i=this,e.next=4,this.loadIcon(t).then((function(e){i.iconList[t]=e}));case 4:for(o in this.poiList)this.poiList.hasOwnProperty(o)&&this.poiList[o].userData.group===n&&this.poiList[o].setIconImage(this.iconList[t],this.sharedPlaneGeometry);r&&r();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return b.apply(this,arguments)})},{key:"setComponent",value:(y=h(regeneratorRuntime.mark((function e(t,n,r,i){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r in this.poiList)){e.next=5;break}return e.next=3,this.loadModel(t,n);case 3:(o=e.sent)&&this.poiList[r].setComponent(o);case 5:i&&i();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return y.apply(this,arguments)})},{key:"setComponentGroup",value:(g=h(regeneratorRuntime.mark((function e(t,n,r,i){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadModel(t,n);case 2:for(a in o=e.sent,this.poiList)this.poiList.hasOwnProperty(a)&&this.poiList[a].userData.group===r&&this.poiList[a].setComponent(o);i&&i();case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return g.apply(this,arguments)})},{key:"setLineHeight",value:function(e,t,n){this.poiList.hasOwnProperty(e)&&this.poiList[e].setLineHeight(t,this.sharedLineMaterial),n&&n()}},{key:"setLineHeightGroup",value:function(e,t,n){for(var r in this.poiList)this.poiList.hasOwnProperty(r)&&this.poiList[r].userData.group===e&&this.poiList[r].setLineHeight(t,this.sharedLineMaterial);n&&n()}},{key:"setPosition",value:function(e){e.id in this.poiList&&this.poiList[e.id].setPosition(e.x,e.y,e.z,e.quatX,e.quatY,e.quatZ,e.quatW,e.isAnimation,e.duration,(function(){e.onComplete&&e.onComplete()}))}},{key:"setText",value:(v=h(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.poiList.hasOwnProperty(t)){e.next=4;break}return i=this,e.next=4,this.createTextMaterial(n).then((function(e){i.poiList[t].setText(i.sharedPlaneGeometry,e.material,e.size,n),r&&r()}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return v.apply(this,arguments)})},{key:"getPoiData",value:function(e,t){if(this.poiList.hasOwnProperty(e)){var n=this.poiList[e].getData();return t&&t([n]),n}}},{key:"getPoiDataAll",value:function(e){var t=[];for(var n in this.poiList)if(this.poiList.hasOwnProperty(n)){var r=this.poiList[n].getData();t.push(r)}return e&&e(t),t}},{key:"getPoi2DPos",value:function(e,t){if(this.poiList.hasOwnProperty(e)){var n=this.poiList[e].get2DPosition(this.core.getCamera());return n.x=(n.x+1)/2*this.core.getDom().clientWidth,n.y=-(n.y-1)/2*this.core.getDom().clientHeight,t&&t(n.x,n.y),n}}},{key:"setIconSize",value:function(e,t,n){this.poiList.hasOwnProperty(e)&&this.poiList[e].setIconSize(t,n)}},{key:"setTextSize",value:function(e,t,n){this.poiList.hasOwnProperty(e)&&this.poiList[e].setTextSize(t,n)}},{key:"getProperty",value:function(e,t){if(this.poiList.hasOwnProperty(e)){var n=this.poiList[e].userData.property;return t&&t(n),n}return{}}},{key:"setProperty",value:function(e,t,n,r){if(this.poiList.hasOwnProperty(e)){var i=this.poiList[e].userData.property;return i[t]=n,r&&r(i),i}}},{key:"removeProperty",value:function(e,t,n){if(this.poiList.hasOwnProperty(e)){var r=this.poiList[e].userData.property;return r.hasOwnProperty(t)&&delete r[t],n&&n(r),r}}},{key:"getPoiDataByProperty",value:function(e,t,n){var r=[];for(var i in this.poiList){var o=this.poiList[i],a=o.userData.property;a.hasOwnProperty(e)&&a[e]===t&&r.push({id:o.userData.id,group:o.userData.group,type:o.userData.type,displayText:o.userData.displayText,property:a})}return n&&n(r),r}},{key:"show",value:function(e,t){this.poiList.hasOwnProperty(e)&&(this.poiList[e].visible=!0,t&&t())}},{key:"hide",value:function(e,t){this.poiList.hasOwnProperty(e)&&(this.poiList[e].visible=!1,t&&t())}},{key:"showByGroup",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n];r.userData.group===e&&(r.visible=!0)}t&&t()}},{key:"hideByGroup",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n];r.userData.group===e&&(r.visible=!1)}t&&t()}},{key:"showByProperty",value:function(e,t,n){for(var r in this.poiList){var i=this.poiList[r],o=i.userData.property;o.hasOwnProperty(e)&&o[e]===t&&(i.visible=!0)}n&&n()}},{key:"showByPropertyArray",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n],i=r.userData.property,o=Object.keys(e),a=0;for(var s in e)i.hasOwnProperty(s)&&i[s]===e[s]&&a++;a===o.length&&(r.visible=!0)}t&&t()}},{key:"hideByPropertyArray",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n],i=r.userData.property,o=Object.keys(e),a=0;for(var s in e)i.hasOwnProperty(s)&&i[s]===e[s]&&a++;a===o.length&&(r.visible=!1)}t&&t()}},{key:"hideByProperty",value:function(e,t,n){for(var r in this.poiList){var i=this.poiList[r],o=i.userData.property;o.hasOwnProperty(e)&&o[e]===t&&(i.visible=!1)}n&&n()}},{key:"showAll",value:function(e){for(var t in this.poiList)this.poiList[t].visible=!0;e&&e()}},{key:"hideAll",value:function(e){for(var t in this.poiList)this.poiList[t].visible=!1;e&&e()}},{key:"addPoiByMouse",value:(m=h(regeneratorRuntime.mark((function e(t,n,i,o,a,l,u,c){var h,f,p,d,m,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=v.length>8&&void 0!==v[8]?v[8]:{x:100,y:100,z:100},f=v.length>9?v[9]:void 0,p=this.poiList.hasOwnProperty(i),d=new r.Vector3,!p){e.next=8;break}d.copy(this.poiList[i].position),e.next=10;break;case 8:return e.next=10,this.addPoi(t,n,i,o,0,0,0,0,0,0,h.x,h.y,h.z,a,l,u,c);case 10:m=this,new s.PxPoiMousePlacer(this.core,this.poiList[i],(function(){f&&f(i,m.poiList[i].position.x,m.poiList[i].position.y,m.poiList[i].position.z)}),(function(){p?m.setPosition(i,d.x,d.y,d.z,!1):m.removePoi(i)})).on();case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i,o,a,s){return m.apply(this,arguments)})},{key:"setColor",value:function(e,t){this.poiList.hasOwnProperty(e)&&this.poiList[e].setColor(t)}},{key:"setTextColor",value:function(e,t){this.poiList.hasOwnProperty(e)&&this.poiList[e].setTextColor(t)}},{key:"restoreColor",value:function(e){this.poiList.hasOwnProperty(e)&&this.poiList[e].restoreColor()}},{key:"setColorByGroup",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n];r.userData.group===e&&r.setColor(t)}}},{key:"setTextColorByGroup",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n];r.userData.group===e&&r.setTextColor(t)}}},{key:"restoreColorByGroup",value:function(e){for(var t in this.poiList){var n=this.poiList[t];n.userData.group===e&&n.restoreColor()}}},{key:"setColorByProperty",value:function(e,t,n){for(var r in this.poiList){var i=this.poiList[r],o=i.userData.property;o.hasOwnProperty(e)&&o[e]===t&&i.setColor(n)}}},{key:"setTextColorByProperty",value:function(e,t,n){for(var r in this.poiList){var i=this.poiList[r],o=i.userData.property;o.hasOwnProperty(e)&&o[e]===t&&i.setTextColor(n)}}},{key:"restoreColorByProperty",value:function(e,t){for(var n in this.poiList){var r=this.poiList[n],i=r.userData.property;i.hasOwnProperty(e)&&i[e]===t&&r.restoreColor()}}},{key:"setColorAll",value:function(e){for(var t in this.poiList)this.poiList[t].setColor(e)}},{key:"restoreColorAll",value:function(){for(var e in this.poiList)this.poiList[e].restoreColor()}},{key:"setOffsetHeightByFloor",value:function(e,t,n){}},{key:"applySbmCenterOffset",value:function(e){for(var t in this.poiList){var n=this.poiList[t];n.position.x-=e.x,n.position.y-=e.y,n.position.z-=e.z,n.updateMatrix()}}},{key:"prepareModelExpand",value:function(){for(var e in this.poiList){var t=this.poiList[e],n=parseInt(t.userData.property.floorNo),r=this.getFloorObjectBySortingOrder(n);r&&r.attach(t)}}},{key:"afterModelExpand",value:function(){var e=this.core.getPoiRootGroup();for(var t in this.poiList){var n=this.poiList[t];e.attach(n)}}},{key:"getFloorObjectBySortingOrder",value:function(e){var t=null;return this.core.workObjGroup.traverse((function(n){if(n.userData.hasOwnProperty("property")){var r=n.userData.property;if(r.hasOwnProperty("sortingorder")){var i=parseInt(r.sortingorder);e===i&&(t=n)}}else e===n.name&&(t=n)})),t}},{key:"setVisibleOption",value:function(e,t,n,r){this.poiList.hasOwnProperty(e)&&this.poiList[e].setVisibleOption(t,n,r)}},{key:"setVisibleOptionByProperty",value:function(e,t,n,r,i){for(var o in this.poiList){var a=this.poiList[o],s=a.userData.property;s.hasOwnProperty(e)&&s[s]===t&&a.setVisibleOption(n,r,i)}}},{key:"setVisibleOptionAll",value:function(e,t,n){for(var r in this.poiList)this.poiList[r].setVisibleOption(e,t,n)}},{key:"getMaxHeight",value:function(){var e=null;for(var t in this.poiList){var n=this.poiList[t],r=n.position.y+n.userData.lineHeight;e=Math.max(e,r)}return e}},{key:"getPoiByRegion",value:function(e){var t=[];for(var n in this.poiList){var r=this.poiList[n];if(e.containsPoint(r.position)){var i=r.getData();t.push(i)}}return t}},{key:"getVisiblePois",value:function(){var e=[];for(var t in this.poiList){var n=this.poiList[t];n.visible&&e.push(n)}return e}},{key:"animationPlay",value:function(e,t){this.poiList.hasOwnProperty(e)&&this.poiList[e].animationPlay(t)}},{key:"animationStop",value:function(e,t){this.poiList.hasOwnProperty(e)&&this.poiList[e].animationStop(t)}},{key:"animationStopAll",value:function(e){this.poiList.hasOwnProperty(e)&&this.poiList[e].animationStopAll()}},{key:"setAnimationLoopType",value:function(e,t){this.poiList.hasOwnProperty(e)&&this.poiList[e].setAnimationLoopType(t)}},{key:"setAnimatedIcon",value:(d=h(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.poiId)in this.poiList)){e.next=9;break}if((r=t.url)in this.iconList!=0){e.next=7;break}return i=this,e.next=7,this.loadIconSprite(t).then((function(e){i.iconList[r]=e}));case 7:o=this.iconList[r],this.poiList[n].setAnimatedIcon(o);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"disableAnimatedIcon",value:function(e){e in this.poiList&&this.poiList[e].disableAnimatedIcon()}},{key:"getPickBoundingBoxes",value:function(){var e=this,t=[],n=function(n){var i=e.poiList[n];i.pointObject.traverse((function(e){if("boundingbox"===e.name.toLowerCase()){var n=(new r.Box3).setFromObject(e);t.push({box:n,targetObject:i})}}))};for(var i in this.poiList)n(i);return t}},{key:"showBoundingBox",value:function(){for(var e in this.poiList)this.poiList[e].pointObject.traverse((function(e){"boundingbox"===e.name.toLowerCase()&&(e.visible=!0)}))}},{key:"hideBoundingBox",value:function(){for(var e in this.poiList)this.poiList[e].pointObject.traverse((function(e){"boundingbox"===e.name.toLowerCase()&&(e.visible=!1)}))}},{key:"setLineColor",value:function(e,t){if(e in this.poiList){var n=this.poiList[e];n.line&&(n.line.material.uuid!==this.sharedLineMaterial.uuid&&n.line.material.dispose(),n.line.material=this.sharedLineMaterial.clone(),n.line.material.color=new r.Color(t))}}},{key:"Move",value:function(e,t,n){if(this.poiList.hasOwnProperty(e)){var i=this.poiList[e];i.move=!0,i.direction=new r.Vector3(t[0],t[1],t[2]).normalize(),i.speed=n}}},{key:"addOffsetAll",value:function(e,t,n){Object.values(this.poiList).forEach((function(r){r.position.x+=e,r.position.y+=t,r.position.z+=n,r.updateMatrix()}))}},{key:"addPoi_Sync",value:function(e,t,n,i,o,a,s,u,c,h,f,p,d,m,v,g,y,b){if(!(n in this.poiList)){e||(e="");var x=this.sharedSphere;if(!1===this.iconList.hasOwnProperty(m)){var w=new r.MeshBasicMaterial({map:(new r.TextureLoader).load(m),transparent:!0});this.iconList[m]=w}var q=null,_=null;if(g){var S=this.createTextMaterialSync(g);q=S.material,_=S.size}var M=new l.PxPoiElement(n,i,x,v,this.sharedLineMaterial,this.iconList[m],this.sharedPlaneGeometry,q,_,new r.Vector3(.01*f,.01*p,.01*d));M.userData.type=e,M.userData.url=t,M.userData.iconUrl=m,M.userData.displayText=g,M.userData.property=y||{},this.poiList[n]=M,this.core.getPoiRootGroup().add(M),M.position.set(o,a,s);var E=(new r.Quaternion).setFromEuler(M.pointObject.rotation),T=(new r.Quaternion).setFromEuler(new r.Euler(u,c,h)),P=(new r.Quaternion).multiplyQuaternions(E,T);M.pointObject.quaternion.copy(P),M.pointObject.updateMatrixWorld(!0),M.updateMatrix(),b&&b()}}},{key:"addPoiArray_Sync",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n].rotation,o={x:100,y:100,z:100};e[n].scale&&((o=e[n].scale).x=r.Math.clamp(o.x,.01,o.x),o.y=r.Math.clamp(o.y,.01,o.y),o.z=r.Math.clamp(o.z,.01,o.z)),i||(i={x:0,y:0,z:0}),this.addPoi_Sync(e[n].type,e[n].url,e[n].id,e[n].group,e[n].position.x,e[n].position.y,e[n].position.z,i.x,i.y,i.z,o.x,o.y,o.z,e[n].iconUrl,e[n].lineHeight,e[n].displayText,e[n].property)}t&&t()}},{key:"addPoiByMouse_Sync",value:function(e,t,n,i,o,a,l,u){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{x:100,y:100,z:100},h=arguments.length>9?arguments[9]:void 0,f=this.poiList.hasOwnProperty(n),p=new r.Vector3;f?p.copy(this.poiList[n].position):this.addPoi_Sync(e,t,n,i,0,0,0,0,0,0,c.x,c.y,c.z,o,a,l,u);var d=this,m=new s.PxPoiMousePlacer(this.core,this.poiList[n],(function(){h&&h(n,d.poiList[n].position.x,d.poiList[n].position.y,d.poiList[n].position.z)}),(function(){f?d.setPosition(n,p.x,p.y,p.z,!1):d.removePoi(n)}));m.on()}}])&&f(n.prototype,c),p&&f(n,p),t}()}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),n.d(t,"PxCamera",(function(){return v}));var r=n(2),i=n(0);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(0),s=a.OrthographicCamera,l=a.PerspectiveCamera,u=a.Quaternion,c=a.Spherical,h=a.Vector3,f=a.Box3,p=a.Sphere,d=(a.MOUSE,n(473).OrbitControls_Custom),m=n(474).PxFirstPersonCamera,v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=t,this.poiMgr=n,this.normalCam=new l(60,this.dom.clientWidth/this.dom.clientHeight,1,5e4),this.normalCam.position.set(100,100,100),this.normalCam.lookAt(0,0,0),this.normalCam.userData.initialProjectionMatrix=this.normalCam.projectionMatrix.clone(),this.aspect=this.dom.clientWidth/this.dom.clientHeight,this.frustumSize=100,this.orthoCam=new s(this.frustumSize*this.aspect/-2,this.frustumSize*this.aspect/2,this.frustumSize/2,this.frustumSize/-2,-5e4,5e4),this.orthoCam.position.set(0,100,0),this.orthoCam.lookAt(0,0,0),this.orthoCam.userData.initialProjectionMatrix=this.orthoCam.projectionMatrix.clone(),this.activeCamera=this.normalCam,this.control=new d(this.activeCamera,this.dom),this.control.screenSpacePanning=!1,this.control.rotateSpeed=.25,this.control.enableKeys=!1,this.control.maxPolarAngle=.495*Math.PI,this.projectionChangeTween=null,this.stateTween=null,this.prevTween=null,this.IsZoomIn=!1,this.IsZoomOut=!1,this.IsRotateLeft=!1,this.IsRotateRight=!1,this.IsRotateUp=!1,this.IsRotateDown=!1,this.moveToPositionHandler=null,this.moveToPosAnimInfo=null,this.fpsCam=new m(this),this.onPointerDownBinder=this.onPointerDown_ScreenSpacePanning.bind(this),this.onWheelBinder=this.onWheel_ScreenSpacePanning.bind(this)}var t,n,a;return t=e,(n=[{key:"resize",value:function(){this.aspect=this.dom.clientWidth/this.dom.clientHeight,this.normalCam.aspect=this.aspect,this.normalCam.updateProjectionMatrix(),this.orthoCam.left=-this.frustumSize*this.aspect/2,this.orthoCam.right=this.frustumSize*this.aspect/2,this.orthoCam.top=this.frustumSize/2,this.orthoCam.bottom=this.frustumSize/2,this.orthoCam.updateProjectionMatrix(),this.normalCam.userData.initialProjectionMatrix=this.normalCam.projectionMatrix.clone(),this.orthoCam.userData.initialProjectionMatrix=this.orthoCam.projectionMatrix.clone()}},{key:"getActiveCamera",value:function(){return this.activeCamera}},{key:"getControl",value:function(){return this.control}},{key:"setPerspective",value:function(e){if(this.activeCamera instanceof s){this.normalCam.position.copy(this.orthoCam.position),this.normalCam.rotation.copy(this.orthoCam.rotation);var t=this;this.projectionChangeTween&&this.projectionChangeTween.stop(),this.projectionChangeTween=new r.a.Tween(this.orthoCam.projectionMatrix.elements).to(this.normalCam.projectionMatrix.elements,1e3).easing(r.a.Easing.Quartic.In).onUpdate((function(){})).onComplete((function(){t.activeCamera=t.normalCam,t.control.object=t.activeCamera,t.orthoCam.projectionMatrix.copy(t.orthoCam.userData.initialProjectionMatrix),e&&e()})).start()}}},{key:"setOrthographic",value:function(e,t,n){if(this.activeCamera instanceof l){var i=.5*this.normalCam.fov,o=2*Math.tan(i/2*Math.PI/180),a=Math.abs(this.normalCam.position.y),s=o*a,u=o*a*this.normalCam.aspect;this.orthoCam.left=-u/2,this.orthoCam.right=u/2,this.orthoCam.top=s/2,this.orthoCam.bottom=-s/2,this.orthoCam.zoom=1,this.orthoCam.updateProjectionMatrix(),this.orthoCam.userData.initialProjectionMatrix=this.orthoCam.projectionMatrix.clone(),this.orthoCam.position.copy(this.normalCam.position),this.orthoCam.rotation.copy(this.normalCam.rotation),e&&(this.orthoCam.position.y=e+30);var c=this;this.projectionChangeTween&&this.projectionChangeTween.stop(),this.projectionChangeTween=new r.a.Tween(this.normalCam.projectionMatrix.elements).to(this.orthoCam.projectionMatrix.elements,1e3).easing(r.a.Easing.Quartic.Out).onUpdate((function(){})).onComplete((function(){c.activeCamera=c.orthoCam,c.control.object=c.activeCamera,c.normalCam.projectionMatrix.copy(c.normalCam.userData.initialProjectionMatrix),n&&n()})).start()}}},{key:"getState",value:function(){return{position:{x:this.activeCamera.position.x,y:this.activeCamera.position.y,z:this.activeCamera.position.z},rotation:{x:this.activeCamera.rotation.x,y:this.activeCamera.rotation.y,z:this.activeCamera.rotation.z},target:{x:this.control.target.x,y:this.control.target.y,z:this.control.target.z}}}},{key:"setState",value:function(e){var t=this,n={position:this.activeCamera.position.clone(),rotation:new h(this.activeCamera.rotation.x,this.activeCamera.rotation.y,this.activeCamera.rotation.z),target:this.control.target.clone()},i={position:new h(e.position.x,e.position.y,e.position.z),rotation:new h(e.rotation.x,e.rotation.y,e.rotation.z),target:new h(e.target.x,e.target.y,e.target.z)},o={value:0},a=e.duration?e.duration:0;this.stateTween&&this.stateTween.stop(),this.stateTween=new r.a.Tween(o).to({value:1},a).easing(r.a.Easing.Quartic.Out).onUpdate((function(){var e=(new h).lerpVectors(n.position,i.position,o.value),r=(new h).lerpVectors(n.rotation,i.rotation,o.value),a=(new h).lerpVectors(n.target,i.target,o.value);t.activeCamera.position.copy(e),t.activeCamera.rotation.x=r.x,t.activeCamera.rotation.y=r.y,t.activeCamera.rotation.z=r.z,t.control.target.copy(a),t.control.update()})).onComplete((function(){e.onComplete&&e.onComplete()})).start()}},{key:"setZoomSpeed",value:function(e){this.control.zoomSpeed=e}},{key:"getZoomSpeed",value:function(e){return e&&e(this.control.zoomSpeed),this.control.zoomSpeed}},{key:"getCurrentDistance",value:function(e){var t=this.control.object.position.distanceTo(this.control.target);return e&&e(t),t}},{key:"setMinDistance",value:function(e){(!e||e<0)&&(e=0),this.control.minDistance=e}},{key:"getMinDistance",value:function(e){return e&&e(this.control.minDistance),this.control.minDistance}},{key:"setMaxDistance",value:function(e){(!e||e<this.control.minDistance)&&(e=1/0),this.control.maxDistance=e}},{key:"getMaxDistance",value:function(e){return e&&e(this.control.maxDistance),this.control.maxDistance}},{key:"getCurrentOrthoZoom",value:function(e){return e&&e(this.orthoCam.zoom),this.orthoCam.zoom}},{key:"setOrthoMinZoom",value:function(e){(!e||e<0)&&(e=0),this.control.minZoom=e}},{key:"getOrthoMaxZoom",value:function(e){return e&&e(this.control.minZoom),this.control.minZoom}},{key:"setOrthoMaxZoom",value:function(e){(!e||e<this.control.minZoom)&&(e=1/0),this.control.maxZoom=e}},{key:"getOrthoMaxZoom",value:function(e){return e&&e(this.control.maxZoom),this.control.maxZoom}},{key:"update",value:function(e){if(this.activeCamera instanceof l)if(this.IsZoomIn){if(this.control.target.distanceTo(this.normalCam.position)>1){var t=(new h).lerpVectors(this.normalCam.position,this.control.target,.25*e);this.normalCam.position.copy(t)}}else if(this.IsZoomOut){var n=(new h).lerpVectors(this.control.target,this.normalCam.position,2),r=(new h).lerpVectors(this.normalCam.position,n,.25*e);this.normalCam.position.copy(r)}else if(this.IsRotateLeft){var i=(new u).setFromUnitVectors(this.normalCam.up,new h(0,1,0)),o=new c,a=new h;a.copy(this.normalCam.position).sub(this.control.target),a.applyQuaternion(i),o.setFromVector3(a),o.theta-=e,o.makeSafe(),a.setFromSpherical(o),this.normalCam.position.copy(this.control.target).add(a),this.normalCam.lookAt(this.control.target),this.control.update()}else if(this.IsRotateRight){var s=(new u).setFromUnitVectors(this.normalCam.up,new h(0,1,0)),f=new c,p=new h;p.copy(this.normalCam.position).sub(this.control.target),p.applyQuaternion(s),f.setFromVector3(p),f.theta+=e,f.makeSafe(),p.setFromSpherical(f),this.normalCam.position.copy(this.control.target).add(p),this.normalCam.lookAt(this.control.target),this.control.update()}else if(this.IsRotateUp){var d=(new u).setFromUnitVectors(this.normalCam.up,new h(0,1,0)),m=new c,v=new h;v.copy(this.normalCam.position).sub(this.control.target),v.applyQuaternion(d),m.setFromVector3(v),m.phi-=e,m.makeSafe(),v.setFromSpherical(m),this.normalCam.position.copy(this.control.target).add(v),this.normalCam.lookAt(this.control.target),this.control.update()}else if(this.IsRotateDown){var g=(new u).setFromUnitVectors(this.normalCam.up,new h(0,1,0)),y=new c,b=new h;b.copy(this.normalCam.position).sub(this.control.target),b.applyQuaternion(g),y.setFromVector3(b),y.phi+=e,y.makeSafe(),b.setFromSpherical(y),this.normalCam.position.copy(this.control.target).add(b),this.normalCam.lookAt(this.control.target),this.control.update()}this.fpsCam.update(e)}},{key:"startZoomIn",value:function(){this.IsZoomIn=!0}},{key:"stopZoomIn",value:function(){this.IsZoomIn=!1}},{key:"startZoomOut",value:function(){this.IsZoomOut=!0}},{key:"stopZoomOut",value:function(){this.IsZoomOut=!1}},{key:"startRotateLeft",value:function(){this.IsRotateLeft=!0}},{key:"stopRotateLeft",value:function(){this.IsRotateLeft=!1}},{key:"startRotateRight",value:function(){this.IsRotateRight=!0}},{key:"stopRotateRight",value:function(){this.IsRotateRight=!1}},{key:"startRotateUp",value:function(){this.IsRotateUp=!0}},{key:"stopRotateUp",value:function(){this.IsRotateUp=!1}},{key:"startRotateDown",value:function(){this.IsRotateDown=!0}},{key:"stopRotateDown",value:function(){this.IsRotateDown=!1}},{key:"stop",value:function(){this.IsZoomIn=!1,this.IsZoomOut=!1,this.IsRotateLeft=!1,this.IsRotateRight=!1,this.IsRotateUp=!1,this.IsRotateDown=!1}},{key:"fitToPoi",value:function(e,t,n,i,o,a,s,l){var u=new f;if(u.makeEmpty(),e instanceof Array)for(var c=0;c<e.length;c++)e[c]&&(e[c]instanceof h?u.expandByPoint(e[c]):u.expandByObject(e[c]));else e instanceof h?u.setFromPoints(e):u.setFromObject(e);if(!u.isEmpty()){var d=new p;u.getBoundingSphere(d);var m=d.radius/Math.sin(this.activeCamera.fov*(Math.PI/180)/2)*3;o.applyAxisAngle(i,0);var v=d.center.clone();v.addScaledVector(o,m),s||(s=50),v.y+=s;var g=(new h).subVectors(v,d.center);g.normalize();var y=v.clone().addScaledVector(g,a);this.prevTween&&this.prevTween.stop(),t||(n=0);var b=this,x={startPoint:this.activeCamera.position.clone(),endPoint:y,lookAtStart:this.control.target.clone(),lookAtEnd:d.center.clone(),ratio:0};this.prevTween=new r.a.Tween(x).to({ratio:1},n).easing(r.a.Easing.Quartic.Out).onUpdate((function(e){b.activeCamera.position.copy((new h).lerpVectors(e.startPoint,e.endPoint,e.ratio)),b.activeCamera.lookAt((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),b.control.target.copy((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),b.control.update()})).onComplete((function(e){l&&l()})).start()}}},{key:"fitToObject",value:function(e,t,n,o,a,l,u){var c=1;a&&(c=.01*a);var d=new f;if(d.makeEmpty(),e instanceof Array)for(var m=0;m<e.length;m++)e[m]&&(e[m]instanceof h?d.expandByPoint(e[m]):d.expandByObject(e[m]));else e instanceof h?d.setFromPoints(e):d.setFromObject(e);if(!d.isEmpty()){var v=new p;d.getBoundingSphere(v);var g=v.center.clone(),y=new i.Object3D;y.position.copy(this.activeCamera.position),y.rotation.copy(this.activeCamera.rotation),y.updateMatrixWorld(!0),y.worldToLocal(g),y.translateX(g.x),y.translateY(g.y),g.z>=0&&y.translateZ(g.z+1);var b=v.radius/Math.sin(this.normalCam.fov*(Math.PI/180)/2);b*=c;var x=y.position.clone();if(x.sub(v.center),x.setLength(b),x.add(v.center),this.activeCamera instanceof s){var w=v.center.clone();w.addScaledVector(new h(0,1,0),b),x.copy(w);var q=this.dom.clientWidth/this.dom.clientHeight;this.activeCamera.zoom=q>1?b/(2*v.radius):b/q/(2*v.raiuds),this.activeCamera.updateProjectionMatrix()}this.prevTween&&this.prevTween.stop(),t||(n=0);var _=this,S={startPoint:this.activeCamera.position.clone(),endPoint:x.clone(),lookAtStart:this.control.target.clone(),lookAtEnd:v.center.clone(),ratio:0};this.prevTween=new r.a.Tween(S).to({ratio:1},n).easing(r.a.Easing.Quartic.Out).onUpdate((function(e){_.activeCamera.position.copy((new h).lerpVectors(e.startPoint,e.endPoint,e.ratio)),_.activeCamera.lookAt((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),_.control.target.copy((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),_.control.update()})).onComplete((function(e){o&&o()})).start()}}},{key:"moveToPoi",value:function(e){var t=e.id,n=e.isAnimation,i=e.duration,o=e.distanceOffset?e.distanceOffset:0,a=e.onComplete,s=e.isTopView,l=e.topViewDistance;if(this.poiMgr.poiList.hasOwnProperty(t)){var u=this.poiMgr.poiList[t];u.updateMatrixWorld(!0);var c=new h(0,0,1);c.applyQuaternion(u.pointObject.quaternion);var f=new h;u.pointObject.getWorldDirection(f);var p=new h;if(u.pointObject.getWorldPosition(p),s){this.prevTween&&this.prevTween.stop(),n||(function(e){throw new Error('"'+e+'" is read-only')}("duration"),i=0);var d=this,m={startPoint:this.activeCamera.position.clone(),endPoint:p.clone().addScaledVector(new h(0,1,0),l),lookAtStart:this.control.target.clone(),lookAtEnd:p.clone(),ratio:0};this.prevTween=new r.a.Tween(m).to({ratio:1},i).easing(r.a.Easing.Quartic.Out).onUpdate((function(e){d.activeCamera.position.copy((new h).lerpVectors(e.startPoint,e.endPoint,e.ratio)),d.activeCamera.lookAt((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),d.control.target.copy((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),d.control.update()})).onComplete((function(e){a&&a()})).start()}else this.fitToPoi([u.position,new h(u.position.x,u.position.y+u.userData.lineHeight+5,u.position.z)],n,i,c.clone(),f.clone(),o,e.heightOffset,a)}else console.warn(t,"has not found.")}},{key:"moveToPoiArray",value:function(e){var t=this,n=e.idArray,o=e.duration,a=e.onComplete,s=e.distanceOffset?e.distanceOffset:0,l=e.isTopView,u=e.topViewDistance;if(l){var c=(new f).makeEmpty();n.forEach((function(e){if(t.poiMgr.poiList.hasOwnProperty(e)){var n=t.poiMgr.poiList[e];n.updateMatrixWorld(),c.expandByObject(n.pointObject)}}));var d=new p;c.getBoundingSphere(d);var m=d.center.clone(),v=this,g={startPoint:this.activeCamera.position.clone(),endPoint:m.clone().addScaledVector(new h(0,1,0),u),lookAtStart:this.control.target.clone(),lookAtEnd:m.clone().addScaledVector(new h(0,0,1),-.01),ratio:0};this.prevTween&&this.prevTween.stop(),this.prevTween=new r.a.Tween(g).to({ratio:1},o).easing(r.a.Easing.Quartic.Out).onUpdate((function(e){v.activeCamera.position.copy((new h).lerpVectors(e.startPoint,e.endPoint,e.ratio)),v.activeCamera.lookAt((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),v.control.target.copy((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),v.control.update()})).onComplete((function(e){a&&a()})).start()}else{var y=new f;y.makeEmpty();for(var b=0;b<n.length;b++)if(this.poiMgr.poiList.hasOwnProperty(n[b])){var x=this.poiMgr.poiList[n[b]];x.updateMatrixWorld(!0);var w=new h;x.pointObject.getWorldPosition(w),y=(y=y.expandByObject(x.pointObject)).expandByObject(x.line)}var q=new p;y.getBoundingSphere(q);var _=q.center.clone(),S=new i.Object3D;S.position.copy(this.activeCamera.position),S.rotation.copy(this.activeCamera.rotation),S.updateMatrixWorld(!0),S.worldToLocal(_),S.translateX(_.x),S.translateY(_.y),_.z>=0&&S.translateZ(_.z+1);var M=q.radius/Math.sin(this.activeCamera.fov*(Math.PI/180)/2),E=S.position.clone();E.sub(q.center),E.setLength(M),E.add(q.center);var T=(new h).subVectors(E,q.center);T.normalize();var P=E.clone().addScaledVector(T,s);this.prevTween&&this.prevTween.stop();var A=this,O={startPoint:this.activeCamera.position.clone(),endPoint:P,lookAtStart:this.control.target.clone(),lookAtEnd:q.center.clone(),ratio:0};this.prevTween=new r.a.Tween(O).to({ratio:1},o).easing(r.a.Easing.Quartic.Out).onUpdate((function(e){A.activeCamera.position.copy((new h).lerpVectors(e.startPoint,e.endPoint,e.ratio)),A.activeCamera.lookAt((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),A.control.target.copy((new h).lerpVectors(e.lookAtStart,e.lookAtEnd,e.ratio)),A.control.update()})).onComplete((function(e){a&&a()})).start()}}},{key:"moveToPosition",value:function(e,t,n,i,o,a){var s=this;this.prevTween&&this.prevTween.stop();var l=new h(n,i,o),c={ratio:0,startPos:this.activeCamera.position.clone(),targetPos:l};this.prevTween=new r.a.Tween(c).to({ratio:1},e).easing(r.a.Easing.Linear.None).onUpdate((function(e){var n=(new h).subVectors(e.targetPos,e.startPos);n.normalize();var r=(new h).crossVectors(n,new h(0,1,0));r.normalize();var i=(new u).setFromAxisAngle(r,.75*Math.PI);n.applyQuaternion(i);var o=(new h).lerpVectors(e.startPos,e.targetPos,e.ratio),a=o.clone();a.addScaledVector(n,t),s.activeCamera.position.copy((new h).lerpVectors(s.activeCamera.position,a,.2)),s.control.target.copy((new h).lerpVectors(s.control.target,o,.1)),s.activeCamera.lookAt(s.control.target),s.control.update()})).onComplete((function(e){var n=(new h).subVectors(e.targetPos,e.startPos);n.normalize();var r=(new h).crossVectors(n,new h(0,1,0));r.normalize();var i=(new u).setFromAxisAngle(r,.75*Math.PI);n.applyQuaternion(i);var o=(new h).lerpVectors(e.startPos,e.targetPos,e.ratio),l=o.clone();l.addScaledVector(n,t),s.activeCamera.position.copy(l),s.control.target.copy(o),s.activeCamera.lookAt(s.control.target),s.control.update(),a&&a()})).start()}},{key:"moveToPositionUseAnimLoop",value:function(e,t,n,r,i){this.moveToPositionHandler&&cancelAnimationFrame(this.moveToPositionHandler);var o=new h(t,n,r),a=(new h).subVectors(o,new h(this.activeCamera.position.x,o.y,this.activeCamera.position.z));a.normalize();var s=(new h).crossVectors(a,new h(0,1,0));s.normalize();var l=(new u).setFromAxisAngle(s,.75*Math.PI);a.applyQuaternion(l);var c=o.clone();c.addScaledVector(a,e),this.moveToPosAnimInfo={position:c.clone(),lookAtTarget:o.clone(),onComplete:i},this.moveToPositionLoop()}},{key:"moveToPositionLoop",value:function(){this.moveToPositionHandler=requestAnimationFrame(this.moveToPositionLoop.bind(this)),this.activeCamera.position.copy((new h).lerpVectors(this.activeCamera.position,this.moveToPosAnimInfo.position,.05)),this.control.target.copy((new h).lerpVectors(this.control.target,this.moveToPosAnimInfo.lookAtTarget,.05)),this.activeCamera.lookAt(this.control.target),this.control.update(),this.control.target.distanceTo(this.moveToPosAnimInfo.lookAtTarget)<1&&(cancelAnimationFrame(this.moveToPositionHandler),this.moveToPositionHandler=null,this.moveToPosAnimInfo.onComplete&&this.moveToPosAnimInfo.onComplete())}},{key:"moveToObject",value:function(e,t,n,r,i){var o=t.getObjectByName(e);if(console.warning("@@@name",e,o),o){var a=new h(0,0,1);a.applyQuaternion(o.quaternion);var s=new h;o.getWorldDirection(s),this.fitToObject(o,!0,r,i,n,a,s)}}},{key:"enableScreenSpacePanning",value:function(e){this.control.screenSpacePanning=!0,this.workGroup=e,window.addEventListener("pointerdown",this.onPointerDownBinder,!1),this.dom.addEventListener("wheel",this.onWheelBinder,!1)}},{key:"disableScreenSpacePanning",value:function(){this.control.screenSpacePanning=!1,this.workGroup=null,window.removeEventListener("pointerdown",this.onPointerDownBinder),this.dom.removeEventListener("wheel",this.onWheelBinder)}},{key:"onPointerDown_ScreenSpacePanning",value:function(e){if(this.workGroup&&(0===e.button||1===e.button||2===e.button)){var t=new i.Raycaster;t.setFromCamera(new i.Vector2(0,0),this.activeCamera);var n=t.intersectObjects(this.workGroup.children,!0);if(n&&n.length>0){var r=n[0].point;if(this.activeCamera.position.distanceTo(r)<5){var o=new h,a=new h;this.activeCamera.getWorldDirection(o),this.activeCamera.getWorldPosition(a),a.addScaledVector(o,50),this.control.target.copy(a),this.control.update()}else this.control.target.copy(r),this.control.update()}else{var s=new i.Vector2(e.offsetX/this.dom.clientWidth*2-1,-e.offsetY/this.dom.clientHeight*2+1),l=new i.Raycaster;l.setFromCamera(s,this.activeCamera);var u=l.intersectObjects(this.workGroup.children,!0);if(u&&u.length>0){var c=u[0].point.clone(),f=this.activeCamera.position.distanceTo(c),p=new h,d=new h;this.activeCamera.getWorldDirection(p),this.activeCamera.getWorldPosition(d),d.addScaledVector(p,f),this.control.target.copy(d),this.control.update()}else{var m=new h,v=new h;this.activeCamera.getWorldDirection(m),this.activeCamera.getWorldPosition(v),v.addScaledVector(m,50),this.control.target.copy(v),this.control.update()}}}}},{key:"onWheel_ScreenSpacePanning",value:function(e){var t=this.activeCamera.position.clone(),n=this.control.target.clone();if(t.distanceTo(n)<5){var r=new h,i=new h;this.activeCamera.getWorldDirection(r),this.activeCamera.getWorldPosition(i),i.addScaledVector(r,50),this.control.target.copy(i),this.control.update()}}},{key:"testTopOrthoView",value:function(e,t){var n=2*t+100,r=new s(n*this.aspect/-2,n*this.aspect/2,n/2,n/-2,-5e4,5e4),i=(new f).setFromObject(e),o=new h,a=new h;return i.getCenter(o),i.getSize(a),o.y+=a.y,r.position.copy(new h(o.x,o.y+a.y,o.z)),r.lookAt(o.x,o.y,o.z),this.activeCamera=r,{camera:r,center:o}}}])&&o(t.prototype,n),a&&o(t,a),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"OrbitControls_Custom",(function(){return i})),n.d(t,"MapControls",(function(){return o}));var r=n(0),i=function(e,t){var n,i,o,a,s,l=this;void 0===t&&console.warn('THREE.OrbitControls_Custom: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls_Custom: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.controlMode="default",this.getPolarAngle=function(){return v.phi},this.getAzimuthalAngle=function(){return v.theta},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(c),u.update(),d=p.NONE},this.update=(n=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),o=i.clone().inverse(),a=new r.Vector3,s=new r.Quaternion,function(){var e=u.object.position;return n.copy(e).sub(u.target),n.applyQuaternion(i),v.setFromVector3(n),u.autoRotate&&d===p.NONE&&L(2*Math.PI/60/60*u.autoRotateSpeed),u.enableDamping?(v.theta+=g.theta*u.dampingFactor,v.phi+=g.phi*u.dampingFactor):(v.theta+=g.theta,v.phi+=g.phi),v.theta=Math.max(u.minAzimuthAngle,Math.min(u.maxAzimuthAngle,v.theta)),v.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=y,v.radius=Math.max(u.minDistance,Math.min(u.maxDistance,v.radius)),!0===u.enableDamping?u.target.addScaledVector(b,u.dampingFactor):u.target.add(b),n.setFromSpherical(v),n.applyQuaternion(o),e.copy(u.target).add(n),u.object.lookAt(u.target),!0===u.enableDamping?(g.theta*=1-u.dampingFactor,g.phi*=1-u.dampingFactor,b.multiplyScalar(1-u.dampingFactor)):(g.set(0,0,0),b.set(0,0,0)),y=1,!!(x||a.distanceToSquared(u.object.position)>m||8*(1-s.dot(u.object.quaternion))>m)&&(u.dispatchEvent(c),a.copy(u.object.position),s.copy(u.object.quaternion),x=!1,!0)}),this.dispose=function(){u.domElement.removeEventListener("contextmenu",te,!1),u.domElement.removeEventListener("mousedown",X,!1),u.domElement.removeEventListener("wheel",Z,!1),u.domElement.removeEventListener("touchstart",J,!1),u.domElement.removeEventListener("touchend",ee,!1),u.domElement.removeEventListener("touchmove",$,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Q,!1),u.domElement.removeEventListener("keydown",K,!1)},this.setControlMode=function(e){l.controlMode=e};var u=this,c={type:"change"},h={type:"start"},f={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=p.NONE,m=1e-6,v=new r.Spherical,g=new r.Spherical,y=1,b=new r.Vector3,x=!1,w=new r.Vector2,q=new r.Vector2,_=new r.Vector2,S=new r.Vector2,M=new r.Vector2,E=new r.Vector2,T=new r.Vector2,P=new r.Vector2,A=new r.Vector2;function O(){return Math.pow(.95,u.zoomSpeed)}function L(e){g.theta-=e}function C(e){g.phi-=e}var D,k=(D=new r.Vector3,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),b.add(D)}),I=function(){var e=new r.Vector3;return function(t,n){!0===u.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(u.object.up,e)),e.multiplyScalar(t),b.add(e)}}(),R=function(){var e=new r.Vector3;return function(t,n){var r=u.domElement;if(u.object.isPerspectiveCamera){var i=u.object.position;e.copy(i).sub(u.target);var o=e.length();o*=Math.tan(u.object.fov/2*Math.PI/180),k(2*t*o/r.clientHeight,u.object.matrix),I(2*n*o/r.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(k(t*(u.object.right-u.object.left)/u.object.zoom/r.clientWidth,u.object.matrix),I(n*(u.object.top-u.object.bottom)/u.object.zoom/r.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls_Custom.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function F(e){u.object.isPerspectiveCamera?y/=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*e)),u.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls_Custom.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function N(e){u.object.isPerspectiveCamera?y*=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/e)),u.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls_Custom.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function j(e){w.set(e.clientX,e.clientY)}function z(e){S.set(e.clientX,e.clientY)}function B(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}}function U(e){if(1==e.touches.length)S.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);S.set(t,n)}}function V(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);T.set(0,r)}function G(e){if(1==e.touches.length)q.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);q.set(t,n)}_.subVectors(q,w).multiplyScalar(u.rotateSpeed);var r=u.domElement;L(2*Math.PI*_.x/r.clientHeight),C(2*Math.PI*_.y/r.clientHeight),w.copy(q)}function H(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(t,n)}E.subVectors(M,S).multiplyScalar(u.panSpeed),R(E.x,E.y),S.copy(M)}function W(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);P.set(0,r),A.set(0,Math.pow(P.y/T.y,u.zoomSpeed)),F(A.y),T.copy(P)}function X(e){if(!1!==u.enabled){switch(e.preventDefault(),u.domElement.focus?u.domElement.focus():window.focus(),e.button){case 0:switch(u.mouseButtons.LEFT){case r.MOUSE.ROTATE:if("default"!==u.controlMode)return;if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===u.enablePan)return;z(e),d=p.PAN}else{if(!1===u.enableRotate)return;j(e),d=p.ROTATE}break;case r.MOUSE.PAN:if("default"!==u.controlMode)return;if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===u.enableRotate)return;j(e),d=p.ROTATE}else{if(!1===u.enablePan)return;z(e),d=p.PAN}break;default:d=p.NONE}break;case 1:switch(u.mouseButtons.MIDDLE){case r.MOUSE.DOLLY:if(!1===u.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(e),d=p.DOLLY;break;default:d=p.NONE}break;case 2:if("default"===u.controlMode)switch(u.mouseButtons.RIGHT){case r.MOUSE.ROTATE:if(!1===u.enableRotate)return;j(e),d=p.ROTATE;break;case r.MOUSE.PAN:if(!1===u.enablePan)return;z(e),d=p.PAN;break;default:d=p.NONE}else if("editor"===u.controlMode)if(e.altKey){if(!1===u.enableRotate)return;j(e),d=p.ROTATE}else{if(!1===u.enablePan)return;z(e),d=p.PAN}else d=p.NONE}d!==p.NONE&&(document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",Q,!1),u.dispatchEvent(h))}}function Y(e){if(!1!==u.enabled)switch(e.preventDefault(),d){case p.ROTATE:if(!1===u.enableRotate)return;!function(e){q.set(e.clientX,e.clientY),_.subVectors(q,w).multiplyScalar(u.rotateSpeed);var t=u.domElement;L(2*Math.PI*_.x/t.clientHeight),C(2*Math.PI*_.y/t.clientHeight),w.copy(q),u.update()}(e);break;case p.DOLLY:if(!1===u.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),A.subVectors(P,T),A.y>0?F(O()):A.y<0&&N(O()),T.copy(P),u.update()}(e);break;case p.PAN:if(!1===u.enablePan)return;!function(e){M.set(e.clientX,e.clientY),E.subVectors(M,S).multiplyScalar(u.panSpeed),R(E.x,E.y),S.copy(M),u.update()}(e)}}function Q(e){!1!==u.enabled&&(document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Q,!1),u.dispatchEvent(f),d=p.NONE)}function Z(e){!1===u.enabled||!1===u.enableZoom||d!==p.NONE&&d!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),u.dispatchEvent(h),function(e){e.deltaY<0?N(O()):e.deltaY>0&&F(O()),u.update()}(e),u.dispatchEvent(f))}function K(e){!1!==u.enabled&&!1!==u.enableKeys&&!1!==u.enablePan&&function(e){var t=!1;switch(e.keyCode){case u.keys.UP:R(0,u.keyPanSpeed),t=!0;break;case u.keys.BOTTOM:R(0,-u.keyPanSpeed),t=!0;break;case u.keys.LEFT:R(u.keyPanSpeed,0),t=!0;break;case u.keys.RIGHT:R(-u.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),u.update())}(e)}function J(e){if(!1!==u.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(u.touches.ONE){case r.TOUCH.ROTATE:if(!1===u.enableRotate)return;B(e),d=p.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===u.enablePan)return;U(e),d=p.TOUCH_PAN;break;default:d=p.NONE}break;case 2:switch(u.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;!function(e){u.enableZoom&&V(e),u.enablePan&&U(e)}(e),d=p.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(e){u.enableZoom&&V(e),u.enableRotate&&B(e)}(e),d=p.TOUCH_DOLLY_ROTATE;break;default:d=p.NONE}break;default:d=p.NONE}d!==p.NONE&&u.dispatchEvent(h)}}function $(e){if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),d){case p.TOUCH_ROTATE:if(!1===u.enableRotate)return;G(e),u.update();break;case p.TOUCH_PAN:if(!1===u.enablePan)return;H(e),u.update();break;case p.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;!function(e){u.enableZoom&&W(e),u.enablePan&&H(e)}(e),u.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(e){u.enableZoom&&W(e),u.enableRotate&&G(e)}(e),u.update();break;default:d=p.NONE}}function ee(e){!1!==u.enabled&&(u.dispatchEvent(f),d=p.NONE)}function te(e){!1!==u.enabled&&e.preventDefault()}u.domElement.addEventListener("contextmenu",te,!1),u.domElement.addEventListener("mousedown",X,!1),u.domElement.addEventListener("wheel",Z,!1),u.domElement.addEventListener("touchstart",J,!1),u.domElement.addEventListener("touchend",ee,!1),u.domElement.addEventListener("touchmove",$,!1),u.domElement.addEventListener("keydown",K,!1),-1===u.domElement.tabIndex&&(u.domElement.tabIndex=0),this.update()};i.prototype=Object.create(r.EventDispatcher.prototype),i.prototype.constructor=i;var o=function(e,t){i.call(this,e,t),this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE};o.prototype=Object.create(r.EventDispatcher.prototype),o.prototype.constructor=o},function(e,t,n){"use strict";n.r(t),n.d(t,"PxFirstPersonCamera",(function(){return a}));var r=n(0),i=n(2);n(475);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOn=!1,this.camera=t,this.posTween=null,this.rotTween=null,this.target=null,this.savedPosition=new r.Vector3,this.savedRotation=new r.Euler,this.onKeyDownBinder=this.onKeyDown.bind(this),this.onKeyUpBinder=this.onKeyUp.bind(this),this.onMouseDownBinder=this.onMouseDown.bind(this),this.onMouseMoveBinder=this.onMouseMove.bind(this),this.onMouseUpBinder=this.onMouseUp.bind(this),this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.rotateUp=!1,this.rotateDown=!1,this.rotateLeft=!1,this.rotateRight=!1,this.rayCast=new r.Raycaster(new r.Vector3,new r.Vector3(0,-1,0),0,10),this.velocity=new r.Vector3,this.direction=new r.Vector3,this.euler=new r.Euler(0,0,0,"XYZ"),this.isLButtonDown=!1,this.moveSpeed=100,this.heightOffset=2,this.rotateSpeed=1,this.lastHeight=2}var t,n,a;return t=e,(n=[{key:"setMoveSpeed",value:function(e){this.moveSpeed=e}},{key:"setHeightOffset",value:function(e){this.heightOffset=e}},{key:"setRotateSpeed",value:function(e){this.rotateSpeed=e}},{key:"setPickObject",value:function(e){this.target=e}},{key:"getPickObject",value:function(){for(var e=this.target instanceof Array?this.target:this.target.children,t=[],n=0;n<e.length;n++)e[n].traverse((function(e){e instanceof r.Mesh&&e.visible&&e.parent&&t.push(e)}));return t}},{key:"updateCameraHeight",value:function(){this.isOn&&(this.camera.getActiveCamera().position.y+=100,this.rayCast.far=1e5)}},{key:"on",value:function(e,t,n){if(!this.isOn){var o=this.camera.getActiveCamera();this.savedPosition.copy(o.position),this.savedRotation.copy(o.rotation),this.posTween&&this.posTween.stop(),this.rotTween&&this.rotTween.stop();var a=this;new r.Vector3(e,t,n+10),this.posTween=new i.a.Tween(o.position).to({x:e,y:t,z:n},1e3).easing(i.a.Easing.Quartic.Out).onUpdate((function(){})).onComplete((function(){a.camera.control.enabled=!1})).start(),this.rotTween=new i.a.Tween(o.rotation).to({x:0,y:0,z:0},1e3).easing(i.a.Easing.Quartic.Out).onUpdate((function(){})).onComplete((function(){a.isOn=!0})).start(),window.addEventListener("keydown",this.onKeyDownBinder,!1),window.addEventListener("keyup",this.onKeyUpBinder,!1),window.addEventListener("mousedown",this.onMouseDownBinder,!1),window.addEventListener("mousemove",this.onMouseMoveBinder,!1),window.addEventListener("mouseup",this.onMouseUpBinder,!1)}}},{key:"off",value:function(){this.isOn=!1;var e=this.camera.getActiveCamera();this.posTween&&this.posTween.stop(),this.rotTween&&this.rotTween.stop();var t=this;this.posTween=new i.a.Tween(e.position).to({x:this.savedPosition.x,y:this.savedPosition.y,z:this.savedPosition.z},1e3).easing(i.a.Easing.Quartic.Out).onUpdate((function(){})).onComplete((function(){t.camera.control.enabled=!0})).start(),this.rotTween=new i.a.Tween(e.rotation).to({x:this.savedRotation.x,y:this.savedRotation.y,z:this.savedRotation.z},1e3).easing(i.a.Easing.Quartic.Out).onUpdate((function(){})).onComplete((function(){})).start(),window.removeEventListener("keydown",this.onKeyDownBinder),window.removeEventListener("keyup",this.onKeyUpBinder),window.removeEventListener("mousedown",this.onMouseDownBinder),window.removeEventListener("mousemove",this.onMouseMoveBinder),window.removeEventListener("mouseup",this.onMouseUpBinder)}},{key:"onKeyDown",value:function(e){38===e.keyCode||87===e.keyCode?this.moveForward=!0:65===e.keyCode?this.moveLeft=!0:40===e.keyCode||83===e.keyCode?this.moveBackward=!0:68===e.keyCode&&(this.moveRight=!0),37===e.keyCode?this.rotateLeft=!0:39===e.keyCode&&(this.rotateRight=!0)}},{key:"onKeyUp",value:function(e){38===e.keyCode||87===e.keyCode?this.moveForward=!1:65===e.keyCode?this.moveLeft=!1:40===e.keyCode||83===e.keyCode?this.moveBackward=!1:68===e.keyCode&&(this.moveRight=!1),37===e.keyCode?this.rotateLeft=!1:39===e.keyCode&&(this.rotateRight=!1)}},{key:"onMouseDown",value:function(e){0===e.button&&(this.isLButtonDown=!0)}},{key:"onMouseMove",value:function(e){if(this.isLButtonDown){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0,i=this.camera.getActiveCamera(),o=new r.Vector3(1,0,0);o.applyQuaternion(i.quaternion),i.rotateOnWorldAxis(o,.002*-n),i.rotateOnWorldAxis(new r.Vector3(0,1,0),.002*-t)}}},{key:"onMouseUp",value:function(e){0===e.button&&(this.isLButtonDown=!1)}},{key:"update",value:function(e){if(this.isOn){var t=this.camera.getActiveCamera();this.rayCast.ray.origin.copy(t.position);var n=this.getPickObject(),i=this.rayCast.intersectObjects(n,!1),o=i.length>0;this.velocity.x-=10*this.velocity.x*e,this.velocity.z-=10*this.velocity.z*e,this.velocity.y-=9.8*100*e,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveLeft)-Number(this.moveRight),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=this.direction.z*this.moveSpeed*e),(this.moveLeft||this.moveRight)&&(this.velocity.x-=this.direction.x*this.moveSpeed*e);var a=this.lastHeight+this.heightOffset;o&&(a=i[0].point.y+this.heightOffset,this.lastHeight=i[0].point.y),t.translateX(this.velocity.x*e),t.position.y=a,t.translateZ(this.velocity.z*e);var s=new r.Vector3(1,0,0);s.applyQuaternion(t.quaternion),this.rotateUp?t.rotateOnWorldAxis(s,this.rotateSpeed*e):this.rotateDown&&t.rotateOnWorldAxis(s,-this.rotateSpeed*e),this.rotateLeft?t.rotateOnWorldAxis(new r.Vector3(0,1,0),this.rotateSpeed*e):this.rotateRight&&t.rotateOnWorldAxis(new r.Vector3(0,1,0),-this.rotateSpeed*e),this.rayCast.far=10}}},{key:"stop",value:function(){this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.rotateUp=!1,this.rotateDown=!1,this.rotateLeft=!1,this.rotateRight=!1}}])&&o(t.prototype,n),a&&o(t,a),e}()},function(e,t,n){(function(e){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(t,n){"use strict";"object"===r(e)&&"object"===r(e.exports)?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var a=[],s=i.document,l=Object.getPrototypeOf,u=a.slice,c=a.concat,h=a.push,f=a.indexOf,p={},d=p.toString,m=p.hasOwnProperty,v=m.toString,g=v.call(Object),y={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},w={type:!0,src:!0,nonce:!0,noModule:!0};function q(e,t,n){var r,i,o=(n=n||s).createElement("script");if(o.text=e,t)for(r in w)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"===r(e)||"function"==typeof e?p[d.call(e)]||"object":r(e)}var S=function e(t,n){return new e.fn.init(t,n)},M=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function E(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!b(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:"3.4.1",constructor:S,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:a.sort,splice:a.splice},S.extend=S.fn.extend=function(){var e,t,n,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"===r(s)||b(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(c&&i&&(S.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[t],a=o&&!Array.isArray(n)?[]:o||S.isPlainObject(n)?n:{},o=!1,s[t]=S.extend(c,a,i)):void 0!==i&&(s[t]=i));return s},S.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(!(t=l(e))||"function"==typeof(n=m.call(t,"constructor")&&t.constructor)&&v.call(n)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){q(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(M,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?S.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:f.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(E(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=a[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){p["[object "+t+"]"]=t.toLowerCase()}));var T=
/*!
   * Sizzle CSS Selector Engine v2.3.4
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://js.foundation/
   *
   * Date: 2019-04-08
   */
function(e){var t,n,r,i,o,a,s,l,u,c,h,f,p,d,m,v,g,y,b,x="sizzle"+1*new Date,w=e.document,q=0,_=0,S=le(),M=le(),E=le(),T=le(),P=function(e,t){return e===t&&(h=!0),0},A={}.hasOwnProperty,O=[],L=O.pop,C=O.push,D=O.push,k=O.slice,I=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+F+"*("+N+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+F+"*\\]",z=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",B=new RegExp(F+"+","g"),U=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),V=new RegExp("^"+F+"*,"+F+"*"),G=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),H=new RegExp(F+"|>"),W=new RegExp(z),X=new RegExp("^"+N+"$"),Y={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},ae=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{D.apply(O=k.call(w.childNodes),w.childNodes),O[w.childNodes.length].nodeType}catch(e){D={apply:O.length?function(e,t){C.apply(e,k.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,u,c,h,d,g,y=t&&t.ownerDocument,q=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==q&&9!==q&&11!==q)return r;if(!i&&((t?t.ownerDocument||t:w)!==p&&f(t),t=t||p,m)){if(11!==q&&(h=$.exec(e)))if(o=h[1]){if(9===q){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o)return r.push(u),r}else{if(h[2])return D.apply(r,t.getElementsByTagName(e)),r;if((o=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!T[e+" "]&&(!v||!v.test(e))&&(1!==q||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===q&&H.test(e)){for((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=x),s=(d=a(e)).length;s--;)d[s]="#"+c+" "+be(d[s]);g=d.join(","),y=ee.test(e)&&ge(t.parentNode)||t}try{return D.apply(r,y.querySelectorAll(g)),r}catch(t){T(e,!0)}finally{c===x&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ue(e){return e[x]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ue((function(t){return t=+t,ue((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==p&&9===a.nodeType&&a.documentElement?(d=(p=a).documentElement,m=!o(p),w!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=ce((function(e){return d.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},g=[],v=[],(n.qsa=J.test(p.querySelectorAll))&&(ce((function(e){d.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+F+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+x+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=J.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",z)})),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),t=J.test(d.compareDocumentPosition),b=t||J.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===w&&b(w,e)?-1:t===p||t.ownerDocument===w&&b(w,t)?1:c?I(c,e)-I(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===p?-1:t===p?1:i?-1:o?1:c?I(c,e)-I(c,t):0;if(i===o)return fe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?fe(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),n.matchesSelector&&m&&!T[t+" "]&&(!g||!g.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){T(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(P),h){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,f,p,d,m=o!==a?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?v.firstChild:v.lastChild],a&&y){for(b=(p=(u=(c=(h=(f=v)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===q&&u[1])&&u[2],f=p&&v.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[q,p,b];break}}else if(y&&(b=p=(u=(c=(h=(f=t)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===q&&u[1]),!1===b)for(;(f=++p&&f&&f[m]||(b=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(y&&((c=(h=f[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[q,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=I(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ue((function(e){var t=[],n=[],r=s(e.replace(U,"$1"));return r[x]?ue((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return X.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ve((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,h,f=[q,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(h=t[x]||(t[x]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===q&&u[1]===s)return f[2]=u[2];if(c[o]=f,f[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function qe(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function _e(e,t,n,r,i,o){return r&&!r[x]&&(r=_e(r)),i&&!i[x]&&(i=_e(i,o)),ue((function(o,a,s,l){var u,c,h,f=[],p=[],d=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?m:qe(m,f,e,s,l),g=n?i||(o?e:d||r)?[]:a:v;if(n&&n(v,g,s,l),r)for(u=qe(g,p),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(g[p[c]]=!(v[p[c]]=h));if(o){if(i||e){if(i){for(u=[],c=g.length;c--;)(h=g[c])&&u.push(v[c]=h);i(null,g=[],u,l)}for(c=g.length;c--;)(h=g[c])&&(u=i?I(o,h):f[c])>-1&&(o[u]=!(a[u]=h))}}else g=qe(g===a?g.splice(d,g.length):g),i?i(null,a,g,l):D.apply(a,g)}))}function Se(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,c=xe((function(e){return e===t}),s,!0),h=xe((function(e){return I(t,e)>-1}),s,!0),f=[function(e,n,r){var i=!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):h(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])f=[xe(we(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return _e(l>1&&we(f),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,l<i&&Se(e.slice(l,i)),i<o&&Se(e=e.slice(i)),i<o&&be(e))}f.push(n)}return we(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=se.tokenize=function(e,t){var n,i,o,a,s,l,u,c=M[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(a in n&&!(i=V.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=G.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):M(e,l).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=E[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Se(t[n]))[x]?i.push(s):o.push(s);(s=E(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,c){var h,d,v,g=0,y="0",b=o&&[],x=[],w=u,_=o||i&&r.find.TAG("*",c),S=q+=null==w?1:Math.random()||.1,M=_.length;for(c&&(u=a===p||a||c);y!==M&&null!=(h=_[y]);y++){if(i&&h){for(d=0,a||h.ownerDocument===p||(f(h),s=!m);v=e[d++];)if(v(h,a||p,s)){l.push(h);break}c&&(q=S)}n&&((h=!v&&h)&&g--,o&&b.push(h))}if(g+=y,n&&y!==g){for(d=0;v=t[d++];)v(b,x,a,s);if(o){if(g>0)for(;y--;)b[y]||x[y]||(x[y]=L.call(l));x=qe(x)}D.apply(l,x),c&&!o&&x.length>0&&g+t.length>1&&se.uniqueSort(l)}return c&&(q=S,u=w),b};return n?ue(o):o}(o,i))).selector=e}return s},l=se.select=function(e,t,n,i){var o,l,u,c,h,f="function"==typeof e&&e,p=!i&&a(e=f.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=Y.needsContext.test(e)?0:l.length;o--&&(u=l[o],!r.relative[c=u.type]);)if((h=r.find[c])&&(i=h(u.matches[0].replace(te,ne),ee.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return D.apply(n,i),n;break}}return(f||s(e,p))(i,t,!m,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(P).join("")===x,n.detectDuplicates=!!h,f(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||he(R,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(i);S.find=T,(S.expr=T.selectors)[":"]=S.expr.pseudos,S.uniqueSort=S.unique=T.uniqueSort,S.text=T.getText,S.isXMLDoc=T.isXML,S.contains=T.contains,S.escapeSelector=T.escape;var P=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=S.expr.match.needsContext;function L(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return b(t)?S.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?S.grep(e,(function(e){return f.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&O.test(e)?S(e):e||[],!1).length}});var k,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),C.test(r[1])&&S.isPlainObject(t))for(r in t)b(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=s.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,k=S(s);var R=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!O.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?f.call(S(e),this[0]):f.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(L(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,r){var i=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=S.filter(r,i)),this.length>1&&(F[e]||S.uniqueSort(i),R.test(e)&&i.reverse()),this.pushStack(i)}}));var j=/[^\x20\t\r\n\f]+/g;function z(e){return e}function B(e){throw e}function U(e,t,n,r){var i;try{e&&b(i=e.promise)?i.call(e).done(t).fail(n):e&&b(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(j)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){S.each(n,(function(n,r){b(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?S.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,r){var i=b(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var a=0;function s(e,t,n,o){return function(){var l=this,u=arguments,c=function(){var i,c;if(!(e<a)){if((i=n.apply(l,u))===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"===r(i)||"function"==typeof i)&&i.then,b(c)?o?c.call(i,s(a,t,z,o),s(a,t,B,o)):(a++,c.call(i,s(a,t,z,o),s(a,t,B,o),s(a,t,z,t.notifyWith))):(n!==z&&(l=void 0,u=[i]),(o||t.resolveWith)(l,u))}},h=o?c:function(){try{c()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,h.stackTrace),e+1>=a&&(n!==B&&(l=void 0,u=[r]),t.rejectWith(l,u))}};e?h():(S.Deferred.getStackHook&&(h.stackTrace=S.Deferred.getStackHook()),i.setTimeout(h))}}return S.Deferred((function(r){t[0][3].add(s(0,r,b(o)?o:z,r.notifyWith)),t[1][3].add(s(0,r,b(e)?e:z)),t[2][3].add(s(0,r,b(n)?n:B))})).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},a={};return S.each(t,(function(e,r){var i=r[2],s=r[5];o[r[1]]=i.add,s&&i.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(r[3].fire),a[r[0]]=function(){return a[r[0]+"With"](this===a?void 0:this,arguments),this},a[r[0]+"With"]=i.fireWith})),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),o=S.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(U(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||b(i[n]&&i[n].then)))return o.then();for(;n--;)U(i[n],a(n),o.reject);return o.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&V.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){i.setTimeout((function(){throw e}))};var G=S.Deferred();function H(){s.removeEventListener("DOMContentLoaded",H),i.removeEventListener("load",H),S.ready()}S.fn.ready=function(e){return G.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||G.resolveWith(s,[S]))}}),S.ready.then=G.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?i.setTimeout(S.ready):(s.addEventListener("DOMContentLoaded",H),i.addEventListener("load",H));var W=function e(t,n,r,i,o,a,s){var l=0,u=t.length,c=null==r;if("object"===_(r))for(l in o=!0,r)e(t,n,l,r[l],!0,a,s);else if(void 0!==i&&(o=!0,b(i)||(s=!0),c&&(s?(n.call(t,i),n=null):(c=n,n=function(e,t,n){return c.call(S(e),n)})),n))for(;l<u;l++)n(t[l],r,s?i:i.call(t[l],l,n(t[l],r)));return o?t:c?n.call(t):u?n(t[0],r):a},X=/^-ms-/,Y=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function Z(e){return e.replace(X,"ms-").replace(Y,Q)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=S.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[Z(t)]=n;else for(r in t)i[Z(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Z(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Z):(t=Z(t))in r?[t]:t.match(j)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var $=new J,ee=new J,te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ne=/[A-Z]/g;function re(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ne,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:te.test(e)?JSON.parse(e):e)}(n)}catch(e){}ee.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return ee.hasData(e)||$.hasData(e)},data:function(e,t,n){return ee.access(e,t,n)},removeData:function(e,t){ee.remove(e,t)},_data:function(e,t,n){return $.access(e,t,n)},_removeData:function(e,t){$.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,i,o,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(o=ee.get(a),1===a.nodeType&&!$.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=Z(i.slice(5)),re(a,i,o[i]));$.set(a,"hasDataAttrs",!0)}return o}return"object"===r(e)?this.each((function(){ee.set(this,e)})):W(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=ee.get(a,e))||void 0!==(n=re(a,e))?n:void 0;this.each((function(){ee.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ee.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=$.get(e,t),n&&(!r||Array.isArray(n)?r=$.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=S.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){S.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return $.get(e,n)||$.access(e,n,{empty:S.Callbacks("once memory").add((function(){$.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=$.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],se=s.documentElement,le=function(e){return S.contains(e.ownerDocument,e)},ue={composed:!0};se.getRootNode&&(le=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&le(e)&&"none"===S.css(e,"display")},he=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function fe(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},l=s(),u=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==u&&+l)&&oe.exec(S.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)S.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;S.style(e,t,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var pe={};function de(e){var t,n=e.ownerDocument,r=e.nodeName,i=pe[r];return i||(t=n.body.appendChild(n.createElement(r)),i=S.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),pe[r]=i,i)}function me(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=$.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ce(r)&&(i[o]=de(r))):"none"!==n&&(i[o]="none",$.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}S.fn.extend({show:function(){return me(this,!0)},hide:function(){return me(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?S(this).show():S(this).hide()}))}});var ve=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i,be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&L(e,t)?S.merge([e],n):n}function we(e,t){for(var n=0,r=e.length;n<r;n++)$.set(e[n],"globalEval",!t||$.get(t[n],"globalEval"))}be.optgroup=be.option,be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td;var qe,_e,Se=/<|&#?\w+;/;function Me(e,t,n,r,i){for(var o,a,s,l,u,c,h=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((o=e[p])||0===o)if("object"===_(o))S.merge(f,o.nodeType?[o]:o);else if(Se.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(ge.exec(o)||["",""])[1].toLowerCase(),l=be[s]||be._default,a.innerHTML=l[1]+S.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;S.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(r&&S.inArray(o,r)>-1)i&&i.push(o);else if(u=le(o),a=xe(h.appendChild(o),"script"),u&&we(a),n)for(c=0;o=a[c++];)ye.test(o.type||"")&&n.push(o);return h}qe=s.createDocumentFragment().appendChild(s.createElement("div")),(_e=s.createElement("input")).setAttribute("type","radio"),_e.setAttribute("checked","checked"),_e.setAttribute("name","t"),qe.appendChild(_e),y.checkClone=qe.cloneNode(!0).cloneNode(!0).lastChild.checked,qe.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!qe.cloneNode(!0).lastChild.defaultValue;var Ee=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Pe=/^([^.]*)(?:\.(.+)|)/;function Ae(){return!0}function Oe(){return!1}function Le(e,t){return e===function(){try{return s.activeElement}catch(e){}}()==("focus"===t)}function Ce(e,t,n,i,o,a){var s,l;if("object"===r(t)){for(l in"string"!=typeof n&&(i=i||n,n=void 0),t)Ce(e,l,n,i,t[l],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Oe;else if(!o)return e;return 1===a&&(s=o,(o=function(e){return S().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),e.each((function(){S.event.add(this,t,o,i,n)}))}function De(e,t,n){n?($.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=$.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=u.call(arguments),$.set(this,t,o),r=n(this,t),this[t](),o!==(i=$.get(this,t))||r?$.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&($.set(this,t,{value:S.event.trigger(S.extend(o[0],S.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===$.get(e,t)&&S.event.add(e,t,Ae)}S.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,h,f,p,d,m,v=$.get(e);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(se,i),n.guid||(n.guid=S.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(j)||[""]).length;u--;)p=m=(s=Pe.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),p&&(h=S.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=S.event.special[p]||{},c=S.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(p,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),S.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,h,f,p,d,m,v=$.hasData(e)&&$.get(e);if(v&&(l=v.events)){for(u=(t=(t||"").match(j)||[""]).length;u--;)if(p=m=(s=Pe.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),p){for(h=S.event.special[p]||{},f=l[p=(r?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,d,v.handle)||S.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)S.event.remove(e,p+t[u],n,r,!0);S.isEmptyObject(l)&&$.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=S.event.fix(e),l=new Array(arguments.length),u=($.get(this,"events")||{})[s.type]||[],c=S.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=S.event.handlers.call(this,s,u),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?S(i,this).index(u)>-1:S.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ve.test(t.type)&&t.click&&L(t,"input")&&De(t,"click",Ae),!1},trigger:function(e){var t=this||e;return ve.test(t.type)&&t.click&&L(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return ve.test(t.type)&&t.click&&L(t,"input")&&$.get(t,"click")||L(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ae:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0}).prototype={constructor:S.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ee.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return De(this,e,Le),!1},trigger:function(){return De(this,e),!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||S.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,r){return Ce(this,e,t,n,r)},one:function(e,t,n,r){return Ce(this,e,t,n,r,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"===r(e)){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){S.event.remove(this,e,n,t)}))}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return L(e,"table")&&L(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ze(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if($.hasData(e)&&(o=$.access(e),a=$.set(t,o),u=o.events))for(i in delete a.handle,a.events={},u)for(n=0,r=u[i].length;n<r;n++)S.event.add(t,i,u[i][n]);ee.hasData(e)&&(s=ee.access(e),l=S.extend({},s),ee.set(t,l))}}function Ue(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ve.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ve(e,t,n,r){t=c.apply([],t);var i,o,a,s,l,u,h=0,f=e.length,p=f-1,d=t[0],m=b(d);if(m||f>1&&"string"==typeof d&&!y.checkClone&&Re.test(d))return e.each((function(i){var o=e.eq(i);m&&(t[0]=d.call(this,i,o.html())),Ve(o,t,n,r)}));if(f&&(o=(i=Me(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=S.map(xe(i,"script"),je)).length;h<f;h++)l=i,h!==p&&(l=S.clone(l,!0,!0),s&&S.merge(a,xe(l,"script"))),n.call(e[h],l,h);if(s)for(u=a[a.length-1].ownerDocument,S.map(a,ze),h=0;h<s;h++)l=a[h],ye.test(l.type||"")&&!$.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):q(l.textContent.replace(Fe,""),l,u))}return e}function Ge(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(xe(r)),r.parentNode&&(n&&le(r)&&we(xe(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=le(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=xe(s),r=0,i=(o=xe(e)).length;r<i;r++)Ue(o[r],a[r]);if(t)if(n)for(o=o||xe(e),a=a||xe(s),r=0,i=o.length;r<i;r++)Be(o[r],a[r]);else Be(e,s);return(a=xe(s,"script")).length>0&&we(a,!l&&xe(e,"script")),s},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(K(n)){if(t=n[$.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[$.expando]=void 0}n[ee.expando]&&(n[ee.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return W(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ve(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Ve(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ve(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ve(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return W(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!be[(ge.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ve(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,r=[],i=S(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),S(i[a])[t](n),h.apply(r,n.get());return this.pushStack(r)}}));var He=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),We=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Xe=new RegExp(ae.join("|"),"i");function Ye(e,t,n){var r,i,o,a,s=e.style;return(n=n||We(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||le(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&He.test(a)&&Xe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(u).appendChild(c);var e=i.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),r=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),se.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,r,o,a,l,u=s.createElement("div"),c=s.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o}}))}();var Ze=["Webkit","Moz","ms"],Ke=s.createElement("div").style,Je={};function $e(e){var t=S.cssProps[e]||Je[e];return t||(e in Ke?e:Je[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in Ke)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt=/^--/,nt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"};function it(e,t,n){var r=oe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ot(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=S.css(e,n+ae[a],!0,i)),r?("content"===n&&(l-=S.css(e,"padding"+ae[a],!0,i)),"margin"!==n&&(l-=S.css(e,"border"+ae[a]+"Width",!0,i))):(l+=S.css(e,"padding"+ae[a],!0,i),"padding"!==n?l+=S.css(e,"border"+ae[a]+"Width",!0,i):s+=S.css(e,"border"+ae[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function at(e,t,n){var r=We(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Ye(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+ot(e,t,n||(i?"border":"content"),o,r,a)+"px"}function st(e,t,n,r,i){return new st.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=Z(t),u=tt.test(t),c=e.style;if(u||(t=$e(l)),s=S.cssHooks[t]||S.cssHooks[l],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:c[t];"string"===(a=r(n))&&(o=oe.exec(n))&&o[1]&&(n=fe(e,t,o),a="number"),null!=n&&n==n&&("number"!==a||u||(n+=o&&o[3]||(S.cssNumber[l]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=Z(t);return tt.test(t)||(t=$e(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ye(e,t,r)),"normal"===i&&t in rt&&(i=rt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,t,r):he(e,nt,(function(){return at(e,t,r)}))},set:function(e,n,r){var i,o=We(e),a=!y.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===S.css(e,"boxSizing",!1,o),l=r?ot(e,t,r,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-ot(e,t,"border",!1,o)-.5)),l&&(i=oe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),it(0,n,l)}}})),S.cssHooks.marginLeft=Qe(y.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-he(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ae[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(S.cssHooks[e+t].set=it)})),S.fn.extend({css:function(e,t){return W(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=We(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=st,st.prototype={constructor:st,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=st.propHooks[this.prop];return e&&e.get?e.get(this):st.propHooks._default.get(this)},run:function(e){var t,n=st.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):st.propHooks._default.set(this),this}},st.prototype.init.prototype=st.prototype,st.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},st.propHooks.scrollTop=st.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(S.fx=st.prototype.init).step={};var lt,ut,ct=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function ft(){ut&&(!1===s.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ft):i.setTimeout(ft,S.fx.interval),S.fx.tick())}function pt(){return i.setTimeout((function(){lt=void 0})),lt=Date.now()}function dt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ae[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function mt(e,t,n){for(var r,i=(vt.tweeners[t]||[]).concat(vt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function vt(e,t,n){var r,i,o=0,a=vt.prefilters.length,s=S.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=lt||pt(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(e,[u,r,n]),r<1&&a?n:(a||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:lt||pt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=Z(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);o<a;o++)if(r=vt.prefilters[o].call(u,e,c,u.opts))return b(r.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,mt,u),b(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(vt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return fe(n.elem,e,oe.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(j);for(var n,r=0,i=e.length;r<i;r++)n=e[r],vt.tweeners[n]=vt.tweeners[n]||[],vt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,u,c,h="width"in t||"height"in t,f=this,p={},d=e.style,m=e.nodeType&&ce(e),v=$.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],ct.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;m=!0}p[r]=v&&v[r]||S.style(e,r)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(r in h&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(u=v&&v.display)&&(u=$.get(e,"display")),"none"===(c=S.css(e,"display"))&&(u?c=u:(me([e],!0),u=e.style.display||u,c=S.css(e,"display"),me([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(e,"float")&&(l||(f.done((function(){d.display=u})),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),l=!1,p)l||(v?"hidden"in v&&(m=v.hidden):v=$.access(e,"fxshow",{display:u}),o&&(v.hidden=!m),m&&me([e],!0),f.done((function(){for(r in m||me([e]),$.remove(e,"fxshow"),p)S.style(e,r,p[r])}))),l=mt(m?v[r]:0,r,f),r in v||(v[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?vt.prefilters.unshift(e):vt.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"===r(e)?S.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){b(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=S.isEmptyObject(e),o=S.speed(t,n,r),a=function(){var t=vt(this,S.extend({},e),o);(i||$.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=S.timers,a=$.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ht.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=$.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=S.timers,a=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(dt(t,!0),e,r,i)}})),S.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(lt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),lt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ut||(ut=!0,ft())},S.fx.stop=function(){ut=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}}))},function(){var e=s.createElement("input"),t=s.createElement("select").appendChild(s.createElement("option"));e.type="checkbox",y.checkOn=""!==e.value,y.optSelected=t.selected,(e=s.createElement("input")).value="t",e.type="radio",y.radioValue="t"===e.value}();var gt,yt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return W(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?gt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&L(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(j);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),gt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=yt[t]||S.find.attr;yt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=yt[a],yt[a]=i,i=null!=n(e,t,r)?a:null,yt[a]=o),i}}));var bt=/^(?:input|select|textarea|button)$/i,xt=/^(?:a|area)$/i;function wt(e){return(e.match(j)||[]).join(" ")}function qt(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(j)||[]}S.fn.extend({prop:function(e,t){return W(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(b(e))return this.each((function(t){S(this).addClass(e.call(this,t,qt(this)))}));if((t=_t(e)).length)for(;n=this[l++];)if(i=qt(n),r=1===n.nodeType&&" "+wt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=wt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(b(e))return this.each((function(t){S(this).removeClass(e.call(this,t,qt(this)))}));if(!arguments.length)return this.attr("class","");if((t=_t(e)).length)for(;n=this[l++];)if(i=qt(n),r=1===n.nodeType&&" "+wt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=wt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=r(e),i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):b(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,qt(this),t),t)})):this.each((function(){var t,r,o,a;if(i)for(r=0,o=S(this),a=_t(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=qt(this))&&$.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":$.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+wt(qt(n))+" ").indexOf(t)>-1)return!0;return!1}});var St=/\r/g;S.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=b(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,S(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(St,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:wt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!L(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=S.makeArray(t),a=i.length;a--;)((r=i[a]).selected=S.inArray(S.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),y.focusin="onfocusin"in i;var Mt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,o){var a,l,u,c,h,f,p,d,v=[n||s],g=m.call(e,"type")?e.type:e,y=m.call(e,"namespace")?e.namespace.split("."):[];if(l=d=u=n=n||s,3!==n.nodeType&&8!==n.nodeType&&!Mt.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(y=g.split("."),g=y.shift(),y.sort()),h=g.indexOf(":")<0&&"on"+g,(e=e[S.expando]?e:new S.Event(g,"object"===r(e)&&e)).isTrigger=o?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),p=S.event.special[g]||{},o||!p.trigger||!1!==p.trigger.apply(n,t))){if(!o&&!p.noBubble&&!x(n)){for(c=p.delegateType||g,Mt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)v.push(l),u=l;u===(n.ownerDocument||s)&&v.push(u.defaultView||u.parentWindow||i)}for(a=0;(l=v[a++])&&!e.isPropagationStopped();)d=l,e.type=a>1?c:p.bindType||g,(f=($.get(l,"events")||{})[e.type]&&$.get(l,"handle"))&&f.apply(l,t),(f=h&&l[h])&&f.apply&&K(l)&&(e.result=f.apply(l,t),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),t)||!K(n)||h&&b(n[g])&&!x(n)&&((u=n[h])&&(n[h]=null),S.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,Et),n[g](),e.isPropagationStopped()&&d.removeEventListener(g,Et),S.event.triggered=void 0,u&&(n[h]=u)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=$.access(r,t);i||r.addEventListener(e,n,!0),$.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=$.access(r,t)-1;i?$.access(r,t,i):(r.removeEventListener(e,n,!0),$.remove(r,t))}}}));var Tt=i.location,Pt=Date.now(),At=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var Ot=/\[\]$/,Lt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function kt(e,t,n,i){var o;if(Array.isArray(t))S.each(t,(function(t,o){n||Ot.test(e)?i(e,o):kt(e+"["+("object"===r(o)&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==_(t))i(e,t);else for(o in t)kt(e+"["+o+"]",t[o],n,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){i(this.name,this.value)}));else for(n in e)kt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Dt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!ve.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:n.replace(Lt,"\r\n")}})).get()}});var It=/%20/g,Rt=/#.*$/,Ft=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:GET|HEAD)$/,zt=/^\/\//,Bt={},Ut={},Vt="*/".concat("*"),Gt=s.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(j)||[];if(b(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Wt(e,t,n,r){var i={},o=e===Ut;function a(s){var l;return i[s]=!0,S.each(e[s]||[],(function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Xt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Gt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Xt(Xt(e,S.ajaxSettings),t):Xt(S.ajaxSettings,e)},ajaxPrefilter:Ht(Bt),ajaxTransport:Ht(Ut),ajax:function(e,t){"object"===r(e)&&(t=e,e=void 0);var n,o,a,l,u,c,h,f,p,d,m=S.ajaxSetup({},t=t||{}),v=m.context||m,g=m.context&&(v.nodeType||v.jquery)?S(v):S.event,y=S.Deferred(),b=S.Callbacks("once memory"),x=m.statusCode||{},w={},q={},_="canceled",M={readyState:0,getResponseHeader:function(e){var t;if(h){if(!l)for(l={};t=Nt.exec(a);)l[t[1].toLowerCase()+" "]=(l[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=l[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?a:null},setRequestHeader:function(e,t){return null==h&&(e=q[e.toLowerCase()]=q[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==h&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)M.always(e[M.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||_;return n&&n.abort(t),E(0,t),this}};if(y.promise(M),m.url=((e||m.url||Tt.href)+"").replace(zt,Tt.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(j)||[""],null==m.crossDomain){c=s.createElement("a");try{c.href=m.url,c.href=c.href,m.crossDomain=Gt.protocol+"//"+Gt.host!=c.protocol+"//"+c.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Wt(Bt,m,t,M),h)return M;for(p in(f=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!jt.test(m.type),o=m.url.replace(Rt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(It,"+")):(d=m.url.slice(o.length),m.data&&(m.processData||"string"==typeof m.data)&&(o+=(At.test(o)?"&":"?")+m.data,delete m.data),!1===m.cache&&(o=o.replace(Ft,"$1"),d=(At.test(o)?"&":"?")+"_="+Pt+++d),m.url=o+d),m.ifModified&&(S.lastModified[o]&&M.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&M.setRequestHeader("If-None-Match",S.etag[o])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&M.setRequestHeader("Content-Type",m.contentType),M.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Vt+"; q=0.01":""):m.accepts["*"]),m.headers)M.setRequestHeader(p,m.headers[p]);if(m.beforeSend&&(!1===m.beforeSend.call(v,M,m)||h))return M.abort();if(_="abort",b.add(m.complete),M.done(m.success),M.fail(m.error),n=Wt(Ut,m,t,M)){if(M.readyState=1,f&&g.trigger("ajaxSend",[M,m]),h)return M;m.async&&m.timeout>0&&(u=i.setTimeout((function(){M.abort("timeout")}),m.timeout));try{h=!1,n.send(w,E)}catch(e){if(h)throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,r,s){var l,c,p,d,w,q=t;h||(h=!0,u&&i.clearTimeout(u),n=void 0,a=s||"",M.readyState=e>0?4:0,l=e>=200&&e<300||304===e,r&&(d=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(m,M,r)),d=function(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(m,d,M,l),l?(m.ifModified&&((w=M.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=w),(w=M.getResponseHeader("etag"))&&(S.etag[o]=w)),204===e||"HEAD"===m.type?q="nocontent":304===e?q="notmodified":(q=d.state,c=d.data,l=!(p=d.error))):(p=q,!e&&q||(q="error",e<0&&(e=0))),M.status=e,M.statusText=(t||q)+"",l?y.resolveWith(v,[c,q,M]):y.rejectWith(v,[M,q,p]),M.statusCode(x),x=void 0,f&&g.trigger(l?"ajaxSuccess":"ajaxError",[M,m,l?c:p]),b.fireWith(v,[M,q]),f&&(g.trigger("ajaxComplete",[M,m]),--S.active||S.event.trigger("ajaxStop")))}return M},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,r,i){return b(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:i,data:n,success:r},S.isPlainObject(e)&&e))}})),S._evalUrl=function(e,t){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return b(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=b(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=S.ajaxSettings.xhr();y.cors=!!Qt&&"withCredentials"in Qt,y.ajax=Qt=!!Qt,S.ajaxTransport((function(e){var t,n;if(y.cors||Qt&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Yt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Zt,Kt=[],Jt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||S.expando+"_"+Pt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var r,o,a,s=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Jt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||S.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=i[r],i[r]=function(){a=arguments},n.always((function(){void 0===o?S(i).removeProp(r):i[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),a&&b(o)&&o(a[0]),a=o=void 0})),"script"})),y.createHTMLDocument=((Zt=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Zt.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,t.head.appendChild(r)):t=s),o=!n&&[],(i=C.exec(e))?[t.createElement(i[1])]:(i=Me([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var i,o,a,s=this,l=e.indexOf(" ");return l>-1&&(i=wt(e.slice(l)),e=e.slice(0,l)),b(t)?(n=t,t=void 0):t&&"object"===r(t)&&(o="POST"),s.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=S.css(e,"position"),c=S(e),h={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),l=S.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),b(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):c.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||se}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return W(this,(function(e,r,i){var o;if(x(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Qe(y.pixelPosition,(function(e,n){if(n)return n=Ye(e,t),He.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){S.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return W(this,(function(t,n,i){var o;return x(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?S.css(t,n,s):S.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=L,S.isFunction=b,S.isWindow=x,S.camelCase=Z,S.type=_,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var $t=i.jQuery,en=i.$;return S.noConflict=function(e){return i.$===S&&(i.$=en),e&&i.jQuery===S&&(i.jQuery=$t),S},o||(i.jQuery=i.$=S),S}))}).call(this,n(233)(e))},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0),o=i.Raycaster,a=i.Vector2,s=i.Vector3,l=n(54).PxPoiElement,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.dblClickBinder=this.onDoubleClick.bind(this),this.pointerDownBBoxBinder=this.onPointerDownBBox.bind(this),this.pointerMoveBBoxBinder=this.onPointerMoveBBox.bind(this),this.pointerUpBBoxBinder=this.onPointerUpBBox.bind(this),this.dblClickBBoxBinder=this.onDblclkBBox.bind(this),this.mousePos=new a,this.rayCast=new o,this.rayCast.params.Line.threshold=.01,this.callbacks={sbm:{pointerdown:[],pointermove:[],pointerup:[],dblclick:[]},poi:{pointerdown:[],pointermove:[],pointerup:[],dblclick:[],pointerdown_bbox:[],pointermove_bbox:[],pointerup_bbox:[],dblclick_bbox:[]}}}var t,n,i;return t=e,(n=[{key:"on",value:function(){this.core.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.pointerUpBinder,!1),this.core.dom.addEventListener("dblclick",this.dblClickBinder,!1),this.core.dom.addEventListener("pointerdown",this.pointerDownBBoxBinder,!1),this.core.dom.addEventListener("pointermove",this.pointerMoveBBoxBinder,!1),this.core.dom.addEventListener("pointerup",this.pointerUpBBoxBinder,!1),this.core.dom.addEventListener("dblclick",this.dblClickBBoxBinder,!1)}},{key:"off",value:function(){this.core.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.core.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.pointerUpBinder),this.core.dom.removeEventListener("dblclick",this.dblClickBinder),this.core.dom.removeEventListener("pointerdown",this.pointerDownBBoxBinder),this.core.dom.removeEventListener("pointermove",this.pointerMoveBBoxBinder),this.core.dom.removeEventListener("pointerup",this.pointerUpBBoxBinder),this.core.dom.removeEventListener("dblclick",this.dblClickBBoxBinder)}},{key:"onPointerDown",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());var t=this.rayCast.intersectObjects([this.core.workObjGroup,this.core.poiRootGroup],!0);if(t&&t.length>0){var n=this.checkIntersectObjectType(t[0].object);if(n)if("sbm"===n)for(var r={meshId:t[0].object.name,type:t[0].object.userData.type?t[0].object.userData.type:t[0].object.parent.userData.type,floorId:t[0].object.parent.name,displayName:t[0].object.parent.userData.DisplayName,baseFloor:t[0].object.parent.userData.BaseFloor,point:t[0].point.clone(),pointerIndex:e.button,property:t[0].object.userData.property},i=this.callbacks.sbm.pointerdown,o=0;o<i.length;o++)i[o](r);else if("poi"===n){var a=null;if(t[0].object.traverseAncestors((function(e){e instanceof l&&(a=e)})),a)for(var s={id:a.userData.id,group:a.userData.group,displayText:a.userData.displayText,iconUrl:a.userData.iconUrl,type:a.userData.type,url:a.userData.url,property:a.userData.property,pointerIndex:e.button,point:t[0].point.clone()},u=this.callbacks.poi.pointerdown,c=0;c<u.length;c++)u[c](s)}}}},{key:"onPointerMove",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());var t=this.rayCast.intersectObjects([this.core.poiRootGroup],!0);if(t&&t.length>0){var n=this.checkIntersectObjectType(t[0].object);if(n)if("sbm"===n)for(var r={meshId:t[0].object.name,type:t[0].object.userData.type?t[0].object.userData.type:t[0].object.parent.userData.type,floorId:t[0].object.parent.name,displayName:t[0].object.parent.userData.DisplayName,baseFloor:t[0].object.parent.userData.BaseFloor,point:t[0].point.clone(),pointerIndex:e.button,property:t[0].object.userData.property},i=this.callbacks.sbm.pointermove,o=0;o<i.length;o++)i[o](r);else if("poi"===n){var a=null;if(t[0].object.traverseAncestors((function(e){e instanceof l&&(a=e)})),a)for(var s={id:a.userData.id,group:a.userData.group,displayText:a.userData.displayText,iconUrl:a.userData.iconUrl,type:a.userData.type,url:a.userData.url,property:a.userData.property,pointerIndex:e.button,point:t[0].point.clone()},u=this.callbacks.poi.pointermove,c=0;c<u.length;c++)u[c](s)}}else for(var h=this.callbacks.poi.pointermove,f=0;f<h.length;f++)h[f](null)}},{key:"onPointerUp",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());var t=this.rayCast.intersectObjects([this.core.workObjGroup,this.core.poiRootGroup],!0);if(t&&t.length>0){var n=this.checkIntersectObjectType(t[0].object);if(n)if("sbm"===n)for(var r={meshId:t[0].object.name,type:t[0].object.userData.type?t[0].object.userData.type:t[0].object.parent.userData.type,floorId:t[0].object.parent.name,displayName:t[0].object.parent.userData.DisplayName,baseFloor:t[0].object.parent.userData.BaseFloor,point:t[0].point.clone(),pointerIndex:e.button,property:t[0].object.userData.property},i=this.callbacks.sbm.pointerup,o=0;o<i.length;o++)i[o](r);else if("poi"===n){var a=null;if(t[0].object.traverseAncestors((function(e){e instanceof l&&(a=e)})),a)for(var s={id:a.userData.id,group:a.userData.group,displayText:a.userData.displayText,iconUrl:a.userData.iconUrl,type:a.userData.type,url:a.userData.url,property:a.userData.property,pointerIndex:e.button,point:t[0].point.clone()},u=this.callbacks.poi.pointerup,c=0;c<u.length;c++)u[c](s)}}}},{key:"onDoubleClick",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());var t=this.rayCast.intersectObjects([this.core.workObjGroup,this.core.poiRootGroup],!0);if(t&&t.length>0){var n=this.checkIntersectObjectType(t[0].object);if(n)if("sbm"===n)for(var r={meshId:t[0].object.name,type:t[0].object.userData.type?t[0].object.userData.type:t[0].object.parent.userData.type,floorId:t[0].object.parent.name,displayName:t[0].object.parent.userData.DisplayName,baseFloor:t[0].object.parent.userData.BaseFloor,point:t[0].point.clone(),pointerIndex:e.button,property:t[0].object.userData.property},i=this.callbacks.sbm.dblclick,o=0;o<i.length;o++)i[o](r);else if("poi"===n){var a=null;if(t[0].object.traverseAncestors((function(e){e instanceof l&&(a=e)})),a)for(var s={id:a.userData.id,group:a.userData.group,displayText:a.userData.displayText,iconUrl:a.userData.iconUrl,type:a.userData.type,url:a.userData.url,property:a.userData.property,pointerIndex:e.button,point:t[0].point.clone()},u=this.callbacks.poi.dblclick,c=0;c<u.length;c++)u[c](s)}}}},{key:"addEventListener",value:function(e,t,n){this.callbacks.hasOwnProperty(t)&&this.callbacks[t].hasOwnProperty(e)&&-1===this.callbacks[t][e].indexOf(n)&&this.callbacks[t][e].push(n)}},{key:"removeEventListener",value:function(e,t,n){if(this.callbacks.hasOwnProperty(t)&&this.callbacks[t].hasOwnProperty(e)){var r=this.callbacks[t][e].indexOf(n);r>=0&&this.callbacks[t][e].splice(r,1)}}},{key:"checkIntersectObjectType",value:function(e){var t=null;return e.traverseAncestors((function(e){"#WorkingObjectGroup"===e.name?t="sbm":"#PoiRootGroup"===e.name&&(t="poi")})),t}},{key:"onPointerDownBBox",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());for(var t=[],n=this.core.poiMgr.getPickBoundingBoxes(),r=0;r<n.length;r++){var i=new s(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.rayCast.ray.intersectBox(n[r].box,i)&&t.push({targetObject:n[r].targetObject,distance:i.distanceTo(this.rayCast.ray.origin),point:i.clone()})}if(t.length>0){t.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0}));for(var o=t[0].targetObject,a={id:o.userData.id,group:o.userData.group,displayText:o.userData.displayText,iconUrl:o.userData.iconUrl,type:o.userData.type,url:o.userData.url,property:o.userData.property,pointerIndex:e.button,point:t[0].point.clone()},l=this.callbacks.poi.pointerdown_bbox,u=0;u<l.length;u++)l[u](a)}}},{key:"onPointerMoveBBox",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());for(var t=[],n=this.core.poiMgr.getPickBoundingBoxes(),r=0;r<n.length;r++){var i=new s(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.rayCast.ray.intersectBox(n[r].box,i)&&t.push({targetObject:n[r].targetObject,distance:i.distanceTo(this.rayCast.ray.origin),point:i.clone()})}if(t.length>0){t.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0}));for(var o=t[0].targetObject,a={id:o.userData.id,group:o.userData.group,displayText:o.userData.displayText,iconUrl:o.userData.iconUrl,type:o.userData.type,url:o.userData.url,property:o.userData.property,pointerIndex:e.button,point:t[0].point.clone()},l=this.callbacks.poi.pointermove_bbox,u=0;u<l.length;u++)l[u](a)}}},{key:"onPointerUpBBox",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());for(var t=[],n=this.core.poiMgr.getPickBoundingBoxes(),r=0;r<n.length;r++){var i=new s(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.rayCast.ray.intersectBox(n[r].box,i)&&t.push({targetObject:n[r].targetObject,distance:i.distanceTo(this.rayCast.ray.origin),point:i.clone()})}if(t.length>0){t.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0}));for(var o=t[0].targetObject,a={id:o.userData.id,group:o.userData.group,displayText:o.userData.displayText,iconUrl:o.userData.iconUrl,type:o.userData.type,url:o.userData.url,property:o.userData.property,pointerIndex:e.button,point:t[0].point.clone()},l=this.callbacks.poi.pointerup_bbox,u=0;u<l.length;u++)l[u](a)}}},{key:"onDblclkBBox",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.camera.getActiveCamera());for(var t=[],n=this.core.poiMgr.getPickBoundingBoxes(),r=0;r<n.length;r++){var i=new s(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.rayCast.ray.intersectBox(n[r].box,i)&&t.push({targetObject:n[r].targetObject,distance:i.distanceTo(this.rayCast.ray.origin),point:i.clone()})}if(t.length>0){t.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0}));for(var o=t[0].targetObject,a={id:o.userData.id,group:o.userData.group,displayText:o.userData.displayText,iconUrl:o.userData.iconUrl,type:o.userData.type,url:o.userData.url,property:o.userData.property,pointerIndex:e.button,point:t[0].point.clone()},l=this.callbacks.poi.dblclick_bbox,u=0;u<l.length;u++)l[u](a)}}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports={PxEvent:u}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0),o=i.Mesh,a=i.DoubleSide,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.savedMaterials=[]}var t,n,i;return t=e,(n=[{key:"set",value:function(e,t){this.restore();var n=this,r=this.core.workObjGroup.getObjectByName(e);r&&(this.core.workObjGroup.remove(r),r.traverse((function(e){if(e instanceof o)if(e.material instanceof Array){n.savedMaterials.push({object:e,originalMaterial:e.material.slice()});for(var r=0;r<e.material.length;r++)e.material[r]=e.material[r].clone(),e.material[r].transparent=!0,e.material[r].opacity=t,e.material[r].side=a,e.material[r].depthTest=!1,e.material[r].depthWrite=!1}else n.savedMaterials.push({object:e,originalMaterial:e.material}),e.material=e.material.clone(),e.material.transparent=!0,e.material.opacity=t,e.material.side=a,e.material.depthTest=!1,e.material.depthWrite=!1})),this.core.workObjGroup.add(r))}},{key:"setAll",value:function(e){this.restore();var t=this,n=this.core.workObjGroup;n&&(this.core.scene.remove(n),n.traverse((function(n){if(n instanceof o)if(n.material instanceof Array){t.savedMaterials.push({object:n,originalMaterial:n.material.slice()});for(var r=0;r<n.material.length;r++)n.material[r]=n.material[r].clone(),n.material[r].transparent=!0,n.material[r].opacity=e,n.material[r].side=a,n.material[r].depthTest=!1,n.material[r].depthWrite=!1}else t.savedMaterials.push({object:n,originalMaterial:n.material}),n.material=n.material.clone(),n.material.transparent=!0,n.material.opacity=e,n.material.side=a,n.material.depthTest=!1,n.material.depthWrite=!1})),this.core.scene.add(n))}},{key:"restore",value:function(){for(var e=0;e<this.savedMaterials.length;e++){var t=this.savedMaterials[e],n=t.object.parent;if(n.remove(t.object),t.object.material instanceof Array)for(var r=0;r<t.object.material.length;r++)t.object.material[r].dispose();else t.object.material.dispose();t.object.material=t.originalMaterial,n.add(t.object)}this.savedMaterials=[]}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports={PxTransparent:s}},function(e,t,n){"use strict";n.r(t),n.d(t,"PxModelExpander",(function(){return u}));var r=n(0),i=n(2),o=n(24),a=n(38),s=n(65);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.evacPathMgr=n,this.subwayMgr=r,this.isTweening=!1}var t,n,u;return t=e,(n=[{key:"getObjectByGroupId",value:function(e){for(var t=0;t<this.core.workObjGroup.children.length;t++){var n=this.core.workObjGroup.children[t];if(n.userData.groupId===e)return n}return null}},{key:"getObjectByFbxName",value:function(e){for(var t=0;t<this.core.modelVisibility.floorData.length;t++){var n=this.core.modelVisibility.floorData[t];if(n.name===e)return n}return null}},{key:"expandFbx",value:function(e){var t=this;e.interval=e.interval?e.interval:0,e.duration=e.duration?e.duration:0;var n=this.getObjectByFbxName(e.name);if(n&&!this.isTweening){for(var l=[],u=0;u<this.core.modelVisibility.floorData.length;u++){var c=this.core.modelVisibility.floorData[u],h=c.order-n.order,f=c.target.userData.SourceLocalPosition.y+h*e.interval;l.push({sortingorder:c.order,target:c.target,from:c.target.position.clone(),to:new r.Vector3(c.target.position.x,f,c.target.position.z)})}this.core.poiMgr.prepareModelExpand(),o.beforeModelExpandCollapse(),s.beforeExpand(),a.onBeforeModelMove(),this.tween&&this.tween.stop(),this.evacPathMgr.onModelAnimStart(),this.tween=new i.a.Tween({ratio:0}).to({ratio:1},e.duration).easing(i.a.Easing.Quartic.Out).onUpdate((function(e){t.isTweening=!0;for(var n=0;n<l.length;n++)l[n].target.position.copy((new r.Vector3).lerpVectors(l[n].from,l[n].to,e.ratio)),l[n].target.updateMatrix()})).onComplete((function(){t.isTweening=!1;for(var n=0;n<l.length;n++)l[n].target.position.copy(l[n].to),l[n].target.updateMatrix(),t.subwayMgr.updateOffsetHeightByFloor(l[n].target.name,l[n].to.y-l[n].from.y);t.core.poiMgr.afterModelExpand(),t.evacPathMgr.onModelAnimComplete(),t.core.getTopologyEditor().updateLink(),o.afterModelExpandCollapse(),s.afterExpand(),a.onAfterModelMove(),e.onComplete&&e.onComplete()})).start()}else console.warn(e.name,"has not found.")}},{key:"expand",value:function(e){var t=this;e.interval=e.interval?e.interval:0,e.duration=e.duration?e.duration:0;var n=this.getObjectByGroupId(e.groupId);if(n&&!this.isTweening){for(var s=parseInt(n.userData.groupId),l=[],u=0;u<this.core.workObjGroup.children.length;u++){var c=this.core.workObjGroup.children[u],h=parseInt(c.userData.groupId)-s,f=c.userData.SourcePosition.y+h*e.interval;l.push({target:c,from:c.position.clone(),to:new r.Vector3(c.position.x,f,c.position.z)})}this.core.poiMgr.prepareModelExpand(),o.beforeModelExpandCollapse(),a.onBeforeModelMove(),this.tween&&this.tween.stop(),this.evacPathMgr.onModelAnimStart(),this.tween=new i.a.Tween({ratio:0}).to({ratio:1},e.duration).easing(i.a.Easing.Quartic.Out).onUpdate((function(e){t.isTweening=!0;for(var n=0;n<l.length;n++)l[n].target.position.copy((new r.Vector3).lerpVectors(l[n].from,l[n].to,e.ratio)),l[n].target.updateMatrix()})).onComplete((function(){t.isTweening=!1;for(var n=0;n<l.length;n++)l[n].target.position.copy(l[n].to),l[n].target.updateMatrix(),t.subwayMgr.updateOffsetHeightByFloor(l[n].target.name,l[n].to.y-l[n].from.y);t.core.poiMgr.afterModelExpand(),t.evacPathMgr.onModelAnimComplete(),t.core.getTopologyEditor().updateLink(),o.afterModelExpandCollapse(),a.onAfterModelMove(),e.onComplete&&e.onComplete()})).start()}else this.isTweening||console.warn(e.groupId,"has not found.")}},{key:"collapseFbx",value:function(e){var t=this;if(!this.isTweening){e.duration=e.duration?e.duration:0;for(var n=[],l=0;l<this.core.modelVisibility.floorData.length;l++){var u=this.core.modelVisibility.floorData[l];n.push({sortingorder:u.order,target:u.target,from:u.target.position.clone(),to:u.target.userData.SourceLocalPosition.clone()})}this.core.poiMgr.prepareModelExpand(),o.beforeModelExpandCollapse(),s.beforeExpand(),a.onBeforeModelMove(),this.tween&&this.tween.stop(),this.evacPathMgr.onModelAnimStart(),this.tween=new i.a.Tween({ratio:0}).to({ratio:1},e.duration).easing(i.a.Easing.Quartic.Out).onUpdate((function(e){t.isTweening=!0;for(var i=0;i<n.length;i++)n[i].target.position.copy((new r.Vector3).lerpVectors(n[i].from,n[i].to,e.ratio)),n[i].target.updateMatrix()})).onComplete((function(){t.isTweening=!1;for(var r=0;r<n.length;r++)n[r].target.position.copy(n[r].to),n[r].target.updateMatrix(),t.subwayMgr.updateOffsetHeightByFloor(n[r].target.name,n[r].to.y-n[r].from.y);t.core.poiMgr.afterModelExpand(),t.evacPathMgr.onModelAnimComplete(),t.core.getTopologyEditor().updateLink(),o.afterModelExpandCollapse(),s.afterExpand(),a.onAfterModelMove(),e.onComplete&&e.onComplete()})).start()}}},{key:"collapse",value:function(e){var t=this;if(!this.isTweening){e.duration=e.duration?e.duration:0;for(var n=[],s=0;s<this.core.workObjGroup.children.length;s++){var l=this.core.workObjGroup.children[s];n.push({target:l,from:l.position.clone(),to:l.userData.SourcePosition.clone()})}this.core.poiMgr.prepareModelExpand(),o.beforeModelExpandCollapse(),a.onBeforeModelMove(),this.tween&&this.tween.stop(),this.evacPathMgr.onModelAnimStart(),this.tween=new i.a.Tween({ratio:0}).to({ratio:1},e.duration).easing(i.a.Easing.Quartic.Out).onUpdate((function(e){t.isTweening=!0;for(var i=0;i<n.length;i++)n[i].target.position.copy((new r.Vector3).lerpVectors(n[i].from,n[i].to,e.ratio)),n[i].target.updateMatrix()})).onComplete((function(){t.isTweening=!1;for(var r=0;r<n.length;r++)n[r].target.position.copy(n[r].to),n[r].target.updateMatrix(),t.subwayMgr.updateOffsetHeightByFloor(n[r].target.name,n[r].to.y-n[r].from.y);t.core.poiMgr.afterModelExpand(),t.evacPathMgr.onModelAnimComplete(),t.core.getTopologyEditor().updateLink(),o.afterModelExpandCollapse(),a.onAfterModelMove(),e.onComplete&&e.onComplete()})).start()}}}])&&l(t.prototype,n),u&&l(t,u),e}()},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0),o=i.ArrowHelper,a=i.Vector2,s=i.Vector3,l=i.Raycaster,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.arrow=null,this.callback=null,this.mouseDownPos=new a,this.mousePos=new a,this.rayCast=new l,this.pickPoint=new s,this.onPointerDownBinder=this.onPointerDown.bind(this),this.onPointerMoveBinder=this.onPointerMove.bind(this),this.onPointerUpBinder=this.onPointerUp.bind(this)}var t,n,i;return t=e,(n=[{key:"on",value:function(e){this.callback=e,this.core.dom.addEventListener("pointerdown",this.onPointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.onPointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.onPointerUpBinder,!1)}},{key:"off",value:function(){this.callback=null,this.arrow&&(this.core.sysObjGroup.remove(this.arrow),this.arrow=null),this.core.dom.removeEventListener("pointerdown",this.onPointerDownBinder),this.core.dom.removeEventListener("pointermove",this.onPointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.onPointerUpBinder)}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.getCamera());var t=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(t&&t.length>0){var n=t[0].point,r=n.clone(),i=t[0].face.normal.clone();this.pickPoint.copy(n),r.addScaledVector(t[0].face.normal,10),i.negate(),this.arrow&&(this.core.sysObjGroup.remove(this.arrow),this.arrow=null),this.arrow=new o(i,r,10,16711680),this.core.sysObjGroup.add(this.arrow)}}},{key:"onPointerUp",value:function(e){0===e.button&&new a(e.screenX,e.screenY).distanceTo(this.mouseDownPos)<3&&(this.callback&&this.callback(this.pickPoint.x,this.pickPoint.y,this.pickPoint.z),this.off())}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports={PxPositionPicker:u}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"loadSbmXml",(function(){return a}));var r=n(481).parseString,i=n(536),o=n(127);function a(t){return new e((function(n,a){var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="text",s.onreadystatechange=function(){if(s.readyState===s.DONE&&200===s.status){var a=[],l=[];r(s.responseText,(function(r,s){for(var u=s.Project.Building[0].Floors[0].Floor,c=function(e){var n=parseInt(u[e].$.baseFloor),r=u[e].$.groupID,s=u[e].$.id,c=u[e].$.name,h=i.basename(u[e].FileSource[0].$.name),f=i.join(i.dirname(t),h);l.push(o.loadSingleSbm(f,s,c,n).then((function(e){e.groupId=r,a.push(e)})))},h=0;h<u.length;h++)c(h);e.all(l).then((function(){a.sort((function(e,t){return e.baseFloor>t.baseFloor?1:e.baseFloor<t.baseFloor?-1:0})),n(a)}))}))}},s.onabort=function(){a(t+", aborted.")},s.onerror=function(){a(t+", error.")},s.send(null)}))}}.call(this,n(11))},function(e,t,n){(function(){"use strict";var e,r,i,o,a={}.hasOwnProperty;r=n(165),e=n(482),i=n(491),o=n(164),t.defaults=r.defaults,t.processors=o,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=i.Parser,t.parseString=i.parseString,t.parseStringPromise=i.parseStringPromise}).call(this)},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){"use strict";var e,i,o,a,s,l={}.hasOwnProperty;e=n(483),i=n(165).defaults,a=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},s=function(e){return"<![CDATA["+o(e)+"]]>"},o=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,n,r;for(t in this.options={},n=i[.2])l.call(n,t)&&(r=n[t],this.options[t]=r);for(t in e)l.call(e,t)&&(r=e[t],this.options[t]=r)}return t.prototype.buildObject=function(t){var n,o,u,c,h,f;return n=this.options.attrkey,o=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===i[.2].rootName?t=t[h=Object.keys(t)[0]]:h=this.options.rootName,f=this,u=function(e,t){var i,c,h,p,d,m;if("object"!==r(t))f.options.cdata&&a(t)?e.raw(s(t)):e.txt(t);else if(Array.isArray(t)){for(p in t)if(l.call(t,p))for(d in c=t[p])h=c[d],e=u(e.ele(d),h).up()}else for(d in t)if(l.call(t,d))if(c=t[d],d===n){if("object"===r(c))for(i in c)m=c[i],e=e.att(i,m)}else if(d===o)e=f.options.cdata&&a(c)?e.raw(s(c)):e.txt(c);else if(Array.isArray(c))for(p in c)l.call(c,p)&&(e="string"==typeof(h=c[p])?f.options.cdata&&a(h)?e.ele(d).raw(s(h)).up():e.ele(d,h).up():u(e.ele(d),h).up());else"object"===r(c)?e=u(e.ele(d),c).up():"string"==typeof c&&f.options.cdata&&a(c)?e=e.ele(d).raw(s(c)).up():(null==c&&(c=""),e=e.ele(d,c.toString()).up());return e},c=e.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),u(c,t).end(this.options.renderOpts)},t}()}).call(this)},function(e,t,n){(function(){var t,r,i,o,a,s,l,u,c,h;h=n(53),u=h.assign,c=h.isFunction,i=n(234),o=n(235),a=n(489),l=n(179),s=n(490),t=n(15),r=n(119),e.exports.create=function(e,t,n,r){var i,a;if(null==e)throw new Error("Root element needs a name.");return r=u({},t,n,r),a=(i=new o(r)).element(e),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.dtd(r)),a},e.exports.begin=function(e,t,n){var r;return c(e)&&(t=(r=[e,t])[0],n=r[1],e={}),t?new a(e,t,n):new o(e)},e.exports.stringWriter=function(e){return new l(e)},e.exports.streamWriter=function(e,t){return new s(e,t)},e.exports.implementation=new i,e.exports.nodeType=t,e.exports.writerState=r}).call(this)},function(e,t,n){(function(){var t,r;t=n(485),r=n(486),e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},function(e,t){(function(){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},function(e,t){(function(){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},function(e,t){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},function(e,t){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(e,t,n){(function(){var t,r,i,o,a,s,l,u,c,h,f,p,d,m,v,g,y,b,x,w,q,_,S,M={}.hasOwnProperty;S=n(53),q=S.isObject,w=S.isFunction,_=S.isPlainObject,x=S.getValue,t=n(15),p=n(235),d=n(166),o=n(168),a=n(169),v=n(176),b=n(177),m=n(178),h=n(170),f=n(171),s=n(172),u=n(173),l=n(174),c=n(175),i=n(236),y=n(238),g=n(179),r=n(119),e.exports=function(){function e(e,n,r){var i;this.name="?xml",this.type=t.Document,e||(e={}),i={},e.writer?_(e.writer)&&(i=e.writer,e.writer=new g):e.writer=new g,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new y(e),this.onDataCallback=n||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var n,r,i,o,a,s,l,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(r in i={},l=e.attribs)M.call(l,r)&&(n=l[r],i[r]=n.value);this.node(e.name,i);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(a=0,s=(u=e.children).length;a<s;a++)o=u[a],this.createChildNode(o),o.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,n){var r;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=x(e),null==t&&(t={}),t=x(t),q(t)||(n=(r=[t,n])[0],t=r[1]),this.currentNode=new d(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},e.prototype.element=function(e,n,r){var i,o,a,s,l,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||q(e)||w(e))for(s=this.options.noValidation,this.options.noValidation=!0,(u=new p(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=s,o=0,a=(l=u.children).length;o<a;o++)i=l[o],this.createChildNode(i),i.type===t.Element&&this.up();else this.node(e,n,r);return this},e.prototype.attribute=function(e,t){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=x(e)),q(e))for(n in e)M.call(e,n)&&(r=e[n],this.attribute(n,r));else w(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new i(this,e,""):null!=t&&(this.currentNode.attribs[e]=new i(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new b(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new a(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var n,r,i,o,a;if(this.openCurrent(),null!=e&&(e=x(e)),null!=t&&(t=x(t)),Array.isArray(e))for(n=0,o=e.length;n<o;n++)r=e[n],this.instruction(r);else if(q(e))for(r in e)M.call(e,r)&&(i=e[r],this.instruction(r,i));else w(t)&&(t=t.apply()),a=new m(this,e,t),this.onData(this.writer.processingInstruction(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new h(this,e,t,n),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new f(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new l(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,n,r,i){var o;return this.openCurrent(),o=new s(this,e,t,n,r,i),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new c(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var n,i,o,a;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),i="",e.type===t.Element){for(o in this.writerOptions.state=r.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,a=e.attribs)M.call(a,o)&&(n=a[o],i+=this.writer.attribute(n,this.writerOptions,this.currentLevel));i+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.children?(i+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,i+=">"),i+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var n;if(!e.isClosed)return n="",this.writerOptions.state=r.CloseTag,n=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(n,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},function(e,t,n){(function(){var t,r,i,o={}.hasOwnProperty;t=n(15),i=n(239),r=n(119),e.exports=function(e){function n(e,t){this.stream=e,n.__super__.constructor.call(this,t)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.endline=function(e,t,i){return e.isLastRootNode&&t.state===r.CloseTag?"":n.__super__.endline.call(this,e,t,i)},n.prototype.document=function(e,t){var n,r,i,o,a,s,l,u,c;for(r=i=0,a=(l=e.children).length;i<a;r=++i)(n=l[r]).isLastRootNode=r===e.children.length-1;for(t=this.filterOptions(t),c=[],o=0,s=(u=e.children).length;o<s;o++)n=u[o],c.push(this.writeChildNode(n,t,0));return c},n.prototype.attribute=function(e,t,r){return this.stream.write(n.__super__.attribute.call(this,e,t,r))},n.prototype.cdata=function(e,t,r){return this.stream.write(n.__super__.cdata.call(this,e,t,r))},n.prototype.comment=function(e,t,r){return this.stream.write(n.__super__.comment.call(this,e,t,r))},n.prototype.declaration=function(e,t,r){return this.stream.write(n.__super__.declaration.call(this,e,t,r))},n.prototype.docType=function(e,t,n){var i,o,a,s;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,this.stream.write(this.indent(e,t,n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,n)),t.state=r.InsideTag,o=0,a=(s=e.children).length;o<a;o++)i=s[o],this.writeChildNode(i,t,n+1);t.state=r.CloseTag,this.stream.write("]")}return t.state=r.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,n)),t.state=r.None,this.closeNode(e,t,n)},n.prototype.element=function(e,n,i){var a,s,l,u,c,h,f,p,d;for(f in i||(i=0),this.openNode(e,n,i),n.state=r.OpenTag,this.stream.write(this.indent(e,n,i)+"<"+e.name),p=e.attribs)o.call(p,f)&&(a=p[f],this.attribute(a,n,i));if(u=0===(l=e.children.length)?null:e.children[0],0===l||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(this.stream.write(">"),n.state=r.CloseTag,this.stream.write("</"+e.name+">")):(n.state=r.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==l||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,n,i)),n.state=r.InsideTag,c=0,h=(d=e.children).length;c<h;c++)s=d[c],this.writeChildNode(s,n,i+1);n.state=r.CloseTag,this.stream.write(this.indent(e,n,i)+"</"+e.name+">")}else this.stream.write(">"),n.state=r.InsideTag,n.suppressPrettyCount++,!0,this.writeChildNode(u,n,i+1),n.suppressPrettyCount--,!1,n.state=r.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,n,i)),n.state=r.None,this.closeNode(e,n,i)},n.prototype.processingInstruction=function(e,t,r){return this.stream.write(n.__super__.processingInstruction.call(this,e,t,r))},n.prototype.raw=function(e,t,r){return this.stream.write(n.__super__.raw.call(this,e,t,r))},n.prototype.text=function(e,t,r){return this.stream.write(n.__super__.text.call(this,e,t,r))},n.prototype.dtdAttList=function(e,t,r){return this.stream.write(n.__super__.dtdAttList.call(this,e,t,r))},n.prototype.dtdElement=function(e,t,r){return this.stream.write(n.__super__.dtdElement.call(this,e,t,r))},n.prototype.dtdEntity=function(e,t,r){return this.stream.write(n.__super__.dtdEntity.call(this,e,t,r))},n.prototype.dtdNotation=function(e,t,r){return this.stream.write(n.__super__.dtdNotation.call(this,e,t,r))},n}(i)}).call(this)},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){"use strict";var e,i,o,a,s,l,u,c,h,f=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;c=n(492),o=n(121),e=n(506),l=n(164),h=n(182).setImmediate,i=n(165).defaults,u=n(507),a=function(e){return"object"===r(e)&&null!=e&&0===Object.keys(e).length},s=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t=(0,e[r])(t,n);return t},t.Parser=function(n){function o(e){var n,r,o;if(this.parseStringPromise=f(this.parseStringPromise,this),this.parseString=f(this.parseString,this),this.reset=f(this.reset,this),this.assignOrPush=f(this.assignOrPush,this),this.processAsync=f(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(n in this.options={},r=i[.2])p.call(r,n)&&(o=r[n],this.options[n]=o);for(n in e)p.call(e,n)&&(o=e[n],this.options[n]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(l.normalize)),this.reset()}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(o,n),o.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),h(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},o.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):this.options.explicitArray?e[t]=[n]:e[t]=n},o.prototype.reset=function(){var e,t,n,i,o;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(o=this,function(e){if(o.saxParser.resume(),!o.saxParser.errThrown)return o.saxParser.errThrown=!0,o.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,i=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(r){var o,a,l,u,c;if((l={})[t]="",!n.options.ignoreAttrs)for(o in c=r.attributes)p.call(c,o)&&(e in l||n.options.mergeAttrs||(l[e]={}),a=n.options.attrValueProcessors?s(n.options.attrValueProcessors,r.attributes[o],o):r.attributes[o],u=n.options.attrNameProcessors?s(n.options.attrNameProcessors,o):o,n.options.mergeAttrs?n.assignOrPush(l,u,a):l[e][u]=a);return l["#name"]=n.options.tagNameProcessors?s(n.options.tagNameProcessors,r.name):r.name,n.options.xmlns&&(l[n.options.xmlnskey]={uri:r.uri,local:r.local}),i.push(l)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,o,l,u,c,h,f,d,m,v;if(h=i.pop(),c=h["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete h["#name"],!0===h.cdata&&(n=h.cdata,delete h.cdata),m=i[i.length-1],h[t].match(/^\s*$/)&&!n?(o=h[t],delete h[t]):(e.options.trim&&(h[t]=h[t].trim()),e.options.normalize&&(h[t]=h[t].replace(/\s{2,}/g," ").trim()),h[t]=e.options.valueProcessors?s(e.options.valueProcessors,h[t],c):h[t],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])),a(h)&&(h=""!==e.options.emptyTag?e.options.emptyTag:o),null!=e.options.validator&&(v="/"+function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)u=i[e],n.push(u["#name"]);return n}().concat(c).join("/"),function(){var t;try{h=e.options.validator(v,m&&m[c],h)}catch(n){return t=n,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"===r(h))if(e.options.preserveChildrenOrder){if(m){for(l in m[e.options.childkey]=m[e.options.childkey]||[],f={},h)p.call(h,l)&&(f[l]=h[l]);m[e.options.childkey].push(f),delete h["#name"],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])}}else u={},e.options.attrkey in h&&(u[e.options.attrkey]=h[e.options.attrkey],delete h[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in h&&(u[e.options.charkey]=h[e.options.charkey],delete h[e.options.charkey]),Object.getOwnPropertyNames(h).length>0&&(u[e.options.childkey]=h),h=u;return i.length>0?e.assignOrPush(m,c,h):(e.options.explicitRoot&&(d=h,(h={})[c]=d),e.resultObject=h,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var r,o;if(o=i[i.length-1])return o[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(o[e.options.childkey]=o[e.options.childkey]||[],(r={"#name":"__text__"})[t]=n,e.options.normalize&&(r[t]=r[t].replace(/\s{2,}/g," ").trim()),o[e.options.childkey].push(r)),o}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(e){var t;if(t=n(e))return t.cdata=!0}},o.prototype.parseString=function(t,n){var r;null!=n&&"function"==typeof n&&(this.on("end",(function(e){return this.reset(),n(null,e)})),this.on("error",(function(e){return this.reset(),n(e)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,h(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(r=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",r),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw r}},o.prototype.parseStringPromise=function(e){return u(this.parseString)(e)},o}(o),t.parseString=function(e,n,i){var o,a;return null!=i?("function"==typeof i&&(o=i),"object"===r(n)&&(a=n)):("function"==typeof n&&(o=n),a={}),new t.Parser(a).parseString(e,o)},t.parseStringPromise=function(e,n){var i;return"object"===r(n)&&(i=n),new t.Parser(i).parseStringPromise(e)}}).call(this)},function(e,t,n){(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(t){t.parser=function(e,t){return new a(e,t)},t.SAXParser=a,t.SAXStream=l,t.createStream=function(e,t){return new l(e,t)},t.MAX_BUFFER_LENGTH=65536;var i,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,n){if(!(this instanceof a))return new a(e,n);!function(e){for(var t=0,n=o.length;t<n;t++)e[o[t]]=""}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=_.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(c)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),M(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),a.prototype={end:function(){O(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return A(this,"Cannot write after close. Assign an onready handler.");if(null===e)return O(this);"object"===r(e)&&(e=e.toString());var n=0,i="";for(;i=j(e,n++),this.c=i,i;)switch(this.trackPosition&&(this.position++,"\n"===i?(this.line++,this.column=0):this.column++),this.state){case _.BEGIN:if(this.state=_.BEGIN_WHITESPACE,"\ufeff"===i)continue;N(this,i);continue;case _.BEGIN_WHITESPACE:N(this,i);continue;case _.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=n-1;i&&"<"!==i&&"&"!==i;)(i=j(e,n++))&&this.trackPosition&&(this.position++,"\n"===i?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(a,n-1)}"<"!==i||this.sawRoot&&this.closedRoot&&!this.strict?(m(i)||this.sawRoot&&!this.closedRoot||L(this,"Text data outside of root node."),"&"===i?this.state=_.TEXT_ENTITY:this.textNode+=i):(this.state=_.OPEN_WAKA,this.startTagPosition=this.position);continue;case _.SCRIPT:"<"===i?this.state=_.SCRIPT_ENDING:this.script+=i;continue;case _.SCRIPT_ENDING:"/"===i?this.state=_.CLOSE_TAG:(this.script+="<"+i,this.state=_.SCRIPT);continue;case _.OPEN_WAKA:if("!"===i)this.state=_.SGML_DECL,this.sgmlDecl="";else if(m(i));else if(y(h,i))this.state=_.OPEN_TAG,this.tagName=i;else if("/"===i)this.state=_.CLOSE_TAG,this.tagName="";else if("?"===i)this.state=_.PROC_INST,this.procInstName=this.procInstBody="";else{if(L(this,"Unencoded <"),this.startTagPosition+1<this.position){var s=this.position-this.startTagPosition;i=new Array(s).join(" ")+i}this.textNode+="<"+i,this.state=_.TEXT}continue;case _.SGML_DECL:"[CDATA["===(this.sgmlDecl+i).toUpperCase()?(E(this,"onopencdata"),this.state=_.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+i==="--"?(this.state=_.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+i).toUpperCase()?(this.state=_.DOCTYPE,(this.doctype||this.sawRoot)&&L(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===i?(E(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=_.TEXT):v(i)?(this.state=_.SGML_DECL_QUOTED,this.sgmlDecl+=i):this.sgmlDecl+=i;continue;case _.SGML_DECL_QUOTED:i===this.q&&(this.state=_.SGML_DECL,this.q=""),this.sgmlDecl+=i;continue;case _.DOCTYPE:">"===i?(this.state=_.TEXT,E(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=i,"["===i?this.state=_.DOCTYPE_DTD:v(i)&&(this.state=_.DOCTYPE_QUOTED,this.q=i));continue;case _.DOCTYPE_QUOTED:this.doctype+=i,i===this.q&&(this.q="",this.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:this.doctype+=i,"]"===i?this.state=_.DOCTYPE:v(i)&&(this.state=_.DOCTYPE_DTD_QUOTED,this.q=i);continue;case _.DOCTYPE_DTD_QUOTED:this.doctype+=i,i===this.q&&(this.state=_.DOCTYPE_DTD,this.q="");continue;case _.COMMENT:"-"===i?this.state=_.COMMENT_ENDING:this.comment+=i;continue;case _.COMMENT_ENDING:"-"===i?(this.state=_.COMMENT_ENDED,this.comment=P(this.opt,this.comment),this.comment&&E(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+i,this.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==i?(L(this,"Malformed comment"),this.comment+="--"+i,this.state=_.COMMENT):this.state=_.TEXT;continue;case _.CDATA:"]"===i?this.state=_.CDATA_ENDING:this.cdata+=i;continue;case _.CDATA_ENDING:"]"===i?this.state=_.CDATA_ENDING_2:(this.cdata+="]"+i,this.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===i?(this.cdata&&E(this,"oncdata",this.cdata),E(this,"onclosecdata"),this.cdata="",this.state=_.TEXT):"]"===i?this.cdata+="]":(this.cdata+="]]"+i,this.state=_.CDATA);continue;case _.PROC_INST:"?"===i?this.state=_.PROC_INST_ENDING:m(i)?this.state=_.PROC_INST_BODY:this.procInstName+=i;continue;case _.PROC_INST_BODY:if(!this.procInstBody&&m(i))continue;"?"===i?this.state=_.PROC_INST_ENDING:this.procInstBody+=i;continue;case _.PROC_INST_ENDING:">"===i?(E(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=_.TEXT):(this.procInstBody+="?"+i,this.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:y(f,i)?this.tagName+=i:(C(this),">"===i?I(this):"/"===i?this.state=_.OPEN_TAG_SLASH:(m(i)||L(this,"Invalid character in tag name"),this.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===i?(I(this,!0),R(this)):(L(this,"Forward-slash in opening tag not followed by >"),this.state=_.ATTRIB);continue;case _.ATTRIB:if(m(i))continue;">"===i?I(this):"/"===i?this.state=_.OPEN_TAG_SLASH:y(h,i)?(this.attribName=i,this.attribValue="",this.state=_.ATTRIB_NAME):L(this,"Invalid attribute name");continue;case _.ATTRIB_NAME:"="===i?this.state=_.ATTRIB_VALUE:">"===i?(L(this,"Attribute without value"),this.attribValue=this.attribName,k(this),I(this)):m(i)?this.state=_.ATTRIB_NAME_SAW_WHITE:y(f,i)?this.attribName+=i:L(this,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===i)this.state=_.ATTRIB_VALUE;else{if(m(i))continue;L(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",E(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===i?I(this):y(h,i)?(this.attribName=i,this.state=_.ATTRIB_NAME):(L(this,"Invalid attribute name"),this.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(m(i))continue;v(i)?(this.q=i,this.state=_.ATTRIB_VALUE_QUOTED):(L(this,"Unquoted attribute value"),this.state=_.ATTRIB_VALUE_UNQUOTED,this.attribValue=i);continue;case _.ATTRIB_VALUE_QUOTED:if(i!==this.q){"&"===i?this.state=_.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=i;continue}k(this),this.q="",this.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:m(i)?this.state=_.ATTRIB:">"===i?I(this):"/"===i?this.state=_.OPEN_TAG_SLASH:y(h,i)?(L(this,"No whitespace between attributes"),this.attribName=i,this.attribValue="",this.state=_.ATTRIB_NAME):L(this,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!g(i)){"&"===i?this.state=_.ATTRIB_VALUE_ENTITY_U:this.attribValue+=i;continue}k(this),">"===i?I(this):this.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(this.tagName)">"===i?R(this):y(f,i)?this.tagName+=i:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=_.SCRIPT):(m(i)||L(this,"Invalid tagname in closing tag"),this.state=_.CLOSE_TAG_SAW_WHITE);else{if(m(i))continue;b(h,i)?this.script?(this.script+="</"+i,this.state=_.SCRIPT):L(this,"Invalid tagname in closing tag."):this.tagName=i}continue;case _.CLOSE_TAG_SAW_WHITE:if(m(i))continue;">"===i?R(this):L(this,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var l,u;switch(this.state){case _.TEXT_ENTITY:l=_.TEXT,u="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:l=_.ATTRIB_VALUE_QUOTED,u="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:l=_.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===i?(this[u]+=F(this),this.entity="",this.state=l):y(this.entity.length?d:p,i)?this.entity+=i:(L(this,"Invalid character in entity name"),this[u]+="&"+this.entity+i,this.entity="",this.state=l);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,i=0,a=o.length;i<a;i++){var s=e[o[i]].length;if(s>n)switch(o[i]){case"textNode":T(e);break;case"cdata":E(e,"oncdata",e.cdata),e.cdata="";break;case"script":E(e,"onscript",e.script),e.script="";break;default:A(e,"Max buffer length exceeded: "+o[i])}r=Math.max(r,s)}var l=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=l+e.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;T(e=this),""!==e.cdata&&(E(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(E(e,"onscript",e.script),e.script="")}};try{i=n(495).Stream}catch(e){i=function(){}}var s=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function l(e,t){if(!(this instanceof l))return new l(e,t);i.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,s.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}l.prototype=Object.create(i.prototype,{constructor:{value:l}}),l.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n(183).StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},l.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},l.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===s.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),i.prototype.on.call(n,e,t)};var u="http://www.w3.org/XML/1998/namespace",c={xml:u,xmlns:"http://www.w3.org/2000/xmlns/"},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function v(e){return'"'===e||"'"===e}function g(e){return">"===e||m(e)}function y(e,t){return e.test(t)}function b(e,t){return!y(e,t)}var x,w,q,_=0;for(var S in t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[S]]=S;function M(e,t,n){e[t]&&e[t](n)}function E(e,t,n){e.textNode&&T(e),M(e,t,n)}function T(e){e.textNode=P(e.opt,e.textNode),e.textNode&&M(e,"ontext",e.textNode),e.textNode=""}function P(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function A(e,t){return T(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,M(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&L(e,"Unclosed root tag"),e.state!==_.BEGIN&&e.state!==_.BEGIN_WHITESPACE&&e.state!==_.TEXT&&A(e,"Unexpected end"),T(e),e.c="",e.closed=!0,M(e,"onend"),a.call(e,e.strict,e.opt),e}function L(e,t){if("object"!==r(e)||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&A(e,t)}function C(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,E(e,"onopentagstart",n)}function D(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function k(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=D(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==u)L(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===r&&"http://www.w3.org/2000/xmlns/"!==e.attribValue)L(e,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,E(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function I(e,t){if(e.opt.xmlns){var n=e.tag,r=D(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(L(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){E(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],l=s[0],u=s[1],c=D(l,!0),h=c.prefix,f=c.local,p=""===h?"":n.ns[h]||"",d={name:l,value:u,prefix:h,local:f,uri:p};h&&"xmlns"!==h&&!p&&(L(e,"Unbound namespace prefix: "+JSON.stringify(h)),d.uri=h),e.tag.attributes[l]=d,E(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),E(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=_.TEXT:e.state=_.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function R(e){if(!e.tagName)return L(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=_.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=_.SCRIPT);E(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;L(e,"Unexpected close tag")}if(t<0)return L(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=_.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,E(e,"onclosetag",e.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach((function(t){var n=o.ns[t];E(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=_.TEXT}function F(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(L(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function N(e,t){"<"===t?(e.state=_.OPEN_WAKA,e.startTagPosition=e.position):m(t)||(L(e,"Non-whitespace before first tag."),e.textNode=t,e.state=_.TEXT)}function j(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}_=t.STATE,String.fromCodePoint||(x=String.fromCharCode,w=Math.floor,q=function(){var e,t,n=16384,r=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||w(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===o||r.length>n)&&(a+=x.apply(null,r),r.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:q,configurable:!0,writable:!0}):String.fromCodePoint=q)}(t)}).call(this,n(120).Buffer)},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=d,a/=256,u-=8);e[n+p-d]|=128*m}},function(e,t,n){e.exports=i;var r=n(121).EventEmitter;function i(){r.call(this)}n(78)(i,r),i.Readable=n(180),i.Writable=n(502),i.Duplex=n(503),i.Transform=n(504),i.PassThrough=n(505),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},function(e,t){},function(e,t,n){"use strict";var r=n(123).Buffer,i=n(498);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);for(var t,n,i,o=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,i=s,t.copy(n,i),s+=a.data.length,a=a.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,l=1,u={},c=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){d(e.data)},r=function(e){o.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(d,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&d(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,r(l),l++},f.clearImmediate=p}function p(e){delete u[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(39),n(52))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(39))},function(e,t,n){"use strict";e.exports=o;var r=n(244),i=Object.create(n(97));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n(78),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(181)},function(e,t,n){e.exports=n(79)},function(e,t,n){e.exports=n(180).Transform},function(e,t,n){e.exports=n(180).PassThrough},function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},function(e,t,n){"use strict";var r=n(184),i=n(185),o=n(247),a=n(262),s=a(),l=n(535),u=function(e){return s.apply(i,arguments)};r(u,{custom:s.custom,customPromisifyArgs:s.customPromisifyArgs,getPolyfill:a,implementation:o,shim:l}),e.exports=u},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;if(!Object.keys){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=n(246),l=Object.prototype.propertyIsEnumerable,u=!l.call({toString:null},"toString"),c=l.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"===r(window[e]))try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(e){var t=null!==e&&"object"===r(e),n="[object Function]"===a.call(e),i=s(e),l=t&&"[object String]"===a.call(e),p=[];if(!t&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var m=c&&n;if(l&&e.length>0&&!o.call(e,0))for(var v=0;v<e.length;++v)p.push(String(v));if(i&&e.length>0)for(var g=0;g<e.length;++g)p.push(String(g));else for(var y in e)m&&"prototype"===y||!o.call(e,y)||p.push(String(y));if(u)for(var b=function(e){if("undefined"==typeof window||!d)return f(e);try{return f(e)}catch(e){return!1}}(e),x=0;x<h.length;++x)b&&"constructor"===h[x]||!o.call(e,h[x])||p.push(h[x]);return p}}e.exports=i},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return e&&"object"===n(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){"use strict";var r=n(184),i=n(248);r(i,{getPolyfill:n(261),implementation:i,shim:n(534)}),e.exports=i},function(e,t,n){"use strict";e.exports=n(512)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(513),o=n(23),a=n(253),s=n(260),l=n(88),u=n(259),c=o("%TypeError%"),h=l("Array.prototype.push"),f=n(533),p=a(a({},i),{SameValueNonNumber:function(e,t){if("number"==typeof e||r(e)!==r(t))throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(e,t)},IterableToArrayLike:function(e){var t=u(this,e);if(void 0!==t){for(var n=this.GetIterator(e,t),r=[],i=!0;i;)if(i=this.IteratorStep(n)){var o=this.IteratorValue(i);h(r,o)}return r}return this.ToObject(e)},OrdinaryGetPrototypeOf:function(e){if("Object"!==this.Type(e))throw new c("Assertion failed: O must be an Object");if(!f)throw new c("This environment does not support fetching prototypes.");return f(e)},OrdinarySetPrototypeOf:function(e,t){if("Object"!==this.Type(t)&&"Null"!==this.Type(t))throw new c("Assertion failed: V must be Object or Null");try{s(e,t)}catch(e){return!1}return this.OrdinaryGetPrototypeOf(e)===t}});e.exports=p},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(87),o=n(515),a=n(245),s=n(520),l=n(23),u=l("%TypeError%"),c=l("%RangeError%"),h=l("%SyntaxError%"),f=l("%Array%"),p=f.prototype,d=l("%String%"),m=l("%Object%"),v=l("%Number%"),g=l("%Symbol%",!0),y=l("%RegExp%"),b=l("%Date%"),x=l("%Function%"),w=m.preventExtensions,q=n(124)(),_=n(250),S=n(251),M=n(252),E=Math.pow(2,32)-1,T=n(522),P=n(253),A=n(254),O=n(255),L=n(523),C=n(524),D=n(256),k=n(525),I=n(257),R=parseInt,F=n(88),N=n(526),j=n(259),z=n(527),B=F("Promise.prototype.then",!0),U=F("Array.prototype.slice"),V=F("String.prototype.slice"),G=F("Array.prototype.indexOf"),H=F("Array.prototype.push"),W=N(/^0b[01]+$/i),X=N(/^0o[0-7]+$/i),Y=N(/^[0-9]$/),Q=F("RegExp.prototype.exec"),Z=N(new y("["+["","​","￾"].join("")+"]","g")),K=N(/^[-+]0x[0-9a-f]+$/i),J=F("String.prototype.charCodeAt"),$=F("Object.prototype.propertyIsEnumerable"),ee=F("Object.prototype.toString"),te=F("Number.prototype.valueOf"),ne=F("Boolean.prototype.valueOf"),re=F("String.prototype.valueOf"),ie=F("Date.prototype.valueOf"),oe=F("Symbol.prototype.toString",!0),ae=Math.floor,se=Math.abs,le=m.create,ue=m.getOwnPropertyDescriptor,ce=m.getOwnPropertyNames,he=m.getOwnPropertySymbols,fe=m.isExtensible,pe=m.defineProperty,de=n(260),me=function(e,t,n,r){if(!pe){if(!e.IsDataDescriptor(r))return!1;if(!r["[[Configurable]]"]||!r["[[Writable]]"])return!1;if(n in t&&$(t,n)!==!!r["[[Enumerable]]"])return!1;var i=r["[[Value]]"];return t[n]=i,e.SameValue(t[n],i)}return pe(t,n,e.FromPropertyDescriptor(r)),!0},ve=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),ge=new RegExp("(^["+ve+"]+)|(["+ve+"]+$)","g"),ye=F("String.prototype.replace"),be=n(529),xe=n(532),we=P(P({},be),{Call:function(e,t){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(e))throw new u(s(e)+" is not a function");return e.apply(t,n)},ToPrimitive:o,ToNumber:function(e){var t=L(e)?e:o(e,v);if("symbol"===r(t))throw new u("Cannot convert a Symbol value to a number");if("string"==typeof t){if(W(t))return this.ToNumber(R(V(t,2),2));if(X(t))return this.ToNumber(R(V(t,2),8));if(Z(t)||K(t))return NaN;var n=function(e){return ye(e,ge,"")}(t);if(n!==t)return this.ToNumber(n)}return v(t)},ToInt16:function(e){var t=this.ToUint16(e);return t>=32768?t-65536:t},ToInt8:function(e){var t=this.ToUint8(e);return t>=128?t-256:t},ToUint8:function(e){var t=this.ToNumber(e);if(S(t)||0===t||!M(t))return 0;var n=A(t)*ae(se(t));return O(n,256)},ToUint8Clamp:function(e){var t=this.ToNumber(e);if(S(t)||t<=0)return 0;if(t>=255)return 255;var n=ae(e);return n+.5<t?n+1:t<n+.5?n:n%2!=0?n+1:n},ToString:function(e){if("symbol"===r(e))throw new u("Cannot convert a Symbol value to a string");return d(e)},ToObject:function(e){return this.RequireObjectCoercible(e),m(e)},ToPropertyKey:function(e){var t=this.ToPrimitive(e,d);return"symbol"===r(t)?t:this.ToString(t)},ToLength:function(e){var t=this.ToInteger(e);return t<=0?0:t>T?T:t},CanonicalNumericIndexString:function(e){if("[object String]"!==ee(e))throw new u("must be a string");if("-0"===e)return-0;var t=this.ToNumber(e);return this.SameValue(this.ToString(t),e)?t:void 0},RequireObjectCoercible:be.CheckObjectCoercible,IsArray:f.isArray||function(e){return"[object Array]"===ee(e)},IsConstructor:function(e){return"function"==typeof e&&!!e.prototype},IsExtensible:w?function(e){return!L(e)&&fe(e)}:function(e){return!0},IsInteger:function(e){if("number"!=typeof e||S(e)||!M(e))return!1;var t=se(e);return ae(t)===t},IsPropertyKey:function(e){return"string"==typeof e||"symbol"===r(e)},IsRegExp:function(e){if(!e||"object"!==r(e))return!1;if(q){var t=e[g.match];if(void 0!==t)return be.ToBoolean(t)}return xe(e)},SameValueZero:function(e,t){return e===t||S(e)&&S(t)},GetV:function(e,t){if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(e)[t]},GetMethod:function(e,t){if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");var n=this.GetV(e,t);if(null!=n){if(!this.IsCallable(n))throw new u(t+"is not a function");return n}},Get:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true, got "+s(t));return e[t]},Type:function(e){return"symbol"===r(e)?"Symbol":be.Type(e)},SpeciesConstructor:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");var n=e.constructor;if(void 0===n)return t;if("Object"!==this.Type(n))throw new u("O.constructor is not an Object");var r=q&&g.species?n[g.species]:void 0;if(null==r)return t;if(this.IsConstructor(r))return r;throw new u("no constructor found")},FromPropertyDescriptor:function(e){if(void 0===e)return e;_(this,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t},CompletePropertyDescriptor:function(e){return _(this,"Property Descriptor","Desc",e),this.IsGenericDescriptor(e)||this.IsDataDescriptor(e)?(i(e,"[[Value]]")||(e["[[Value]]"]=void 0),i(e,"[[Writable]]")||(e["[[Writable]]"]=!1)):(i(e,"[[Get]]")||(e["[[Get]]"]=void 0),i(e,"[[Set]]")||(e["[[Set]]"]=void 0)),i(e,"[[Enumerable]]")||(e["[[Enumerable]]"]=!1),i(e,"[[Configurable]]")||(e["[[Configurable]]"]=!1),e},Set:function(e,t,n,r){if("Object"!==this.Type(e))throw new u("O must be an Object");if(!this.IsPropertyKey(t))throw new u("P must be a Property Key");if("Boolean"!==this.Type(r))throw new u("Throw must be a Boolean");if(r)return e[t]=n,!0;try{e[t]=n}catch(e){return!1}},HasOwnProperty:function(e,t){if("Object"!==this.Type(e))throw new u("O must be an Object");if(!this.IsPropertyKey(t))throw new u("P must be a Property Key");return i(e,t)},HasProperty:function(e,t){if("Object"!==this.Type(e))throw new u("O must be an Object");if(!this.IsPropertyKey(t))throw new u("P must be a Property Key");return t in e},IsConcatSpreadable:function(e){if("Object"!==this.Type(e))return!1;if(q&&"symbol"===r(g.isConcatSpreadable)){var t=this.Get(e,Symbol.isConcatSpreadable);if(void 0!==t)return this.ToBoolean(t)}return this.IsArray(e)},Invoke:function(e,t){if(!this.IsPropertyKey(t))throw new u("P must be a Property Key");var n=U(arguments,2),r=this.GetV(e,t);return this.Call(r,e,n)},GetIterator:function(e,t){var n=t;arguments.length<2&&(n=j(this,e));var r=this.Call(n,e);if("Object"!==this.Type(r))throw new u("iterator must return an object");return r},IteratorNext:function(e,t){var n=this.Invoke(e,"next",arguments.length<2?[]:[t]);if("Object"!==this.Type(n))throw new u("iterator next must return an object");return n},IteratorComplete:function(e){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(e,"done"))},IteratorValue:function(e){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(iterResult) is not Object");return this.Get(e,"value")},IteratorStep:function(e){var t=this.IteratorNext(e);return!0!==this.IteratorComplete(t)&&t},IteratorClose:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(t))throw new u("Assertion failed: completion is not a thunk for a Completion Record");var n,r=t,i=this.GetMethod(e,"return");if(void 0===i)return r();try{var o=this.Call(i,e,[])}catch(e){throw n=r(),r=null,e}if(n=r(),r=null,"Object"!==this.Type(o))throw new u("iterator .return must return an object");return n},CreateIterResultObject:function(e,t){if("Boolean"!==this.Type(t))throw new u("Assertion failed: Type(done) is not Boolean");return{value:e,done:t}},RegExpExec:function(e,t){if("Object"!==this.Type(e))throw new u("R must be an Object");if("String"!==this.Type(t))throw new u("S must be a String");var n=this.Get(e,"exec");if(this.IsCallable(n)){var r=this.Call(n,e,[t]);if(null===r||"Object"===this.Type(r))return r;throw new u('"exec" method must return `null` or an Object')}return Q(e,t)},ArraySpeciesCreate:function(e,t){if(!this.IsInteger(t)||t<0)throw new u("Assertion failed: length must be an integer >= 0");var n,r=0===t?0:t;if(this.IsArray(e)&&(n=this.Get(e,"constructor"),"Object"===this.Type(n)&&q&&g.species&&null===(n=this.Get(n,g.species))&&(n=void 0)),void 0===n)return f(r);if(!this.IsConstructor(n))throw new u("C must be a constructor");return new n(r)},CreateDataProperty:function(e,t,n){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");var r=ue(e,t),i=r||this.IsExtensible(e);return!(r&&(!r.writable||!r.configurable)||!i)&&me(this,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})},CreateDataPropertyOrThrow:function(e,t,n){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");var r=this.CreateDataProperty(e,t,n);if(!r)throw new u("unable to create data property");return r},ObjectCreate:function(e,t){if(null!==e&&"Object"!==this.Type(e))throw new u("Assertion failed: proto must be null or an object");var n=arguments.length<2?[]:t;if(n.length>0)throw new h("es-abstract does not yet support internal slots");if(null===e&&!le)throw new h("native Object.create support is required to create null objects");return le(e)},AdvanceStringIndex:function(e,t,n){if("String"!==this.Type(e))throw new u("S must be a String");if(!this.IsInteger(t)||t<0||t>T)throw new u("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(n))throw new u("Assertion failed: unicode must be a Boolean");if(!n)return t+1;if(t+1>=e.length)return t+1;var r=J(e,t);if(r<55296||r>56319)return t+1;var i=J(e,t+1);return i<56320||i>57343?t+1:t+2},CreateMethodProperty:function(e,t,n){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");return me(this,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":n,"[[Writable]]":!0})},DefinePropertyOrThrow:function(e,t,n){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");var r=I(this,n)?n:this.ToPropertyDescriptor(n);if(!I(this,r))throw new u("Assertion failed: Desc is not a valid Property Descriptor");return me(this,e,t,r)},DeletePropertyOrThrow:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: IsPropertyKey(P) is not true");var n=delete e[t];if(!n)throw new TypeError("Attempt to delete property failed.");return n},EnumerableOwnNames:function(e){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");return a(e)},thisNumberValue:function(e){return"Number"===this.Type(e)?e:te(e)},thisBooleanValue:function(e){return"Boolean"===this.Type(e)?e:ne(e)},thisStringValue:function(e){return"String"===this.Type(e)?e:re(e)},thisTimeValue:function(e){return ie(e)},SetIntegrityLevel:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if("sealed"!==t&&"frozen"!==t)throw new u('Assertion failed: `level` must be `"sealed"` or `"frozen"`');if(!w)throw new h("SetIntegrityLevel requires native `Object.preventExtensions` support");if(!w(e))return!1;if(!ce)throw new h("SetIntegrityLevel requires native `Object.getOwnPropertyNames` support");var n=ce(e),r=this;return"sealed"===t?C(n,(function(t){r.DefinePropertyOrThrow(e,t,{configurable:!1})})):"frozen"===t&&C(n,(function(t){var n,i=ue(e,t);void 0!==i&&(n=r.IsAccessorDescriptor(r.ToPropertyDescriptor(i))?{configurable:!1}:{configurable:!1,writable:!1},r.DefinePropertyOrThrow(e,t,n))})),!0},TestIntegrityLevel:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if("sealed"!==t&&"frozen"!==t)throw new u('Assertion failed: `level` must be `"sealed"` or `"frozen"`');if(this.IsExtensible(e))return!1;var n=ce(e),r=this;return 0===n.length||D(n,(function(n){var i=ue(e,n);if(void 0!==i){if(i.configurable)return!1;if("frozen"===t&&r.IsDataDescriptor(r.ToPropertyDescriptor(i))&&i.writable)return!1}return!0}))},OrdinaryHasInstance:function(e,t){if(!1===this.IsCallable(e))return!1;if("Object"!==this.Type(t))return!1;var n=this.Get(e,"prototype");if("Object"!==this.Type(n))throw new u("OrdinaryHasInstance called on an object with an invalid prototype property.");return t instanceof e},OrdinaryHasProperty:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: P must be a Property Key");return t in e},InstanceofOperator:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");var n=q&&g.hasInstance?this.GetMethod(t,g.hasInstance):void 0;if(void 0!==n)return this.ToBoolean(this.Call(n,t,[e]));if(!this.IsCallable(t))throw new u("`C` is not Callable");return this.OrdinaryHasInstance(t,e)},IsPromise:function(e){if("Object"!==this.Type(e))return!1;if(!B)return!1;try{B(e)}catch(e){return!1}return!0},"Abstract Equality Comparison":function(e,t){var n=this.Type(e),r=this.Type(t);return n===r?e===t:null==e&&null==t||("Number"===n&&"String"===r?this["Abstract Equality Comparison"](e,this.ToNumber(t)):"String"===n&&"Number"===r||"Boolean"===n?this["Abstract Equality Comparison"](this.ToNumber(e),t):"Boolean"===r?this["Abstract Equality Comparison"](e,this.ToNumber(t)):"String"!==n&&"Number"!==n&&"Symbol"!==n||"Object"!==r?"Object"===n&&("String"===r||"Number"===r||"Symbol"===r)&&this["Abstract Equality Comparison"](this.ToPrimitive(e),t):this["Abstract Equality Comparison"](e,this.ToPrimitive(t)))},ValidateAndApplyPropertyDescriptor:function(e,t,n,r,i){var o=this.Type(e);if("Undefined"!==o&&"Object"!==o)throw new u("Assertion failed: O must be undefined or an Object");if("Boolean"!==this.Type(n))throw new u("Assertion failed: extensible must be a Boolean");if(!I(this,r))throw new u("Assertion failed: Desc must be a Property Descriptor");if("Undefined"!==this.Type(i)&&!I(this,i))throw new u("Assertion failed: current must be a Property Descriptor, or undefined");if("Undefined"!==o&&!this.IsPropertyKey(t))throw new u("Assertion failed: if O is not undefined, P must be a Property Key");if("Undefined"===this.Type(i)){if(!n)return!1;if(this.IsGenericDescriptor(r)||this.IsDataDescriptor(r))"Undefined"!==o&&me(this,e,t,{"[[Configurable]]":r["[[Configurable]]"],"[[Enumerable]]":r["[[Enumerable]]"],"[[Value]]":r["[[Value]]"],"[[Writable]]":r["[[Writable]]"]});else{if(!this.IsAccessorDescriptor(r))throw new u("Assertion failed: Desc is not an accessor descriptor");if("Undefined"!==o)return me(this,e,t,r)}return!0}if(this.IsGenericDescriptor(r)&&!("[[Configurable]]"in r)&&!("[[Enumerable]]"in r))return!0;if(k(this,r,i))return!0;if(!i["[[Configurable]]"]){if(r["[[Configurable]]"])return!1;if("[[Enumerable]]"in r&&!r["[[Enumerable]]"]==!!i["[[Enumerable]]"])return!1}if(this.IsGenericDescriptor(r));else if(this.IsDataDescriptor(i)!==this.IsDataDescriptor(r)){if(!i["[[Configurable]]"])return!1;this.IsDataDescriptor(i)?"Undefined"!==o&&me(this,e,t,{"[[Configurable]]":i["[[Configurable]]"],"[[Enumerable]]":i["[[Enumerable]]"],"[[Get]]":void 0}):"Undefined"!==o&&me(this,e,t,{"[[Configurable]]":i["[[Configurable]]"],"[[Enumerable]]":i["[[Enumerable]]"],"[[Value]]":void 0})}else if(this.IsDataDescriptor(i)&&this.IsDataDescriptor(r)){if(!i["[[Configurable]]"]&&!i["[[Writable]]"])return(!("[[Writable]]"in r)||!r["[[Writable]]"])&&!("[[Value]]"in r&&!this.SameValue(r["[[Value]]"],i["[[Value]]"]))}else{if(!this.IsAccessorDescriptor(i)||!this.IsAccessorDescriptor(r))throw new u("Assertion failed: current and Desc are not both data, both accessors, or one accessor and one data.");if(!i["[[Configurable]]"])return!("[[Set]]"in r&&!this.SameValue(r["[[Set]]"],i["[[Set]]"]))&&!("[[Get]]"in r&&!this.SameValue(r["[[Get]]"],i["[[Get]]"]))}return"Undefined"===o||me(this,e,t,r)},OrdinaryDefineOwnProperty:function(e,t,n){if("Object"!==this.Type(e))throw new u("Assertion failed: O must be an Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: P must be a Property Key");if(!I(this,n))throw new u("Assertion failed: Desc must be a Property Descriptor");var r=ue(e,t),i=r&&this.ToPropertyDescriptor(r),o=this.IsExtensible(e);return this.ValidateAndApplyPropertyDescriptor(e,t,o,n,i)},OrdinaryGetOwnProperty:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: O must be an Object");if(!this.IsPropertyKey(t))throw new u("Assertion failed: P must be a Property Key");if(i(e,t)){if(!ue){var n=this.IsArray(e)&&"length"===t,r=this.IsRegExp(e)&&"lastIndex"===t;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":$(e,t),"[[Value]]":e[t],"[[Writable]]":!0}}return this.ToPropertyDescriptor(ue(e,t))}},ArrayCreate:function(e){if(!this.IsInteger(e)||e<0)throw new u("Assertion failed: `length` must be an integer Number >= 0");if(e>E)throw new c("length is greater than (2**32 - 1)");var t=arguments.length>1?arguments[1]:p,n=[];if(t!==p){if(!de)throw new h("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");de(n,t)}return 0!==e&&(n.length=e),n},ArraySetLength:function(e,t){if(!this.IsArray(e))throw new u("Assertion failed: A must be an Array");if(!I(this,t))throw new u("Assertion failed: Desc must be a Property Descriptor");if(!("[[Value]]"in t))return this.OrdinaryDefineOwnProperty(e,"length",t);var n=P({},t),r=this.ToUint32(t["[[Value]]"]);if(r!==this.ToNumber(t["[[Value]]"]))throw new c("Invalid array length");n["[[Value]]"]=r;var i=this.OrdinaryGetOwnProperty(e,"length");if(!this.IsDataDescriptor(i))throw new u("Assertion failed: an array had a non-data descriptor on `length`");var o,a=i["[[Value]]"];if(r>=a)return this.OrdinaryDefineOwnProperty(e,"length",n);if(!i["[[Writable]]"])return!1;if(!("[[Writable]]"in n)||n["[[Writable]]"]?o=!0:(o=!1,n["[[Writable]]"]=!0),!this.OrdinaryDefineOwnProperty(e,"length",n))return!1;for(;r<a;){if(a-=1,!delete e[this.ToString(a)]&&(n["[[Value]]"]=a+1,!o))return n["[[Writable]]"]=!1,this.OrdinaryDefineOwnProperty(e,"length",n),!1}return!!o||this.OrdinaryDefineOwnProperty(e,"length",{"[[Writable]]":!1})},CreateHTML:function(e,t,n,r){if("String"!==this.Type(t)||"String"!==this.Type(n))throw new u("Assertion failed: `tag` and `attribute` must be strings");var i=this.RequireObjectCoercible(e),o=this.ToString(i),a="<"+t;if(""!==n){var s=this.ToString(r);a+=" "+n+'="'+ye(s,/\x22/g,"&quot;")+'"'}return a+">"+o+"</"+t+">"},GetOwnPropertyKeys:function(e,t){if("Object"!==this.Type(e))throw new u("Assertion failed: Type(O) is not Object");if("Symbol"===t)return q&&he?he(e):[];if("String"===t)return ce?ce(e):a(e);throw new u('Assertion failed: `Type` must be `"String"` or `"Symbol"`')},SymbolDescriptiveString:function(e){if("Symbol"!==this.Type(e))throw new u("Assertion failed: `sym` must be a Symbol");return oe(e)},GetSubstitution:function(e,t,n,r,i){if("String"!==this.Type(e))throw new u("Assertion failed: `matched` must be a String");var o=e.length;if("String"!==this.Type(t))throw new u("Assertion failed: `str` must be a String");var a=t.length;if(!this.IsInteger(n)||n<0||n>a)throw new u("Assertion failed: `position` must be a nonnegative integer, and less than or equal to the length of `string`, got "+s(n));var l=this;if(!this.IsArray(r)||!D(r,(function(e,t,n){return"String"===l.Type(e)||!(t in n)})))throw new u("Assertion failed: `captures` must be a List of Strings, got "+s(r));if("String"!==this.Type(i))throw new u("Assertion failed: `replacement` must be a String");for(var c=n+o,h=r.length,f="",p=0;p<i.length;p+=1){var d=i[p],m=p+1>=i.length,v=p+2>=i.length;if("$"!==d||m)f+=i[p];else{var g=i[p+1];if("$"===g)f+="$",p+=1;else if("&"===g)f+=e,p+=1;else if("`"===g)f+=0===n?"":V(t,0,n-1),p+=1;else if("'"===g)f+=c>=a?"":V(t,c),p+=1;else{var y=v?null:i[p+2];if(!Y(g)||"0"===g||!v&&Y(y))if(Y(g)&&(v||Y(y))){var b=g+y,x=R(b,10)-1;f+=b<=h&&"Undefined"===this.Type(r[x])?"":r[x],p+=2}else f+="$";else{var w=R(g,10);f+=w<=h&&"Undefined"===this.Type(r[w-1])?"":r[w-1],p+=1}}}}return f},ToDateString:function(e){if("Number"!==this.Type(e))throw new u("Assertion failed: `tv` must be a Number");return S(e)?"Invalid Date":b(e)},CreateListFromArrayLike:function(e){var t=arguments.length>1?arguments[1]:["Undefined","Null","Boolean","String","Symbol","Number","Object"];if("Object"!==this.Type(e))throw new u("Assertion failed: `obj` must be an Object");if(!this.IsArray(t))throw new u("Assertion failed: `elementTypes`, if provided, must be an array");for(var n=this.ToLength(this.Get(e,"length")),r=[],i=0;i<n;){var o=this.ToString(i),a=this.Get(e,o),s=this.Type(a);if(G(t,s)<0)throw new u("item type "+s+" is not a valid elementType");H(r,a),i+=1}return r},GetPrototypeFromConstructor:function(e,t){var n=l(t);if(!this.IsConstructor(e))throw new u("Assertion failed: `constructor` must be a constructor");var r=this.Get(e,"prototype");if("Object"!==this.Type(r)){if(!(e instanceof x))throw new u("cross-realm constructors not currently supported");r=n}return r},SetFunctionName:function(e,t){if("function"!=typeof e)throw new u("Assertion failed: `F` must be a function");if(!this.IsExtensible(e)||i(e,"name"))throw new u("Assertion failed: `F` must be extensible, and must not have a `name` own property");var n=this.Type(t);if("Symbol"!==n&&"String"!==n)throw new u("Assertion failed: `name` must be a Symbol or a String");if("Symbol"===n){var r=z(t);t=void 0===r?"":"["+r+"]"}if(arguments.length>2){var o=arguments[2];t=o+" "+t}return this.DefinePropertyOrThrow(e,"name",{"[[Value]]":t,"[[Writable]]":!1,"[[Enumerable]]":!1,"[[Configurable]]":!0})}});delete we.CheckObjectCoercible,e.exports=we},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==o.call(t))throw new TypeError(r+t);for(var n,a=i.call(arguments,1),s=function(){if(this instanceof n){var r=t.apply(this,a.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,a.concat(i.call(arguments)))},l=Math.max(0,t.length-a.length),u=[],c=0;c<l;c++)u.push("$"+c);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var h=function(){};h.prototype=t.prototype,n.prototype=new h,h.prototype=null}return n}},function(e,t,n){"use strict";e.exports=n(516)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator),o=n(249),a=n(187),s=n(517),l=n(518),u=function(e,t){if(null==e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var n,r,i,s="string"===t?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<s.length;++i)if(n=e[s[i]],a(n)&&(r=n.call(e),o(r)))return r;throw new TypeError("No default value")},c=function(e,t){var n=e[t];if(null!=n){if(!a(n))throw new TypeError(n+" returned for property "+t+" of object "+e+" is not a function");return n}};e.exports=function(e){if(o(e))return e;var t,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),i&&(Symbol.toPrimitive?t=c(e,Symbol.toPrimitive):l(e)&&(t=Symbol.prototype.valueOf)),void 0!==t){var r=t.call(e,n);if(o(r))return r;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(s(e)||l(e))&&(n="string"),u(e,"default"===n?"number":n)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Date.prototype.getDay,o=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);e.exports=function(e){return"object"===r(e)&&null!==e&&(a?function(e){try{return i.call(e),!0}catch(e){return!1}}(e):"[object Date]"===o.call(e))}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Object.prototype.toString;if(n(124)()){var o=Symbol.prototype.toString,a=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"===r(e))return!0;if("[object Symbol]"!==i.call(e))return!1;try{return function(e){return"symbol"===r(e.valueOf())&&a.test(o.call(e))}(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===r(Symbol.iterator))return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=i&&o&&"function"==typeof o.get?o.get:null,s=i&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=l&&u&&"function"==typeof u.get?u.get:null,h=l&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,v=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,b=String.prototype.slice,x=String.prototype.replace,w=String.prototype.toUpperCase,q=String.prototype.toLowerCase,_=RegExp.prototype.test,S=Array.prototype.concat,M=Array.prototype.join,E=Array.prototype.slice,T=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,O="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?Symbol.prototype.toString:null,L="function"==typeof Symbol&&"object"===r(Symbol.iterator),C="function"==typeof Symbol&&Symbol.toStringTag&&(r(Symbol.toStringTag)===L||"symbol")?Symbol.toStringTag:null,D=Object.prototype.propertyIsEnumerable,k=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function I(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||_.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-T(-e):T(e);if(r!==e){var i=String(r),o=b.call(t,i.length+1);return x.call(i,n,"$&_")+"."+x.call(x.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return x.call(t,n,"$&_")}var R=n(521),F=R.custom,N=V(F)?F:null;function j(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function z(e){return x.call(String(e),/"/g,"&quot;")}function B(e){return!("[object Array]"!==W(e)||C&&"object"===r(e)&&C in e)}function U(e){return!("[object RegExp]"!==W(e)||C&&"object"===r(e)&&C in e)}function V(e){if(L)return e&&"object"===r(e)&&e instanceof Symbol;if("symbol"===r(e))return!0;if(!e||"object"!==r(e)||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,i,o){var l=n||{};if(H(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(H(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!H(l,"customInspect")||l.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(H(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(H(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var v=l.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return e(b.call(t,0,n.maxStringLength),n)+i}return j(x.call(x.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Y),"single",n)}(t,l);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return v?I(t,w):w}if("bigint"==typeof t){var _=String(t)+"n";return v?I(t,_):_}var T=void 0===l.depth?5:l.depth;if(void 0===i&&(i=0),i>=T&&T>0&&"object"===r(t))return B(t)?"[Array]":"[Object]";var A=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=M.call(Array(e.indent+1)," ")}return{base:n,prev:M.call(Array(t+1),n)}}(l,i);if(void 0===o)o=[];else if(X(o,t)>=0)return"[Circular]";function F(t,n,r){if(n&&(o=E.call(o)).push(n),r){var a={depth:l.depth};return H(l,"quoteStyle")&&(a.quoteStyle=l.quoteStyle),e(t,a,i+1,o)}return e(t,l,i+1,o)}if("function"==typeof t&&!U(t)){var G=function(e){if(e.name)return e.name;var t=y.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=$(t,F);return"[Function"+(G?": "+G:" (anonymous)")+"]"+(ee.length>0?" { "+M.call(ee,", ")+" }":"")}if(V(t)){var te=L?x.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(t);return"object"!==r(t)||L?te:Q(te)}if(function(e){if(!e||"object"!==r(e))return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var ne="<"+q.call(String(t.nodeName)),re=t.attributes||[],ie=0;ie<re.length;ie++)ne+=" "+re[ie].name+"="+j(z(re[ie].value),"double",l);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+q.call(String(t.nodeName))+">"}if(B(t)){if(0===t.length)return"[]";var oe=$(t,F);return A&&!function(e){for(var t=0;t<e.length;t++)if(X(e[t],"\n")>=0)return!1;return!0}(oe)?"["+J(oe,A)+"]":"[ "+M.call(oe,", ")+" ]"}if(function(e){return!("[object Error]"!==W(e)||C&&"object"===r(e)&&C in e)}(t)){var ae=$(t,F);return"cause"in Error.prototype||!("cause"in t)||D.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+M.call(ae,", ")+" }":"{ ["+String(t)+"] "+M.call(S.call("[cause]: "+F(t.cause),ae),", ")+" }"}if("object"===r(t)&&u){if(N&&"function"==typeof t[N]&&R)return R(t,{depth:T-i});if("symbol"!==u&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!a||!e||"object"!==r(e))return!1;try{a.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var se=[];return s&&s.call(t,(function(e,n){se.push(F(n,t,!0)+" => "+F(e,t))})),K("Map",a.call(t),se,A)}if(function(e){if(!c||!e||"object"!==r(e))return!1;try{c.call(e);try{a.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return h&&h.call(t,(function(e){le.push(F(e,t))})),K("Set",c.call(t),le,A)}if(function(e){if(!f||!e||"object"!==r(e))return!1;try{f.call(e,f);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Z("WeakMap");if(function(e){if(!p||!e||"object"!==r(e))return!1;try{p.call(e,p);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Z("WeakSet");if(function(e){if(!d||!e||"object"!==r(e))return!1;try{return d.call(e),!0}catch(e){}return!1}(t))return Z("WeakRef");if(function(e){return!("[object Number]"!==W(e)||C&&"object"===r(e)&&C in e)}(t))return Q(F(Number(t)));if(function(e){if(!e||"object"!==r(e)||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}(t))return Q(F(P.call(t)));if(function(e){return!("[object Boolean]"!==W(e)||C&&"object"===r(e)&&C in e)}(t))return Q(m.call(t));if(function(e){return!("[object String]"!==W(e)||C&&"object"===r(e)&&C in e)}(t))return Q(F(String(t)));if(!function(e){return!("[object Date]"!==W(e)||C&&"object"===r(e)&&C in e)}(t)&&!U(t)){var ue=$(t,F),ce=k?k(t)===Object.prototype:t instanceof Object||t.constructor===Object,he=t instanceof Object?"":"null prototype",fe=!ce&&C&&Object(t)===t&&C in t?b.call(W(t),8,-1):he?"Object":"",pe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||he?"["+M.call(S.call([],fe||[],he||[]),": ")+"] ":"");return 0===ue.length?pe+"{}":A?pe+"{"+J(ue,A)+"}":pe+"{ "+M.call(ue,", ")+" }"}return String(t)};var G=Object.prototype.hasOwnProperty||function(e){return e in this};function H(e,t){return G.call(e,t)}function W(e){return v.call(e)}function X(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Y(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function Q(e){return"Object("+e+")"}function Z(e){return e+" { ? }"}function K(e,t,n,r){return e+" ("+t+") {"+(r?J(n,r):M.call(n,", "))+"}"}function J(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+M.call(e,","+n)+"\n"+t.prev}function $(e,t){var n=B(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=H(e,i)?t(e[i],e):""}var o,a="function"==typeof A?A(e):[];if(L){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var l in e)H(e,l)&&(n&&String(Number(l))===l&&l<e.length||L&&o["$"+l]instanceof Symbol||(_.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"==typeof A)for(var u=0;u<a.length;u++)D.call(e,a[u])&&r.push("["+t(a[u])+"]: "+t(e[a[u]],e));return r}},function(e,t){},function(e,t,n){"use strict";var r=n(23),i=r("%Math%"),o=r("%Number%");e.exports=o.MAX_SAFE_INTEGER||i.pow(2,53)-1},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null===e||"function"!=typeof e&&"object"!==r(e)}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=0;n<e.length;n+=1)t(e[n],n,e)}},function(e,t,n){"use strict";var r=n(256);e.exports=function(e,t,n){return r(["[[Configurable]]","[[Enumerable]]","[[Get]]","[[Set]]","[[Value]]","[[Writable]]"],(function(r){return r in t==r in n&&e.SameValue(t[r],n[r])}))}},function(e,t,n){"use strict";var r=n(23)("RegExp.prototype.test"),i=n(258);e.exports=function(e){return i(r,e)}},function(e,t,n){"use strict";var r=n(23),i=n(88),o=r("%SyntaxError%"),a=i("Symbol.prototype.toString",!0),s=n(528);e.exports=function(e){if(!a)throw new o("Symbols are not supported in this environment");var t=a(e);if(s){var n=s(e);if(""===n)return;return n.slice(1,-1)}var r=t.slice(7,-1);if(r)return r}},function(e,t,n){"use strict";var r;try{r=Function("s","return { [s]() {} }[s].name;")}catch(e){}e.exports=r&&"inferred"===function(){}.name?r:null},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(23),o=i("%Object%"),a=i("%EvalError%"),s=i("%TypeError%"),l=i("%String%"),u=i("%Date%"),c=i("%Number%"),h=i("%Math.floor%"),f=i("%Date.UTC%"),p=i("%Math.abs%"),d=n(250),m=n(257),v=n(251),g=n(252),y=n(254),b=n(255),x=n(530),w=n(88),q=n(187),_=n(531),S=n(87),M=w("Date.prototype.getUTCFullYear"),E={ToPrimitive:_,ToBoolean:function(e){return!!e},ToNumber:function(e){return+e},ToInteger:function(e){var t=this.ToNumber(e);return v(t)?0:0!==t&&g(t)?y(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);if(v(t)||0===t||!g(t))return 0;var n=y(t)*Math.floor(Math.abs(t));return b(n,65536)},ToString:function(e){return l(e)},ToObject:function(e){return this.CheckObjectCoercible(e),o(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new s(t||"Cannot call method on "+e);return e},IsCallable:q,SameValue:function(e,t){return e===t?0!==e||1/e==1/t:v(e)&&v(t)},Type:function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"===r(e)?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IsPropertyDescriptor:function(e){return m(this,e)},IsAccessorDescriptor:function(e){return void 0!==e&&(d(this,"Property Descriptor","Desc",e),!(!S(e,"[[Get]]")&&!S(e,"[[Set]]")))},IsDataDescriptor:function(e){return void 0!==e&&(d(this,"Property Descriptor","Desc",e),!(!S(e,"[[Value]]")&&!S(e,"[[Writable]]")))},IsGenericDescriptor:function(e){return void 0!==e&&(d(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function(e){if(void 0===e)return e;if(d(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new s("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(e){if("Object"!==this.Type(e))throw new s("ToPropertyDescriptor requires an object");var t={};if(S(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),S(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),S(e,"value")&&(t["[[Value]]"]=e.value),S(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),S(e,"get")){var n=e.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");t["[[Get]]"]=n}if(S(e,"set")){var r=e.set;if(void 0!==r&&!this.IsCallable(r))throw new s("setter must be a function");t["[[Set]]"]=r}if((S(t,"[[Get]]")||S(t,"[[Set]]"))&&(S(t,"[[Value]]")||S(t,"[[Writable]]")))throw new s("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t},"Abstract Equality Comparison":function(e,t){var n=this.Type(e),r=this.Type(t);return n===r?e===t:null==e&&null==t||("Number"===n&&"String"===r?this["Abstract Equality Comparison"](e,this.ToNumber(t)):"String"===n&&"Number"===r||"Boolean"===n?this["Abstract Equality Comparison"](this.ToNumber(e),t):"Boolean"===r?this["Abstract Equality Comparison"](e,this.ToNumber(t)):"String"!==n&&"Number"!==n||"Object"!==r?"Object"===n&&("String"===r||"Number"===r)&&this["Abstract Equality Comparison"](this.ToPrimitive(e),t):this["Abstract Equality Comparison"](e,this.ToPrimitive(t)))},"Strict Equality Comparison":function(e,t){var n=this.Type(e);return n===this.Type(t)&&("Undefined"===n||"Null"===n||e===t)},"Abstract Relational Comparison":function(e,t,n){if("Boolean"!==this.Type(n))throw new s("Assertion failed: LeftFirst argument must be a Boolean");var r,i;if(n?(r=this.ToPrimitive(e,c),i=this.ToPrimitive(t,c)):(i=this.ToPrimitive(t,c),r=this.ToPrimitive(e,c)),!("String"===this.Type(r)&&"String"===this.Type(i))){var o=this.ToNumber(r),a=this.ToNumber(i);if(v(o)||v(a))return;return(!g(o)||!g(a)||o!==a)&&((0!==o||0!==a)&&(o!==1/0&&(a===1/0||a!==-1/0&&(o===-1/0||o<a))))}return!x(i,r)&&(!!x(r,i)||r<i)},msFromTime:function(e){return b(e,1e3)},SecFromTime:function(e){return b(h(e/1e3),60)},MinFromTime:function(e){return b(h(e/6e4),60)},HourFromTime:function(e){return b(h(e/36e5),24)},Day:function(e){return h(e/864e5)},TimeWithinDay:function(e){return b(e,864e5)},DayFromYear:function(e){return 365*(e-1970)+h((e-1969)/4)-h((e-1901)/100)+h((e-1601)/400)},TimeFromYear:function(e){return 864e5*this.DayFromYear(e)},YearFromTime:function(e){return M(new u(e))},WeekDay:function(e){return b(this.Day(e)+4,7)},DaysInYear:function(e){return 0!==b(e,4)?365:0!==b(e,100)?366:0!==b(e,400)?365:366},InLeapYear:function(e){var t=this.DaysInYear(this.YearFromTime(e));if(365===t)return 0;if(366===t)return 1;throw new a("Assertion failed: there are not 365 or 366 days in a year, got: "+t)},DayWithinYear:function(e){return this.Day(e)-this.DayFromYear(this.YearFromTime(e))},MonthFromTime:function(e){var t=this.DayWithinYear(e);if(0<=t&&t<31)return 0;var n=this.InLeapYear(e);return 31<=t&&t<59+n?1:59+n<=t&&t<90+n?2:90+n<=t&&t<120+n?3:120+n<=t&&t<151+n?4:151+n<=t&&t<181+n?5:181+n<=t&&t<212+n?6:212+n<=t&&t<243+n?7:243+n<=t&&t<273+n?8:273+n<=t&&t<304+n?9:304+n<=t&&t<334+n?10:334+n<=t&&t<365+n?11:void 0},DateFromTime:function(e){var t=this.MonthFromTime(e),n=this.DayWithinYear(e);if(0===t)return n+1;if(1===t)return n-30;var r=this.InLeapYear(e);if(2===t)return n-58-r;if(3===t)return n-89-r;if(4===t)return n-119-r;if(5===t)return n-150-r;if(6===t)return n-180-r;if(7===t)return n-211-r;if(8===t)return n-242-r;if(9===t)return n-272-r;if(10===t)return n-303-r;if(11===t)return n-333-r;throw new a("Assertion failed: MonthFromTime returned an impossible value: "+t)},MakeDay:function(e,t,n){if(!g(e)||!g(t)||!g(n))return NaN;var r=this.ToInteger(e),i=this.ToInteger(t),o=this.ToInteger(n),a=r+h(i/12),s=b(i,12),l=f(a,s,1);return this.YearFromTime(l)!==a||this.MonthFromTime(l)!==s||1!==this.DateFromTime(l)?NaN:this.Day(l)+o-1},MakeDate:function(e,t){return g(e)&&g(t)?864e5*e+t:NaN},MakeTime:function(e,t,n,r){return g(e)&&g(t)&&g(n)&&g(r)?36e5*this.ToInteger(e)+6e4*this.ToInteger(t)+1e3*this.ToInteger(n)+this.ToInteger(r):NaN},TimeClip:function(e){return!g(e)||p(e)>864e13?NaN:c(new u(this.ToNumber(e)))},modulo:function(e,t){return b(e,t)}};e.exports=E},function(e,t,n){"use strict";var r=n(88)("String.prototype.slice");e.exports=function(e,t){return e===t||!(e.length>t.length)&&r(t,0,e.length)===e}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=n(249),o=n(187),a=function(e){var t;if((t=arguments.length>1?arguments[1]:"[object Date]"===r.call(e)?String:Number)===String||t===Number){var n,a,s=t===String?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a)if(o(e[s[a]])&&(n=e[s[a]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};e.exports=function(e){return i(e)?e:arguments.length>1?a(e,arguments[1]):a(e)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(87),o=RegExp.prototype.exec,a=Object.getOwnPropertyDescriptor,s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);e.exports=function(e){if(!e||"object"!==r(e))return!1;if(!l)return"[object RegExp]"===s.call(e);var t=a(e,"lastIndex");return!(!t||!i(t,"value"))&&function(e){try{var t=e.lastIndex;return e.lastIndex=0,o.call(e),!0}catch(e){return!1}finally{e.lastIndex=t}}(e)}},function(e,t,n){"use strict";var r=n(23),i=r("%Object.getPrototypeOf%",!0),o=r("%Array.prototype%");e.exports=i||([].__proto__===o?function(e){return e.__proto__}:null)},function(e,t,n){"use strict";var r=n(261),i=n(184);e.exports=function(){var e=r();return i(Object,{getOwnPropertyDescriptors:e},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==e}}),e}},function(e,t,n){"use strict";var r=n(185),i=n(262);e.exports=function(){var e=i();return e!==r.promisify&&(r.promisify=e,Object.defineProperty(r,"promisify",{value:e})),e}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var u=[];for(l=s;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(52))},function(e,t,n){"use strict";n.r(t),n.d(t,"load",(function(){return i}));n(0);var r=n(134);function i(e,t,n){(new r.a).load(e,(function(e){t&&t(e)}),null,n)}},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r){return new e((function(a,s){var l=new XMLHttpRequest;l.open("GET",t,!0),l.onreadystatechange=function(){l.readyState===l.DONE&&200===l.status&&function(){for(var t=l.responseXML,a=[].slice.call(t.getElementsByTagName("gml:Node")),s=[].slice.call(t.getElementsByTagName("Transition")),u=[],c=[],h=[],f=0;f<a.length;f++)u.push(i(a[f],n).then((function(e){c.push({gmlId:e.gmlId,serialId:e.serialId,nodeName:e.nodeName,floorIndex:e.floorIndex,position:{x:e.xPos,y:e.zPos,z:-1*e.yPos}})})));e.all(u).then((function(){for(var t=[],n=0;n<s.length;n++)t.push(o(s[n]).then((function(e){h.push({gmlId:e.gmlId,serialId:e.serialId,sttNode:e.sttNode,endNode:e.endNode})})));e.all(t).then((function(){r&&r(c,h)}))}))}()},l.send(null)}))}function i(t,n){return new e((function(e,r){try{e({gmlId:t.attributes["gml:id"].nodeValue,serialId:t.attributes.serialid.nodeValue,nodeName:t.getElementsByTagName("node_name")[0].textContent,floorIndex:t.getElementsByTagName("floor")[0].textContent,xPos:parseFloat(t.getElementsByTagName("xcoord")[0].textContent)*n,yPos:parseFloat(t.getElementsByTagName("ycoord")[0].textContent)*n,zPos:parseFloat(t.getElementsByTagName("zcoord")[0].textContent)*n})}catch(e){console.error(e),r()}}))}function o(t){return new e((function(e,n){try{e({gmlId:t.attributes["gml:id"].nodeValue,serialId:t.attributes.serialid.nodeValue,sttNode:t.getElementsByTagName("snode")[0].textContent,endNode:t.getElementsByTagName("enode")[0].textContent})}catch(e){console.error(e),n()}}))}n.d(t,"load",(function(){return r}))}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"createPathData",(function(){return a})),n.d(t,"getPathDataRoot",(function(){return u})),n.d(t,"findPathByPosition",(function(){return c}));var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=null;function a(t,n,i){try{(o=new r.Group).name="#PathDataRoot";for(var a=[],u=0;u<t.length;u++)a.push(s(t[u]).then((function(e){o.add(e)})));e.all(a).then((function(){for(var t=[],r=0;r<n.length;r++)t.push(l(o,n[r]));e.all(t).then((function(){i&&i()}))}))}catch(e){console.log(e)}}function s(t){return new e((function(e,n){try{var i=new r.Vector3(t.position.x,t.position.y,t.position.z),o=new r.Object3D;o.name=t.serialId,o.position.copy(i),o.userData.GmlId=t.gmlId,o.userData.SerialId=t.serialId,o.userData.NodeName=t.nodeName,o.userData.FloorIndex=t.floorIndex,o.userData.SourcePosition={x:o.position.x,y:o.position.y,z:o.position.z},o.userData.type="Node",o.userData.Links=[],e(o)}catch(e){n(e)}}))}function l(t,n){return new e((function(e,r){try{var i=n.sttNode,o=n.endNode,a=t.getObjectByName(i),s=t.getObjectByName(o);a&&s&&(a.userData.Links.push(s.uuid),s.userData.Links.push(a.uuid)),e()}catch(e){console.error(e),r()}}))}function u(){return o}function c(e,t){var n=new r.Vector3(e.start.x,e.start.y,e.start.z),a=new r.Vector3(e.end.x,e.end.y,e.end.z),s=d(n),l=d(a);if(s&&l){var u=function(e,t){if(o){var n=function(){var n=[{object:e,uuid:e.uuid,fValue:0,gValue:0,hValue:0,parentNode:null}],r=[];e.userData.Links.forEach((function(i){var a=o.getObjectByProperty("uuid",i);if(a){var s=e.position.distanceTo(a.position),l=t.position.distanceTo(a.position),u=s+l;r.push({object:a,uuid:i,fValue:u,gValue:s,hValue:l,parentNode:n[0]}),p(r)}}));for(var i=null,a=function(){var e=r.shift();if(n.push(e),e.uuid===t.uuid)return i=e,"break";e.object.userData.Links.forEach((function(i){var a=o.getObjectByProperty("uuid",i);if(!f(n,i)&&a){var s=e.gValue+e.object.position.distanceTo(a.position),l=t.position.distanceTo(a.position),u=s+l;if(f(r,i)){var c=function(e,t){for(var n=0;n<e.length;n++)if(e[n].object.uuid===t)return e[n];return null}(r,i);s<c.gValue&&(c.fValue=u,c.hValue=l,c.gValue=s,c.parentNode=e)}else r.push({object:a,uuid:i,fValue:u,gValue:s,hValue:l,parentNode:e});p(r)}}))};r.length>0;){if("break"===a())break}for(var s=[],l=i;l&&l.parentNode;){var u=l.object.position.clone(),c=l.parentNode.object.position.clone();h(s,u)||s.push(u),h(s,c)||s.push(c),l=l.parentNode}return s.reverse(),{v:s}}();if("object"===i(n))return n.v}return[]}(s,l);u.length>0&&(u.splice(0,0,n.clone()),u.push(a.clone()),e.heightOffset&&u.forEach((function(t){t.y=t.y+e.heightOffset})),t&&t(u))}}function h(e,t){for(var n=0;n<e.length;n++)if(e[n].equals(t))return!0;return!1}function f(e,t){for(var n=0;n<e.length;n++)if(e[n].uuid===t)return!0;return!1}function p(e){e.sort((function(e,t){return e.fValue>t.fValue?1:e.fValue<t.fValue?-1:0}))}function d(e){for(var t=[],n=o,r=0;r<n.children.length;r++){var i=n.children[r];t.push(i)}return t.sort((function(t,n){var r=e.distanceTo(t.position),i=e.distanceTo(n.position);return r>i?1:r<i?-1:0})),t[0]}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),n.d(t,"showPathData",(function(){return s})),n.d(t,"hidePathData",(function(){return l}));var r=n(0),i=null,o=new r.BoxBufferGeometry(1,1,1),a=new r.MeshPhongMaterial({color:16776960});function s(e,t){try{!function(){if(!t||0===t.children.length)throw"길찾기 데이터가 없습니다.";l(e),i=new r.Group,e.getSystemObjectGroup().add(i);for(var n=[],s=[],u=function(e){var l=t.children[e],u=new r.Mesh(o,a);u.userData.SourceNode=l.uuid,u.position.copy(l.position),u.position.y+=.5,i.add(u),n.push(u.position.x,u.position.y,u.position.z),l.userData.Links.forEach((function(e){var n=t.getObjectByProperty("uuid",e);if(n){var r=t.children.indexOf(l),i=t.children.indexOf(n);s.push(r,i)}}))},c=0;c<t.children.length;c++)u(c);var h=new r.BufferGeometry,f=new r.LineBasicMaterial({color:65280});h.setIndex(s),h.setAttribute("position",new r.Float32BufferAttribute(n,3)),h.computeBoundingSphere();var p=new r.LineSegments(h,f);i.add(p)}()}catch(e){console.error(e)}}function l(e){e.getSystemObjectGroup().remove(i),i&&(i.traverse((function(e){e instanceof r.LineSegments&&(e.geometry.dispose(),e.material.dispose())})),i=null)}},function(e,t,n){"use strict";n.r(t),n.d(t,"PxPathLine",(function(){return d})),n.d(t,"PxPathLineTube",(function(){return m})),n.d(t,"PxPathLineThin",(function(){return v})),n.d(t,"addVizLine",(function(){return g})),n.d(t,"clear",(function(){return y}));var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var p=[],d=function(){function e(t){c(this,e),this.pointArray=t}return f(e,[{key:"initialize",value:function(e){this.hierarchyRoot=e}},{key:"dispose",value:function(){console.warn("PxPathLine dispose(), instance object are not implemented dispose.")}}]),e}(),m=function(e){function t(e,n,r){var i;return c(this,t),(i=o(this,s(t).call(this,e))).color=n,i.tubeRadius=r,i.curve=null,i.geometry=null,i.material=null,i.mesh=null,i}return l(t,e),f(t,[{key:"initialize",value:function(e){a(s(t.prototype),"initialize",this).call(this,e),this.curve=new r.CurvePath;for(var n=0;n<this.pointArray.length-1;n++){var i=this.pointArray[n],o=this.pointArray[n+1];this.curve.add(new r.LineCurve3(i.clone(),o.clone()))}this.geometry=new r.TubeBufferGeometry(this.curve,256,this.tubeRadius,32,!1),this.geometry.computeBoundingSphere(),this.geometry.computeVertexNormals(!0),this.geometry.computeFaceNormals(),this.material=new r.MeshPhongMaterial({color:this.color,shininess:100}),this.mesh=new r.Mesh(this.geometry,this.material),this.hierarchyRoot.add(this.mesh)}},{key:"dispose",value:function(){this.hierarchyRoot.remove(this.mesh),this.geometry.dispose(),this.material.dispose(),this.curve=null,this.pointArray=null}}]),t}(d),v=function(e){function t(e,n){var r;return c(this,t),(r=o(this,s(t).call(this,e))).color=n,r.points=[],r.indices=[],r.geometry=null,r.material=null,r.mesh=null,r}return l(t,e),f(t,[{key:"initialize",value:function(e){a(s(t.prototype),"initialize",this).call(this,e);for(var n=0;n<this.pointArray.length;n++){var i=this.pointArray[n];this.points.push(i.x,i.y,i.z),this.indices.push(n)}this.geometry=new r.BufferGeometry,this.geometry.setIndex(this.indices),this.geometry.setAttribute("position",new r.Float32BufferAttribute(this.points,3)),this.geometry.computeBoundingSphere(),this.material=new r.LineBasicMaterial({color:this.color}),this.mesh=new r.Line(this.geometry,this.material),this.hierarchyRoot.add(this.mesh)}},{key:"dispose",value:function(){this.hierarchyRoot.remove(this.mesh),this.geometry.dispose(),this.material.dispose(),this.pointArray=null,this.points=null,this.indices=null}}]),t}(d);function g(e,t,n,r,i){if(r||(r=16711680),i||(i=.5),"tube"===n){var o=new m(t,r,i);o.initialize(e),p.push(o)}else if("thin"===n){var a=new v(t,r);a.initialize(e),p.push(a)}}function y(){for(var e=0;e<p.length;e++)p[e].dispose();p=[]}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"calculateSbmCenter",(function(){return l}));var r=n(0),i=n(127),o=n(128);function a(t,n,r,i,o,a,s){try{var l=t[a](s),u=l.value}catch(e){return void r(e)}l.done?n(u):e.resolve(u).then(i,o)}function s(t){return function(){var n=this,r=arguments;return new e((function(e,i){var o=t.apply(n,r);function s(t){a(o,e,i,s,l,"next",t)}function l(t){a(o,e,i,s,l,"throw",t)}s(void 0)}))}}function l(e,t,n){return u.apply(this,arguments)}function u(){return(u=s(regeneratorRuntime.mark((function e(t,n,a){var s,l,u,c,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],l=0;case 2:if(!(l<n.length)){e.next=13;break}return u=n[l].url,c=n[l].id?n[l].id:"0",h=n[l].displayName?n[l].displayName:"Dummy",f=n[l].baseFloor?n[l].baseFloor:0,p=n[l].groupId?n[l].groupId:"0",e.next=10,Object(i.loadSingleSbm)(u,c,h,f,p).then((function(e){s.push(e)}));case 10:l++,e.next=2;break;case 13:return e.next=15,Object(o.createObjectFromSbmDataArray)(s,t).then((function(e){for(var t=(new r.Box3).makeEmpty(),n=0;n<e.length;n++)t.expandByObject(e[n].mesh);var i=new r.Vector3;t.getCenter(i),a&&a({x:i.x,y:i.y,z:i.z})}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"loadModelArray",(function(){return u}));var r=n(0),i=n(134),o=n(19),a=n(5);function s(t,n,r,i,o,a,s){try{var l=t[a](s),u=l.value}catch(e){return void r(e)}l.done?n(u):e.resolve(u).then(i,o)}function l(t){return function(){var n=this,r=arguments;return new e((function(e,i){var o=t.apply(n,r);function a(t){s(o,e,i,a,l,"next",t)}function l(t){s(o,e,i,a,l,"throw",t)}a(void 0)}))}}function u(e,t){return c.apply(this,arguments)}function c(){return(c=l(regeneratorRuntime.mark((function e(t,n){var i,o,a,s,l,u,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(t instanceof Array)){e.next=28;break}o=0;case 3:if(!(o<t.length)){e.next=27;break}if(a=t[o],s=a.type,l=a.order,u=a.name,c=a.url,d=null,"3ds"!==s){e.next=15;break}return e.next=13,h(c).then((function(e){d=e}));case 13:e.next=23;break;case 15:if("fbx"!==s){e.next=20;break}return e.next=18,f(c).then((function(e){e.traverse((function(e){if(e instanceof r.Mesh){if(e.material instanceof Array)for(var t=0;t<e.material.length;t++)e.material[t].vertexColors=!1;else e.material.vertexColors=!1;e.geometry.deleteAttribute("color")}e.geometry.deleteAttribute("color")})),d=e}));case 18:e.next=23;break;case 20:if("gltf"!==s){e.next=23;break}return e.next=23,p(c).then((function(e){d=e}));case 23:d&&(d.updateMatrixWorld(!0),d.userData.property={type:"floor",basement:l,sortingorder:l,name:u},d.userData.SourceLocalPosition=d.position.clone(),i.push({name:u,order:l,basement:l,target:d,parent:null}));case 24:o++,e.next=3;break;case 27:n&&n(i);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(t){return new e((function(e,n){(new i.a).load(t,(function(t){e(t)}),null,(function(e){console.error(e),n()}))}))}function f(t){return new e((function(e,n){(new o.FBXLoader).load(t,(function(t){e(t)}),null,(function(e){console.error(e),n()}))}))}function p(t){return new e((function(e,n){(new a.GLTFLoader).load(t,(function(t){e(t.scene)}),null,(function(e){console.error(e),n()}))}))}}.call(this,n(11))},function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return c})),n.d(t,"Create",(function(){return h})),n.d(t,"Remove",(function(){return f})),n.d(t,"LoadFromFile",(function(){return p})),n.d(t,"LoadFromArrayBuffer",(function(){return d})),n.d(t,"Export",(function(){return m})),n.d(t,"Show",(function(){return v})),n.d(t,"Hide",(function(){return g})),n.d(t,"ShowAll",(function(){return y})),n.d(t,"HideAll",(function(){return b})),n.d(t,"SetColor",(function(){return x}));var r=n(0),i=n(5),o=n(98),a=null,s=null,l={},u=new r.LineBasicMaterial({color:0});function c(e){a=e}function h(){f(),s=new r.Object3D,a.workObjGroup.updateMatrixWorld(!0),a.workObjGroup.traverse((function(e){if(e instanceof r.Mesh){var t=new r.EdgesGeometry(e.geometry);t.applyMatrix(e.matrixWorld);var n=new r.LineSegments(t,u);s.add(n);var i=function e(t){return t.userData.hasOwnProperty("groupId")?t.userData.groupId:t.parent?e(t.parent):null}(e);l.hasOwnProperty(i)||(l[i]=[]),l[i].push(n)}})),a.sysObjGroup.add(s)}function f(){s&&(a.sysObjGroup.remove(s),s.traverse((function(e){e instanceof r.LineSegments&&e.geometry.dispose()})),s=null),l={}}function p(e,t){f(),(new i.GLTFLoader).load(e,(function(e){s=e.scene,a.sysObjGroup.add(s),t&&t()}),null,(function(e){console.error(e)}))}function d(e,t){f(),(new i.GLTFLoader).parse(e,null,(function(e){s=e.scene,a.sysObjGroup.add(s),t&&t()}),(function(e){console.error(e)}))}function m(e){s&&(new o.GLTFExporter).parse(s,(function(t){t instanceof ArrayBuffer&&e&&e(t)}),{binary:!0})}function v(e){l.hasOwnProperty(e)&&l[e].forEach((function(e){e.visible=!0}))}function g(e){l.hasOwnProperty(e)&&l[e].forEach((function(e){e.visible=!1}))}function y(){for(var e in l)v(e)}function b(){for(var e in l)g(e)}function x(e){u.color=new r.Color(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"CreateLabel",(function(){return i})),n.d(t,"DeleteLabel",(function(){return o})),n.d(t,"Clear",(function(){return a})),n.d(t,"GetAllData",(function(){return s})),n.d(t,"GetData",(function(){return l})),n.d(t,"CreateLabelFromData",(function(){return u})),n.d(t,"Show",(function(){return c})),n.d(t,"Hide",(function(){return h})),n.d(t,"ShowAll",(function(){return f})),n.d(t,"HideAll",(function(){return p}));var r=new(n(35).a);function i(e,t,n,i,o){r.exists(e)||r.createLabel(e,t,n,i,o)}function o(e){r.exists(e)&&r.deleteLabel(e)}function a(){r.clear()}function s(){return r.getAllData()}function l(e){return r.getData(e)}function u(e){a(),"string"==typeof e&&(e=JSON.parse(e)),r.import(e)}function c(e){r.show(e)}function h(e){r.hide(e)}function f(){r.showAll()}function p(){r.hideAll()}},function(e,t,n){var r=n(0),i=r.PointsMaterial,o=r.Points,a=r.Box3,s=r.Box3Helper,l=r.Clock,u=r.Color,c=r.LineBasicMaterial,h=r.BufferGeometry,f=r.Float32BufferAttribute,p=r.Line,d=r.QuadraticBezierCurve3,m=r.Vector3,v=r.BoxBufferGeometry,g=r.MeshBasicMaterial,y=r.Mesh,b=r.AxesHelper,x=r.SphereBufferGeometry,w=r.MeshStandardMaterial,q=r.Object3D,_=r.InstancedMesh,S=r.Plane,M=r.LineSegments,E=r.BufferAttribute,T=r.TextureLoader,P=r.PlaneBufferGeometry,A=r.MeshPhongMaterial,O=r.DataTexture,L=r.LuminanceFormat,C=r.FloatType,D=r.NearestFilter,k=r.RepeatWrapping,I=r.UniformsUtils,R=r.ShaderLib,F=r.ShaderMaterial,N=(r.RGBADepthPacking,r.DoubleSide),j=r.FrontSide,z=(r.ConeBufferGeometry,r.Layers,r.Quaternion),B=r.Euler,U=(r.DepthTexture,r.TorusBufferGeometry,r.GridHelper,r.EdgesGeometry),V=(r.CylinderGeometry,r.BackSide,r.Raycaster),G=r.Vector2,H=n(0).Math,W=n(61).MTLLoader,X=n(36).OBJLoader,Y=n(547).STLLoader,Q=n(98).GLTFExporter,Z=n(5).GLTFLoader,K=n(29).TransformControls,J=n(19).FBXLoader,$=n(125);n(62);function ee(e,t){ne(new Blob([e],{type:"application/octet-stream"}),t)}function te(e,t){ne(new Blob([e],{type:"text/plain"}),t)}function ne(e,t){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=URL.createObjectURL(e),n.download=t,n.click()}e.exports={createBox:function(e,t){var n=(new a).setFromObject(t),r=new s(n,16711680);e.add(r),console.warn("createBox 테스트.",r),t.traverseAncestors((function(e){console.log("mesh.traverseAncestors",e.name,e)}))},subwayTest:function(e){var t=new h,n=new c({color:new u(1,0,0)}),r=[];r.push(0,0,0),r.push(0,0,100),r.push(100,0,0);var i=new d(new m(0,0,0),new m(0,0,100),new m(100,0,0)),o=i.getPoints(50);t.setFromPoints(o),t.computeBoundingSphere();var a=new p(t,n);e.add(a);var s=new h,w=new c({color:new u(1,1,0)});s.setAttribute("position",new f(r,3)),t.computeBoundingSphere();var q=new p(s,w);e.add(q);var _=new v(1,1,5),S=new g({color:new u(0,1,0)}),M=new y(_,S);e.add(M);var E=M.clone();E.material=new g({color:new u(1,0,0)}),e.add(E);var T=M.clone();T.material=new g({color:new u(0,0,1)}),e.add(T);var P=new b(10);e.add(P);var A=new y(new x(.5,16,16),new g({color:new u(0,0,1),transparent:!0,opacity:.3}));e.add(A);var O=A.clone();e.add(O);var L=0,C={},D=new l;window.addEventListener("keydown",(function(e){C[e.key]=!0}),!1),window.addEventListener("keyup",(function(e){C[e.key]=!1,"p"===e.key?(console.log("curve length",i.getLength()),console.log("5.0 / curve length",5/i.getLength())):e.key}),!1),function e(){requestAnimationFrame(e);var t=D.getDelta();C.q?L-=.1*t:C.w&&(L+=.1*t),L=H.clamp(L,0,1);var n=i.getLength(),r=5/n,o=L+0,a=L+r,s=i.getPointAt(o),l=i.getPointAt(a),u=(new m).lerpVectors(s,l,.5);M.position.copy(u),M.lookAt(l),A.position.copy(s),O.position.copy(l);var c=.1/n,h=L-r-c,f=L+0-c;s=i.getPointAt(h),l=i.getPointAt(f),u=(new m).lerpVectors(s,l,.5),E.position.copy(u),E.lookAt(l);var p=h-r-c,d=h-c;s=i.getPointAt(p),l=i.getPointAt(d),u=(new m).lerpVectors(s,l,.5),T.position.copy(u),T.lookAt(l)}()},subwayTest2:function(e){var t=new d(new m(0,0,0),new m(500,0,500),new m(1e3,0,1e3)).getPoints(50),n=new h;n.setFromPoints(t),n.computeBoundingSphere();var r=new p(n,new c({color:255}));e.add(r);var i=new b(10);i.position.set(100,0,0),e.add(i);for(var o=[[0,0,0,0,0,1e3,1e3,0,1e3],[1e3,0,1e3,2e3,0,1e3,2e3,0,2e3]],s=[],g=new c({color:new u(1,0,0)}),x=new c({color:new u(1,1,0)}),q=0;q<o.length;q++){var _=new d(new m(o[q][0],o[q][1],o[q][2]),new m(o[q][3],o[q][4],o[q][5]),new m(o[q][6],o[q][7],o[q][8]));s.push(_);var S=_.getPoints(50),M=new h;M.setFromPoints(S),M.computeBoundingSphere();var E=new p(M,g);e.add(E);var T=new h;T.setAttribute("position",new f(o[q],3));var P=new p(T,x);e.add(P)}function A(e){for(var t=new m(NaN,NaN,NaN),n=0,r=0;r<s.length;r++)n+=s[r].getLength();for(var i=n*e,o=null,a=0;a<s.length;a++){var l=s[a].getLength();if(0<i&&i<l){o=s[a];break}i-=l}return o&&(t=o.getPointAt(i/o.getLength())),t}var O=[],L=0;(new W).load("/model/subway/Subway_Head.mtl",(function(t){t.preload(),(new X).setMaterials(t).load("/model/subway/Subway_Head.obj",(function(n){var r;console.log(n);var i=(new a).setFromObject(n),o=new m;i.getSize(o),L=o.z,r=o.z,O.push({mesh:n,headRatio:0});for(var l=0;l<n.children.length;l++)n.children[l].position.z-=.5*o.z;e.add(n);for(var u=0,c=0;c<s.length;c++)u+=s[c].getLength();(new X).setMaterials(t).load("/model/subway/Subway_Body.obj",(function(t){console.log(t);var n=(new a).setFromObject(t),i=new m;n.getSize(i),O.push({mesh:t,headRatio:r/u});for(var o=0;o<t.children.length;o++)t.children[o].position.z-=.5*i.z;e.add(t)}))}))}));var C=new v(1,1,5);C.translate(0,0,-2.5);for(var D=0;D<10;D++){var k=new w;k.color.setHex(16777215*Math.random());for(var I=0;I<s.length;I++)s[I].getLength();var R=new y(C,k);e.add(R),R.position.x=10*D;2.5/s[0].getLength()}var F=0,N=new l;!function e(){requestAnimationFrame(e);var t=N.getDelta();(F+=.1*t)>1&&(F=0);for(var n=0,r=0;r<s.length;r++)n+=s[r].getLength();for(var i=L/n,o=0;o<O.length;o++){var a=O[o],l=F-a.headRatio,u=A(l);if(a.mesh.position.copy(u),l>i){var c=A(l-i),h=(new m).lerpVectors(c,u,1.5);a.mesh.lookAt(h)}a.mesh.visible=l>=i}}()},instanceTest:function(e,t,n){(new W).load("/model/obj/VendingMachine.mtl",(function(n){n.preload(),(new X).setMaterials(n).load("/model/obj/VendingMachine.obj",(function(n){var r=null;if(n.traverse((function(e){e instanceof y&&(r=e)})),r){var i=r.geometry,o=r.material,a=new _(i,o,2500);a.frustumCulled=!1,e.add(a);for(var s=0,l=new q,u=0;u<50;u++)for(var f=0;f<50;f++)l.position.set(3*(f-25),0,3*(u-25)),l.rotateY(H.randFloatSpread(2*Math.PI)),l.scale.set(1,1,1),l.updateMatrix(),a.setMatrixAt(s++,l.matrix);a.instanceMatrix.needsUpdate=!0;for(var p=[],d=0;d<50;d++)for(var v=0;v<50;v++){var b=new m(3*(v-25),0,3*(d-25));p.push(b.clone()),b.y+=10,p.push(b.clone())}i=(new h).setFromPoints(p),o=new c({color:16711680});var x=new M(i,o);e.add(x);var w=[];(new T).load("/icons/IconSample04.png",(function(t){i=new h;var n=new Float32Array([-.5,0,0,.5,1,0,-.5,1,0,-.5,0,0,.5,0,0,.5,1,0]),r=new Float32Array([0,0,1,1,0,1,0,0,1,0,1,1]);i.setAttribute("position",new E(n,3)),i.setAttribute("uv",new E(r,2)),o=new g({map:t,alphaTest:1e-4}),(a=new _(i,o,2500)).frustumCulled=!1,e.add(a),s=0;for(var u=0;u<50;u++)for(var c=0;c<50;c++)l.position.set(3*(c-25),10,3*(u-25)),l.rotation.set(0,0,0,"XYZ"),l.scale.set(1,1,1),l.updateMatrix(),a.setMatrixAt(s++,l.matrix),w.push(l.position.clone());a.instanceMatrix.needsUpdate=!0}),null,(function(e){console.error(e)})),function e(){requestAnimationFrame(e);var n=new m;t.getWorldDirection(n);for(var r=(new S).setFromNormalAndCoplanarPoint(n,t.position),i=0;i<w.length;i++){l.position.copy(w[i]),l.rotation.set(0,0,0,"XYZ"),l.scale.set(1,1,1);var o=new m;r.projectPoint(w[i],o),l.lookAt(o),l.updateMatrix(),a.setMatrixAt(i,l.matrix)}a.instanceMatrix.needsUpdate=!0}()}}))}))},stlTest:function(e){(new Y).load("../model/stl/gravitycompany_droid_case_stl.stl",(function(t){var n=new A({color:16777215,specular:1118481,shininess:200}),r=new y(t,n);e.add(r),r.scale.set(.01,.01,.01)}),null,(function(e){console.error(e)}))},exportToGltf:function(e){(new Q).parse(e,(function(e){if(e instanceof ArrayBuffer)ee(e,"scene.glb");else{var t=JSON.stringify(e,null,2);console.log(t),te(t,"scene.gltf")}}),{binary:!0,forcePowerOfTwoTextures:!0})},grayScale:function(e){e.traverse((function(e){if(e instanceof y&&"S_Magic_3F_STR_Main"!==e.name)if(e.material instanceof Array)for(var t=0;t<e.material.length;t++){var n=e.material[t].clone();n.onBeforeCompile=function(e){var t=["float gray = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114));","gl_FragColor = vec4(vec3(gray), 1.0);","}"].join("\n");e.fragmentShader=e.fragmentShader.replace("}",t)},e.material[t]=n}else{var r=e.material.clone();r.onBeforeCompile=function(e){var t=["float gray = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114));","gl_FragColor = vec4(vec3(gray), 1.0);","}"].join("\n");e.fragmentShader=e.fragmentShader.replace("}",t)},e.material=r}}))},screenDoorTransparency:function(e){var t,n,r,i,o,a=function(){var e=new Float32Array(16);e[0]=0,e[1]=.5,e[2]=2/16,e[3]=.625,e[4]=.75,e[5]=.25,e[6]=.875,e[7]=6/16,e[8]=3/16,e[9]=11/16,e[10]=1/16,e[11]=9/16,e[12]=15/16,e[13]=9/16,e[14]=13/16,e[15]=5/16;var t=new O(e,4,4,L,C);return t.minFilter=D,t.magFilter=D,t.anisotropy=1,t.wrapS=k,t.wrapT=k,t.needsUpdate=!0,t}(),s=new u(16777215),l=(t=R.standard,(o=function(e,t,n){var r=Object.assign({},e);return r.uniforms=I.merge([r.uniforms,t]),r.defines=Object.assign({},n),r}(t,{ditherTex:{value:null}},(i=1,(r="ENABLE_DITHER_TRANSPARENCY")in(n={})?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n))).fragmentShader="\n            float bayerDither2x2( vec2 v ) {\n                return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );\n            }\n\n            float bayerDither4x4( vec2 v ) {\n                vec2 P1 = mod( v, 2.0 );\n                vec2 P2 = mod( floor( 0.5 * v ), 2.0 );\n                return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );\n            }\n\n            uniform sampler2D ditherTex;\n            ".concat(o.fragmentShader,"\n        ").replace(/main\(\) {/,(function(e){return"\n                ".concat(e,"\n                #if ").concat("ENABLE_DITHER_TRANSPARENCY","\n                if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= opacity ) discard;\n                #endif\n            ")})),o),c=new F(l);c.uniforms.ditherTex.value=a,c.uniforms.opacity.value=.5,c.uniforms.diffuse.value.copy(s),c.uniforms.map.value=(new T).load("../model/obj/351.jpg"),c.defines.USE_MAP="",c.defines.USE_UV="",c.lights=!0,new w({map:(new T).load("../model/obj/351.jpg")});var h=new v(1,1,1),f=new y(h,c);e.add(f),window.addEventListener("keydown",(function(e){"q"===e.key?(c.uniforms.opacity.value+=.1,c.uniforms.opacity.value=H.clamp(c.uniforms.opacity.value,0,1)):"a"===e.key&&(c.uniforms.opacity.value-=.1,c.uniforms.opacity.value=H.clamp(c.uniforms.opacity.value,0,1)),"o"===e.key?(c.side=N,c.needsUpdate=!0):"p"===e.key&&(c.side=j,c.needsUpdate=!0)}))},cavity:function(e){var t=new F({side:N,vertexShader:"\n        varying vec3 vertex;\n        varying vec3 normalPass;\n\n        void main() {\n            vertex = (modelViewMatrix * vec4(position.xyz, 1.0)).xyz;\n            normalPass = normal;\n\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n    ",fragmentShader:"\n        #extension GL_OES_standard_derivatives : enable\n\n        varying vec3 vertex;\n        varying vec3 normalPass;\n\n        void main() {\n\n            vec3 n = normalize(normalPass);\n\n            vec3 dx = dFdx(n);\n            vec3 dy = dFdy(n);\n            vec3 xneg = n - dx;\n            vec3 xPos = n + dx;\n            vec3 yneg = n - dy;\n            vec3 yPos = n + dy;\n            float depth = length(vertex);\n            float curvature = (cross(xneg, xPos).y - cross(yneg, yPos).x) * 4.0 / depth;\n            \n            vec3 light = vec3(0.0);\n            vec3 ambient = vec3(curvature + 0.5);\n            vec3 diffuse = vec3(0.0);\n            vec3 specular = vec3(0.0);\n            float shininess = 0.0;\n\n            float cosAngle = dot(n, light);\n            gl_FragColor.rgb = ambient + diffuse * max(0.0, cosAngle) + specular * pow(max(0.0, cosAngle), shininess);\n            //gl_FragColor.rgb = n;\n        }\n    "}),n=new v(1,1,1),r=new y(n,t);e.add(r)},bloom:function(e){(new Z).load("../model/gltf/lightsample.glb",(function(t){e.add(t.scene);t.scene.traverse((function(e){"BloomTarget"===e.name&&e.layers.enable(1)}))}))},printQuaternion:function(){var e=(new z).setFromAxisAngle(new m(1,0,0),.5*Math.PI);console.log("quaternion",e)},robotPlane:function(e){var t=e.getSystemObjectGroup();(new T).load("/model/마산의료원/mmc.png",(function(e){e.flipY=!1,e.needsUpdate=!0;var n=new Float32Array([-100,0,-100,100,0,100,100,0,-100,100,0,100,-100,0,-100,-100,0,100]),r=new Float32Array([0,0,1,1,1,0,1,1,0,0,0,1]),i=new h;i.setAttribute("position",new E(n,3)),i.setAttribute("uv",new E(r,2)),i.computeBoundingSphere(),i.computeVertexNormals();var o=new g({map:e}),a=new y(i,o);a.position.y=1,a.position.set(-1.8501169523554353,1,130.9522864914203),a.scale.setScalar(9.950589089641413),a.rotation.set(.005960306613163849,-.7084085464579345,.01559376019653296,"XYZ"),t.add(a);new x(1,16,16),new w({color:16711680});var s=new b(10);a.add(s),s.defaultUp,s.position.set(0,1,0);new z(0,0,.7042,.71);s.rotateX(H.degToRad(-90)),s.rotateZ(H.degToRad(90));var l=s.quaternion.clone(),u=s.quaternion.clone();s.quaternion.copy(u);var c=new q;c.position.set(-1.8501169523554353,1,130.9522864914203),c.scale.setScalar(9.950589089641413),c.rotation.set(.005960306613163849,-.7084085464579345,.01559376019653296,"XYZ"),t.add(c);var f=new q;function p(e,t){s.position.set(e-100,0,-1*(t-100))}c.add(f),window.addEventListener("keyup",(function(e){if("z"===e.key){var t=l.clone(),n=new z(0,0,-.0046,1),r=(new B).setFromQuaternion(n);s.quaternion.copy(t),s.rotateOnWorldAxis(new m(0,1,0),r.z+H.degToRad(-90))}else if("x"===e.key){var i=l.clone(),o=new z(0,0,.7042,.71),a=(new B).setFromQuaternion(o);s.quaternion.copy(i),s.rotateOnWorldAxis(new m(0,1,0),a.z+H.degToRad(-90))}else if("c"===e.key){var u=l.clone(),c=new z(0,0,.8919,.4523),h=(new B).setFromQuaternion(c);s.quaternion.copy(u),s.rotateOnWorldAxis(new m(0,1,0),h.z+H.degToRad(-90))}else if("v"===e.key){var d=l.clone(),v=new z(0,0,-.7159,.6982),g=(new B).setFromQuaternion(v);s.quaternion.copy(d),s.rotateOnWorldAxis(new m(0,1,0),g.z+H.degToRad(-90))}if("p"===e.key){f.position.set(100,0,100);var y=new m;f.getWorldPosition(y),console.log("point.position:",f.position),console.log("worldPos:",y)}"q"===e.key?(s.position.x+=1,console.log("sphere.position",s.position)):"a"===e.key&&(s.position.x-=1,console.log("sphere.position",s.position)),"w"===e.key?(s.position.z+=-1,console.log("sphere.position",s.position)):"s"===e.key&&(s.position.z-=-1,console.log("sphere.position",s.position)),"1"===e.key?(p(0,0),console.log("sphere.position",s.position)):"2"===e.key?(p(100,100),console.log("sphere.position",s.position)):"3"===e.key?(p(200,200),console.log("sphere.position",s.position)):"4"===e.key&&(p(150,75),console.log("sphere.position",s.position))}))}))},robotPlane2:function(e){var t=e.getSystemObjectGroup(),n=null,r=null;(new J).load("/model/fbx/sktrobot/robot.FBX",(function(e){r=e,(new T).load("/model/마산의료원/mmc.png",(function(e){t.add(r);var i=new P(200,200,1,1),o=new g({map:e}),a=new y(i,o);t.add(a),a.scale.setScalar(9.950589089641413),a.position.set(-1.8501169523554353,5,130.9522864914203),a.rotation.set(.005960306613163849,-.7084085464579345,.01559376019653296,"XYZ"),a.rotateX(H.degToRad(-90)),n=new b(2),a.add(n),n.position.z=.1,n.position.x=-27.04,n.position.y=-3.99,n.quaternion.set(0,0,-.0046,1),t.updateMatrixWorld(!0);var s=new m;s=n.getWorldPosition(s),r.position.copy(s);var l=new z;n.getWorldQuaternion(l);var u=new m(1,0,0);u.applyQuaternion(l),u.x=s.x+2*u.x,u.y=s.y+2*u.y,u.z=s.z+2*u.z,r.lookAt(u)}))}));var i=new l,o=null;window.addEventListener("keyup",(function(e){if("m"===e.key){var a={x:-13.01,y:-3.02,quaternion:{x:0,y:0,z:.7042,w:.71}};n.position.x=a.x,n.position.y=a.y,n.quaternion.set(a.quaternion.x,a.quaternion.y,a.quaternion.z,a.quaternion.w),t.updateMatrixWorld(!0);var u=new m;u=n.getWorldPosition(u),i=new l,o={from:r.position.clone(),to:u.clone(),ratio:0},s()}else if("r"===e.key){var c={x:-27.04,y:-3.99,quaternion:{x:0,y:0,z:-.0046,w:1}};n.position.x=c.x,n.position.y=c.y,n.quaternion.set(c.quaternion.x,c.quaternion.y,c.quaternion.z,c.quaternion.w),t.updateMatrixWorld(!0),i=new l;var h=new m;h=n.getWorldPosition(h),o={from:r.position.clone(),to:h.clone(),ratio:0},s()}}));var a=null;function s(){a=requestAnimationFrame(s);var e=i.getDelta();if(o.ratio+=.1*e,o.ratio<=1)r.position.copy((new m).lerpVectors(o.from,o.to,o.ratio)),r.lookAt(o.to);else{r.position.copy(o.to);var t=new z;n.getWorldQuaternion(t);var l=new m(1,0,0);l.applyQuaternion(t),l.x=o.to.x+2*l.x,l.y=o.to.y+2*l.y,l.z=o.to.z+2*l.z,r.lookAt(l),o.ratio=0,cancelAnimationFrame(a)}console.log("tweenData.ratio",o.ratio)}},calculateDistance:function(e){var t=e.getSystemObjectGroup(),n=e.getCamera(),r=e.getCameraControl(),i=e.getDom(),o=new v(10,10,10),a=new g({color:16711680}),s=new y(o,a);t.add(s);var l=new K(n,i);l.setSpace("world"),l.setMode("translate"),t.add(l),l.attach(s),l.addEventListener("dragging-changed",(function(e){r.enabled=!e.value})),window.addEventListener("keyup",(function(e){"p"===e.key&&console.log("box1m position:",s.position.x,s.position.y,s.position.z)}))},sysSceneMove:function(e){window.addEventListener("keydown",(function(t){"r"===t.key&&(e.position.y+=1,console.log(e.position))}))},exportGltf:function(e){(new Q).parse(e,(function(e){if(e instanceof ArrayBuffer)ee(e,"scene.glb");else{var t=JSON.stringify(e,null,2);console.log(t),te(t,"scene.gltf")}}),{binary:!0,trs:!0,forcePowerOfTwoTextures:!0})},showGlobalAxis:function(e){var t=new b(1e4);e.add(t),t.position.y=10;var n=new v(10,10,10),r=new g({color:16711680}),i=new y(n,r);e.add(i),i.position.y=10,i.position.x=10,i.position.z=10,n=new v(10,10,10),r=new g({color:255}),i=new y(n,r),e.add(i),i.position.y=10,i.position.x=-10,i.position.z=-10},extractLightPositions:function(e,t){var n=e,r=(n.substring(0,n.lastIndexOf("/")),n.substring(n.lastIndexOf("/")+1)),i=r.substring(0,r.lastIndexOf("."))+".json";(new J).load(e,(function(e){var n=[];e.updateMatrixWorld(!0),e.traverse((function(e){var t=e.userData;if(t.hasOwnProperty("property")){var r=t.property;if(r.hasOwnProperty("type"))"lightpositionroot"===r.type&&n.push(e)}}));var r=[];n.forEach((function(e){var t="",n="",i=!1;if(e.traverseAncestors((function(e){if(e.userData.hasOwnProperty("property")){var r=e.userData.property;if(r.hasOwnProperty("type"))"floor"===r.type&&(e.name,t=r.basement,n=r.sortingorder,i=!0)}})),i){var o=e.parent.name,a=e.parent.userData.property.uspace_type,s=[];e.children.forEach((function(e){var t=e.name,n=new m;e.getWorldPosition(n);var r=null;if(e.userData.hasOwnProperty("property")){var i=e.userData.property;r=i.number?i.number:i.Number}s.push({name:t,number:r,position:{x:n.x,y:n.y,z:n.z}})})),r.push({basement:t,sortingorder:n,unitSpaceName:o,unitSpaceType:a,lights:s})}})),t&&t(r);var o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.href=URL.createObjectURL(new Blob([JSON.stringify(r,null,4)],{type:"text/plain"})),o.download=i,o.click(),document.body.removeChild(o),o=null}),null,(function(e){console.error(e)}))},tipsTest:function(e,t){$.load(t,(function(t){t.scene.updateMatrixWorld(!0),e.add(t.scene);var n=(new a).setFromObject(t.scene),r=new m;n.getSize(r);for(var i=new m(0,0,r.z+.1*r.z),o=0;o<5;o++){for(var s=0;s<10;s++){var l=t.scene.clone();i.x+=r.x+.1*r.x,l.position.copy(i),e.add(l)}i.x=0,i.z+=r.z+.1*r.z}}))},SnapTest:function(e){var t=e.workObjGroup,n=[];t.updateMatrix(),t.updateMatrixWorld(!0),t.traverse((function(e){if(e instanceof y){e.geometry;for(var t=e.geometry.getAttribute("position"),r=0;r<t.count;r++){var i=t.array[3*r+0],o=t.array[3*r+1],a=t.array[3*r+2],s=new m(i,o,a);s=s.applyMatrix4(e.matrixWorld),n.push(s)}}}));var r=(new h).setFromPoints(n),a=new i({color:"red"}),s=new o(r,a);e.sysObjGroup.add(s);var l=new x(.5,32,32),u=new w({color:"blue"}),c=new y(l,u);e.sysObjGroup.add(c);var f=new V,p=new G;window.addEventListener("pointermove",(function(t){p.x=t.offsetX/e.dom.clientWidth*2-1,p.y=-t.offsetY/e.dom.clientHeight*2+1,f.setFromCamera(p,e.getCamera());var n=f.intersectObject(s,!0);if(n.length>0){var r=n[0].object.geometry.getAttribute("position").getX(n[0].index),i=n[0].object.geometry.getAttribute("position").getY(n[0].index),o=n[0].object.geometry.getAttribute("position").getZ(n[0].index);c.position.set(r,i,o)}else(n=f.intersectObject(e.workObjGroup,!0)).length>0&&c.position.copy(n[0].point)}))},Plate:function(e){(new Z).load("../model/gltf/plate.glb",(function(t){var n=t.scene.getObjectByName("Plate"),r=t.scene.getObjectByName("Column"),i=t.scene.getObjectByName("Hole_0");if(t.scene.updateMatrixWorld(!0),n&&r&&i){n.material.transparent=!0,n.material.opacity=.5,n.renderOrder=2;var o=new U(n.geometry),a=new c({color:"black"}),s=new M(o,a);n.add(s);var l=new m;i.getWorldPosition(l),l.x+=.15,l.z+=.15,r.position.copy(l),r.material.transparent=!0,r.material.opacity=.5,r.renderOrder=1}e.sysObjGroup.add(t.scene)}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"STLLoader",(function(){return i}));var r=n(0),i=function(e){r.Loader.call(this,e)};i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(e,t,n,i){var o=this,a=new r.FileLoader(o.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.load(e,(function(e){try{t(o.parse(e))}catch(e){i&&i(e)}}),n,i)},parse:function(e){function t(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}var n,i=function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){var n;if(50,84+50*(n=new DataView(e)).getUint32(80,!0)===n.byteLength)return!0;for(var r=[115,111,108,105,100],i=0;i<5;i++)if(t(r,n,i))return!1;return!0}(i)?function(e){for(var t,n,i,o,a,s,l,u,c=new DataView(e),h=c.getUint32(80,!0),f=!1,p=0;p<70;p++)1129270351==c.getUint32(p,!1)&&82==c.getUint8(p+4)&&61==c.getUint8(p+5)&&(f=!0,o=new Float32Array(3*h*3),a=c.getUint8(p+6)/255,s=c.getUint8(p+7)/255,l=c.getUint8(p+8)/255,u=c.getUint8(p+9)/255);for(var d=new r.BufferGeometry,m=new Float32Array(3*h*3),v=new Float32Array(3*h*3),g=0;g<h;g++){var y=84+50*g,b=c.getFloat32(y,!0),x=c.getFloat32(y+4,!0),w=c.getFloat32(y+8,!0);if(f){var q=c.getUint16(y+48,!0);0==(32768&q)?(t=(31&q)/31,n=(q>>5&31)/31,i=(q>>10&31)/31):(t=a,n=s,i=l)}for(var _=1;_<=3;_++){var S=y+12*_,M=3*g*3+3*(_-1);m[M]=c.getFloat32(S,!0),m[M+1]=c.getFloat32(S+4,!0),m[M+2]=c.getFloat32(S+8,!0),v[M]=b,v[M+1]=x,v[M+2]=w,f&&(o[M]=t,o[M+1]=n,o[M+2]=i)}}return d.setAttribute("position",new r.BufferAttribute(m,3)),d.setAttribute("normal",new r.BufferAttribute(v,3)),f&&(d.setAttribute("color",new r.BufferAttribute(o,3)),d.hasColors=!0,d.alpha=u),d}(i):function(e){for(var t,n=new r.BufferGeometry,i=/solid([\s\S]*?)endsolid/g,o=/facet([\s\S]*?)endfacet/g,a=0,s=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,l=new RegExp("vertex"+s+s+s,"g"),u=new RegExp("normal"+s+s+s,"g"),c=[],h=[],f=new r.Vector3,p=[],d=0,m=0,v=0;null!==(t=i.exec(e));){m=v;for(var g=t[0];null!==(t=o.exec(g));){for(var y=0,b=0,x=t[0];null!==(t=u.exec(x));)f.x=parseFloat(t[1]),f.y=parseFloat(t[2]),f.z=parseFloat(t[3]),b++;for(;null!==(t=l.exec(x));)c.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),h.push(f.x,f.y,f.z),y++,v++;1!==b&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+a),3!==y&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+a),a++}p.push({startVertex:m,endVertex:v}),d++}if(n.setAttribute("position",new r.Float32BufferAttribute(c,3)),n.setAttribute("normal",new r.Float32BufferAttribute(h,3)),d>0)for(var w=0;w<p.length;w++)n.addGroup(p[w].startVertex,p[w].endVertex,w);return n}("string"!=typeof(n=e)?r.LoaderUtils.decodeText(new Uint8Array(n)):n)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return s}));var r=n(0),i=null,o=new r.Vector2,a=new r.Raycaster;function s(e){i=e,window.addEventListener("pointerdown",(function(e){0===e.button&&(o.x=e.clientX,o.y=e.clientY)}),!1),window.addEventListener("pointerup",(function(e){if(0===e.button){var t=new r.Vector2(e.clientX,e.clientY);if(t.distanceTo(o)<5){t.x=e.offsetX/i.dom.clientWidth*2-1,t.y=-e.offsetY/i.dom.clientHeight*2+1,a.setFromCamera(t,i.getCamera());var n=a.intersectObjects(i.workObjGroup.children,!0);if(n&&n.length>0)22===n[0].object.name&&this.window.open("http://121.161.163.132:18070/viewer/index.do?mapNo=1")}}}),!1)}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(29);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,r,i,o,a,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uuid=t,this.hierarchyRoot=n,this.prevPos=r.clone(),this.prevRot=i.clone(),this.prevScale=o.clone(),this.targetPos=a.clone(),this.targetRot=s.clone(),this.targetScale=l.clone()}var t,n,r;return t=e,(n=[{key:"undo",value:function(){var e=this.hierarchyRoot.getObjectByProperty("uuid",this.uuid);e&&(e.parent.position.copy(this.prevPos),e.rotation.copy(this.prevRot),e.scale.copy(this.prevScale),e.parent.updateMatrix())}},{key:"execute",value:function(){var e=this.hierarchyRoot.getObjectByProperty("uuid",this.uuid);e&&(e.parent.position.copy(this.targetPos),e.rotation.copy(this.targetRot),e.scale.copy(this.targetScale),e.parent.updateMatrix())}}])&&o(t.prototype,n),r&&o(t,r),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemList=[],this.itemIndex=-1}var t,n,r;return t=e,(n=[{key:"undo",value:function(){this.itemList.length>0&&this.itemIndex>=0&&(this.itemList[this.itemIndex].undo(),this.itemIndex--)}},{key:"redo",value:function(){this.itemIndex+1<this.itemList.length&&(this.itemIndex++,this.itemList[this.itemIndex].execute())}},{key:"clear",value:function(){this.itemList=[],this.itemIndex=-1}},{key:"addItem_ObjectTransform",value:function(e,t,n,r,i,o,s,l){this.itemList.length>0&&this.itemList.length-1!==this.itemIndex&&this.itemList.splice(this.itemIndex+1,this.itemList.length-this.itemIndex);var u=new a(e,t,n,r,i,o,s,l);this.itemList.push(u),this.redo(),this.itemList.length>10&&(this.itemList.shift(),this.itemIndex=this.itemList.length-1)}}])&&s(t.prototype,n),r&&s(t,r),e}(),u=n(54);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.editableObject=[],this.mousePos=new r.Vector2,this.rayCast=new r.Raycaster,this.onPointerDownBinder=this.onPointerDown.bind(this),this.onPointerMoveBinder=this.onPointerMove.bind(this),this.onPointerUpBinder=this.onPointerUp.bind(this),this.hoverObject=null,this.grabObject=null,this.editDummy=new r.Object3D,this.undoRedoHandler=new l,this.mouseDownPos=new r.Vector2,this.isGizmoGrabbing=!1,this.prevObjPos=new r.Vector3,this.prevObjRot=new r.Euler,this.prevObjScale=new r.Vector3,this.toolBarDiv=null;var n=new r.ArrowHelper(new r.Vector3(0,0,1),new r.Vector3,10);this.arrowGroup=new r.Group,this.arrowGroup.add(n),this.arrowGroup.add(n.clone()),this.arrowGroup.add(n.clone()),this.core.sysObjGroup.add(this.arrowGroup),this.arrowGroup.visible=!1}var t,n,o;return t=e,(n=[{key:"on",value:function(e){this.arrowGroup.visible=!1,this.gizmo||(this.gizmo=new i.TransformControls(this.core.getCamera(),this.core.dom),this.gizmo.addEventListener("dragging-changed",this.onGizmoDragChange.bind(this)),this.gizmo.addEventListener("objectChange",this.onGizmoObjectChange.bind(this)),this.gizmo.addEventListener("mouseDown",this.onGizmoMouseDown.bind(this)),this.gizmo.addEventListener("mouseUp",this.onGizmoMouseUp.bind(this)),this.gizmo.setSpace("world"),this.gizmo.setMode("translate")),this.core.getSystemObjectGroup().add(this.gizmo),this.core.getSystemObjectGroup().add(this.editDummy),this.core.dom.addEventListener("pointerdown",this.onPointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.onPointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.onPointerUpBinder,!1),e&&(window.w2ui&&window.jQuery?this.toolBarDiv?$(this.toolBarDiv).show():(this.toolBarDiv=document.createElement("div"),this.toolBarDiv.id="EditToolBar",$(this.toolBarDiv).css("position","absolute"),$(this.toolBarDiv).width($(this.core.dom).width()),this.core.dom.prepend(this.toolBarDiv),$(this.toolBarDiv).w2toolbar({name:"EditToolBar",items:[{type:"button",id:"btnUndo",text:"실행취소",onClick:function(e){Px.Edit.Undo()}},{type:"button",id:"btnRedo",text:"다시실행",onClick:function(e){Px.Edit.Redo()}},{type:"break"},{type:"check",id:"btnTranslate",text:"이동",checked:!0,onClick:function(e){e.onComplete=function(){w2ui.EditToolBar.get("btnTranslate").checked?(w2ui.EditToolBar.get("btnRotate").checked=!1,w2ui.EditToolBar.get("btnScale").checked=!1,w2ui.EditToolBar.refresh(),Px.Edit.SetMode("translate")):Px.Edit.SetMode(null)}}},{type:"check",id:"btnRotate",text:"회전",onClick:function(e){e.onComplete=function(){w2ui.EditToolBar.get("btnRotate").checked?(w2ui.EditToolBar.get("btnTranslate").checked=!1,w2ui.EditToolBar.get("btnScale").checked=!1,w2ui.EditToolBar.refresh(),Px.Edit.SetMode("rotate")):Px.Edit.SetMode(null)}}},{type:"check",id:"btnScale",text:"크기",onClick:function(e){e.onComplete=function(){w2ui.EditToolBar.get("btnScale").checked?(w2ui.EditToolBar.get("btnTranslate").checked=!1,w2ui.EditToolBar.get("btnRotate").checked=!1,w2ui.EditToolBar.refresh(),Px.Edit.SetMode("scale")):Px.Edit.SetMode(null)}}},{type:"break"}]})):console.warn("can't find w2ui library."))}},{key:"off",value:function(){this.arrowGroup.visible=!1,this.gizmo&&(this.gizmo.detach(),this.core.getSystemObjectGroup().remove(this.gizmo)),this.core.getSystemObjectGroup().remove(this.editDummy),this.core.dom.removeEventListener("pointerdown",this.onPointerDownBinder),this.core.dom.removeEventListener("pointerup",this.onPointerUpBinder),this.core.dom.removeEventListener("pointermove",this.onPointerMoveBinder)}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.getCamera());var t=[];for(var n in this.core.poiMgr.poiList){var r=this.core.poiMgr.poiList[n].pickTest(this.rayCast);r&&t.push(r)}t.length>0?(t.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0})),document.body.style.cursor="pointer",this.hoverObject=t[0].object.pointObject):(document.body.style.cursor="auto",this.hoverObject=null)}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);0===e.button&&t.distanceTo(this.mouseDownPos)<5&&(this.hoverObject?(this.grabObject=this.getPoiInstance(this.hoverObject),this.editDummy.position.copy(this.grabObject.position),this.editDummy.rotation.copy(this.grabObject.pointObject.rotation),this.editDummy.scale.copy(this.grabObject.PointDummyRoot.scale),this.gizmo.attach(this.editDummy),this.arrowGroup.position.copy(this.grabObject.position),this.arrowGroup.rotation.copy(this.grabObject.pointObject.rotation),this.arrowGroup.children[1].position.y=.5*this.grabObject.userData.lineHeight,this.arrowGroup.children[2].position.y=this.grabObject.userData.lineHeight,this.arrowGroup.visible=!0,this.updateArrowGroup()):(this.gizmo.detach(),this.arrowGroup.visible=!1))}},{key:"onGizmoDragChange",value:function(e){this.core.getCameraControl().enabled=!e.value}},{key:"onGizmoMouseDown",value:function(){this.prevObjRot.copy(this.grabObject.pointObject.rotation),this.prevObjScale.copy(this.grabObject.PointDummyRoot.scale),this.prevObjPos.copy(this.grabObject.position)}},{key:"onGizmoObjectChange",value:function(){this.grabObject.pointObject.rotation.copy(this.gizmo.object.rotation),this.grabObject.PointDummyRoot.scale.copy(this.gizmo.object.scale),this.grabObject.position.copy(this.gizmo.object.position),this.grabObject.updateMatrix(),this.updateArrowGroup()}},{key:"onGizmoMouseUp",value:function(){var e=this.grabObject.position.clone(),t=this.grabObject.pointObject.rotation.clone(),n=this.grabObject.PointDummyRoot.scale.clone();if(this.onMouseUpCallback&&this.grabObject){var r={id:this.grabObject.name,position:{x:e.x,y:e.y,z:e.z},rotation:{x:t.x,y:t.y,z:t.z},scale:{x:100*n.x,y:100*n.y,z:100*n.z}};this.onMouseUpCallback(r)}}},{key:"setEditMode",value:function(e){var t=window.jQuery?$("#EditToolBar").css("display"):null;"translate"===e?(this.gizmo.showX=!0,this.gizmo.showY=!0,this.gizmo.showZ=!0,this.gizmo.setMode(e),t&&(w2ui.EditToolBar.get("btnTranslate").checked=!0,w2ui.EditToolBar.get("btnRotate").checked=!1,w2ui.EditToolBar.get("btnScale").checked=!1,w2ui.EditToolBar.refresh())):"rotate"===e?(this.gizmo.showX=!1,this.gizmo.showY=!0,this.gizmo.showZ=!1,this.gizmo.setMode(e),t&&(w2ui.EditToolBar.get("btnTranslate").checked=!1,w2ui.EditToolBar.get("btnRotate").checked=!0,w2ui.EditToolBar.get("btnScale").checked=!1,w2ui.EditToolBar.refresh())):"scale"===e?(this.gizmo.showX=!0,this.gizmo.showY=!0,this.gizmo.showZ=!0,this.gizmo.setMode(e),t&&(w2ui.EditToolBar.get("btnTranslate").checked=!1,w2ui.EditToolBar.get("btnRotate").checked=!1,w2ui.EditToolBar.get("btnScale").checked=!0,w2ui.EditToolBar.refresh())):(this.gizmo.detach(),t&&(w2ui.EditToolBar.get("btnTranslate").checked=!1,w2ui.EditToolBar.get("btnRotate").checked=!1,w2ui.EditToolBar.get("btnScale").checked=!1,w2ui.EditToolBar.refresh()))}},{key:"setMouseUpCallback",value:function(e){this.onMouseUpCallback=e}},{key:"updateArrowGroup",value:function(){this.arrowGroup.position.copy(this.gizmo.object.position),this.arrowGroup.rotation.copy(this.gizmo.object.rotation)}},{key:"getPoiInstance",value:function(e){var t=null;return e.traverseAncestors((function(e){e instanceof u.PxPoiElement&&(t=e)})),t}}])&&c(t.prototype,n),o&&c(t,o),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.onMouseDownBinder=this.onMouseDown.bind(this),this.onMouseMoveBinder=this.onMouseMove.bind(this),this.onMouseUpBinder=this.onMouseUp.bind(this),this.mouseDownPos=new r.Vector2,this.isLeftButtonDown=!1,this.callbacks=[],this.rangeGeometry=new r.SphereBufferGeometry(1,16,16),this.rangeMaterial=new r.MeshBasicMaterial({color:16776960,transparent:!0,opacity:.5}),this.rangeMesh=new r.Mesh(this.rangeGeometry,this.rangeMaterial),this.rangeMesh.name="#PoiSelectorRangeMesh",this.rangeMesh.matrixAutoUpdate=!1}var t,n,i;return t=e,(n=[{key:"on",value:function(){this.rectangle||(this.rectangle=document.createElement("div"),this.rectangle.style.background="blue",this.rectangle.style.position="absolute",this.rectangle.style.left="100px",this.rectangle.style.top="100px",this.rectangle.style.width="100px",this.rectangle.style.height="100px",this.rectangle.style.pointerEvents="none",this.rectangle.style.opacity="0.5",this.rectangle.style.borderWidth="thin",this.rectangle.style.borderColor="white",this.rectangle.style.borderStyle="solid",this.core.dom.appendChild(this.rectangle),this.rectangle.style.display="none"),this.core.renderer.domElement.addEventListener("mousedown",this.onMouseDownBinder,!1),this.core.renderer.domElement.addEventListener("mousemove",this.onMouseMoveBinder,!1),this.core.renderer.domElement.addEventListener("mouseup",this.onMouseUpBinder,!1)}},{key:"off",value:function(){this.core.renderer.domElement.removeEventListener("mousedown",this.onMouseDownBinder),this.core.renderer.domElement.removeEventListener("mousemove",this.onMouseMoveBinder),this.core.renderer.domElement.removeEventListener("mouseup",this.onMouseUpBinder)}},{key:"onMouseDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.clientX,this.mouseDownPos.y=e.clientY,this.core.getCameraControl().enabled=!1)}},{key:"onMouseMove",value:function(e){if(!this.core.getCameraControl().enabled){var t=new r.Vector2(e.clientX,e.clientY);if(t.distanceTo(this.mouseDownPos)>3){var n=Math.min(this.mouseDownPos.x,t.x),i=Math.max(this.mouseDownPos.x,t.x),o=Math.min(this.mouseDownPos.y,t.y),a=Math.max(this.mouseDownPos.y,t.y);this.rectangle.style.left=n+"px",this.rectangle.style.top=o+"px";var s=i-n,l=a-o;this.rectangle.style.width=s+"px",this.rectangle.style.height=l+"px",this.rectangle.style.display="block"}}}},{key:"onMouseUp",value:function(e){0===e.button&&new r.Vector2(e.clientX,e.clientY).distanceTo(this.mouseDownPos)>3&&(this.doSelect(),this.rectangle.style.display="none",this.core.getCameraControl().enabled=!0)}},{key:"doSelect",value:function(){var e=parseInt(this.rectangle.style.left),t=parseInt(this.rectangle.style.top),n=parseInt(this.rectangle.style.width),r=parseInt(this.rectangle.style.height),i=[],o=.5*this.core.renderer.domElement.clientWidth,a=.5*this.core.renderer.domElement.clientHeight;for(var s in this.core.poiMgr.poiList){var l=this.core.poiMgr.poiList[s];if(l.visible){var u=l.position.clone().project(this.core.getCamera());u.x=u.x*o+o,u.y=-u.y*a+a,e<u.x&&u.x<e+n&&t<u.y&&u.y<t+r&&i.push({type:l.userData.type,id:l.userData.id,group:l.userData.group,displayText:l.userData.displayText,url:l.userData.url,iconUrl:l.userData.iconUrl,property:l.userData.property})}}for(var c=0;c<this.callbacks.length;c++)this.callbacks[c](i)}},{key:"addCallbackListener",value:function(e){-1===this.callbacks.indexOf(e)&&this.callbacks.push(e)}},{key:"removeCallbackListener",value:function(e){var t=this.callbacks.indexOf(e);t>=0&&this.callbacks.splice(t,1)}},{key:"showRange",value:function(e,t){if(this.core.poiMgr.poiList.hasOwnProperty(e)){var n=this.core.poiMgr.poiList[e];this.rangeMesh.position.copy(n.position),this.rangeMesh.scale.set(t,t,t),this.rangeMesh.updateMatrix(),this.core.getSystemObjectGroup().add(this.rangeMesh)}}},{key:"hideRange",value:function(){this.core.getSystemObjectGroup().remove(this.rangeMesh)}},{key:"getByRange",value:function(e,t,n){var r=[];if(this.core.poiMgr.poiList.hasOwnProperty(e)){var i=this.core.poiMgr.poiList[e];for(var o in this.core.poiMgr.poiList){var a=this.core.poiMgr.poiList[o];i.uuid!==a.uuid&&i.position.distanceTo(a.position)<t&&r.push({type:a.userData.type,id:a.userData.id,group:a.userData.group,displayText:a.userData.displayText,url:a.userData.url,iconUrl:a.userData.iconUrl,property:a.userData.property})}return n&&n(r),r}return n&&n(r),r}}])&&f(t.prototype,n),i&&f(t,i),e}(),d=n(2);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}var y=function(){function e(t,n,r,i,o,a){m(this,e),this.level=t,this.category=n,this.subCategory=r,this.minDistance=NaN,this.maxDistance=NaN,this.scaleRatio=i,this.isShowIcon=o,this.isShowText=a}return g(e,[{key:"isInRange",value:function(e){return this.minDistance<e&&e<this.maxDistance}},{key:"setLodRange",value:function(e,t){this.minDistance=e,this.maxDistance=t}}]),e}(),b=function(){function e(){m(this,e),this.isLodExist=!1,this.maxRange=NaN,this.usedLodCount=-1,this.lodMap={}}return g(e,[{key:"findLod",value:function(e,t,n){if(this.lodMap.hasOwnProperty(e)&&this.lodMap[e].hasOwnProperty(t)){for(var r=this.lodMap[e][t],i=0;i<r.length;i++){var o=r[i];if(o.isInRange(n))return o}return r[this.usedLodCount-1]}return null}},{key:"setLodData",value:function(e){if(this.isLodExist=!1,e){this.lodMap={},this.maxRange=e.maxDistance,this.usedLodCount=e.usedLodCount;for(var t=[],n=this.maxRange/this.usedLodCount,r=0;r<this.maxRange;r+=n){var i=r,o=r+n;t.push({min:i,max:o})}for(var a=0;a<e.data.length;a++){var s=e.data[a],l=s.category1No,u=s.category2No;this.lodMap.hasOwnProperty(l)||(this.lodMap[l]={}),this.lodMap[l].hasOwnProperty(u)||(this.lodMap[l][u]=[]);for(var c=0;c<10;c++){var h="lodType"+c,f=.01*s["iconSize"+c],p=s[h],d=!0,m=!0;0===p?(d=!0,m=!0):1===p?(d=!0,m=!1):2===p&&(d=!1,m=!1);var v=new y(c,l,u,f,d,m);c<this.usedLodCount&&v.setLodRange(t[c].min,t[c].max),this.lodMap[l][u].push(v)}}this.isLodExist=!0}}},{key:"getMaxDistance",value:function(e,t){var n=(new r.Box3).setFromObject(e),i=new r.Vector3;return n.getCenter(i),i.distanceTo(t)}}]),e}(),x=n(61),w=n(36);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.data=n,this.name=this.data.name,this.headSource=i,this.bodySource=o,this.tailSource=a,this.curves=[];for(var s=0;s<this.data.points.length;s++)this.curves.push(new r.QuadraticBezierCurve3(this.data.points[s].v0,this.data.points[s].v1,this.data.points[s].v2));this.head=this.headSource.clone(),this.head.position.copy(this.curves[0].v0),this.head.userData.stopRatio=this.data.animation.head.stopRatio,this.head.userData.stopOffset=this.data.animation.head.stopOffset,this.tail=this.tailSource.clone(),this.tail.position.copy(this.curves[0].v0),this.tail.userData.stopRatio=this.data.animation.tail.stopRatio,this.tail.userData.stopOffset=this.data.animation.tail.stopOffset,this.bodies=[];for(var l=0;l<this.data.animation.bodies.length;l++){var u=this.bodySource.clone();u.position.copy(this.curves[0].v0),u.userData.stopRatio=this.data.animation.bodies[l].stopRatio,u.userData.stopOffset=this.data.animation.bodies[l].stopOffset,this.bodies.push(u)}this.animLoopHandler=null,this.animationRatio=0,this.clock=null,this.isEnterAnimating=!1,this.isExitAnimating=!1,this.exitAnimAccelerator=0}var t,n,i;return t=e,(n=[{key:"getCurveFullLength",value:function(){for(var e=0,t=0;t<this.curves.length;t++)this.curves[t],e+=this.curves[t].getLength();return e}},{key:"getCurvePointAt",value:function(e){for(var t=this.getCurveFullLength()*e,n=null,r=0;r<this.curves.length;r++){var i=this.curves[r],o=i.getLength();if(0<=t&&t<=o){n=i;break}t-=o}return n?n.getPointAt(t/n.getLength()):null}},{key:"setSubwayLocation",value:function(e,t){var n=this.getCurvePointAt(t);if(n){e.position.copy(n);var i=this.getCurveFullLength(),o=t-e.userData.depthLength/i,a=this.getCurvePointAt(o);if(a){var s=(new r.Vector3).lerpVectors(a,n,1.5);e.lookAt(s),this.root.add(e)}else this.root.remove(e)}else this.root.remove(e)}},{key:"doEnter",value:function(){if(!this.isEnterAnimating){this.isExitAnimating=!1,this.animLoopHandler&&cancelAnimationFrame(this.animLoopHandler),this.setSubwayLocation(this.head,0);for(var e=0;e<this.bodies.length;e++)this.setSubwayLocation(this.bodies[e],0);this.setSubwayLocation(this.tail,0),this.animationRatio=0,this.clock=new r.Clock,this.enterAnimLoop(),this.isEnterAnimating=!0}}},{key:"enterAnimLoop",value:function(){this.animLoopHandler=requestAnimationFrame(this.enterAnimLoop.bind(this));var e=this.clock.getDelta();if(this.animationRatio+=.7*Math.abs(this.head.userData.stopOffset-this.animationRatio)*e,.01<Math.abs(this.head.userData.stopOffset-this.animationRatio)){this.setSubwayLocation(this.head,this.animationRatio);for(var t=0;t<this.bodies.length;t++)this.setSubwayLocation(this.bodies[t],this.animationRatio-this.bodies[t].userData.stopOffset);this.setSubwayLocation(this.tail,this.animationRatio-this.tail.userData.stopOffset)}else cancelAnimationFrame(this.animLoopHandler),this.isEnterAnimating=!1}},{key:"doExit",value:function(){if(!this.isExitAnimating){this.isEnterAnimating=!1,this.animLoopHandler&&cancelAnimationFrame(this.animLoopHandler);var e=this.head.userData.stopOffset;this.setSubwayLocation(this.head,e);for(var t=0;t<this.bodies.length;t++)this.setSubwayLocation(this.bodies[t],e-this.bodies[t].userData.stopOffset);this.setSubwayLocation(this.tail,e-this.tail.userData.stopOffset),this.exitAnimAccelerator=0,this.animationRatio=e,this.clock=new r.Clock,this.exitAnimLoop(),this.isExitAnimating=!0}}},{key:"exitAnimLoop",value:function(){this.animLoopHandler=requestAnimationFrame(this.exitAnimLoop.bind(this));var e=this.getCurveFullLength(),t=this.tail.userData.depthLength/e,n=this.head.userData.stopRatio-this.tail.userData.stopRatio,r=this.clock.getDelta();if(this.exitAnimAccelerator+=r,this.exitAnimAccelerator>=1&&(this.exitAnimAccelerator=1),this.animationRatio+=.2*this.exitAnimAccelerator*r,this.animationRatio<=1+n+t){this.setSubwayLocation(this.head,this.animationRatio);for(var i=0;i<this.bodies.length;i++)this.setSubwayLocation(this.bodies[i],this.animationRatio-this.bodies[i].userData.stopOffset);this.setSubwayLocation(this.tail,this.animationRatio-this.tail.userData.stopOffset)}else cancelAnimationFrame(this.animLoopHandler),this.isExitAnimating=!1}},{key:"dispose",value:function(){this.animLoopHandler&&cancelAnimationFrame(this.animLoopHandler),this.root.remove(this.head),this.root.remove(this.tail);for(var e=0;e<this.bodies.length;e++)this.root.remove(this.bodies[e])}},{key:"setVisible",value:function(e){this.head.visible=e,this.tail.visible=e,this.bodies.forEach((function(t){t.visible=e}))}},{key:"updateOffsetHeightByFloor",value:function(e,t){for(var n=0;n<this.data.groups.length;n++){var i=this.data.groups[n],o=i.floorId;if(i.heightOffset,o===e){var a=this.data.points[n];a.v0.y+=t,a.v1.y+=t,a.v2.y+=t}}this.curves=[];for(var s=0;s<this.data.points.length;s++)this.curves.push(new r.QuadraticBezierCurve3(this.data.points[s].v0,this.data.points[s].v1,this.data.points[s].v2));this.setSubwayLocation(this.head,this.animationRatio);for(var l=0;l<this.bodies.length;l++)this.setSubwayLocation(this.bodies[l],this.animationRatio-this.bodies[l].userData.stopOffset);this.setSubwayLocation(this.tail,this.animationRatio-this.tail.userData.stopOffset)}}])&&q(t.prototype,n),i&&q(t,i),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.headSource=null,this.bodySource=null,this.tailSource=null,this.subwayElements={}}var t,n,i;return t=e,(n=[{key:"loadSubwayModel",value:function(e,t,n,i){var o=this;(new x.MTLLoader).load(e,(function(e){(new w.OBJLoader).setMaterials(e).load(t,(function(e){var t=(new r.Box3).setFromObject(e),n=new r.Vector3;t.getSize(n),e.traverse((function(e){e instanceof r.Mesh&&e.geometry.translate(0,0,.5*-n.z)})),e.userData.depthLength=n.z,o.headSource=e,o.modelLoadCheck(i)})),(new w.OBJLoader).setMaterials(e).load(t,(function(e){var t=(new r.Box3).setFromObject(e),n=new r.Vector3;t.getSize(n),e.traverse((function(e){e instanceof r.Mesh&&(e.geometry.rotateY(r.Math.degToRad(180)),e.geometry.translate(0,0,.5*-n.z))})),e.userData.depthLength=n.z,o.tailSource=e,o.modelLoadCheck(i)})),(new w.OBJLoader).setMaterials(e).load(n,(function(e){var t=(new r.Box3).setFromObject(e),n=new r.Vector3;t.getSize(n),e.traverse((function(e){e instanceof r.Mesh&&e.geometry.translate(0,0,.5*-n.z)})),e.userData.depthLength=n.z,o.bodySource=e,o.modelLoadCheck(i)}))}))}},{key:"modelLoadCheck",value:function(e){this.headSource&&this.bodySource&&this.tailSource&&e&&e()}},{key:"loadSubwayData",value:function(e,t){if(this.headSource&&this.bodySource&&this.tailSource){this.subwayRoot||(this.subwayRoot=new r.Group,this.core.sysObjGroup.add(this.subwayRoot)),this.disposeSubwayElements();var n=this,i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){if(i.readyState===i.DONE&&200===i.status){var e=i.response;"string"==typeof e&&(e=JSON.parse(i.response));for(var r=0;r<e.length;r++)n.subwayElements[e[r].name]=new _(n.subwayRoot,e[r],n.headSource,n.bodySource,n.tailSource);t&&t()}},i.send(null)}else console.warn("지하철 모델이 로드되지 않았습니다.")}},{key:"disposeSubwayElements",value:function(){for(var e in this.subwayElements)this.subwayElements[e].dispose();this.subwayElements={}}},{key:"getLineNames",value:function(){return Object.keys(this.subwayElements)}},{key:"startEnterAnim",value:function(e){this.subwayElements.hasOwnProperty(e)&&this.subwayElements[e].doEnter()}},{key:"startExitAnim",value:function(e){this.subwayElements.hasOwnProperty(e)&&this.subwayElements[e].doExit()}},{key:"removeElement",value:function(e){this.subwayElements.hasOwnProperty(e)&&(this.subwayElements[e].dispose(),delete this.subwayElements[e])}},{key:"removeAllElement",value:function(){for(var e in this.subwayElements)this.subwayElements[e].dispose();this.subwayElements={}}},{key:"setVisible",value:function(e,t){this.subwayElements.hasOwnProperty(e)&&this.subwayElements[e].setVisible(t)}},{key:"setVisibleAll",value:function(e){for(var t in this.subwayElements)this.subwayElements[t].setVisible(e)}},{key:"updateOffsetHeightByFloor",value:function(e,t){for(var n in this.subwayElements)this.subwayElements[n].updateOffsetHeightByFloor(e,t)}}])&&S(t.prototype,n),i&&S(t,i),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.mouseDownPos=new r.Vector2,this.rayCast=new r.Raycaster,this.selectedPoiList=[]}var t,n,i;return t=e,(n=[{key:"on",value:function(){this.core.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.pointerUpBinder,!1)}},{key:"off",value:function(){for(var e=0;e<this.selectedPoiList.length;e++)this.selectedPoiList[e].restoreColor();this.selectedPoiList=[],this.core.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.core.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.pointerUpBinder)}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.clientX,this.mouseDownPos.y=e.clientY)}},{key:"onPointerMove",value:function(e){}},{key:"onPointerUp",value:function(e){if(0===e.button){var t=new r.Vector2(e.clientX,e.clientY);if(t.distanceTo(this.mouseDownPos)<5){t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera());var n=[];for(var i in this.core.poiMgr.poiList){var o=this.core.poiMgr.poiList[i];o.visible&&o.pickTest(this.rayCast)&&n.push({distance:this.core.getCamera().position.distanceTo(o.position),poi:o})}if(n.length>0){n.sort((function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0}));var a=n[0].poi,s=this.selectedPoiList.indexOf(a);-1===s?(a.setColor(16711680),this.selectedPoiList.push(a)):(a.restoreColor(),this.selectedPoiList.splice(s,1))}}}}},{key:"getSelected",value:function(){for(var e=[],t=0;t<this.selectedPoiList.length;t++)e.push(this.selectedPoiList[t].name);return e}}])&&E(t.prototype,n),i&&E(t,i),e}(),P=n(37);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n,i,o,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.rootGroup=n,this.overallSize=i,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.sphereSharedGeometry=o,this.sphereSharedMaterial=a,this.points=[],this.linePlaneSharedGeometry=s,this.lineArrowTex=null,this.linePlanes=[],this.rayCast=new r.Raycaster,this.ground=new r.Plane(new r.Vector3(0,1,0),0),this.mouseDownPos=new r.Vector2,this.onPointCreate=null}var t,n,i;return t=e,(n=[{key:"on",value:function(){this.core.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.pointerUpBinder,!1)}},{key:"off",value:function(){for(var e=0;e<this.points.length;e++)this.rootGroup.remove(this.points[e]);this.points=[];for(var t=0;t<this.linePlanes.length;t++){var n=this.linePlanes[t];this.rootGroup.remove(n),n.material.dispose()}this.linePlanes=[],this.core.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.core.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.pointerUpBinder)}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);if(0===e.button&&t.distanceTo(this.mouseDownPos)<5){t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera());var n=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(n&&n.length>0){var i=n[0].point;i.y+=.5*this.overallSize,this.createPoint(i),this.ground=(new r.Plane).setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),i)}else{var o=new r.Vector3;this.rayCast.ray.intersectPlane(this.ground,o)&&(o.y+=.5*this.overallSize,this.createPoint(o))}}}},{key:"update",value:function(e){for(var t=0;t<this.linePlanes.length;t++){var n=this.linePlanes[t];n.userData.uniforms.time.value+=e,1<n.userData.uniforms.time.value&&(n.userData.uniforms.time.value=0)}}},{key:"createPoint",value:function(e){var t=new r.Mesh(this.sphereSharedGeometry,this.sphereSharedMaterial);this.rootGroup.add(t),t.matrixAutoUpdate=!1,t.position.copy(e),t.updateMatrix(),this.points.push(t),t.visible=!1,this.points.length>=2&&this.updateLineMesh(),this.onPointCreate&&this.onPointCreate({index:this.points.length-1,position:JSON.parse(JSON.stringify(t.position))})}},{key:"updateLineMesh",value:function(){for(var e=0;e<this.linePlanes.length;e++){var t=this.linePlanes[e];this.rootGroup.remove(t),t.material.dispose()}if(this.linePlanes=[],this.points.length>=2)for(var n=0;n<this.points.length-1;n++){var i=this.points[n],o=this.points[n+1],a=i.position.distanceTo(o.position),s={uvScale:{value:new r.Vector2(1,1)},arrowScale:{value:new r.Vector2(.25*a*(1/this.overallSize),1)},time:{value:0},arrowTexture:{value:this.lineArrowTex},lineColor:{value:new r.Vector3(1,0,0)},distance:a},l=new r.ShaderMaterial({side:r.DoubleSide,transparent:!0,uniforms:s,vertexShader:P.a.vertexShader,fragmentShader:P.a.fragmentShader}),u=new r.Mesh(this.linePlaneSharedGeometry,l);this.rootGroup.add(u),this.linePlanes.push(u),u.userData.uniforms=s,u.scale.set(1,1,a*(1/this.overallSize)),u.position.copy((new r.Vector3).lerpVectors(i.position,o.position,.5)),u.lookAt(o.position)}}}])&&A(t.prototype,n),i&&A(t,i),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=D(this,k(t).call(this))).uniformsArray=[],e.disposableMaterials=[],e.points=[],e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(i=[{key:"createFromPoints",value:function(e,t,n,i,o,a){for(var s=0;s<e.length;s++){var l=new r.Mesh(n,i);this.add(l),l.position.copy(e[s]),this.points.push(e[s].clone())}for(var u=0;u<e.length-1;u++){var c=e[u],h=e[u+1],f=c.distanceTo(h),p={uvScale:{value:new r.Vector2(1,1)},arrowScale:{value:new r.Vector2(.25*f*(1/t),1)},time:{value:0},arrowTexture:{value:a},lineColor:{value:new r.Vector3(1,0,0)},distance:f};this.uniformsArray.push(p);var d=new r.ShaderMaterial({side:r.DoubleSide,transparent:!0,uniforms:p,vertexShader:P.a.vertexShader,fragmentShader:P.a.fragmentShader});this.disposableMaterials.push(d);var m=new r.Mesh(o,d);this.add(m),m.scale.set(1,1,f*(1/t)),m.position.copy((new r.Vector3).lerpVectors(c,h,.5)),m.lookAt(h)}}},{key:"updateFrame",value:function(e){for(var t=0;t<this.uniformsArray.length;t++){var n=this.uniformsArray[t];n.time.value+=e,1<n.time.value&&(n.time.value=0)}}},{key:"dispose",value:function(){for(var e=this.children.length,t=0;t<e;t++)this.remove(this.children[0]);for(var n=0;n<this.disposableMaterials.length;n++)this.disposableMaterials[n].dispose();this.disposableMaterials=[]}}])&&C(n.prototype,i),o&&C(n,o),t}(r.Object3D),F=n(129);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.overallSize=5,this.idHolder=null,this.rootGroup=new r.Group,this.rootGroup.name="#VirtualPatrol",this.core.sysObjGroup.add(this.rootGroup),this.sphereSharedGeometry=new r.SphereBufferGeometry(1*this.overallSize,16,16),this.sphereSharedMaterial=new r.MeshPhongMaterial({color:16711680,shininess:100}),this.lineSharedGeometry=new r.PlaneBufferGeometry(this.overallSize,this.overallSize),this.lineSharedGeometry.rotateX(-.5*Math.PI),this.lineSharedGeometry.rotateY(-.5*Math.PI),this.lineArrowTex=null,this.pathElements=[],this.vpEditor=new O(this.core,this.rootGroup,this.overallSize,this.sphereSharedGeometry,this.sphereSharedMaterial,this.lineSharedGeometry),this.tween=null,this.character=new F.a(this)}var t,n,i;return t=e,(n=[{key:"loadArrowTexture",value:function(e,t){this.lineArrowTex&&(this.lineArrowTex.dispose(),this.lineArrowTex=null);var n=this;(new r.TextureLoader).load(e,(function(e){e.wrapS=r.RepeatWrapping,e.wrapT=r.RepeatWrapping,e.needsUpdate=!0,n.lineArrowTex=e,n.vpEditor.lineArrowTex=e,t&&t()}),null,(function(e){console.error(e)}))}},{key:"editorOn",value:function(e){this.lineArrowTex?(this.idHolder=e,this.vpEditor.on()):console.warn("arrow texture is not loaded.")}},{key:"editorOff",value:function(){this.lineArrowTex?(this.idHolder=null,this.vpEditor.off()):console.warn("arrow texture is not loaded.")}},{key:"update",value:function(e){if(this.lineArrowTex){this.vpEditor.update(e);for(var t=0;t<this.pathElements.length;t++)this.pathElements[t].updateFrame(e);this.character&&this.character.update(e)}}},{key:"finishDrawing",value:function(){var e=this.idHolder;e||(e=Date.now().toString());for(var t=[],n=0;n<this.vpEditor.points.length;n++)t.push(this.vpEditor.points[n].position.clone());var r=new R;return r.name=e,r.createFromPoints(t,this.overallSize,this.sphereSharedGeometry,this.sphereSharedMaterial,this.lineSharedGeometry,this.lineArrowTex),this.rootGroup.add(r),this.pathElements.push(r),this.vpEditor.off(),{id:r.name,points:r.points}}},{key:"remove",value:function(e){this.character.setVisible(!1),this.tween&&this.tween.stop();for(var t=null,n=-1,r=0;r<this.pathElements.length;r++){var i=this.pathElements[r];if(i.name===e){t=i,n=r;break}}t&&(t.dispose(),this.rootGroup.remove(t),this.pathElements.splice(n,1))}},{key:"removeAll",value:function(){this.character.setVisible(!1),this.tween&&this.tween.stop();for(var e=0;e<this.pathElements.length;e++)this.pathElements[e].dispose(),this.rootGroup.remove(this.pathElements[e]);this.pathElements=[]}},{key:"export",value:function(){for(var e=[],t=0;t<this.pathElements.length;t++){var n=this.pathElements[t];e.push({id:n.name,points:n.points})}return JSON.stringify(e)}},{key:"import",value:function(e){if(this.lineArrowTex){this.idHolder=null,this.vpEditor.off();var t=e;"string"==typeof t&&(t=JSON.parse(t)),this.removeAll();for(var n=0;n<t.length;n++){for(var i=t[n],o=i.id,a=i.points,s=[],l=0;l<a.length;l++)s.push(new r.Vector3(a[l].x,a[l].y,a[l].z));var u=new R;u.name=o,u.createFromPoints(s,this.overallSize,this.sphereSharedGeometry,this.sphereSharedMaterial,this.lineSharedGeometry,this.lineArrowTex),this.rootGroup.add(u),this.pathElements.push(u)}}else console.warn("arrow texture is not loaded.")}},{key:"setSize",value:function(e){this.idHolder=null,this.vpEditor.off(),this.overallSize=e,this.sphereSharedGeometry=new r.SphereBufferGeometry(1*this.overallSize,16,16),this.lineSharedGeometry=new r.PlaneBufferGeometry(this.overallSize,this.overallSize),this.lineSharedGeometry.rotateX(-.5*Math.PI),this.lineSharedGeometry.rotateY(-.5*Math.PI),this.vpEditor.overallSize=this.overallSize,this.vpEditor.sphereSharedGeometry=this.sphereSharedGeometry,this.vpEditor.linePlaneSharedGeometry=this.lineSharedGeometry;for(var t=[],n=0;n<this.pathElements.length;n++){var i=new R;i.name=this.pathElements[n],i.createFromPoints(this.pathElements[n].points,this.overallSize,this.sphereSharedGeometry,this.sphereSharedMaterial,this.lineSharedGeometry,this.lineArrowTex),this.rootGroup.add(i),t.push(i)}this.removeAll(),this.pathElements=t}},{key:"moveTo",value:function(e,t,n,i,o){for(var a=this,s=null,l=0;l<this.pathElements.length;l++){var u=this.pathElements[l];if(u.name===e){s=u;break}}if(s&&t<s.points.length){this.tween&&this.tween.stop();var c=this.core.getCamera(),h=this.core.getCameraControl(),f=s.points[t],p=0===t?c.position.clone():s.points[t-1];if(p.y=f.y,0===t){var m=(new r.Vector3).lerpVectors(s.points[0],s.points[1],-.1);p.copy(m),f.copy(s.points[0])}var v=this,g={ratio:0,startPos:p,targetPos:f};this.tween=new d.a.Tween(g).to({ratio:1},i).easing(d.a.Easing.Linear.None).onUpdate((function(e){var t=(new r.Vector3).subVectors(e.targetPos,e.startPos);t.normalize();var i=(new r.Vector3).crossVectors(t,new r.Vector3(0,1,0));i.normalize();var o=(new r.Quaternion).setFromAxisAngle(i,.75*Math.PI);t.applyQuaternion(o);var a=(new r.Vector3).lerpVectors(e.startPos,e.targetPos,e.ratio),s=a.clone();s.addScaledVector(t,n),c.position.copy((new r.Vector3).lerpVectors(c.position,s,.1)),h.target.copy((new r.Vector3).lerpVectors(h.target,a,.1)),c.lookAt(h.target),h.update(),v.character.updateTransform(h.target,e.targetPos)})).onComplete((function(e){var t=(new r.Vector3).subVectors(e.targetPos,e.startPos);t.normalize();var i=(new r.Vector3).crossVectors(t,new r.Vector3(0,1,0));i.normalize();var s=(new r.Quaternion).setFromAxisAngle(i,.75*Math.PI);t.applyQuaternion(s);var l=(new r.Vector3).lerpVectors(e.startPos,e.targetPos,e.ratio),u=l.clone();u.addScaledVector(t,n),c.position.copy(u),h.target.copy(l),c.lookAt(h.target),h.update(),a.character.doIdle(),o&&o()})).start(),this.character.doWalk(),this.character.setVisible(!0)}}},{key:"loadCharacterModel",value:function(e,t){this.character.loadCharacterModel(e,t)}},{key:"setCharacterSize",value:function(e){this.character.setSize(e)}},{key:"disposeCharacterResources",value:function(e){this.character.dispose(),e&&e()}}])&&N(t.prototype,n),i&&N(t,i),e}();function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.minimapDom=null,this.renderer=null,this.camera=null,this.scene=null,this.ambientLight=null,this.dirLight=null,this.hemiLight=null,this.minimapFovViz=null,this.minimapCenterSphere=null,this.minimapCameraSphere=null,this.rayCast=new r.Raycaster,this.type="MinimapType0",this.maxSize=null,this.boundCenter=null,this.dynamicZoom=!1,this.arrow=null,this.arrowScene=null,this.arrowCamera=null}var t,n,i;return t=e,(n=[{key:"attach",value:function(e){if(this.minimapDom=e,this.renderer||(this.renderer=new r.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.minimapDom.clientWidth,this.minimapDom.clientHeight),this.renderer.gammaOutput=!0,this.renderer.gammaInput=!0,this.renderer.autoClear=!1,this.renderer.setClearColor(new r.Color(.5,.5,.5),1),this.arrowScene=new r.Scene,this.arrowScene.name="#ArrowScene",this.arrowCamera=new r.OrthographicCamera(-this.minimapDom.clientWidth/2,this.minimapDom.clientWidth/2,this.minimapDom.clientHeight/2,-this.minimapDom.clientHeight/2,1,10),this.arrowCamera.position.z=10),!this.camera){this.camera=new r.OrthographicCamera(-1,1,1,-1,.1,1e4),this.camera.position.y=1,this.camera.lookAt(0,0,0);var t=(new r.Box3).makeEmpty();this.calculateBounding(this.core.workObjGroup,t),this.camera.position.y=t.center.y+(t.size.y+10),this.boundCenter=new r.Vector3,t.getCenter(this.boundCenter);var n=new r.Vector3;t.getSize(n),this.maxSize=Math.max(n.x,n.y),this.maxSize=Math.max(this.maxSize,n.z)}if(this.scene||(this.scene=new r.Scene,this.scene.name="MinimapScene",this.ambientLight=new r.AmbientLight(4210752),this.scene.add(this.ambientLight),this.dirLight=new r.DirectionalLight(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.scene.add(this.dirLight),this.hemiLight=new r.HemisphereLight(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.scene.add(this.hemiLight)),this.minimapDom&&(this.minimapDom.appendChild(this.renderer.domElement),this.viewFitting(),this.minimapDom.addEventListener("pointerup",this.onMinimapPointerUp.bind(this),!1)),!this.minimapCenterSphere&&!this.minimapCameraSphere){var i=new r.SphereBufferGeometry(30,16,16),o=new r.MeshBasicMaterial({color:16711680});this.minimapCenterSphere=new r.Mesh(i,o),this.scene.add(this.minimapCenterSphere),this.minimapCameraSphere=new r.Mesh(i,o),this.scene.add(this.minimapCameraSphere),this.minimapCenterSphere.visible=!1,this.minimapCameraSphere.visible=!1}if(!this.minimapFovViz){var a=new Float32Array([-1,0,-1,-3,0,3,3,0,3,-1,0,-1,3,0,3,1,0,-1]),s=new r.BufferGeometry;s.setAttribute("position",new r.BufferAttribute(a,3));var l=new r.MeshBasicMaterial({color:16711680,transparent:!0,opacity:.5,side:r.DoubleSide,depthWrite:!1,depthTest:!1});this.minimapFovViz=new r.Mesh(s,l),this.minimapFovViz.renderOrder=1,this.scene.add(this.minimapFovViz),this.minimapFovViz.scale.set(100,100,300)}var u=this.core.renderer.getClearColor().clone();this.renderer.setClearColor(u)}},{key:"setBgColor",value:function(e){this.renderer&&this.renderer.setClearColor(new r.Color(e))}},{key:"render",value:function(e){if(this.renderer&&this.camera&&this.scene){this.core.getCamera().updateProjectionMatrix();var t=this.core.getCameraControl();this.camera.position.x=t.target.x,this.camera.position.z=t.target.z,this.minimapCenterSphere.position.copy(t.target),this.minimapCameraSphere.position.copy(this.core.getCamera().position),this.minimapCameraSphere.position.y=t.target.y;var n=(new r.Vector3).copy(t.target),i=(new r.Vector3).copy(this.core.getCamera().position);i.y=n.y;var o=(new r.Vector3).subVectors(i,n);o.normalize();var a=n.clone();if(a=a.addScaledVector(o,500/this.camera.zoom),this.dynamicZoom){var s=this.core.getCamera().position.distanceTo(t.target);this.camera.zoom=(this.maxSize-(s-this.maxSize))/this.maxSize,this.camera.zoom*=2.5,this.camera.zoom=r.Math.clamp(this.camera.zoom,.6,this.camera.zoom),this.camera.updateProjectionMatrix()}if("MinimapType0"===this.type?(this.minimapFovViz.position.copy((new r.Vector3).lerpVectors(this.minimapCameraSphere.position,this.minimapCenterSphere.position,.7)),this.minimapFovViz.lookAt((new r.Vector3).lerpVectors(this.minimapCameraSphere.position,this.minimapCenterSphere.position,1.5)),this.minimapFovViz.scale.set(200,100,400)):"MinimapType1"===this.type&&(this.minimapFovViz.position.copy(a),this.minimapFovViz.lookAt((new r.Vector3).lerpVectors(this.minimapCameraSphere.position,this.minimapCenterSphere.position,1.5)),this.minimapFovViz.scale.set(100,100,100)),this.scene.add(this.core.workObjGroup),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.arrow){this.arrow.position.set(0,0,1);var l=this.core.getCamera().rotation;this.arrow.material.rotation=l.z,this.renderer.clearDepth(),this.renderer.render(this.arrowScene,this.arrowCamera)}this.core.scene.add(this.core.workObjGroup)}}},{key:"resize",value:function(){this.minimapDom&&this.renderer&&this.camera&&(this.renderer.setSize(this.minimapDom.clientWidth,this.minimapDom.clientHeight),this.arrowCamera.left=-this.minimapDom.clientWidth/2,this.arrowCamera.right=this.minimapDom.clientWidth/2,this.arrowCamera.top=this.minimapDom.clientHeight/2,this.arrowCamera.bottom=-this.minimapDom.clientHeight/2,this.arrowCamera.updateProjectionMatrix(),this.viewFitting())}},{key:"viewFitting",value:function(){var e=(new r.Box3).makeEmpty();this.calculateBounding(this.core.workObjGroup,e),this.camera.position.y=e.center.y+(e.size.y+10);var t=new r.Vector3,n=new r.Vector3;e.getCenter(t),e.getSize(n);var i=.5*Math.max(n.x,n.z);this.camera.left=-i,this.camera.right=i,this.camera.top=i,this.camera.bottom=-i,this.camera.position.copy(t),this.camera.position.y=i,this.camera.updateProjectionMatrix()}},{key:"setZoomLevel",value:function(e){var t=100/e;this.minimapFovViz.scale.set(t,t,t),this.camera.zoom=e,this.camera.updateProjectionMatrix()}},{key:"enableDynamicZoom",value:function(){this.dynamicZoom=!0}},{key:"disableDynamicZoom",value:function(){this.dynamicZoom=!1,this.camera.zoom=1,this.camera.updateProjectionMatrix()}},{key:"onMinimapPointerUp",value:function(e){var t=new r.Vector2(e.offsetX/this.minimapDom.clientWidth*2-1,-e.offsetY/this.minimapDom.clientHeight*2+1);this.rayCast.setFromCamera(t,this.camera);var n=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(n&&n.length>0){var i=n[0].point,o=this.core.getCamera(),a=this.core.getCameraControl(),s=o.position.distanceTo(a.target);this.core.camera.moveToPositionUseAnimLoop(s,i.x,i.y,i.z)}}},{key:"changeType",value:function(e){this.type=e}},{key:"setAngle",value:function(e){this.camera&&(this.camera.rotation.z=r.Math.degToRad(e))}},{key:"fovObjectShow",value:function(){this.minimapFovViz&&(this.minimapFovViz.visible=!0)}},{key:"fovObjectHide",value:function(){this.minimapFovViz&&(this.minimapFovViz.visible=!1)}},{key:"setFovObjectVisible",value:function(e){this.minimapFovViz&&(this.minimapFovViz.visible=e)}},{key:"calculateBounding",value:function(e,t){if(e.visible){t.expandByObject(e);for(var n=0;n<e.children.length;n++)this.calculateBounding(e.children[n],t)}}},{key:"loadArrowTexture",value:function(e,t){var n=this;this.arrowScene&&(new r.TextureLoader).load(e,(function(e){n.arrow&&(n.arrowScene.remove(n.arrow),n.arrow.material.dispose());var i=new r.SpriteMaterial({map:e});n.arrow=new r.Sprite(i),n.arrow.center.set(.5,.5),n.arrow.scale.set(32,32,1),n.arrow.position.set(0,0,1),n.arrowScene.add(n.arrow),t&&t()}),null,(function(e){console.error(e)}))}},{key:"setArrowSize",value:function(e,t){this.arrow&&this.arrow.scale.set(e,t,1)}},{key:"showArrow",value:function(){this.arrow&&(this.arrow.visible=!0)}},{key:"hideArrow",value:function(){this.arrow&&(this.arrow.visible=!1)}}])&&z(t.prototype,n),i&&z(t,i),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.manager=n,this.previewLine=null,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.registerPointerEvents(),this.mouseDownPos=new r.Vector2,this.rayCast=new r.Raycaster,this.hover=new r.Mesh(new r.SphereBufferGeometry(5,16,16),new r.MeshBasicMaterial({color:16711680,transparent:!0,opacity:.5})),this.core.sysObjGroup.add(this.hover),this.currCreatedPoints=[],this.currCreatedLines=[]}var t,n,i;return t=e,(n=[{key:"registerPointerEvents",value:function(){this.core.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.pointerUpBinder,!1)}},{key:"unRegisterPointerEvents",value:function(){this.core.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.core.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.pointerUpBinder,!1)}},{key:"dispose",value:function(){this.core.sysObjGroup.remove(this.hover),this.hover.geometry.dispose(),this.hover.material.dispose(),this.hover=null}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){var t=new r.Vector2;t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera());var n=this.manager.isPickEvacPoints(this.rayCast);if(n){var i=new r.Vector3;if(n.getWorldPosition(i),this.hover.position.copy(i),this.currCreatedPoints.length>0){var o=new r.Vector3;this.currCreatedPoints[this.currCreatedPoints.length-1].getWorldPosition(o),this.previewLine.updateTransform(o,i),this.previewLine.visible=!0}else this.previewLine.visible=!1}else{var a=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(a&&a.length>0){var s=a[0].point;if(s.y+=2.5,this.hover.position.copy(s),this.currCreatedPoints.length>0){var l=new r.Vector3;this.currCreatedPoints[this.currCreatedPoints.length-1].getWorldPosition(l),this.previewLine.updateTransform(l,s),this.previewLine.visible=!0}else this.previewLine.visible=!1}}}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);if(0===e.button&&t.distanceTo(this.mouseDownPos)<5){t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera());var n=this.manager.isPickEvacPoints(this.rayCast);if(n){var i=!0;this.currCreatedPoints.length>0&&(i=!(this.currCreatedPoints[this.currCreatedPoints.length-1].uuid===n.uuid)),i&&(this.currCreatedPoints.push(n),this.updateLines())}else{var o=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(o&&o.length>0){var a=this.getSbmFloor(o[0].object),s=o[0].point;s.y+=2.5;var l=this.manager.addPoint(a,s,!0);this.currCreatedPoints.push(l),this.updateLines()}}}}},{key:"getSbmFloor",value:function(e){var t=e;return e.traverseAncestors((function(e){if(e.userData&&e.userData instanceof Object){var n=e.userData;for(var r in e.userData.hasOwnProperty("property")&&(n=e.userData.property),n)"type"===r.toLowerCase()&&("floor"!==n[r]&&"SBMFLOOR"!==n[r]||(t=e))}})),t}},{key:"updateLines",value:function(){for(var e=0;e<this.currCreatedLines.length;e++)this.manager.removeLine(this.currCreatedLines[e]);if(this.currCreatedLines=[],this.currCreatedPoints.length>1)for(var t=0;t<this.currCreatedPoints.length-1;t++){var n=this.currCreatedPoints[t],r=this.currCreatedPoints[t+1],i=this.manager.createLine(n,r,!0);this.currCreatedLines.push(i)}}},{key:"setPreviewLineInstance",value:function(e){this.previewLine=e}}])&&U(t.prototype,n),i&&U(t,i),e}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e,t,n){return(X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Y(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=W(this,Y(t).call(this,e,n))).matrixAutoUpdate=!1,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"raycast",value:function(e,n,r){r&&X(Y(t.prototype),"raycast",this).call(this,e,n)}}])&&H(n.prototype,r),i&&H(n,i),t}(r.Mesh);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=ee(this,te(t).call(this,e,n))).p0=r,a.p1=i,a.lineSize=o,a.speedRatio=1,a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(i=[{key:"updateMaterial",value:function(e){this.material.uniforms.time.value+=e*this.speedRatio,1<this.material.uniforms.time.value&&(this.material.uniforms.time.value=0)}},{key:"updateTransform",value:function(e,t){var n=new r.Vector3,i=new r.Vector3;e&&t?(n.copy(e),i.copy(t)):(this.p0.getWorldPosition(n),this.p1.getWorldPosition(i));var o=n.distanceTo(i);o<.1&&(i.x+=.1,o=n.distanceTo(i)),this.material.uniforms.distance=o,this.scale.set(1,1,o*(1/this.lineSize)),this.position.copy((new r.Vector3).lerpVectors(n,i,.5)),this.lookAt(i)}}])&&J(n.prototype,i),o&&J(n,o),t}(r.Mesh);function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.manager=n,this.deleteType=i,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.registerEvents(),this.mouseDownPos=new r.Vector2,this.rayCast=new r.Raycaster,this.delTarget=null}var t,n,i;return t=e,(n=[{key:"registerEvents",value:function(){this.core.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.pointerUpBinder,!1)}},{key:"unRegisterEvents",value:function(){this.core.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.core.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.pointerUpBinder),this.core.dom.style.cursor="default"}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){var t=new r.Vector2;if(t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera()),"point"===this.deleteType){var n=this.manager.isPickEvacPoints(this.rayCast);n?(this.core.dom.style.cursor="not-allowed",this.delTarget=n):(this.core.dom.style.cursor="default",this.delTarget=null)}else if("link"===this.deleteType){var i=this.manager.isPickEvacLinks(this.rayCast);i?(this.core.dom.style.cursor="not-allowed",this.delTarget=i):(this.core.dom.style.cursor="default",this.delTarget=null)}}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);0===e.button&&t.distanceTo(this.mouseDownPos)<5&&this.delTarget&&(this.delTarget instanceof Z?confirm("위치점을 제거하시겠습니까?")&&(this.manager.deleteEvacPoint(this.delTarget),this.delTarget=null):this.delTarget instanceof re&&confirm("연결을 제거하시겠습니까?")&&(this.manager.removeLine(this.delTarget),this.delTarget=null))}}])&&ie(t.prototype,n),i&&ie(t,i),e}(),ae=n(90);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.objectColor=16711680,this.lineSize=10,this.speedRatio=1,this.drawEditor=null,this.drawEditorPreviewLine=null,this.pointDeleter=null,this.arrowTexture=null,this.sharedResources={pointGeometry:new r.SphereBufferGeometry(.5*this.lineSize,16,16),pointMaterial:new r.MeshPhongMaterial({color:this.objectColor,shininess:100}),lineGeometry:new r.PlaneBufferGeometry(this.lineSize,this.lineSize)},this.sharedResources.lineGeometry.rotateX(-.5*Math.PI),this.sharedResources.lineGeometry.rotateY(-.5*Math.PI),this.evacPoints=[],this.evacLinks=[],this.lineStartPointObject=null,this.core.dom.addEventListener("keyup",this.onKeyUp.bind(this),!1),this.currVisibleState=!0;var n=this;ae.addEventHandler("onShow",(function(e){n.showByProperty("floorDisplayName",e.params.id)})),ae.addEventHandler("onHide",(function(e){n.hideByProperty("floorDisplayName",e.params.id)})),ae.addEventHandler("onShowAll",(function(e){n.showAll()})),ae.addEventHandler("onHideAll",(function(e){n.hideAll()}))}var t,n,i;return t=e,(n=[{key:"onKeyUp",value:function(e){var t=e.key.toLowerCase();"esc"!==t&&"escape"!==t||(this.drawEditorOff(),this.pointDeleteOff())}},{key:"loadArrowTexture",value:function(e,t){this.arrowTexture&&(this.arrowTexture.dispose(),this.arrowTexture=null);var n=this;(new r.TextureLoader).load(e,(function(e){e.wrapS=r.RepeatWrapping,e.wrapT=r.RepeatWrapping,e.needsUpdate=!0,n.arrowTexture=e,t&&t()}),null,(function(e){console.error(e)}))}},{key:"update",value:function(e){for(var t=0;t<this.evacLinks.length;t++)this.evacLinks[t].updateMaterial(e);this.drawEditorPreviewLine&&this.drawEditorPreviewLine.updateMaterial(e)}},{key:"addPoint",value:function(e,t,n){var r=new Z(this.sharedResources.pointGeometry,this.sharedResources.pointMaterial);return r.userData.floorId=e.userData.ID?e.userData.ID:e.userData.property.sortingorder,r.userData.floorDisplayName=e.userData.DisplayName?e.userData.DisplayName:e.name,r.userData.floorBaseFloor=e.userData.BaseFloor?e.userData.BaseFloor:e.userData.property.sortingorder,r.userData.targetFloor=e,r.position.copy(t),r.updateMatrix(),this.core.sysObjGroup.add(r),n&&this.evacPoints.push(r),r}},{key:"createLine",value:function(e,t,n){var i=new r.Vector3,o=new r.Vector3;e.getWorldPosition(i),t.getWorldPosition(o);var a=i.distanceTo(o),s=this.createLineMaterial(a),l=new re(this.sharedResources.lineGeometry,s,e,t,this.lineSize);return this.core.sysObjGroup.add(l),l.scale.set(1,1,a*(1/this.lineSize)),l.position.copy((new r.Vector3).lerpVectors(i,o,.5)),l.lookAt(o),n&&this.evacLinks.push(l),l}},{key:"removeLine",value:function(e){var t=this.evacLinks.indexOf(e);t>=0&&(this.core.sysObjGroup.remove(e),e.material.dispose(),this.evacLinks.splice(t,1))}},{key:"removePoint",value:function(e){var t=this.evacPoints.indexOf(e);t>=0&&(e.parent.remove(e),this.evacPoints.splice(t,1))}},{key:"isPickEvacPoints",value:function(e){for(var t=[],n=0;n<this.evacPoints.length;n++)this.evacPoints[n].raycast(e,t,!0);return t.length>0?t[0].object:null}},{key:"isPickEvacLinks",value:function(e){for(var t=[],n=0;n<this.evacLinks.length;n++)this.evacLinks[n].raycast(e,t,!0);return t.length>0?t[0].object:null}},{key:"createLineMaterial",value:function(e){var t={uvScale:{value:new r.Vector2(1,1)},arrowScale:{value:new r.Vector2(.25*e*(1/this.lineSize),1)},time:{value:0},arrowTexture:{value:this.arrowTexture},lineColor:{value:new r.Vector3(1,0,0)},distance:e};return new r.ShaderMaterial({side:r.DoubleSide,transparent:!0,uniforms:t,vertexShader:P.a.vertexShader,fragmentShader:P.a.fragmentShader})}},{key:"onModelAnimStart",value:function(){for(var e=0;e<this.evacLinks.length;e++)this.evacLinks[e].visible=!1;for(var t=0;t<this.evacPoints.length;t++){var n=this.evacPoints[t];n.userData.targetFloor.attach(n)}}},{key:"onModelAnimComplete",value:function(){for(var e=0;e<this.evacPoints.length;e++){var t=this.evacPoints[e];this.core.sysObjGroup.attach(t)}for(var n=0;n<this.evacLinks.length;n++)this.evacLinks[n].visible=this.currVisibleState,this.evacLinks[n].updateTransform()}},{key:"setLineStartPoint",value:function(e){this.lineStartPointObject=e}},{key:"deleteEvacPoint",value:function(e){for(var t=this.evacLinks.length-1;t>=0;t--){var n=this.evacLinks[t];n.p0.uuid!==e.uuid&&n.p1.uuid!==e.uuid||this.removeLine(n)}this.removePoint(e)}},{key:"drawEditorOn",value:function(){this.drawEditorOff(),this.pointDeleteOff(),this.linkDeleterOff(),this.drawEditor=new V(this.core,this);var e=this.createLineMaterial(1);this.drawEditorPreviewLine=new re(this.sharedResources.lineGeometry,e,null,null,this.lineSize),this.core.sysObjGroup.add(this.drawEditorPreviewLine),this.drawEditorPreviewLine.visible=!1,this.drawEditor.setPreviewLineInstance(this.drawEditorPreviewLine)}},{key:"drawEditorOff",value:function(){this.drawEditor&&(this.drawEditor.unRegisterPointerEvents(),this.drawEditor.dispose(),this.drawEditor=null),this.drawEditorPreviewLine&&(this.core.sysObjGroup.remove(this.drawEditorPreviewLine),this.drawEditorPreviewLine.material.dispose(),this.drawEditorPreviewLine=null)}},{key:"pointDeleterOn",value:function(){this.drawEditorOff(),this.pointDeleteOff(),this.linkDeleterOff(),this.pointDeleter=new oe(this.core,this,"point")}},{key:"pointDeleteOff",value:function(){this.pointDeleter&&(this.pointDeleter.unRegisterEvents(),this.pointDeleter=null)}},{key:"linkDeleterOn",value:function(){this.drawEditorOff(),this.pointDeleteOff(),this.linkDeleterOff(),this.pointDeleter=new oe(this.core,this,"link")}},{key:"linkDeleterOff",value:function(){this.pointDeleter&&(this.pointDeleter.unRegisterEvents(),this.pointDeleter=null)}},{key:"clear",value:function(){this.drawEditorOff(),this.pointDeleteOff(),this.linkDeleterOff();for(var e=this.evacLinks.length-1;e>=0;e--){var t=this.evacLinks[e];this.removeLine(t)}for(var n=this.evacPoints.length-1;n>=0;n--){var r=this.evacPoints[n];this.removePoint(r)}}},{key:"export",value:function(){this.drawEditorOff(),this.pointDeleteOff(),this.linkDeleterOff();for(var e={points:[],links:[]},t=0;t<this.evacPoints.length;t++){var n=this.evacPoints[t],r=n.uuid,i=n.userData.floorId,o=n.userData.floorDisplayName,a=n.userData.floorBaseFloor,s=n.position.clone();e.points.push({id:r,floorId:i,floorDisplayName:o,floorBaseFloor:a,localPosition:{x:s.x,y:s.y,z:s.z}})}for(var l=0;l<this.evacLinks.length;l++){var u=this.evacLinks[l],c=u.uuid,h=u.p0.uuid,f=u.p1.uuid;e.links.push({id:c,p0_id:h,p1_id:f})}return e}},{key:"import",value:function(e){this.drawEditorOff(),this.pointDeleteOff(),this.linkDeleterOff(),this.clear(),"string"==typeof e&&(e=JSON.parse(e));for(var t=0;t<e.points.length;t++){var n=e.points[t],i=this.findSbmFloor(n.floorId,n.floorDisplayName,n.floorBaseFloor);if(i){var o=i.worldToLocal(new r.Vector3(n.localPosition.x,n.localPosition.y,n.localPosition.z)),a=this.addPoint(i,o,!0);a.name=n.id,a.position.set(n.localPosition.x,n.localPosition.y,n.localPosition.z),a.updateMatrix()}else console.warn("can't find evacuation point's floor.:",n.id)}for(var s=0;s<e.links.length;s++){var l=e.links[s],u=this.findEvacPoint(l.p0_id),c=this.findEvacPoint(l.p1_id);if(u&&c){var h=this.createLine(u,c,!0);h.name=h.id}else console.warn("can't find evacuation link's target point.:",l.id)}}},{key:"findSbmFloor",value:function(e,t,n){for(var r=0;r<this.core.workObjGroup.children.length;r++){var i=this.core.workObjGroup.children[r];if(i.userData.ID===e&&i.userData.DisplayName===t&&i.userData.BaseFloor===n)return i}var o=null;return this.core.workObjGroup.traverse((function(t){if(t.userData.hasOwnProperty("property")){var n=t.userData.property;n.hasOwnProperty("floorId")?n.floorId!==e||o||(o=t):n.hasOwnProperty("floorid")&&(n.floorid!==e||o||(o=t))}})),o}},{key:"findEvacPoint",value:function(e){for(var t=0;t<this.evacPoints.length;t++){var n=this.evacPoints[t];if(n.name===e)return n}return point}},{key:"showAll",value:function(){this.currVisibleState=!0;for(var e=this.evacLinks.length-1;e>=0;e--)this.evacLinks[e].visible=!0;for(var t=this.evacPoints.length-1;t>=0;t--)this.evacPoints[t].visible=!0}},{key:"hideAll",value:function(){this.currVisibleState=!1;for(var e=this.evacLinks.length-1;e>=0;e--)this.evacLinks[e].visible=!1;for(var t=this.evacPoints.length-1;t>=0;t--)this.evacPoints[t].visible=!1}},{key:"showByProperty",value:function(e,t){this.evacPoints.forEach((function(n){n.userData[e]===t&&(n.visible=!0)})),this.evacLinks.forEach((function(n){var r=n.p0.userData[e]===t,i=n.p1.userData[e]===t;(r||i)&&(n.visible=!0)}))}},{key:"hideByProperty",value:function(e,t){this.evacPoints.forEach((function(n){n.userData[e]===t&&(n.visible=!1)})),this.evacLinks.forEach((function(n){var r=n.p0.userData[e]===t,i=n.p1.userData[e]===t;(r||i)&&(n.visible=!1)}))}},{key:"setColor",value:function(e){this.objectColor=e;for(var t=new r.Color(this.objectColor),n=0;n<this.evacPoints.length;n++)this.evacPoints[n].material.color=t.clone();for(var i=0;i<this.evacLinks.length;i++){var o=this.evacLinks[i];o.material.uniforms.lineColor.value=new r.Vector3(t.r,t.g,t.b),o.material.uniformsNeedUpdate=!0}}},{key:"setSize",value:function(e){this.lineSize=e,this.sharedResources.pointGeometry=new r.SphereBufferGeometry(.5*this.lineSize,16,16),this.sharedResources.lineGeometry=new r.PlaneBufferGeometry(this.lineSize,this.lineSize),this.sharedResources.lineGeometry.rotateX(-.5*Math.PI),this.sharedResources.lineGeometry.rotateY(-.5*Math.PI);for(var t=0;t<this.evacPoints.length;t++)this.evacPoints[t].geometry=this.sharedResources.pointGeometry;for(var n=0;n<this.evacLinks.length;n++){var i=this.evacLinks[n];i.geometry=this.sharedResources.lineGeometry,i.lineSize=this.lineSize,i.material.uniforms.arrowScale.value=new r.Vector2(.25*i.material.uniforms.distance*(1/this.lineSize),1),i.material.uniformsNeedUpdate=!0,i.updateTransform()}}},{key:"setSpeed",value:function(e){this.speedRatio=e;for(var t=0;t<this.evacLinks.length;t++)this.evacLinks[t].speedRatio=this.speedRatio}}])&&se(t.prototype,n),i&&se(t,i),e}(),ue={vertexShader:["#ifdef USE_LOGDEPTHBUF","#define EPSILON 1e-6","#ifdef USE_LOGDEPTHBUF_EXT","varying float vFragDepth;","#endif","uniform float logDepthBufFC;","#endif","attribute vec3 position;","attribute vec3 tex;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec3 texOut;","void main ( void ) {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","texOut = tex;","#ifdef USE_LOGDEPTHBUF","gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;","#ifdef USE_LOGDEPTHBUF_EXT","vFragDepth = 1.0 + gl_Position.w;","#else","gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;","#endif","#endif","}"].join("\n"),fragmentShader:["precision highp float;","#ifdef USE_LOGDEPTHBUF","uniform float logDepthBufFC;","#ifdef USE_LOGDEPTHBUF_EXT","#extension GL_EXT_frag_depth : enable","varying float vFragDepth;","#endif","#endif","vec2 mBBS( vec2 val, float modulus ) {","val = mod( val, modulus ); // For numerical consistancy.","return mod(val * val, modulus);","}","uniform sampler2D nzw;","const float modulus = 61.0;  // Value used in pregenerated noise texture.","float mnoise ( vec3 pos ) {","float intArg = floor( pos.z );","float fracArg = fract( pos.z );","vec2 hash = mBBS( intArg * 3.0 + vec2( 0, 3 ), modulus );","vec4 g = vec4 (","texture2D( nzw, vec2( pos.x, pos.y + hash.x ) / modulus ).xy,","texture2D( nzw, vec2( pos.x, pos.y + hash.y ) / modulus ).xy",") * 2.0 - 1.0;","return mix(","g.x + g.y * fracArg,","g.z + g.w * ( fracArg - 1.0 ),","smoothstep( 0.0, 1.0, fracArg )",");","}","const int octives = 4;","const float lacunarity = 2.0;","const float gain = 0.5;","float turbulence( vec3 pos ) {","float sum  = 0.0;","float freq = 1.0;","float amp  = 1.0;","for ( int i = 0; i < 4; i++ ) {","sum += abs( mnoise( pos * freq ) ) * amp;","freq *= lacunarity;","amp *= gain;","}","return sum;","}","const float magnatude = 1.3;","uniform float time;","uniform sampler2D fireProfile;","vec4 sampleFire( vec3 loc, vec4 scale ) {","loc.xz = loc.xz * 2.0 - 1.0;","vec2 st = vec2( sqrt( dot( loc.xz, loc.xz ) ), loc.y );","loc.y -= time * scale.w; // Scrolling noise upwards over time.","loc *= scale.xyz; // Scaling noise space.","float offset = sqrt( st.y ) * magnatude * turbulence( loc );","st.y += offset;","if ( st.y > 1.0 ) {","return vec4( 0, 0, 0, 1 );","}","vec4 result = texture2D( fireProfile, st );","if ( st.y < 0.1 ) {","result *= st.y / 0.1;","}","return result;","}","varying vec3 texOut;","void main( void ) {","vec3 color = sampleFire( texOut, vec4( 1.0, 2.0, 1.0, 0.5 ) ).xyz;","gl_FragColor = vec4( color * 1.5, 1 );","#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)","gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;","#endif","}"].join("\n")};function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}var pe=function(){function e(){ce(this,e),this.contents=[],this.sorted=!1}return fe(e,[{key:"sort",value:function(){this.contents.sort(),this.sorted=!0}},{key:"pop",value:function(){return this.sorted||this.sort(),this.contents.pop()}},{key:"top",value:function(){return this.sorted||this.sort(),this.contents[this.contents.length-1]}},{key:"push",value:function(e,t){this.contents.push({object:e,priority:t}),this.sorted=!1}}]),e}(),de=function(){function e(t,n,i,o,a){ce(this,e),this.dom=t,this.camera=n,this.workGroup=i,this.sysObjGroup=o,this.material=a,this.id=r.Math.generateUUID(),this.fireWidth=5,this.fireHeight=10,this.fireDepth=5,this._sliceSpacing=.5,this.widthHalf=.5*this.fireWidth,this.heightHalf=.5*this.fireHeight,this.depthHalf=.5*this.fireDepth,this._viewVector=new r.Vector3,this.cornerNeighbors=[[1,2,4],[0,5,3],[0,3,6],[1,7,2],[0,6,5],[1,4,7],[2,7,4],[3,5,6]],this.incomingEdges=[[-1,2,4,-1,1,-1,-1,-1],[5,-1,-1,0,-1,3,-1,-1],[3,-1,-1,6,-1,-1,0,-1],[-1,7,1,-1,-1,-1,-1,2],[6,-1,-1,-1,-1,0,5,-1],[-1,4,-1,-1,7,-1,-1,1],[-1,-1,7,-1,2,-1,-1,4],[-1,-1,-1,5,-1,6,3,-1]],this._posCorners=[new r.Vector3(-this.widthHalf,0,-this.depthHalf),new r.Vector3(this.widthHalf,0,-this.depthHalf),new r.Vector3(-this.widthHalf,this.fireHeight,-this.depthHalf),new r.Vector3(this.widthHalf,this.fireHeight,-this.depthHalf),new r.Vector3(-this.widthHalf,0,this.depthHalf),new r.Vector3(this.widthHalf,0,this.depthHalf),new r.Vector3(-this.widthHalf,this.fireHeight,this.depthHalf),new r.Vector3(this.widthHalf,this.fireHeight,this.depthHalf)],this._texCorners=[new r.Vector3(0,0,0),new r.Vector3(1,0,0),new r.Vector3(0,1,0),new r.Vector3(1,1,0),new r.Vector3(0,0,1),new r.Vector3(1,0,1),new r.Vector3(0,1,1),new r.Vector3(1,1,1)],this.mouseDownPos=new r.Vector2,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.keyUpBinder=this.onKeyUp.bind(this)}return fe(e,[{key:"createGeometry",value:function(){var e=new Uint16Array(30*(this.fireWidth+this.fireHeight+this.fireDepth)),t=new Float32Array(30*(this.fireWidth+this.fireHeight+this.fireDepth)*3),n=new Float32Array(30*(this.fireWidth+this.fireHeight+this.fireDepth)*3),i=new r.BufferGeometry;i.setIndex(new r.BufferAttribute(e,1)),i.setAttribute("position",new r.BufferAttribute(t,3)),i.setAttribute("tex",new r.BufferAttribute(n,3)),this.mesh=new r.Mesh(i,this.material),this.mesh.updateMatrixWorld(),this.mesh.userData.id=this.id,this.mesh.renderOrder=-2,this.sysObjGroup.add(this.mesh),this.mesh.scale.set(5,5,5);var o=new r.BoxBufferGeometry(4,5,4);o.translate(0,2.5,0);var a=new r.MeshBasicMaterial({color:16711680,wireframe:!0});this.pickBox=new r.Mesh(o,a),this.pickBox.visible=!1,this.pickBox.userData.id=this.id,this.mesh.add(this.pickBox)}},{key:"update",value:function(e){this.mesh&&(this.updateViewVector(),this.slice(),this.updateGeometry())}},{key:"slice",value:function(){var e;this._points=[],this._texCoords=[],this._indexes=[];var t=this._posCorners[0].dot(this._viewVector),n=[t],i=0,o=t,a=t;for(e=1;e<8;e=e+1|0)n[e]=this._posCorners[e].dot(this._viewVector),n[e]>a&&(i=e,a=n[e]),n[e]<o&&(o=n[e]);var s=Math.floor(a/this._sliceSpacing)*this._sliceSpacing,l=[],u=0,c=0,h=new pe,f=function(e,t){if(!(c>=12)){var i={expired:!1,startIndex:e,endIndex:t,deltaPos:new r.Vector3,deltaTex:new r.Vector3,pos:new r.Vector3,tex:new r.Vector3,cur:c},o=n[e]-n[t];if(0!==o){var a=1/o;i.deltaPos.subVectors(this._posCorners[t],this._posCorners[e]).multiplyScalar(a),i.deltaTex.subVectors(this._texCorners[t],this._texCorners[e]).multiplyScalar(a);var u=n[e]-s;i.pos.addVectors(i.deltaPos.clone().multiplyScalar(u),this._posCorners[e]),i.tex.addVectors(i.deltaTex.clone().multiplyScalar(u),this._texCorners[e]),i.deltaPos.multiplyScalar(this._sliceSpacing),i.deltaTex.multiplyScalar(this._sliceSpacing)}return h.push(i,n[t]),l[c++]=i,i}};for(e=0;e<3;e=e+1|0){(w=f.call(this,i,this.cornerNeighbors[i][e])).prev=(e+2)%3,w.next=(e+1)%3}for(var p=0;s>o;){for(;h.top().priority>=s;){var d=h.pop().object;if(!d.expired)if(d.endIndex!==l[d.prev].endIndex&&d.endIndex!==l[d.next].endIndex){d.expired=!0;var m=f.call(this,d.endIndex,this.incomingEdges[d.endIndex][d.startIndex]);m.prev=d.prev,l[d.prev].next=c-1,m.next=c;var v=f.call(this,d.endIndex,this.incomingEdges[d.endIndex][m.endIndex]);v.prev=c-2,v.next=d.next,l[v.next].prev=c-1,u=c-1}else{var g,y;d.endIndex===l[d.prev].endIndex?(g=l[d.prev],y=d):(g=d,y=l[d.next]),g.expired=!0,y.expired=!0,(w=f.call(this,d.endIndex,this.incomingEdges[d.endIndex][g.startIndex])).prev=g.prev,l[w.prev].next=c-1,w.next=y.next,l[w.next].prev=c-1,u=c-1}}var b=u,x=0;do{++x;var w=l[b];this._points.push(w.pos.x,w.pos.y,w.pos.z),this._texCoords.push(w.tex.x,w.tex.y,w.tex.z),w.pos.add(w.deltaPos),w.tex.add(w.deltaTex),b=w.next}while(b!==u);for(e=2;e<x;e=e+1|0)this._indexes.push(p,p+e-1,p+e);p+=x,s-=this._sliceSpacing}}},{key:"updateViewVector",value:function(){var e=new r.Matrix4;e.multiplyMatrices(this.camera.matrixWorldInverse,this.mesh.matrixWorld),this._viewVector.set(-e.elements[2],-e.elements[6],-e.elements[10]).normalize()}},{key:"updateGeometry",value:function(){this.mesh.geometry.index.array.set(this._indexes),this.mesh.geometry.attributes.position.array.set(this._points),this.mesh.geometry.attributes.tex.array.set(this._texCoords),this.mesh.geometry.index.needsUpdate=!0,this.mesh.geometry.attributes.position.needsUpdate=!0,this.mesh.geometry.attributes.tex.needsUpdate=!0}},{key:"setSize",value:function(e){this.mesh&&this.mesh.scale.set(e,e,e)}},{key:"setVisible",value:function(e){this.mesh&&(this.mesh.visible=e)}},{key:"setPosition",value:function(e,t,n){this.mesh&&this.mesh.position.set(e,t,n)}},{key:"getData",value:function(){return this.mesh?{size:this.mesh.scale.x,position:{x:this.mesh.position.x,y:this.mesh.position.y,z:this.mesh.position.z}}:null}},{key:"setData",value:function(e){if(this.mesh){var t=this.mesh.scale.x,n=this.mesh.position.clone();"string"==typeof e&&(e=JSON.parse(e)),e.hasOwnProperty("size")&&(t=e.size),e.hasOwnProperty("position")&&(e.position.hasOwnProperty("x")&&(n.x=e.position.x),e.position.hasOwnProperty("y")&&(n.y=e.position.y),e.position.hasOwnProperty("z")&&(n.z=e.position.z)),this.mesh.scale.set(t,t,t),this.mesh.position.copy(n)}}},{key:"placeByPointer",value:function(){this.mesh&&(this.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.dom.addEventListener("pointerup",this.pointerUpBinder,!1),this.dom.addEventListener("keyup",this.keyUpBinder,!1),this.dom.style.cursor="pointer")}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);if(0===e.button&&t.distanceTo(this.mouseDownPos)<5){var n=new r.Raycaster;t.x=e.offsetX/this.dom.clientWidth*2-1,t.y=-e.offsetY/this.dom.clientHeight*2+1,n.setFromCamera(t,this.camera);var i=n.intersectObjects(this.workGroup.children,!0);if(i&&i.length>0){var o=i[0].point;this.mesh.position.copy(o),this.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.dom.removeEventListener("pointerup",this.pointerUpBinder),this.dom.removeEventListener("keyup",this.keyUpBinder),this.dom.style.cursor="default"}}}},{key:"onKeyUp",value:function(e){var t=e.key.toLowerCase();"esc"!==t&&"escape"!==t||(this.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.dom.removeEventListener("pointerup",this.pointerUpBinder),this.dom.removeEventListener("keyup",this.keyUpBinder),this.dom.style.cursor="default")}}]),e}();function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ve=function(){function e(t,n,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=t,this.camera=n,this.pickObjects=i,this.onDelete=o,this.onCancel=a,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.keyUpBinder=this.onKeyUp.bind(this),this.mouseDownPos=new r.Vector2,this.rayCast=new r.Raycaster,this.delTarget=null}var t,n,i;return t=e,(n=[{key:"on",value:function(){this.pickObjects.forEach((function(e){e.visible=!0})),this.dom.addEventListener("pointerdown",this.pointerDownBinder,!1),this.dom.addEventListener("pointermove",this.pointerMoveBinder,!1),this.dom.addEventListener("pointerup",this.pointerUpBinder,!1),window.addEventListener("keyup",this.keyUpBinder,!1)}},{key:"off",value:function(){this.pickObjects.forEach((function(e){e.visible=!1})),this.dom.removeEventListener("pointerdown",this.pointerDownBinder),this.dom.removeEventListener("pointermove",this.pointerMoveBinder),this.dom.removeEventListener("pointerup",this.pointerUpBinder),window.removeEventListener("keyup",this.keyUpBinder),this.delTarget=null,this.dom.style.cursor="default"}},{key:"onPointerDown",value:function(e){0===e.button&&(this.mouseDownPos.x=e.screenX,this.mouseDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){var t=new r.Vector2;t.x=e.offsetX/this.dom.clientWidth*2-1,t.y=-e.offsetY/this.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.camera);var n=this.rayCast.intersectObjects(this.pickObjects,!0);n&&n.length>0?(this.delTarget=n[0].object.userData.id,this.dom.style.cursor="not-allowed"):(this.delTarget=null,this.dom.style.cursor="default")}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);0===e.button&&t.distanceTo(this.mouseDownPos)<5&&this.delTarget&&(this.onDelete&&this.onDelete(this.delTarget),this.delTarget=null,this.off())}},{key:"onKeyUp",value:function(e){var t=e.key.toLowerCase();"esc"!==t&&"escape"!==t||(this.onCancel&&this.onCancel(),this.off())}}])&&me(t.prototype,n),i&&me(t,i),e}();function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&ye(e.prototype,t),n&&ye(e,n),e}var xe=function(){function e(t){ge(this,e),this.core=t,this.fireElements={},this.deleter=null}return be(e,[{key:"loadFireTexture",value:function(e,t){this.noiseTexPath=e,this.fireTexPath=t,this.material=this.initMaterial(this.noiseTexPath,this.fireTexPath)}},{key:"update",value:function(e){if(this.material){for(var t in this.fireElements)this.fireElements[t].update(e);this.material.uniforms.time.value=e}}},{key:"initMaterial",value:function(e,t){var n,i=new r.TextureLoader;if(n)return n;var o=i.load(e);o.wrapS=r.RepeatWrapping,o.wrapT=r.RepeatWrapping,o.magFilter=r.LinearFilter,o.minFilter=r.LinearFilter;var a=i.load(t);a.wrapS=r.ClampToEdgeWrapping,a.wrapT=r.ClampToEdgeWrapping,a.magFilter=r.LinearFilter,a.minFilter=r.LinearFilter;var s={nzw:{type:"t",value:o},fireProfile:{type:"t",value:a},time:{type:"f",value:1}};return n=new r.RawShaderMaterial({vertexShader:ue.vertexShader,fragmentShader:ue.fragmentShader,uniforms:s,side:r.DoubleSide,blending:r.AdditiveBlending,transparent:!0,depthTest:!0,depthWrite:!1})}},{key:"setSize",value:function(e,t){this.fireElements.hasOwnProperty(e)&&this.fireElements[e].setSize(t)}},{key:"setSizeAll",value:function(e){for(var t in this.fireElements)this.fireElements[t].setSize(e)}},{key:"setVisible",value:function(e,t){this.fireElements.hasOwnProperty(e)&&this.fireElements[e].setVisible(t)}},{key:"setVisibleAll",value:function(e){for(var t in this.fireElements)this.fireElements[t].setVisible(e)}},{key:"setPosition",value:function(e,t,n,r){this.fireElements.hasOwnProperty(e)&&this.fireElements[e].setPosition(t,n,r)}},{key:"getData",value:function(){var e={};for(var t in this.fireElements)e[t]=this.fireElements[t].getData();return e}},{key:"setData",value:function(e){for(var t in"string"==typeof e&&(e=JSON.parse(e)),e){var n=this.fireElements[t];n||((n=new de(this.core.dom,this.core.getCamera(),this.core.workObjGroup,this.core.sysObjGroup,this.material)).id=t,n.createGeometry(),this.fireElements[t]=n),n.setData(e[t])}}},{key:"placeByPointer",value:function(e){this.fireElements.hasOwnProperty(e)&&this.fireElements[e].placeByPointer()}},{key:"createFire",value:function(e){if(!this.fireElements.hasOwnProperty(e)){var t=new de(this.core.dom,this.core.getCamera(),this.core.workObjGroup,this.core.sysObjGroup,this.material);t.id=e,t.createGeometry(),this.fireElements[e]=t}}},{key:"deleteById",value:function(e){this.fireElements.hasOwnProperty(e)&&(this.core.sysObjGroup.remove(this.fireElements[e].mesh),this.fireElements[e].mesh.geometry.dispose(),this.fireElements[e].pickBox.geometry.dispose(),this.fireElements[e].pickBox.material.dispose(),delete this.fireElements[e])}},{key:"clear",value:function(){for(var e in this.fireElements)this.deleteById(e)}},{key:"getPickBoxes",value:function(){var e=[];for(var t in this.fireElements)e.push(this.fireElements[t].pickBox);return e}},{key:"deleteByPointer",value:function(){var e=this;this.deleter=new ve(this.core.dom,this.core.getCamera(),this.getPickBoxes(),(function(t){e.deleteById(t)}),(function(){e.deleter=null})),this.deleter.on()}}]),e}(),we=function(e,t){r.Mesh.call(this,e);var n=this,i=void 0!==(t=t||{}).textureWidth?t.textureWidth:512,o=void 0!==t.textureHeight?t.textureHeight:512,a=void 0!==t.clipBias?t.clipBias:0,s=void 0!==t.alpha?t.alpha:1,l=void 0!==t.time?t.time:0,u=void 0!==t.waterNormals?t.waterNormals:null,c=void 0!==t.sunDirection?t.sunDirection:new r.Vector3(.70707,.70707,0),h=new r.Color(void 0!==t.sunColor?t.sunColor:16777215),f=new r.Color(void 0!==t.waterColor?t.waterColor:8355711),p=void 0!==t.eye?t.eye:new r.Vector3(0,0,0),d=void 0!==t.distortionScale?t.distortionScale:20,m=void 0!==t.side?t.side:r.FrontSide,v=void 0!==t.fog&&t.fog,g=new r.Plane,y=new r.Vector3,b=new r.Vector3,x=new r.Vector3,w=new r.Matrix4,q=new r.Vector3(0,0,-1),_=new r.Vector4,S=new r.Vector3,M=new r.Vector3,E=new r.Vector4,T=new r.Matrix4,P=new r.PerspectiveCamera,A={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat,stencilBuffer:!1},O=new r.WebGLRenderTarget(i,o,A);r.Math.isPowerOfTwo(i)&&r.Math.isPowerOfTwo(o)||(O.texture.generateMipmaps=!1);var L={uniforms:r.UniformsUtils.merge([r.UniformsLib.fog,r.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new r.Matrix4},sunColor:{value:new r.Color(8355711)},sunDirection:{value:new r.Vector3(.70707,.70707,0)},eye:{value:new r.Vector3},waterColor:{value:new r.Color(5592405)}}]),vertexShader:["uniform mat4 textureMatrix;","uniform float time;","varying vec4 mirrorCoord;","varying vec4 worldPosition;",r.ShaderChunk.fog_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,"void main() {","\tmirrorCoord = modelMatrix * vec4( position, 1.0 );","\tworldPosition = mirrorCoord.xyzw;","\tmirrorCoord = textureMatrix * mirrorCoord;","\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",r.ShaderChunk.fog_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D mirrorSampler;","uniform float alpha;","uniform float time;","uniform float size;","uniform float distortionScale;","uniform sampler2D normalSampler;","uniform vec3 sunColor;","uniform vec3 sunDirection;","uniform vec3 eye;","uniform vec3 waterColor;","varying vec4 mirrorCoord;","varying vec4 worldPosition;","vec4 getNoise( vec2 uv ) {","\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);","\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );","\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );","\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );","\tvec4 noise = texture2D( normalSampler, uv0 ) +","\t\ttexture2D( normalSampler, uv1 ) +","\t\ttexture2D( normalSampler, uv2 ) +","\t\ttexture2D( normalSampler, uv3 );","\treturn noise * 0.5 - 1.0;","}","void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {","\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );","\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );","\tspecularColor += pow( direction, shiny ) * sunColor * spec;","\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;","}",r.ShaderChunk.common,r.ShaderChunk.packing,r.ShaderChunk.bsdfs,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.lights_pars_begin,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.shadowmask_pars_fragment,"void main() {","\tvec4 noise = getNoise( worldPosition.xz * size );","\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );","\tvec3 diffuseLight = vec3(0.0);","\tvec3 specularLight = vec3(0.0);","\tvec3 worldToEye = eye-worldPosition.xyz;","\tvec3 eyeDirection = normalize( worldToEye );","\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );","\tfloat distance = length(worldToEye);","\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;","\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );","\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );","\tfloat rf0 = 0.3;","\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;","\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);","\tvec3 outgoingLight = albedo;","\tgl_FragColor = vec4( outgoingLight, alpha );",r.ShaderChunk.tonemapping_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},C=new r.ShaderMaterial({fragmentShader:L.fragmentShader,vertexShader:L.vertexShader,uniforms:r.UniformsUtils.clone(L.uniforms),transparent:!0,lights:!0,side:m,fog:v});C.uniforms.mirrorSampler.value=O.texture,C.uniforms.textureMatrix.value=T,C.uniforms.alpha.value=s,C.uniforms.time.value=l,C.uniforms.normalSampler.value=u,C.uniforms.sunColor.value=h,C.uniforms.waterColor.value=f,C.uniforms.sunDirection.value=c,C.uniforms.distortionScale.value=d,C.uniforms.eye.value=p,n.material=C,n.onBeforeRender=function(e,t,r){if(b.setFromMatrixPosition(n.matrixWorld),x.setFromMatrixPosition(r.matrixWorld),w.extractRotation(n.matrixWorld),y.set(0,0,1),y.applyMatrix4(w),S.subVectors(b,x),!(S.dot(y)>0)){S.reflect(y).negate(),S.add(b),w.extractRotation(r.matrixWorld),q.set(0,0,-1),q.applyMatrix4(w),q.add(x),M.subVectors(b,q),M.reflect(y).negate(),M.add(b),P.position.copy(S),P.up.set(0,1,0),P.up.applyMatrix4(w),P.up.reflect(y),P.lookAt(M),P.far=r.far,P.updateMatrixWorld(),P.projectionMatrix.copy(r.projectionMatrix),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(P.projectionMatrix),T.multiply(P.matrixWorldInverse),g.setFromNormalAndCoplanarPoint(y,b),g.applyMatrix4(P.matrixWorldInverse),_.set(g.normal.x,g.normal.y,g.normal.z,g.constant);var i=P.projectionMatrix;E.x=(Math.sign(_.x)+i.elements[8])/i.elements[0],E.y=(Math.sign(_.y)+i.elements[9])/i.elements[5],E.z=-1,E.w=(1+i.elements[10])/i.elements[14],_.multiplyScalar(2/_.dot(E)),i.elements[2]=_.x,i.elements[6]=_.y,i.elements[10]=_.z+1-a,i.elements[14]=_.w,p.setFromMatrixPosition(r.matrixWorld);var o=e.getRenderTarget(),s=e.vr.enabled,l=e.shadowMap.autoUpdate;n.visible=!1,e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(O),e.clear(),e.render(t,P),n.visible=!0,e.vr.enabled=s,e.shadowMap.autoUpdate=l,e.setRenderTarget(o)}}};(we.prototype=Object.create(r.Mesh.prototype)).constructor=we;var qe=function e(){var t=e.SkyShader,n=new r.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r.UniformsUtils.clone(t.uniforms),side:r.BackSide});r.Mesh.call(this,new r.BoxBufferGeometry(1,1,1),n)};function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}qe.prototype=Object.create(r.Mesh.prototype),qe.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new r.Vector3},up:{value:new r.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")};var Se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.oceanSize=1e4,this.sun=new r.Vector3,this.sunParameter={distance:1400,inclination:.085,azimuth:.0817},this.waterNormalTexture=null,this.gizmo=null,this.control=null}var t,n,o;return t=e,(n=[{key:"loadWaterTexture",value:function(e,t){var n=this;(new r.TextureLoader).load(e,(function(e){e.wrapS=e.wrapT=r.RepeatWrapping,n.waterNormalTexture=e,t&&t()}),null,(function(e){console.error(e)}))}},{key:"updateSun",value:function(e,t){var n=Math.PI*(this.sunParameter.inclination-.5),r=2*Math.PI*(this.sunParameter.azimuth-.5);e.position.x=this.sunParameter.distance*Math.cos(r),e.position.y=this.sunParameter.distance*Math.sin(r)*Math.sin(n),e.position.z=this.sunParameter.distance*Math.sin(r)*Math.cos(n),this.sky&&(this.sky.material.uniforms.sunPosition.value=e.position.copy(e.position)),this.water&&this.water.material.uniforms.sunDirection.value.copy(e.position).normalize(),this.cubeCamera&&this.cubeCamera.update(t,this.sky)}},{key:"on",value:function(e,t,n){if(this.waterNormalTexture){if(this.waterGeometry||(this.waterGeometry=new r.PlaneBufferGeometry(this.oceanSize,this.oceanSize)),this.water||(this.water=new we(this.waterGeometry,{textureWidth:256,textureHeight:256,waterNormals:this.waterNormalTexture,alpha:1,sunDirection:new r.Vector3,sunColor:16777215,waterColor:7695,distortionScale:2,fog:void 0!==e.fog,size:this.oceanSize}),this.water.rotation.x=-.5*Math.PI,this.water.frustumCulled=!1,this.water.material.uniforms.size.value=10,this.water.material.polygonOffset=!0,this.water.material.polygonOffsetFactor=10,this.water.renderOrder=10),e.add(this.water),!this.sky){this.sky=new qe,this.sky.scale.setScalar(this.oceanSize);var i=this.sky.material.uniforms;i.turbidity.value=10,i.rayleigh.value=2,i.luminance.value=1,i.mieCoefficient.value=.005,i.mieDirectionalG.value=.8}e.add(this.sky),this.cubeCamera||(this.cubeCamera=new r.CubeCamera(.1,2,512),this.cubeCamera.renderTarget.texture.generateMipmaps=!0,this.cubeCamera.renderTarget.texture.minFilter=r.LinearMipmapLinearFilter,e.background=this.cubeCamera.renderTarget),this.updateSun(t,n)}}},{key:"off",value:function(e){this.water&&e.remove(this.water),this.sky&&e.remove(this.sky)}},{key:"editOn",value:function(e,t,n,r){this.gizmo||(this.control=e,this.gizmo=new i.TransformControls(t,n),this.gizmo.addEventListener("dragging-changed",this.onGizmoDragChange.bind(this)),this.gizmo.setSpace("world"),this.gizmo.setMode("translate"),this.gizmo.showX=!1,this.gizmo.showZ=!1),this.gizmo.attach(this.water),r.add(this.gizmo)}},{key:"editOff",value:function(e){this.gizmo&&(this.gizmo.detach(),e.remove(this.gizmo))}},{key:"onGizmoDragChange",value:function(e){this.control.enabled=!e.value}},{key:"update",value:function(e){this.water&&(this.water.material.uniforms.time.value+=1/60)}},{key:"getPosition",value:function(){return this.water?{x:this.water.position.x,y:this.water.position.y,z:this.water.position.z}:null}},{key:"setPosition",value:function(e,t,n){this.water.position.x=e,this.water.position.y=t,this.water.position.z=n}}])&&_e(t.prototype,n),o&&_e(t,o),e}();function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.keyStates={},this.onKeyDownBinder=this.onKeyDown.bind(this),this.onKeyUpBinder=this.onKeyUp.bind(this),this.spaceElements=[],this.editTarget=null,this.box2F=this.addBox(),this.box2F.position.set(-158.78850000008242,51.683999999839585,-496.4860000012777),this.box2F.rotation.set(0,-.7846349999999802,0,"XYZ"),this.box2F.scale.set(315.1211500001773,27.74254999993063,75.50409999988915),this.box2F.visible=!1}var t,n,i;return t=e,(n=[{key:"on",value:function(){window.addEventListener("keydown",this.onKeyDownBinder,!1),window.addEventListener("keyup",this.onKeyUpBinder,!1)}},{key:"off",value:function(){window.removeEventListener("keydown",this.onKeyDownBinder),window.removeEventListener("keyup",this.onKeyUpBinder),this.editTarget=null}},{key:"update",value:function(e){this.editTarget&&(this.keyStates.ArrowUp?this.editTarget.position.z+=100*e:this.keyStates.ArrowDown&&(this.editTarget.position.z-=100*e),this.keyStates.ArrowLeft?this.editTarget.position.x-=100*e:this.keyStates.ArrowRight&&(this.editTarget.position.x+=100*e),this.keyStates.PageUp?this.editTarget.position.y+=100*e:this.keyStates.PageDown&&(this.editTarget.position.y-=100*e),this.keyStates[1]?this.editTarget.scale.x-=10*e:this.keyStates[4]&&(this.editTarget.scale.x+=10*e),this.keyStates[2]?this.editTarget.scale.y-=10*e:this.keyStates[5]&&(this.editTarget.scale.y+=10*e),this.keyStates[3]?this.editTarget.scale.z-=10*e:this.keyStates[6]&&(this.editTarget.scale.z+=10*e),this.keyStates[7]?this.editTarget.rotation.y-=1*e:this.keyStates[8]&&(this.editTarget.rotation.y+=1*e))}},{key:"onKeyDown",value:function(e){this.keyStates[e.key]=!0}},{key:"onKeyUp",value:function(e){this.keyStates[e.key]=!1,"q"===e.key?this.addBox():"p"===e.key?this.editTarget&&(console.log("position",this.editTarget.position),console.log("rotation",this.editTarget.rotation),console.log("scale",this.editTarget.scale)):"t"===e.key&&this.flash("2f",16777215,16711680,.5,.5,700)}},{key:"addBox",value:function(){var e=new r.BoxBufferGeometry(1,1,1),t=new r.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.5}),n=new r.Mesh(e,t);this.scene.add(n),n.scale.setScalar(100);var i=new r.EdgesGeometry(e),o=new r.LineSegments(i,new r.LineBasicMaterial({color:0}));return n.add(o),this.spaceElements.push(n),this.editTarget=n,n}},{key:"flash",value:function(e,t,n,i,o,a){var s=this;if(this.tweenInstance&&this.tweenInstance.stop(),"2f"===e.toLowerCase()){var l={startColor:new r.Color(t),endColor:new r.Color(n),startAlpha:new r.Color(i,i,i),endAlpha:new r.Color(o,o,o),ratio:0};this.tweenInstance=new d.a.Tween(l).to({ratio:1},a).repeat(1/0).yoyo(!0).easing(d.a.Easing.Cubic.InOut).onUpdate((function(e){s.box2F.material.color=new r.Color(l.startColor).lerp(l.endColor,l.ratio),s.box2F.material.opacity=new r.Color(l.startAlpha).lerp(l.endAlpha,l.ratio).r})).start()}}}])&&Me(t.prototype,n),i&&Me(t,i),e}(),Te=n(190),Pe=n(20),Ae=n(130),Oe=n(66),Le=n(99),Ce=n(17),De=n(55),ke=function(e,t,n,i){this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==i?i:[],this.visibleEdgeColor=new r.Color(1,1,1),this.hiddenEdgeColor=new r.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,Ce.a.call(this),this.resolution=void 0!==e?new r.Vector2(e.x,e.y):new r.Vector2(256,256);var o={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat},a=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new r.MeshBasicMaterial({color:16777215}),this.maskBufferMaterial.side=r.DoubleSide,this.renderTargetMaskBuffer=new r.WebGLRenderTarget(this.resolution.x,this.resolution.y,o),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new r.MeshDepthMaterial,this.depthMaterial.side=r.DoubleSide,this.depthMaterial.depthPacking=r.RGBADepthPacking,this.depthMaterial.blending=r.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=r.DoubleSide,this.prepareMaskMaterial.fragmentShader=function(e,t){var n=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new r.WebGLRenderTarget(this.resolution.x,this.resolution.y,o),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new r.WebGLRenderTarget(a,s,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new r.WebGLRenderTarget(a,s,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new r.WebGLRenderTarget(Math.round(a/2),Math.round(s/2),o),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new r.WebGLRenderTarget(a,s,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new r.WebGLRenderTarget(Math.round(a/2),Math.round(s/2),o),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new r.Vector2(a,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new r.Vector2(Math.round(a/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===De.a&&console.error("OutlinePass relies on CopyShader");var l=De.a;this.copyUniforms=r.UniformsUtils.clone(l.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new r.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:r.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new r.Color,this.oldClearAlpha=1,this.fsQuad=new Ce.a.FullScreenQuad(null),this.tempPulseColor1=new r.Color,this.tempPulseColor2=new r.Color,this.textureMatrix=new r.Matrix4};ke.prototype=Object.assign(Object.create(Ce.a.prototype),{constructor:ke,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var n=Math.round(e/this.downSampleRatio),i=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,i),this.renderTargetBlurBuffer1.setSize(n,i),this.renderTargetEdgeBuffer1.setSize(n,i),this.separableBlurMaterial1.uniforms.texSize.value=new r.Vector2(n,i),n=Math.round(n/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(n,i),this.renderTargetEdgeBuffer2.setSize(n,i),this.separableBlurMaterial2.uniforms.texSize.value=new r.Vector2(n,i)},changeVisibilityOfSelectedObjects:function(e){function t(t){t.isMesh&&(e?(t.visible=t.userData.oldVisible,delete t.userData.oldVisible):(t.userData.oldVisible=t.visible,t.visible=e))}for(var n=0;n<this.selectedObjects.length;n++){this.selectedObjects[n].traverse(t)}},changeVisibilityOfNonSelectedObjects:function(e){var t=[];function n(e){e.isMesh&&t.push(e)}for(var r=0;r<this.selectedObjects.length;r++){this.selectedObjects[r].traverse(n)}this.renderScene.traverse((function(n){if(n.isMesh||n.isLine||n.isSprite){for(var r=!1,i=0;i<t.length;i++){if(t[i].id===n.id){r=!0;break}}if(!r){var o=n.visible;e&&!n.bVisible||(n.visible=e),n.bVisible=o}}}))},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(e,t,n,i,o){if(this.selectedObjects.length>0){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,o&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var s=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new r.Vector2(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.renderScene.background=s,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var l=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new r.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=ke.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=ke.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=ke.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=ke.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))},getPrepareMaskMaterial:function(){return new r.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new r.Vector2(.5,.5)},textureMatrix:{value:new r.Matrix4}},vertexShader:["varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","\tvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tprojTexCoord = textureMatrix * worldPosition;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join("\n")})},getEdgeDetectionMaterial:function(){return new r.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},visibleEdgeColor:{value:new r.Vector3(1,1,1)},hiddenEdgeColor:{value:new r.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new r.ShaderMaterial({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},direction:{value:new r.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new r.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0})}}),ke.BlurDirectionX=new r.Vector2(1,0),ke.BlurDirectionY=new r.Vector2(0,1);var Ie={uniforms:{tDiffuse:{value:null},resolution:{value:new r.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")},Re=n(63),Fe=(n(136),n(25)),Ne=n(49),je=n(12),ze=n(81),Be=n(192),Ue=n(82),Ve=n(57),Ge=n(131),He=n(24),We=n(132),Xe=n(56),Ye=n(263),Qe=function(e,t){var n,i,o,a,s;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),p=f.NONE},this.update=(n=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),o=i.clone().inverse(),a=new r.Vector3,s=new r.Quaternion,function(){var e=l.object.position;return n.copy(e).sub(l.target),n.applyQuaternion(i),m.setFromVector3(n),l.autoRotate&&p===f.NONE&&O(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(m.theta+=v.theta*l.dampingFactor,m.phi+=v.phi*l.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi),m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),!0===l.enableDamping?l.target.addScaledVector(y,l.dampingFactor):l.target.add(y),n.setFromSpherical(m),n.applyQuaternion(o),e.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,y.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),y.set(0,0,0)),g=1,!!(b||a.distanceToSquared(l.object.position)>d||8*(1-s.dot(l.object.quaternion))>d)&&(l.dispatchEvent(u),a.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",ee,!1),l.domElement.removeEventListener("mousedown",W,!1),l.domElement.removeEventListener("wheel",Q,!1),l.domElement.removeEventListener("touchstart",K,!1),l.domElement.removeEventListener("touchend",$,!1),l.domElement.removeEventListener("touchmove",J,!1),document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",Y,!1),l.domElement.removeEventListener("keydown",Z,!1)};var l=this,u={type:"change"},c={type:"start"},h={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=f.NONE,d=1e-6,m=new r.Spherical,v=new r.Spherical,g=1,y=new r.Vector3,b=!1,x=new r.Vector2,w=new r.Vector2,q=new r.Vector2,_=new r.Vector2,S=new r.Vector2,M=new r.Vector2,E=new r.Vector2,T=new r.Vector2,P=new r.Vector2;function A(){return Math.pow(.95,l.zoomSpeed)}function O(e){v.theta-=e}function L(e){v.phi-=e}var C,D=(C=new r.Vector3,function(e,t){C.setFromMatrixColumn(t,0),C.multiplyScalar(-e),y.add(C)}),k=function(){var e=new r.Vector3;return function(t,n){!0===l.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),I=function(){var e=new r.Vector3;return function(t,n){var r=l.domElement;if(l.object.isPerspectiveCamera){var i=l.object.position;e.copy(i).sub(l.target);var o=e.length();o*=Math.tan(l.object.fov/2*Math.PI/180),D(2*t*o/r.clientHeight,l.object.matrix),k(2*n*o/r.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(D(t*(l.object.right-l.object.left)/l.object.zoom/r.clientWidth,l.object.matrix),k(n*(l.object.top-l.object.bottom)/l.object.zoom/r.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function R(e){l.object.isPerspectiveCamera?g/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function F(e){l.object.isPerspectiveCamera?g*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function N(e){x.set(e.clientX,e.clientY)}function j(e){_.set(e.clientX,e.clientY)}function z(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}}function B(e){if(1==e.touches.length)_.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(t,n)}}function U(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);E.set(0,r)}function V(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}q.subVectors(w,x).multiplyScalar(l.rotateSpeed);var r=l.domElement;O(2*Math.PI*q.x/r.clientHeight),L(2*Math.PI*q.y/r.clientHeight),x.copy(w)}function G(e){if(1==e.touches.length)S.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);S.set(t,n)}M.subVectors(S,_).multiplyScalar(l.panSpeed),I(M.x,M.y),_.copy(S)}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);T.set(0,r),P.set(0,Math.pow(T.y/E.y,l.zoomSpeed)),R(P.y),E.copy(T)}function W(e){if(!1!==l.enabled){switch(e.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),e.button){case 0:switch(l.mouseButtons.LEFT){case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enablePan)return;j(e),p=f.PAN}else{if(!1===l.enableRotate)return;N(e),p=f.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enableRotate)return;N(e),p=f.ROTATE}else{if(!1===l.enablePan)return;j(e),p=f.PAN}break;default:p=f.NONE}break;case 1:switch(l.mouseButtons.MIDDLE){case r.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(e){E.set(e.clientX,e.clientY)}(e),p=f.DOLLY;break;default:p=f.NONE}break;case 2:switch(l.mouseButtons.RIGHT){case r.MOUSE.ROTATE:if(!1===l.enableRotate)return;N(e),p=f.ROTATE;break;case r.MOUSE.PAN:if(!1===l.enablePan)return;j(e),p=f.PAN;break;default:p=f.NONE}}p!==f.NONE&&(document.addEventListener("mousemove",X,!1),document.addEventListener("mouseup",Y,!1),l.dispatchEvent(c))}}function X(e){if(!1!==l.enabled)switch(e.preventDefault(),p){case f.ROTATE:if(!1===l.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),q.subVectors(w,x).multiplyScalar(l.rotateSpeed);var t=l.domElement;O(2*Math.PI*q.x/t.clientHeight),L(2*Math.PI*q.y/t.clientHeight),x.copy(w),l.update()}(e);break;case f.DOLLY:if(!1===l.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),P.subVectors(T,E),P.y>0?R(A()):P.y<0&&F(A()),E.copy(T),l.update()}(e);break;case f.PAN:if(!1===l.enablePan)return;!function(e){S.set(e.clientX,e.clientY),M.subVectors(S,_).multiplyScalar(l.panSpeed),I(M.x,M.y),_.copy(S),l.update()}(e)}}function Y(e){!1!==l.enabled&&(document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",Y,!1),l.dispatchEvent(h),p=f.NONE)}function Q(e){!1===l.enabled||!1===l.enableZoom||p!==f.NONE&&p!==f.ROTATE||(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(c),function(e){e.deltaY<0?F(A()):e.deltaY>0&&R(A()),l.update()}(e),l.dispatchEvent(h))}function Z(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){var t=!1;switch(e.keyCode){case l.keys.UP:I(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:I(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:I(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:I(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function K(e){if(!1!==l.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(l.touches.ONE){case r.TOUCH.ROTATE:if(!1===l.enableRotate)return;z(e),p=f.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===l.enablePan)return;B(e),p=f.TOUCH_PAN;break;default:p=f.NONE}break;case 2:switch(l.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&U(e),l.enablePan&&B(e)}(e),p=f.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&U(e),l.enableRotate&&z(e)}(e),p=f.TOUCH_DOLLY_ROTATE;break;default:p=f.NONE}break;default:p=f.NONE}p!==f.NONE&&l.dispatchEvent(c)}}function J(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),p){case f.TOUCH_ROTATE:if(!1===l.enableRotate)return;V(e),l.update();break;case f.TOUCH_PAN:if(!1===l.enablePan)return;G(e),l.update();break;case f.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&H(e),l.enablePan&&G(e)}(e),l.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&H(e),l.enableRotate&&V(e)}(e),l.update();break;default:p=f.NONE}}function $(e){!1!==l.enabled&&(l.dispatchEvent(h),p=f.NONE)}function ee(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",ee,!1),l.domElement.addEventListener("mousedown",W,!1),l.domElement.addEventListener("wheel",Q,!1),l.domElement.addEventListener("touchstart",K,!1),l.domElement.addEventListener("touchend",$,!1),l.domElement.addEventListener("touchmove",J,!1),l.domElement.addEventListener("keydown",Z,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.update()};(Qe.prototype=Object.create(r.EventDispatcher.prototype)).constructor=Qe;var Ze=function(e,t){Qe.call(this,e,t),this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE};function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(Ze.prototype=Object.create(r.EventDispatcher.prototype)).constructor=Ze;var Je=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.targetModelName=n,this.targetModel=null,this.core.workObjGroup.traverse((function(e){e.name===r.targetModelName&&(r.targetModel=e)}))}var t,n,i;return t=e,(n=[{key:"attach",value:function(e){if(this.targetDom=e,this.renderer||(this.renderer=new r.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.targetDom.clientWidth,this.targetDom.clientHeight),this.renderer.gammaOutput=!0,this.renderer.gammaInput=!0,this.renderer.setClearColor(new r.Color(.4,.4,.4),1)),this.camera||(this.camera=new r.PerspectiveCamera(70,this.targetDom.clientWidth/this.targetDom.clientHeight,.1,5e4),this.camera.position.set(0,50,50),this.camera.lookAt(0,0,0)),!this.control&&(this.control=new Qe(this.camera,this.targetDom),this.control.screenSpacePanning=!0,this.control.rotateSpeed=.25,this.control.enableKeys=!1,this.control.enablePan=!1,this.targetModel)){var t=(new r.Box3).setFromObject(this.targetModel),n=new r.Sphere;t.getBoundingSphere(n);var i=n.center.clone();i.addScaledVector(new r.Vector3(0,1,1),n.radius),this.camera.position.copy(i),this.camera.lookAt(n.center),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(!0),this.control.target.copy(n.center),this.control.update()}this.scene||(this.scene=new r.Scene,this.scene.name="SubViewScene",this.ambientLight=new r.AmbientLight(4210752),this.scene.add(this.ambientLight),this.dirLight=new r.DirectionalLight(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.scene.add(this.dirLight),this.hemiLight=new r.HemisphereLight(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.scene.add(this.hemiLight)),this.targetDom&&this.targetDom.appendChild(this.renderer.domElement)}},{key:"render",value:function(e){this.renderer&&this.camera&&this.scene&&(this.scene.attach(this.targetModel),this.renderer.render(this.scene,this.camera),this.core.workObjGroup.attach(this.targetModel))}},{key:"resize",value:function(){this.targetDom&&this.renderer&&this.camera&&this.renderer.setSize(this.targetDom.clientWidth,this.targetDom.clientHeight)}}])&&Ke(t.prototype,n),i&&Ke(t,i),e}(),$e=n(100),et=n(62),tt=n(133),nt=n(102),rt=n(101),it=n(38),ot=n(35),at=n(135);function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.uniforms={diffuseMap:{value:null},pointMultiplier:{value:this.core.dom.clientHeight/(2*Math.tan(30*Math.PI/180))}},this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:"\nuniform float pointMultiplier;\n\nattribute float size;\nattribute float angle;\nattribute vec4 colour;\n\nvarying vec4 vColor;\nvarying vec2 vAngle;\n\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n    gl_Position = projectionMatrix * mvPosition;\n    gl_PointSize = size * pointMultiplier / gl_Position.w;\n\n    vAngle = vec2(cos(angle), sin(angle));\n    vColor = colour;\n}\n",fragmentShader:"\nuniform sampler2D diffuseMap;\n\nvarying vec4 vColor;\nvarying vec2 vAngle;\n\nvoid main() {\n    vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n    gl_FragColor = texture2D(diffuseMap, coords) * vColor;    \n}\n",depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),this.camera=this.core.getCamera(),this.particles=[],this.geometry=new r.BufferGeometry,this.geometry.setAttribute("position",new r.Float32BufferAttribute([],3)),this.geometry.setAttribute("size",new r.Float32BufferAttribute([],1)),this.geometry.setAttribute("colour",new r.Float32BufferAttribute([],4)),this.geometry.setAttribute("angle",new r.Float32BufferAttribute([],1)),this.points=new r.Points(this.geometry,this.material),this.points.frustumCulled=!1,this.core.sysObjGroup.add(this.points),this.updateGeometry(),this.rayCast=new r.Raycaster,this.mouseLeftDownPos=new r.Vector2,this.onSmokePointerDownBinder=this.onSmokePointerDown.bind(this),this.onSmokePointerMoveBinder=this.onSmokePointerMove.bind(this),this.onSmokePointerUpBinder=this.onSmokePointerUp.bind(this),this.pointerPlane=new r.Plane;var n=new r.TorusBufferGeometry(1,.25,16,16);n.rotateX(-.5*Math.PI),this.pointer=new r.Mesh(n,new r.MeshStandardMaterial({color:"red"})),this.pointer.scale.setScalar(10),this.core.sysObjGroup.add(this.pointer),this.pointer.visible=!1,this.bIsReady=!1,this.bPause=!0,this.velocityRatio=1,this.density=2}var t,n,i;return t=e,(n=[{key:"loadSmokeTexture",value:function(e){this.uniforms.diffuseMap.value=(new r.TextureLoader).load(e),this.bIsReady=!0}},{key:"updateGeometry",value:function(){var e=[],t=[],n=[],i=[],o=!0,a=!1,s=void 0;try{for(var l,u=this.particles[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;e.push(c.position.x,c.position.y,c.position.z),n.push(c.color.r,c.color.g,c.color.b,c.alpha),t.push(c.currentSize),i.push(c.rotation)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}this.geometry.setAttribute("position",new r.Float32BufferAttribute(e,3)),this.geometry.setAttribute("size",new r.Float32BufferAttribute(t,1)),this.geometry.setAttribute("colour",new r.Float32BufferAttribute(n,4)),this.geometry.setAttribute("angle",new r.Float32BufferAttribute(i,3)),this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.size.needsUpdate=!0,this.geometry.attributes.colour.needsUpdate=!0,this.geometry.attributes.angle.needsUpdate=!0}},{key:"addParticles",value:function(e){var t=this.density;this.elapsedTime||(this.elapsedTime=0),this.elapsedTime+=e;var n=Math.floor(this.elapsedTime*t);this.elapsedTime-=n/t;for(var i=0;i<t;i++){var o=r.Math.randFloat(50,100),a=new r.Vector3(0,1,0);a.applyMatrix4((new r.Matrix4).makeRotationX(Math.PI*r.Math.randFloatSpread(.2))),a.applyMatrix4((new r.Matrix4).makeRotationY(Math.PI*r.Math.randFloatSpread(2))),this.particles.push({position:new r.Vector3(r.Math.randFloatSpread(3),0,r.Math.randFloatSpread(3)),rotation:0,currentSize:.5*o,maxSize:o,color:new r.Color,alpha:1,life:180,maxLife:180,velocity:a.multiplyScalar(30),isTop:!1,isBoundaryLeft:!1,isBoundaryRight:!1,isBoundaryFront:!1,isBoundaryBack:!1})}}},{key:"updateParticles",value:function(e){var t=this,n=(new r.Box3).setFromObject(this.core.workObjGroup),i=new r.Vector3,o=new r.Vector3;n.getCenter(i),n.getSize(o);var a=!0,s=!1,l=void 0;try{for(var u,c=this.particles[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)u.value.life-=e}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}this.particles=this.particles.filter((function(e){return e.life>0}));var h=!0,f=!1,p=void 0;try{for(var d,m=this.particles[Symbol.iterator]();!(h=(d=m.next()).done);h=!0){var v=d.value,g=1-v.life/v.maxLife;v.position.add(v.velocity.clone().multiplyScalar(e*this.velocityRatio)),v.currentSize=v.maxSize*g,v.currentSize=r.Math.clamp(v.currentSize,50,v.maxSize);var y=v.position.clone();y.applyMatrix4(this.points.matrixWorld),y.y>=n.max.y&&!v.isTop&&(v.velocity.x=r.Math.randFloatSpread(1),v.velocity.y=0,v.velocity.z=r.Math.randFloatSpread(1),v.velocity.multiplyScalar(r.Math.randFloat(15,20)),v.isTop=!0),y.x<=n.min.x&&!v.isBoundaryLeft&&(v.velocity.copy(v.velocity.projectOnPlane(new r.Vector3(1,0,0))),v.isBoundaryLeft=!0),y.x>=n.max.x&&!v.isBoundaryRight&&(v.velocity.copy(v.velocity.projectOnPlane(new r.Vector3(-1,0,0))),v.isBoundaryRight=!0),y.z<=n.min.z&&!v.isBoundaryBack&&(v.velocity.copy(v.velocity.projectOnPlane(new r.Vector3(0,0,1))),v.isBoundaryBack=!0),y.z>=n.max.z&&!v.isBoundaryFront&&(v.velocity.copy(v.velocity.projectOnPlane(new r.Vector3(0,0,-1))),v.isBoundaryFront=!0)}}catch(e){f=!0,p=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw p}}this.particles.sort((function(e,n){var r=t.camera.position.distanceTo(e.position),i=t.camera.position.distanceTo(n.position);return r>i?-1:r<i?1:0}))}},{key:"step",value:function(e){this.bPause||(this.addParticles(e),this.updateParticles(e)),this.updateGeometry()}},{key:"setSmokePosition",value:function(){this.core.dom.addEventListener("pointerdown",this.onSmokePointerDownBinder,!1),this.core.dom.addEventListener("pointermove",this.onSmokePointerMoveBinder,!1),this.core.dom.addEventListener("pointerup",this.onSmokePointerUpBinder,!1),this.pointer.visible=!0;var e=(new r.Box3).setFromObject(this.core.workObjGroup),t=new r.Vector3;e.getCenter(t),this.pointerPlane=(new r.Plane).setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),new r.Vector3(t.x,e.min.y,t.z))}},{key:"onSmokePointerDown",value:function(e){0===e.button&&(this.mouseLeftDownPos.x=e.offsetX,this.mouseLeftDownPos.y=e.offsetY)}},{key:"onSmokePointerMove",value:function(e){var t=new r.Vector2(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1);this.rayCast.setFromCamera(t,this.core.getCamera());var n=this.rayCast.intersectObject(this.core.workObjGroup,!0);if(n.length>0){var i=n[0].point.clone();this.pointer.position.copy(i)}}},{key:"onSmokePointerUp",value:function(e){if(0===e.button){var t=new r.Vector2(e.offsetX,e.offsetY);if(t.distanceTo(this.mouseLeftDownPos)<5){t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera());var n=this.rayCast.intersectObject(this.core.workObjGroup,!0);if(n.length>0){var i=n[0].point.clone();this.points.position.copy(i),this.core.dom.removeEventListener("pointerdown",this.onSmokePointerDownBinder),this.core.dom.removeEventListener("pointermove",this.onSmokePointerMoveBinder),this.core.dom.removeEventListener("pointerup",this.onSmokePointerUpBinder)}}}}},{key:"pause",value:function(){this.bPause=!0}},{key:"resume",value:function(){this.bPause=!1}},{key:"stop",value:function(){this.particles=[],this.bPause=!0}},{key:"showPointer",value:function(){this.pointer.visible=!0}},{key:"hidePointer",value:function(){this.pointer.visible=!1}},{key:"setVelocityRatio",value:function(e){this.velocityRatio=e}},{key:"setDensity",value:function(e){this.density=e}},{key:"IsReady",get:function(){return this.bIsReady}}])&&st(t.prototype,n),i&&st(t,i),e}();function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"PxCore",(function(){return yt}));var ct=n(471).PxPoiManager,ht=n(472).PxCamera,ft=n(476).PxEvent,pt=n(477).PxTransparent,dt=n(90).PxModelVisibility,mt=n(478).PxModelExpander,vt=n(479).PxPositionPicker,gt=n(550).PxSubwayLineEditor,yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=null,this.renderScale=1,this.floorGrid=null,this.camera=null,this.onResizeBinder=this.onResize.bind(this),this.onRenderHandler=null,this.lodMgr=new b,this.poiMgr=new ct(this,this.lodMgr),this.poiSelector=new p(this),this.event=new ft(this),this.transparentUtil=new pt(this),this.pointerPicker=new vt(this),this.modelVisibility=new dt(this),this.subwayLineEditor=new gt(this),this.subway=new M(this),this.poiMultiSelector=new T(this),this.clock=new r.Clock,this.minimap=new B(this),this.sbmCenter=new r.Vector3,this.ocean=new Se,this.subViewList=[]}var t,n,i;return t=e,(n=[{key:"initialize",value:function(e){if(this.dom=e,Ae.a.isWebGL2Available()){var t=document.createElement("canvas"),n=t.getContext("webgl2");this.renderer=new r.WebGLRenderer({antialias:!0,canvas:t,context:n})}else this.renderer=new r.WebGLRenderer({antialias:!0});return this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.dom.clientWidth*this.renderScale,this.dom.clientHeight*this.renderScale),this.dom.appendChild(this.renderer.domElement),this.bgColor=new r.Color(.9,.9,.9),this.renderer.setClearColor(this.bgColor,1),this.bUseBloom=!1,this.renderer.domElement.style.left="0px",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.width=this.dom.clientWidth+"px",this.renderer.domElement.style.height=this.dom.clientHeight+"px",this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.camera=new ht(this.renderer.domElement,this.poiMgr),this.scene=new r.Scene,this.sysObjGroup=new r.Group,this.sysObjGroup.name="#SystemObjectGroup",this.scene.add(this.sysObjGroup),this.workObjGroup=new r.Group,this.workObjGroup.name="#WorkingObjectGroup",this.scene.add(this.workObjGroup),this.camera.fpsCam.setPickObject(this.workObjGroup),this.pathVizGroup=new r.Group,this.pathVizGroup.name="#PathFindVisualizationGroup",this.scene.add(this.pathVizGroup),this.spaceObjGroup=new r.Group,this.spaceObjGroup.name="#SpaceObjectGroup",this.scene.add(this.spaceObjGroup),this.poiRootGroup=new r.Group,this.poiRootGroup.name="#PoiRootGroup",this.scene.add(this.poiRootGroup),this.ambientLight=new r.AmbientLight(4210752),this.sysObjGroup.add(this.ambientLight),this.dirLight=new r.DirectionalLight(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.sysObjGroup.add(this.dirLight),this.hemiLight=new r.HemisphereLight(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.sysObjGroup.add(this.hemiLight),window.addEventListener("resize",this.onResizeBinder,!1),this.vpMgr=new j(this),this.evacPathMgr=new le(this),this.modelExpander=new mt(this,this.evacPathMgr,this.subway),this.fireMgr=new xe(this),this.spaceMgr=new Ee(this.sysObjGroup),this.topologyEditor=new Te.a(this.dom,this.camera.getActiveCamera(),this.camera.getControl(),this.sysObjGroup,this.workObjGroup),et.initialize(this.camera,this.camera.getActiveCamera(),this.camera.getControl(),this.dom,this.scene,this.sysObjGroup,this.workObjGroup,this.poiMgr),Pe.b(),je.d.setSystemGroupScene(this.sysObjGroup),je.d.setWorkgroupScene(this.workObjGroup),je.d.setCamera(this.camera.getActiveCamera()),je.d.setDom(this.dom),je.c.setCoreResources(this.workObjGroup,this.poiMgr),je.e.setCoreResource(this.workObjGroup,this.sysObjGroup),ze.Poi.setCoreResource(this.workObjGroup,this.poiMgr),ze.EnteringPath.setCoreResource(this.workObjGroup,this.sysObjGroup),ze.Pipe.setCoreResources(this.modelVisibility,this.sysObjGroup),Ue.AnimateLine.setCoreResource(this.workObjGroup,this.sysObjGroup),Ue.PowerLine.setCoreResource(this.workObjGroup,this.sysObjGroup),Ve.PowerLine.setCoreResource(this.workObjGroup,this.sysObjGroup),Ve.EvacPath.setCoreResource(this.sysObjGroup,this.workObjGroup),Ve.Light.setCoreResource(this),Ge.prepareRobotPoi(this.sysObjGroup,this.poiRootGroup,this.poiMgr),He.setCoreResource(this.sysObjGroup,this.workObjGroup,this.camera.getActiveCamera(),this.getCameraControl(),this.dom),We.setCoreResource(this.sysObjGroup,this.workObjGroup,this.camera.getActiveCamera(),this.getCameraControl(),this.dom,this.poiMgr),$e.setCoreInstance(this),tt.initialize(this),nt.Robot.initialize(this),nt.LightShaft.initialize(this),rt.initialize(this),rt.Visible.initialize(this),it.initialize(this),this.editor=new h(this),at.initialize(this),this.composer=new Oe.a(this.renderer),Xe.setCoreResource(this.sysObjGroup,this.workObjGroup,this.camera,this.camera.getActiveCamera(),this.getCameraControl(),this.dom,this.poiMgr),Xe.Light.setCoreInstance(this),this.tipsTextureManager=new Ye.a(this.workObjGroup),this.renderPass=new Le.a(this.scene,this.camera.getActiveCamera()),this.composer.addPass(this.renderPass),this.outlinePass=new ke(new r.Vector2(this.dom.clientWidth,this.dom.clientHeight),this.scene,this.camera.getActiveCamera()),this.composer.addPass(this.outlinePass),this.outlinePass.edgeStrength=13,this.outlinePass.edgeGlow=0,this.outlinePass.edgeThickness=1,this.outlinePass.visibleEdgeColor.set(16711680),this.outlinePass.hiddenEdgeColor.set(16711680),Fe.b.initialize(this.outlinePass),this.fxaaPass=new Re.a(Ie),this.fxaaPass.uniforms.resolution.value.set(1/this.dom.clientWidth,1/this.dom.clientHeight),this.composer.addPass(this.fxaaPass),this.orthoScene=new r.Scene,this.orthoCamera=new r.OrthographicCamera(0,this.dom.clientWidth,0,this.dom.clientHeight,-100,100),this.orthoCamera.updateProjectionMatrix(),ot.c(this),this.smokeSystem=new lt(this),this.onRender(),!0}},{key:"updateComposerRenderPass",value:function(){this.renderPass.camera=this.camera.getActiveCamera(),this.outlinePass.renderCamera=this.camera.getActiveCamera()}},{key:"onResize",value:function(){this.camera&&this.renderer&&(this.renderer.setSize(this.dom.clientWidth*this.renderScale,this.dom.clientHeight*this.renderScale),this.composer.setSize(this.dom.clientWidth,this.dom.clientHeight),this.fxaaPass.uniforms.resolution.value.set(1/this.dom.clientWidth,1/this.dom.clientHeight),Xe.Light.onResize(),this.renderer.domElement.style.left="0px",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.width=this.dom.clientWidth+"px",this.renderer.domElement.style.height=this.dom.clientHeight+"px",this.orthoCamera.left=0,this.orthoCamera.right=this.dom.clientWidth,this.orthoCamera.top=0,this.orthoCamera.bottom=this.dom.clientHeight,this.orthoCamera.updateProjectionMatrix(),this.camera.resize(),this.minimap.resize(),this.subViewList.forEach((function(e){e.resize()})))}},{key:"onRender",value:function(){this.onRenderHandler=requestAnimationFrame(this.onRender.bind(this));var e=this.clock.getDelta(),t=this.clock.getElapsedTime();d.a.update(),this.camera.update(e),this.vpMgr.update(e),this.evacPathMgr.update(e),this.fireMgr.update(t),this.ocean.update(e),this.spaceMgr.update(e),Pe.d(e),Ne.c.update(e),je.d.update(e),Be.a(e),ze.EnteringPath.update(e),Ue.AnimateLine.update(e),Ue.PowerLine.update(e),Ve.PowerLine.update(e),Ve.EvacPath.update(e),Ve.Light.update(e),He.update(e),$e.Smoke.update(e,this.camera.getActiveCamera()),et.update(e),this.smokeSystem.IsReady&&this.smokeSystem.step(e),Xe.Light.IsUseLightEffect()?Xe.Light.render(this.scene,this.composer):(this.camera.getActiveCamera(),this.composer.render()),this.minimap.render(e),this.subViewList.forEach((function(t){t.render(e)}))}},{key:"setRenderScale",value:function(e){try{if("number"!=typeof e)throw"PxCore: "+e+" is not number.";this.renderScale=.01*e,this.onResize()}catch(e){console.error(e)}}},{key:"setGridOn",value:function(e){this.setGridOff();var t=e&&e.size?e.size:100,n=e&&e.division?e.division:10,i=e&&e.centerLineColor?e.centerLineColor:16711680,o=e&&e.lineColor?e.lineColor:0;this.floorGrid=new r.GridHelper(t,n,new r.Color(i),new r.Color(o)),this.sysObjGroup.add(this.floorGrid)}},{key:"setGridOff",value:function(){this.floorGrid&&this.sysObjGroup.remove(this.floorGrid)}},{key:"getSystemObjectGroup",value:function(){return this.sysObjGroup}},{key:"getPathVizGroup",value:function(){return this.pathVizGroup}},{key:"getSpaceObjectGroup",value:function(){return this.spaceObjGroup}},{key:"getCamera",value:function(){return this.camera.getActiveCamera()}},{key:"getCameraClass",value:function(){return this.camera}},{key:"getDom",value:function(){return this.dom}},{key:"getCameraControl",value:function(){return this.camera.getControl()}},{key:"getPoiRootGroup",value:function(){return this.poiRootGroup}},{key:"getDirectionalLight",value:function(){return this.dirLight}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setBackgroundColor",value:function(e){this.bgColor=new r.Color(e),this.renderer.setClearColor(this.bgColor,1),this.minimap&&this.minimap.setBgColor(e)}},{key:"movelMoveTo",value:function(e,t,n,r){var i=this.workObjGroup.getObjectByName(e);i&&(i.position.set(t,n,r),i.updateMatrix())}},{key:"setSbmCenter",value:function(e){this.sbmCenter.copy(e)}},{key:"getSbmCenter",value:function(){return this.sbmCenter.clone()}},{key:"getTopologyEditor",value:function(){return this.topologyEditor}},{key:"setBloomUse",value:function(e){this.bUseBloom=e,this.bUseBloom?this.renderer.setClearColor(new r.Color(0),1):this.renderer.setClearColor(this.bgColor,1)}},{key:"getAllSceneBounding",value:function(){var e=(new r.Box3).makeEmpty();return e.expandByObject(this.workObjGroup),e.expandByObject(this.poiRootGroup),e}},{key:"getWorkGroupBounding",value:function(){var e=(new r.Box3).makeEmpty();return e.expandByObject(this.workObjGroup),e}},{key:"createSubView",value:function(e,t){var n=new Je(this,t);n.attach(e),this.subViewList.push(n)}},{key:"takeScreenshot",value:function(){var e=this.camera.getActiveCamera();return this.renderer.render(this.scene,e),this.renderer.domElement.toDataURL()}},{key:"destroyWebGLContext",value:function(){this.vpMgr.dispose,window.removeEventListener("resize",this.onResizeBinder),cancelAnimationFrame(this.onRenderHandler),this.scene.traverse((function(e){e instanceof r.Mesh&&(e.geometry.dispose(),e.material instanceof Array?e.material.forEach((function(e){e.map&&e.map.dispose(),e.dispose()})):(e.material.map&&e.material.map.dispose(),e.material.dispose()))})),this.dom.removeChild(this.renderer.domElement),this.dom=null,this.renderer.dispose(),this.renderer.forceContextLoss()}},{key:"SysGroup",get:function(){return this.sysObjGroup}},{key:"WorkGroup",get:function(){return this.workObjGroup}}])&&ut(t.prototype,n),i&&ut(t,i),e}()},function(e,t,n){"use strict";n.r(t);var r=n(0),i={glyphs:{0:{ha:793,x_min:50,x_max:743,o:"m 743 496 q 658 111 743 236 q 396 -14 573 -14 q 137 115 224 -14 q 50 496 50 244 q 135 883 50 758 q 396 1007 220 1007 q 655 877 568 1007 q 743 496 743 747 m 258 496 q 290 234 258 313 q 396 155 321 155 q 502 235 469 155 q 534 496 534 315 q 502 758 534 678 q 396 838 469 838 q 290 758 322 838 q 258 496 258 678 z "},1:{ha:793,x_min:82,x_max:574,o:"m 574 0 l 364 0 l 364 574 l 366 668 l 370 771 q 297 703 317 719 l 183 611 l 82 737 l 401 991 l 574 991 l 574 0 z "},2:{ha:793,x_min:53,x_max:749,o:"m 749 0 l 56 0 l 56 146 l 304 397 q 449 554 415 511 q 498 635 483 598 q 513 713 513 673 q 480 802 513 772 q 392 831 447 831 q 280 804 334 831 q 167 729 226 778 l 53 864 q 174 952 126 926 q 279 992 222 978 q 407 1006 336 1006 q 571 972 500 1006 q 682 877 642 938 q 721 737 721 816 q 697 609 721 669 q 622 486 673 549 q 444 306 572 422 l 317 186 l 317 176 l 749 176 l 749 0 z "},3:{ha:793,x_min:53,x_max:739,o:"m 710 770 q 654 612 710 677 q 496 522 597 547 l 496 518 q 677 445 616 503 q 739 289 739 387 q 635 66 739 146 q 339 -14 532 -14 q 53 40 178 -14 l 53 218 q 180 171 111 189 q 317 153 249 153 q 470 188 420 153 q 519 301 519 223 q 463 400 519 371 q 281 429 406 429 l 205 429 l 205 590 l 282 590 q 451 620 397 590 q 504 724 504 650 q 363 836 504 836 q 263 820 314 836 q 151 764 213 804 l 54 908 q 378 1006 190 1006 q 621 943 532 1006 q 710 770 710 881 z "},4:{ha:793,x_min:24,x_max:771,o:"m 771 205 l 652 205 l 652 0 l 447 0 l 447 205 l 24 205 l 24 351 l 458 991 l 652 991 l 652 368 l 771 368 l 771 205 m 447 368 l 447 536 q 450 659 447 578 q 456 751 454 739 l 450 751 q 390 643 425 696 l 208 368 l 447 368 z "},5:{ha:793,x_min:68,x_max:730,o:"m 416 633 q 645 553 560 633 q 730 332 730 472 q 628 76 730 165 q 335 -14 526 -14 q 68 40 170 -14 l 68 221 q 193 175 121 193 q 328 157 264 157 q 519 314 519 157 q 321 464 519 464 q 241 457 285 464 q 171 441 198 450 l 87 486 l 125 991 l 663 991 l 663 814 l 309 814 l 290 619 l 314 624 q 416 633 355 633 z "},6:{ha:793,x_min:49,x_max:749,o:"m 49 421 q 173 859 49 715 q 546 1003 298 1003 q 679 993 631 1003 l 679 825 q 559 839 618 839 q 384 806 452 839 q 281 710 315 774 q 241 529 248 646 l 250 529 q 465 644 317 644 q 673 561 598 644 q 749 330 749 477 q 659 79 749 172 q 411 -14 570 -14 q 219 37 301 -14 q 93 186 138 88 q 49 421 49 283 m 407 154 q 510 199 474 154 q 546 328 546 244 q 512 442 546 400 q 411 484 479 484 q 302 442 347 484 q 257 346 257 401 q 299 210 257 265 q 407 154 342 154 z "},7:{ha:793,x_min:37,x_max:749,o:"m 154 0 l 526 814 l 37 814 l 37 990 l 749 990 l 749 859 l 374 0 l 154 0 z "},8:{ha:793,x_min:49,x_max:745,o:"m 397 1004 q 627 940 540 1004 q 714 765 714 875 q 672 630 714 689 q 536 524 630 570 q 696 399 648 464 q 745 257 745 334 q 649 61 745 135 q 397 -14 553 -14 q 142 56 235 -14 q 49 252 49 125 q 94 402 49 336 q 239 518 139 468 q 117 633 154 572 q 79 766 79 694 q 168 939 79 873 q 397 1004 256 1004 m 243 264 q 283 173 243 205 q 395 140 324 140 q 511 174 473 140 q 550 262 550 208 q 512 348 550 308 q 387 432 473 387 q 243 264 243 366 m 396 851 q 310 824 342 851 q 277 750 277 796 q 303 677 277 709 q 397 611 329 645 q 490 675 464 642 q 517 750 517 707 q 483 824 517 797 q 396 851 449 851 z "},9:{ha:793,x_min:45,x_max:745,o:"m 745 568 q 621 131 745 275 q 248 -14 498 -14 q 114 -4 159 -14 l 114 164 q 233 150 171 150 q 406 181 338 150 q 510 278 474 212 q 551 460 546 344 l 543 460 q 452 370 504 396 q 323 345 401 345 q 119 428 194 345 q 45 659 45 511 q 135 910 45 818 q 382 1003 226 1003 q 574 951 492 1003 q 701 802 656 900 q 745 568 745 704 m 386 835 q 284 790 321 835 q 248 661 248 745 q 281 547 248 589 q 382 505 314 505 q 491 547 446 505 q 536 643 536 589 q 494 779 536 724 q 386 835 452 835 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"!":{ha:397,x_min:79,x_max:317,o:"m 282 329 l 117 329 l 82 991 l 317 991 l 282 329 m 79 97 q 110 183 79 154 q 199 212 140 212 q 286 182 255 212 q 317 97 317 153 q 286 13 317 43 q 199 -18 254 -18 q 111 12 142 -18 q 79 97 79 42 z "},'"':{ha:656,x_min:90,x_max:566,o:"m 279 991 l 252 633 l 118 633 l 90 991 l 279 991 m 566 991 l 538 633 l 404 633 l 376 991 l 566 991 z "},"#":{ha:897,x_min:31,x_max:867,o:"m 677 572 l 646 415 l 821 415 l 821 275 l 619 275 l 567 0 l 418 0 l 471 275 l 339 275 l 288 0 l 142 0 l 192 275 l 31 275 l 31 415 l 218 415 l 250 572 l 79 572 l 79 714 l 275 714 l 328 990 l 476 990 l 424 714 l 558 714 l 611 990 l 757 990 l 704 714 l 867 714 l 867 572 l 677 572 m 366 415 l 498 415 l 530 572 l 397 572 l 366 415 z "},$:{ha:793,x_min:60,x_max:741,o:"m 741 310 q 663 137 741 202 q 444 58 585 71 l 444 -81 l 351 -81 l 351 56 q 61 114 186 59 l 61 293 q 203 241 120 264 q 351 215 286 219 l 351 425 l 306 443 q 116 558 172 496 q 60 711 60 620 q 137 873 60 810 q 351 950 214 937 l 351 1054 l 444 1054 l 444 953 q 725 890 600 946 l 661 732 q 444 785 555 775 l 444 585 q 632 496 576 534 q 714 414 688 459 q 741 310 741 370 m 536 300 q 513 348 536 328 q 444 389 490 368 l 444 220 q 536 300 536 235 m 264 711 q 284 662 264 682 q 351 623 305 643 l 351 782 q 264 711 264 769 z "},"%":{ha:1251,x_min:43,x_max:1208,o:"m 214 694 q 229 566 214 608 q 278 524 244 524 q 343 694 343 524 q 278 864 343 864 q 229 822 244 864 q 214 694 214 781 m 514 696 q 454 461 514 540 q 277 383 393 383 q 104 464 165 383 q 43 696 43 544 q 277 1006 43 1006 q 453 925 391 1006 q 514 696 514 845 m 981 991 l 431 0 l 268 0 l 818 991 l 981 991 m 908 298 q 923 170 908 212 q 972 127 939 127 q 1038 298 1038 127 q 972 468 1038 468 q 923 426 939 468 q 908 298 908 385 m 1208 300 q 1148 66 1208 144 q 971 -12 1088 -12 q 798 68 859 -12 q 737 300 737 149 q 971 610 737 610 q 1147 529 1086 610 q 1208 300 1208 449 z "},"&":{ha:1042,x_min:56,x_max:1042,o:"m 1042 0 l 786 0 l 708 77 q 415 -14 578 -14 q 153 62 250 -14 q 56 268 56 138 q 97 426 56 361 q 237 549 138 492 q 163 660 186 607 q 140 777 140 713 q 219 943 140 880 q 431 1006 298 1006 q 632 947 557 1006 q 708 790 708 888 q 661 643 708 709 q 510 515 614 576 l 703 328 q 786 532 751 407 l 1002 532 q 935 353 977 440 q 838 199 892 266 l 1042 0 m 273 288 q 317 195 273 229 q 429 160 361 160 q 583 201 515 160 l 358 425 q 296 363 319 395 q 273 288 273 330 m 517 768 q 492 825 517 804 q 429 846 468 846 q 358 824 384 846 q 332 762 332 802 q 396 631 332 703 q 486 695 454 663 q 517 768 517 726 z "},"'":{ha:370,x_min:90,x_max:279,o:"m 279 991 l 252 633 l 118 633 l 90 991 l 279 991 z "},"(":{ha:471,x_min:56,x_max:429,o:"m 56 380 q 108 717 56 560 q 260 991 161 873 l 429 991 q 285 704 334 861 q 236 382 236 547 q 286 61 236 216 q 428 -220 336 -94 l 260 -220 q 108 50 160 -104 q 56 380 56 203 z "},")":{ha:471,x_min:41,x_max:415,o:"m 415 380 q 362 48 415 202 q 211 -220 310 -106 l 43 -220 q 184 60 134 -95 q 235 382 235 215 q 186 704 235 547 q 41 991 137 861 l 211 991 q 363 716 311 873 q 415 380 415 559 z "},"*":{ha:757,x_min:43,x_max:714,o:"m 467 1055 l 439 806 l 692 876 l 714 705 l 484 689 l 635 488 l 481 406 l 375 618 l 282 407 l 122 488 l 272 689 l 43 707 l 69 876 l 317 806 l 289 1055 l 467 1055 z "},"+":{ha:793,x_min:60,x_max:733,o:"m 322 415 l 60 415 l 60 564 l 322 564 l 322 828 l 471 828 l 471 564 l 733 564 l 733 415 l 471 415 l 471 154 l 322 154 l 322 415 z "},",":{ha:403,x_min:43,x_max:311,o:"m 311 146 q 192 -179 276 9 l 43 -179 q 111 161 87 1 l 301 161 l 311 146 z "},"-":{ha:447,x_min:41,x_max:406,o:"m 41 288 l 41 457 l 406 457 l 406 288 l 41 288 z "},".":{ha:396,x_min:79,x_max:317,o:"m 79 97 q 110 183 79 154 q 199 212 140 212 q 286 182 255 212 q 317 97 317 153 q 286 13 317 43 q 199 -18 254 -18 q 111 12 142 -18 q 79 97 79 42 z "},"/":{ha:574,x_min:9,x_max:567,o:"m 567 991 l 197 0 l 9 0 l 379 991 l 567 991 z "},":":{ha:396,x_min:79,x_max:317,o:"m 79 97 q 110 183 79 154 q 199 212 140 212 q 286 182 255 212 q 317 97 317 153 q 286 13 317 43 q 199 -18 254 -18 q 111 12 142 -18 q 79 97 79 42 m 79 657 q 110 743 79 714 q 199 772 140 772 q 286 743 255 772 q 317 657 317 713 q 285 572 317 602 q 199 542 254 542 q 111 572 142 542 q 79 657 79 602 z "},";":{ha:403,x_min:43,x_max:317,o:"m 301 161 l 311 146 q 192 -179 276 9 l 43 -179 q 111 161 87 1 l 301 161 m 79 657 q 110 743 79 714 q 199 772 140 772 q 286 743 255 772 q 317 657 317 713 q 285 572 317 602 q 199 542 254 542 q 111 572 142 542 q 79 657 79 602 z "},"<":{ha:793,x_min:60,x_max:733,o:"m 733 138 l 60 435 l 60 532 l 733 868 l 733 705 l 269 490 l 733 300 l 733 138 z "},"=":{ha:793,x_min:60,x_max:733,o:"m 60 546 l 60 694 l 733 694 l 733 546 l 60 546 m 60 283 l 60 432 l 733 432 l 733 283 l 60 283 z "},">":{ha:793,x_min:60,x_max:733,o:"m 60 300 l 524 490 l 60 705 l 60 868 l 733 532 l 733 435 l 60 138 l 60 300 z "},"?":{ha:663,x_min:4,x_max:629,o:"m 187 329 l 187 379 q 215 492 187 444 q 317 595 243 541 q 411 677 388 646 q 433 749 433 709 q 401 816 433 793 q 310 839 368 839 q 78 772 208 839 l 4 921 q 325 1006 155 1006 q 547 939 465 1006 q 629 760 629 871 q 595 631 629 685 q 467 509 562 576 q 384 435 401 460 q 367 370 367 410 l 367 329 l 187 329 m 165 97 q 196 183 165 154 q 285 212 227 212 q 372 182 341 212 q 403 97 403 153 q 372 13 403 43 q 285 -18 340 -18 q 197 12 228 -18 q 165 97 165 42 z "},"@":{ha:1246,x_min:69,x_max:1177,o:"m 1177 510 q 1145 331 1177 412 q 1057 204 1114 250 q 925 158 1000 158 q 836 182 875 158 q 781 245 798 206 l 770 245 q 583 158 696 158 q 394 230 463 158 q 325 428 325 302 q 416 659 325 571 q 653 746 507 746 q 782 735 711 746 q 897 708 852 724 l 882 376 q 933 282 882 282 q 1002 346 977 282 q 1028 511 1028 409 q 983 704 1028 621 q 855 832 937 788 q 667 876 772 876 q 429 820 530 876 q 274 657 328 764 q 220 412 220 551 q 320 125 220 225 q 610 25 420 25 q 768 41 682 25 q 937 87 854 57 l 937 -43 q 615 -104 792 -104 q 213 31 357 -104 q 69 408 69 167 q 143 712 69 576 q 352 927 216 849 q 665 1004 488 1004 q 932 943 814 1004 q 1113 770 1049 882 q 1177 510 1177 657 m 482 425 q 599 282 482 282 q 692 325 660 282 q 730 465 724 368 l 739 615 q 661 623 705 623 q 529 570 576 623 q 482 425 482 517 z "},A:{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 z "},B:{ha:933,x_min:125,x_max:860,o:"m 125 991 l 433 991 q 740 931 644 991 q 835 741 835 871 q 793 595 835 652 q 682 526 751 538 l 682 519 q 818 441 777 498 q 860 288 860 383 q 762 76 860 152 q 496 0 664 0 l 125 0 l 125 991 m 335 599 l 457 599 q 581 625 543 599 q 619 713 619 652 q 577 794 619 770 q 446 819 536 819 l 335 819 l 335 599 m 335 432 l 335 174 l 472 174 q 600 207 559 174 q 642 309 642 240 q 465 432 642 432 l 335 432 z "},C:{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 z "},D:{ha:1028,x_min:125,x_max:947,o:"m 947 505 q 808 130 947 260 q 406 0 669 0 l 125 0 l 125 991 l 436 991 q 813 863 679 991 q 947 505 947 735 m 729 500 q 447 819 729 819 l 335 819 l 335 174 l 425 174 q 729 500 729 174 z "},E:{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 z "},F:{ha:762,x_min:125,x_max:693,o:"m 332 0 l 125 0 l 125 991 l 693 991 l 693 819 l 332 819 l 332 564 l 668 564 l 668 392 l 332 392 l 332 0 z "},G:{ha:1006,x_min:81,x_max:895,o:"m 501 557 l 895 557 l 895 43 q 714 -1 799 12 q 542 -14 630 -14 q 199 118 317 -14 q 81 497 81 250 q 218 871 81 737 q 599 1006 355 1006 q 893 945 751 1006 l 823 777 q 597 831 715 831 q 379 739 461 831 q 297 493 297 648 q 363 247 297 332 q 555 161 429 161 q 689 175 621 161 l 689 382 l 501 382 l 501 557 z "},H:{ha:1063,x_min:125,x_max:937,o:"m 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 0 z "},J:{ha:460,x_min:-103,x_max:335,o:"m 21 -292 q -103 -277 -50 -292 l -103 -102 q -4 -115 -49 -115 q 95 -72 65 -115 q 125 62 125 -29 l 125 991 l 335 991 l 335 64 q 256 -201 335 -110 q 21 -292 176 -292 z "},K:{ha:922,x_min:125,x_max:922,o:"m 922 0 l 684 0 l 424 418 l 335 354 l 335 0 l 125 0 l 125 991 l 335 991 l 335 538 l 418 654 l 686 991 l 920 991 l 574 553 l 922 0 z "},L:{ha:785,x_min:125,x_max:737,o:"m 125 0 l 125 991 l 335 991 l 335 174 l 737 174 l 737 0 l 125 0 z "},M:{ha:1310,x_min:125,x_max:1185,o:"m 545 0 l 306 778 l 300 778 q 313 461 313 541 l 313 0 l 125 0 l 125 991 l 411 991 l 646 233 l 650 233 l 899 991 l 1185 991 l 1185 0 l 989 0 l 989 469 q 990 546 989 503 q 999 777 991 589 l 993 777 l 737 0 l 545 0 z "},N:{ha:1129,x_min:125,x_max:1004,o:"m 1004 0 l 737 0 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 249 l 825 249 q 815 522 815 442 l 815 991 l 1004 991 l 1004 0 z "},O:{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 z "},P:{ha:872,x_min:125,x_max:810,o:"m 335 525 l 404 525 q 549 563 501 525 q 597 675 597 602 q 557 784 597 749 q 431 819 517 819 l 335 819 l 335 525 m 810 682 q 710 437 810 522 q 425 353 610 353 l 335 353 l 335 0 l 125 0 l 125 991 l 441 991 q 716 914 622 991 q 810 682 810 836 z "},Q:{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 963 204 1025 322 q 781 31 901 85 l 1019 -236 l 750 -236 l 568 -14 l 553 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 z "},R:{ha:917,x_min:125,x_max:917,o:"m 335 551 l 403 551 q 550 585 503 551 q 597 689 597 618 q 549 789 597 760 q 399 819 500 819 l 335 819 l 335 551 m 335 380 l 335 0 l 125 0 l 125 991 l 414 991 q 713 918 616 991 q 810 694 810 844 q 762 539 810 607 q 625 432 713 471 q 917 0 849 98 l 684 0 l 447 380 l 335 380 z "},S:{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 z "},T:{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 0 z "},U:{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 z "},V:{ha:903,x_min:0,x_max:903,o:"m 690 991 l 903 991 l 566 0 l 336 0 l 0 991 l 212 991 l 399 401 q 431 280 414 349 q 452 183 448 210 q 503 401 459 245 l 690 991 z "},W:{ha:1343,x_min:0,x_max:1343,o:"m 1090 0 l 851 0 l 717 521 q 691 636 709 549 q 671 753 673 723 q 650 635 667 716 q 625 519 634 554 l 492 0 l 253 0 l 0 991 l 207 991 l 334 450 q 382 191 367 300 q 400 310 386 229 q 428 436 415 391 l 572 991 l 771 991 l 916 436 q 939 322 925 399 q 961 191 954 245 q 983 322 968 243 q 1010 450 998 401 l 1136 991 l 1343 991 l 1090 0 z "},X:{ha:926,x_min:0,x_max:926,o:"m 926 0 l 686 0 l 456 375 l 225 0 l 0 0 l 329 511 l 21 991 l 253 991 l 467 635 l 676 991 l 903 991 l 591 500 l 926 0 z "},Y:{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 z "},Z:{ha:804,x_min:33,x_max:771,o:"m 771 0 l 33 0 l 33 136 l 509 818 l 46 818 l 46 991 l 758 991 l 758 856 l 283 174 l 771 174 l 771 0 z "},"[":{ha:460,x_min:97,x_max:425,o:"m 425 -220 l 97 -220 l 97 991 l 425 991 l 425 848 l 273 848 l 273 -77 l 425 -77 l 425 -220 z "},"\\":{ha:574,x_min:8,x_max:566,o:"m 196 991 l 566 0 l 378 0 l 8 991 l 196 991 z "},"]":{ha:460,x_min:35,x_max:363,o:"m 35 -77 l 186 -77 l 186 848 l 35 848 l 35 991 l 363 991 l 363 -220 l 35 -220 l 35 -77 z "},"^":{ha:739,x_min:5,x_max:736,o:"m 5 353 l 302 997 l 400 997 l 736 353 l 574 353 l 355 789 l 165 353 l 5 353 z "},_:{ha:571,x_min:-3,x_max:574,o:"m 574 -220 l -3 -220 l -3 -125 l 574 -125 l 574 -220 z "},"`":{ha:843,x_min:225,x_max:616,o:"m 479 842 q 354 938 437 871 q 225 1050 271 1005 l 225 1064 l 457 1064 q 616 860 500 996 l 616 842 l 479 842 z "},a:{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 z "},b:{ha:879,x_min:109,x_max:817,o:"m 530 772 q 741 668 665 772 q 817 380 817 563 q 738 90 817 193 q 525 -14 660 -14 q 315 83 391 -14 l 301 83 l 267 0 l 109 0 l 109 1055 l 315 1055 l 315 810 q 307 660 315 763 l 315 660 q 530 772 388 772 m 464 607 q 352 560 387 607 q 315 404 317 513 l 315 382 q 352 207 315 260 q 467 154 388 154 q 568 213 530 154 q 606 383 606 271 q 568 551 606 495 q 464 607 530 607 z "},c:{ha:714,x_min:62,x_max:671,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 z "},d:{ha:879,x_min:62,x_max:771,o:"m 349 -14 q 139 90 215 -14 q 62 378 62 194 q 140 668 62 564 q 354 772 218 772 q 572 661 497 772 l 579 661 q 564 812 564 746 l 564 1055 l 771 1055 l 771 0 l 612 0 l 572 98 l 564 98 q 349 -14 493 -14 m 421 151 q 537 197 500 151 q 578 354 574 243 l 578 376 q 540 551 578 498 q 418 604 503 604 q 310 546 349 604 q 272 375 272 487 q 311 207 272 263 q 421 151 349 151 z "},e:{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 z "},f:{ha:538,x_min:28,x_max:600,o:"m 528 603 l 349 603 l 349 0 l 142 0 l 142 603 l 28 603 l 28 703 l 142 758 l 142 814 q 205 1003 142 943 q 410 1063 269 1063 q 600 1031 517 1063 l 547 879 q 432 899 485 899 q 368 872 388 899 q 349 806 349 846 l 349 758 l 528 758 l 528 603 z "},g:{ha:785,x_min:4,x_max:768,o:"m 768 758 l 768 653 l 650 623 q 682 509 682 572 q 597 318 682 387 q 361 250 512 250 l 323 252 l 293 256 q 261 201 261 231 q 375 157 261 157 l 504 157 q 694 103 629 157 q 760 -54 760 50 q 649 -260 760 -187 q 330 -334 538 -334 q 88 -278 172 -334 q 4 -123 4 -223 q 47 -9 4 -55 q 172 57 90 37 q 117 101 140 71 q 93 167 93 132 q 118 239 93 210 q 191 296 143 268 q 96 378 131 321 q 61 513 61 435 q 142 705 61 637 q 372 772 222 772 q 448 767 404 772 q 504 758 492 761 l 768 758 m 183 -107 q 224 -174 183 -150 q 339 -199 265 -199 q 513 -168 450 -199 q 576 -85 576 -138 q 539 -26 576 -42 q 424 -9 502 -9 l 317 -9 q 221 -36 260 -9 q 183 -107 183 -63 m 258 510 q 287 412 258 448 q 372 376 315 376 q 458 412 431 376 q 485 510 485 448 q 372 647 485 647 q 258 510 258 647 z "},h:{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 479 607 602 607 q 354 548 393 607 q 315 357 315 489 l 315 0 l 109 0 l 109 1055 l 315 1055 l 315 840 q 311 722 315 815 l 306 661 l 317 661 q 536 772 386 772 q 739 701 670 772 q 808 494 808 629 l 808 0 z "},i:{ha:424,x_min:100,x_max:325,o:"m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 z "},j:{ha:424,x_min:-89,x_max:325,o:"m 47 -334 q -89 -317 -32 -334 l -89 -154 q 8 -167 -41 -167 q 84 -138 60 -167 q 109 -52 109 -109 l 109 758 l 315 758 l 315 -82 q 245 -268 315 -203 q 47 -334 176 -334 m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 z "},k:{ha:861,x_min:109,x_max:861,o:"m 307 412 l 397 528 l 610 758 l 843 758 l 542 429 l 861 0 l 623 0 l 404 307 l 315 236 l 315 0 l 109 0 l 109 1055 l 315 1055 l 315 585 l 304 412 l 307 412 z "},l:{ha:424,x_min:109,x_max:315,o:"m 315 0 l 109 0 l 109 1055 l 315 1055 l 315 0 z "},m:{ha:1364,x_min:109,x_max:1260,o:"m 787 0 l 581 0 l 581 443 q 553 566 581 525 q 467 607 526 607 q 351 549 387 607 q 315 357 315 490 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 394 743 336 713 q 526 772 452 772 q 757 661 696 772 l 775 661 q 865 743 806 714 q 999 772 924 772 q 1194 706 1128 772 q 1260 494 1260 640 l 1260 0 l 1053 0 l 1053 443 q 1025 566 1053 525 q 939 607 998 607 q 825 553 863 607 q 787 380 787 498 l 787 0 z "},n:{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 0 z "},o:{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 z "},p:{ha:879,x_min:109,x_max:817,o:"m 525 -14 q 315 83 391 -14 l 304 83 q 315 -26 315 -12 l 315 -334 l 109 -334 l 109 758 l 277 758 l 306 660 l 315 660 q 530 772 388 772 q 741 669 665 772 q 817 380 817 565 q 781 170 817 259 q 680 33 745 80 q 525 -14 614 -14 m 464 607 q 352 560 387 607 q 315 404 317 513 l 315 382 q 352 207 315 260 q 467 154 388 154 q 606 383 606 154 q 571 551 606 495 q 464 607 537 607 z "},q:{ha:879,x_min:62,x_max:771,o:"m 422 149 q 538 194 501 149 q 578 351 574 239 l 578 376 q 540 551 578 498 q 419 604 503 604 q 273 375 273 604 q 310 205 273 261 q 422 149 346 149 m 349 -14 q 138 90 214 -14 q 62 378 62 193 q 140 668 62 564 q 353 772 218 772 q 478 745 425 772 q 572 661 532 718 l 578 661 l 596 758 l 771 758 l 771 -334 l 564 -334 l 564 -16 q 572 98 564 26 l 564 98 q 475 15 530 43 q 349 -14 420 -14 z "},r:{ha:631,x_min:109,x_max:602,o:"m 532 772 q 602 766 574 772 l 586 572 q 525 579 561 579 q 371 528 426 579 q 315 386 315 477 l 315 0 l 109 0 l 109 758 l 265 758 l 296 631 l 306 631 q 401 733 341 694 q 532 772 461 772 z "},s:{ha:690,x_min:62,x_max:637,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 z "},t:{ha:603,x_min:32,x_max:558,o:"m 428 151 q 558 175 482 151 l 558 21 q 368 -14 481 -14 q 188 49 244 -14 q 131 237 131 112 l 131 603 l 32 603 l 32 690 l 146 760 l 205 920 l 338 920 l 338 758 l 550 758 l 550 603 l 338 603 l 338 237 q 362 172 338 193 q 428 151 387 151 z "},u:{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 z "},v:{ha:790,x_min:0,x_max:790,o:"m 289 0 l 0 758 l 216 758 l 363 326 q 393 171 387 244 l 397 171 q 428 326 401 236 l 574 758 l 790 758 l 501 0 l 289 0 z "},w:{ha:1189,x_min:14,x_max:1175,o:"m 732 0 l 673 265 l 595 600 l 590 600 l 452 0 l 229 0 l 14 758 l 220 758 l 307 422 q 350 174 328 332 l 354 174 q 378 337 357 225 l 389 395 l 482 758 l 710 758 l 799 395 q 807 351 802 380 q 819 289 813 321 q 828 224 824 256 q 833 174 833 193 l 838 174 q 859 308 844 222 q 882 422 875 393 l 972 758 l 1175 758 l 957 0 l 732 0 z "},x:{ha:803,x_min:7,x_max:796,o:"m 264 387 l 20 758 l 254 758 l 401 517 l 550 758 l 785 758 l 538 387 l 796 0 l 561 0 l 401 260 l 241 0 l 7 0 l 264 387 z "},y:{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 z "},z:{ha:677,x_min:37,x_max:636,o:"m 636 0 l 37 0 l 37 122 l 389 600 l 58 600 l 58 758 l 624 758 l 624 624 l 282 158 l 636 158 l 636 0 z "},"{":{ha:547,x_min:21,x_max:492,o:"m 195 183 q 150 273 195 242 q 21 304 106 304 l 21 467 q 151 496 106 467 q 195 582 195 526 l 195 587 l 195 803 q 260 949 195 907 q 492 991 326 991 l 492 839 q 399 813 425 837 q 374 743 374 789 l 374 541 q 215 390 370 413 l 215 382 q 374 238 374 358 l 374 232 l 374 29 q 399 -41 374 -17 q 492 -66 424 -64 l 492 -220 q 260 -177 326 -220 q 195 -31 195 -135 l 195 183 z "},"|":{ha:765,x_min:309,x_max:457,o:"m 309 1051 l 457 1051 l 457 -315 l 309 -315 l 309 1051 z "},"}":{ha:547,x_min:56,x_max:526,o:"m 353 -31 q 325 -145 353 -106 q 233 -202 297 -184 q 56 -220 169 -220 l 56 -66 q 148 -42 123 -65 q 174 29 174 -19 l 174 232 l 174 239 q 214 334 174 298 q 332 382 254 370 l 332 390 q 174 541 178 413 l 174 743 q 149 814 174 791 q 56 839 123 837 l 56 991 q 233 974 169 991 q 325 917 298 956 q 353 803 353 878 l 353 587 l 353 581 q 394 495 353 524 q 526 467 436 467 l 526 304 q 397 277 441 304 q 353 183 353 249 l 353 -31 z "},"~":{ha:793,x_min:60,x_max:733,o:"m 218 456 q 139 433 181 456 q 60 374 96 410 l 60 530 q 233 604 130 604 q 327 593 283 604 q 421 561 370 583 q 575 524 509 524 q 654 545 611 524 q 733 606 696 567 l 733 449 q 559 375 665 375 q 474 384 515 375 q 372 418 433 393 q 218 456 283 456 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"¡":{ha:397,x_min:79,x_max:317,o:"m 114 411 l 279 411 l 314 -250 l 79 -250 l 114 411 m 317 643 q 286 557 317 586 q 197 528 256 528 q 110 557 141 528 q 79 643 79 587 q 111 728 79 698 q 197 758 142 758 q 286 728 254 758 q 317 643 317 699 z "},"¢":{ha:793,x_min:97,x_max:705,o:"m 382 119 q 97 503 97 159 q 168 776 97 680 q 382 893 239 872 l 382 1006 l 503 1006 l 503 899 q 705 848 615 892 l 644 689 q 553 721 595 709 q 469 733 511 733 q 348 676 387 733 q 309 504 309 620 q 469 282 309 282 q 570 293 525 282 q 682 334 614 303 l 682 161 q 503 114 596 120 l 503 -14 l 382 -14 l 382 119 z "},"£":{ha:793,x_min:56,x_max:766,o:"m 475 1006 q 739 950 607 1006 l 676 794 q 492 838 570 838 q 410 807 439 838 q 382 721 382 777 l 382 590 l 636 590 l 636 441 l 382 441 l 382 345 q 279 176 382 229 l 766 176 l 766 0 l 56 0 l 56 168 q 152 237 125 198 q 178 343 178 275 l 178 441 l 57 441 l 57 590 l 178 590 l 178 722 q 255 932 178 859 q 475 1006 333 1006 z "},"¤":{ha:793,x_min:77,x_max:717,o:"m 127 490 q 164 624 127 559 l 77 710 l 176 810 l 262 724 q 396 760 324 760 q 529 722 467 760 l 615 810 l 717 713 l 629 625 q 665 490 665 565 q 629 355 665 418 l 714 271 l 615 172 l 529 257 q 396 222 465 222 q 261 257 318 222 l 176 174 l 78 272 l 164 357 q 127 490 127 420 m 268 490 q 305 400 268 438 q 396 363 342 363 q 489 400 451 363 q 526 490 526 437 q 488 582 526 545 q 396 619 450 619 q 306 581 343 619 q 268 490 268 543 z "},"¥":{ha:793,x_min:4,x_max:787,o:"m 396 583 l 575 991 l 787 991 l 528 485 l 660 485 l 660 364 l 493 364 l 493 271 l 660 271 l 660 150 l 493 150 l 493 0 l 298 0 l 298 150 l 131 150 l 131 271 l 298 271 l 298 364 l 131 364 l 131 485 l 260 485 l 4 991 l 218 991 l 396 583 z "},"¦":{ha:765,x_min:309,x_max:457,o:"m 309 1051 l 457 1051 l 457 498 l 309 498 l 309 1051 m 309 237 l 457 237 l 457 -315 l 309 -315 l 309 237 z "},"§":{ha:675,x_min:72,x_max:607,o:"m 82 546 q 106 644 82 600 q 172 715 131 688 q 82 873 82 772 q 158 1016 82 962 q 357 1069 233 1069 q 603 1013 472 1069 l 547 884 q 453 923 501 905 q 353 940 406 940 q 273 924 298 940 q 248 876 248 909 q 281 818 248 843 q 392 762 315 793 q 555 662 503 719 q 607 530 607 604 q 522 354 607 410 q 586 291 564 327 q 607 205 607 256 q 526 46 607 105 q 309 -14 445 -14 q 72 40 171 -14 l 72 180 q 194 133 127 153 q 309 114 261 114 q 440 193 440 114 q 428 236 440 220 q 385 270 415 252 q 300 310 354 287 q 129 413 176 360 q 82 546 82 467 m 233 561 q 277 480 233 515 q 400 414 321 445 q 453 513 453 452 q 419 591 453 559 q 294 656 385 623 q 251 620 269 646 q 233 561 233 593 z "},"¨":{ha:843,x_min:189,x_max:654,o:"m 189 953 q 215 1021 189 997 q 283 1044 240 1044 q 354 1019 328 1044 q 379 953 379 994 q 353 887 379 912 q 283 863 328 863 q 215 886 240 863 q 189 953 189 910 m 463 953 q 490 1022 463 1000 q 558 1044 517 1044 q 628 1020 602 1044 q 654 953 654 996 q 628 887 654 911 q 558 863 602 863 q 490 885 517 863 q 463 953 463 907 z "},"©":{ha:1156,x_min:68,x_max:1088,o:"m 607 685 q 505 635 541 685 q 469 496 469 585 q 607 306 469 306 q 690 316 646 306 q 774 346 735 326 l 774 216 q 603 178 692 178 q 389 262 465 178 q 313 497 313 347 q 388 729 313 646 q 597 812 463 812 q 804 760 699 812 l 754 646 q 607 685 677 685 m 68 496 q 136 750 68 631 q 322 937 203 869 q 578 1006 441 1006 q 832 938 713 1006 q 1019 751 951 870 q 1088 496 1088 633 q 1022 245 1088 362 q 838 57 956 127 q 578 -14 719 -14 q 319 57 437 -14 q 134 244 200 127 q 68 496 68 361 m 164 496 q 220 289 164 385 q 372 137 275 193 q 578 82 468 82 q 785 138 689 82 q 936 290 881 193 q 991 496 991 386 q 936 703 991 607 q 784 854 880 799 q 578 909 688 909 q 371 854 467 909 q 219 702 275 798 q 164 496 164 606 z "},"ª":{ha:532,x_min:32,x_max:472,o:"m 380 518 l 359 593 q 288 532 330 553 q 196 510 246 510 q 74 550 117 510 q 32 661 32 589 q 88 772 32 735 q 269 815 144 809 l 336 818 q 250 897 336 897 q 103 856 195 897 l 58 947 q 157 986 103 969 q 278 1003 211 1003 q 421 955 371 1003 q 472 818 472 907 l 472 518 l 380 518 m 171 663 q 186 625 171 637 q 224 612 202 612 q 306 641 276 612 q 336 713 336 669 l 336 737 l 269 733 q 171 663 171 726 z "},"«":{ha:854,x_min:56,x_max:799,o:"m 56 389 l 307 697 l 456 616 l 267 380 l 456 144 l 307 64 l 56 371 l 56 389 m 399 389 l 650 697 l 799 616 l 610 380 l 799 144 l 650 64 l 399 371 l 399 389 z "},"¬":{ha:793,x_min:60,x_max:733,o:"m 733 168 l 585 168 l 585 415 l 60 415 l 60 564 l 733 564 l 733 168 z "},"­":{ha:447,x_min:41,x_max:406,o:"m 41 288 l 41 457 l 406 457 l 406 288 l 41 288 z "},"®":{ha:1156,x_min:68,x_max:1088,o:"m 785 614 q 688 456 785 498 l 848 184 l 676 184 l 555 414 l 524 414 l 524 184 l 368 184 l 368 806 l 547 806 q 727 758 670 806 q 785 614 785 711 m 524 528 l 545 528 q 609 547 589 528 q 628 611 628 566 q 609 673 628 655 q 543 692 590 692 l 524 692 l 524 528 m 68 496 q 136 750 68 631 q 322 937 203 869 q 578 1006 441 1006 q 832 938 713 1006 q 1019 751 951 870 q 1088 496 1088 633 q 1022 245 1088 362 q 838 57 956 127 q 578 -14 719 -14 q 319 57 437 -14 q 134 244 200 127 q 68 496 68 361 m 164 496 q 220 289 164 385 q 372 137 275 193 q 578 82 468 82 q 785 138 689 82 q 936 290 881 193 q 991 496 991 386 q 936 703 991 607 q 784 854 880 799 q 578 909 688 909 q 371 854 467 909 q 219 702 275 798 q 164 496 164 606 z "},"¯":{ha:694,x_min:-4,x_max:699,o:"m 699 1055 l -4 1055 l -4 1192 l 699 1192 l 699 1055 z "},"°":{ha:595,x_min:62,x_max:532,o:"m 62 771 q 94 888 62 833 q 179 974 125 942 q 297 1006 233 1006 q 414 975 359 1006 q 500 888 469 943 q 532 771 532 833 q 500 653 532 708 q 414 568 469 599 q 297 538 360 538 q 131 605 199 538 q 62 771 62 673 m 192 771 q 222 697 192 728 q 297 667 252 667 q 372 698 342 667 q 403 771 403 729 q 372 846 403 814 q 297 878 341 878 q 223 846 254 878 q 192 771 192 815 z "},"±":{ha:793,x_min:60,x_max:733,o:"m 322 457 l 60 457 l 60 606 l 322 606 l 322 869 l 471 869 l 471 606 l 733 606 l 733 457 l 471 457 l 471 196 l 322 196 l 322 457 m 60 0 l 60 149 l 733 149 l 733 0 l 60 0 z "},"²":{ha:526,x_min:32,x_max:476,o:"m 476 397 l 37 397 l 37 511 l 189 660 q 278 758 258 728 q 297 822 297 788 q 281 861 297 848 q 237 875 264 875 q 115 815 182 875 l 32 918 q 260 1006 132 1006 q 406 961 353 1006 q 460 836 460 916 q 428 728 460 779 q 309 597 396 677 l 237 533 l 476 533 l 476 397 z "},"³":{ha:526,x_min:40,x_max:471,o:"m 452 847 q 336 713 452 750 l 336 704 q 435 653 400 690 q 471 562 471 616 q 411 433 471 480 q 225 386 351 386 q 40 433 128 386 l 40 562 q 224 501 140 501 q 321 574 321 501 q 291 628 321 610 q 208 646 261 646 l 132 646 l 132 754 l 195 754 q 278 772 251 754 q 306 828 306 789 q 289 871 306 854 q 237 888 272 888 q 177 875 205 888 q 110 835 149 862 l 41 930 q 135 983 83 962 q 256 1004 186 1004 q 397 961 342 1004 q 452 847 452 918 z "},"´":{ha:843,x_min:225,x_max:616,o:"m 225 842 l 225 860 q 385 1064 342 996 l 616 1064 l 616 1050 q 496 945 581 1015 q 363 842 411 876 l 225 842 z "},"µ":{ha:917,x_min:109,x_max:808,o:"m 315 315 q 345 192 315 233 q 439 151 375 151 q 563 210 524 151 q 602 401 602 269 l 602 758 l 808 758 l 808 0 l 652 0 l 623 102 l 612 102 q 543 15 584 44 q 443 -14 503 -14 q 366 2 401 -14 q 309 47 330 18 l 312 -10 l 315 -117 l 315 -334 l 109 -334 l 109 758 l 315 758 l 315 315 z "},"¶":{ha:909,x_min:77,x_max:791,o:"m 791 -176 l 682 -176 l 682 920 l 570 920 l 570 -176 l 460 -176 l 460 379 q 361 367 418 367 q 145 452 214 367 q 77 707 77 536 q 151 969 77 883 q 382 1055 224 1055 l 791 1055 l 791 -176 z "},"·":{ha:396,x_min:79,x_max:317,o:"m 79 490 q 110 576 79 547 q 199 606 140 606 q 286 576 255 606 q 317 490 317 546 q 285 405 317 435 q 199 375 254 375 q 111 405 142 375 q 79 490 79 435 z "},"¸":{ha:285,x_min:-25,x_max:283,o:"m 283 -170 q 232 -295 283 -256 q 74 -334 181 -334 q -25 -319 21 -334 l -25 -205 q 24 -215 -7 -210 q 72 -220 55 -220 q 121 -178 121 -220 q 8 -104 121 -121 l 61 0 l 192 0 l 174 -41 q 254 -92 224 -58 q 283 -170 283 -126 z "},"¹":{ha:526,x_min:62,x_max:396,o:"m 396 397 l 235 397 l 235 700 l 237 776 l 240 840 q 189 787 222 816 l 136 746 l 62 832 l 267 991 l 396 991 l 396 397 z "},"º":{ha:539,x_min:39,x_max:500,o:"m 500 757 q 438 575 500 641 q 268 510 376 510 q 101 577 164 510 q 39 757 39 644 q 99 937 39 871 q 271 1003 160 1003 q 437 936 374 1003 q 500 757 500 869 m 176 757 q 198 655 176 689 q 269 621 220 621 q 339 655 318 621 q 361 757 361 689 q 339 858 361 825 q 269 892 318 892 q 198 858 220 892 q 176 757 176 825 z "},"»":{ha:854,x_min:56,x_max:799,o:"m 799 371 l 547 64 l 399 144 l 587 380 l 399 616 l 547 697 l 799 389 l 799 371 m 456 371 l 204 64 l 56 144 l 244 380 l 56 616 l 204 697 l 456 389 l 456 371 z "},"¼":{ha:1223,x_min:31,x_max:1141,o:"m 365 397 l 203 397 l 203 700 l 205 776 l 209 840 q 158 787 191 816 l 105 746 l 31 832 l 235 991 l 365 991 l 365 397 m 929 991 l 379 0 l 217 0 l 767 991 l 929 991 m 1141 103 l 1056 103 l 1056 1 l 895 1 l 895 103 l 635 103 l 635 208 l 896 599 l 1056 599 l 1056 217 l 1141 217 l 1141 103 m 895 217 l 895 328 q 899 453 895 387 q 874 399 892 435 q 846 347 857 362 l 760 217 l 895 217 z "},"½":{ha:1223,x_min:31,x_max:1164,o:"m 365 397 l 203 397 l 203 700 l 205 776 l 209 840 q 158 787 191 816 l 105 746 l 31 832 l 235 991 l 365 991 l 365 397 m 929 991 l 379 0 l 217 0 l 767 991 l 929 991 m 1164 1 l 725 1 l 725 115 l 877 263 q 965 361 946 331 q 985 425 985 391 q 968 465 985 451 q 925 478 952 478 q 803 418 870 478 l 720 522 q 947 609 819 609 q 1094 564 1040 609 q 1147 439 1147 519 q 1116 331 1147 382 q 996 201 1084 280 l 925 136 l 1164 136 l 1164 1 z "},"¾":{ha:1223,x_min:61,x_max:1161,o:"m 473 847 q 357 713 473 750 l 357 704 q 456 653 421 690 q 492 562 492 616 q 432 433 492 480 q 246 386 372 386 q 61 433 149 386 l 61 562 q 245 501 161 501 q 342 574 342 501 q 312 628 342 610 q 229 646 282 646 l 153 646 l 153 754 l 216 754 q 299 772 272 754 q 327 828 327 789 q 310 871 327 854 q 258 888 293 888 q 198 875 227 888 q 131 835 170 862 l 62 930 q 156 983 104 962 q 277 1004 207 1004 q 418 961 363 1004 q 473 847 473 918 m 977 991 l 427 0 l 265 0 l 815 991 l 977 991 m 1161 103 l 1076 103 l 1076 1 l 915 1 l 915 103 l 655 103 l 655 208 l 916 599 l 1076 599 l 1076 217 l 1161 217 l 1161 103 m 915 217 l 915 328 q 919 453 915 387 q 895 399 913 435 q 867 347 877 362 l 781 217 l 915 217 z "},"¿":{ha:663,x_min:41,x_max:667,o:"m 484 411 l 484 361 q 453 246 484 294 q 350 146 423 198 q 257 63 276 93 q 237 -9 237 33 q 267 -73 237 -48 q 357 -98 296 -98 q 471 -79 410 -98 q 597 -31 532 -59 l 667 -180 q 516 -242 600 -218 q 361 -265 433 -265 q 126 -200 212 -265 q 41 -20 41 -134 q 74 107 41 54 q 204 232 107 161 q 287 304 269 279 q 304 371 304 330 l 304 411 l 484 411 m 505 643 q 475 557 505 586 q 386 528 444 528 q 299 557 330 528 q 268 643 268 587 q 299 728 268 698 q 386 758 331 758 q 474 728 443 758 q 505 643 505 699 z "},"À":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 484 1071 q 358 1167 441 1101 q 229 1279 275 1234 l 229 1293 l 461 1293 q 621 1089 504 1225 l 621 1071 l 484 1071 z "},"Á":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 367 1071 l 367 1089 q 526 1293 484 1225 l 758 1293 l 758 1279 q 638 1174 723 1244 q 505 1071 553 1105 l 367 1071 z "},"Â":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 636 1071 q 477 1190 530 1134 q 322 1071 425 1135 l 184 1071 l 184 1089 q 358 1293 313 1217 l 600 1293 q 673 1197 621 1258 q 774 1089 725 1137 l 774 1071 l 636 1071 z "},"Ã":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 368 1142 q 328 1124 347 1142 q 300 1069 309 1106 l 199 1069 q 255 1223 206 1168 q 383 1279 303 1279 q 438 1268 411 1279 q 491 1243 465 1257 q 542 1219 517 1230 q 591 1208 567 1208 q 632 1226 612 1208 q 660 1280 651 1244 l 761 1280 q 704 1126 753 1182 q 576 1071 655 1071 q 522 1082 549 1071 q 469 1106 495 1093 q 418 1131 443 1120 q 368 1142 393 1142 z "},"Ä":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 248 1182 q 273 1250 248 1226 q 342 1274 298 1274 q 412 1249 387 1274 q 437 1182 437 1223 q 412 1117 437 1141 q 342 1092 386 1092 q 273 1116 298 1092 q 248 1182 248 1139 m 521 1182 q 548 1252 521 1230 q 616 1274 576 1274 q 687 1249 661 1274 q 713 1182 713 1225 q 686 1116 713 1141 q 616 1092 660 1092 q 548 1114 576 1092 q 521 1182 521 1136 z "},"Å":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 650 1063 q 602 945 650 989 q 478 900 554 900 q 356 943 402 900 q 310 1061 310 987 q 356 1178 310 1135 q 478 1222 401 1222 q 602 1177 553 1222 q 650 1063 650 1133 m 543 1061 q 525 1109 543 1092 q 478 1126 507 1126 q 431 1109 450 1126 q 413 1061 413 1092 q 429 1013 413 1031 q 478 996 446 996 q 525 1013 507 996 q 543 1061 543 1031 z "},"Æ":{ha:1322,x_min:0,x_max:1240,o:"m 1240 0 l 648 0 l 648 236 l 315 236 l 214 0 l 0 0 l 444 991 l 1240 991 l 1240 819 l 859 819 l 859 602 l 1215 602 l 1215 429 l 859 429 l 859 174 l 1240 174 l 1240 0 m 392 412 l 648 412 l 648 812 l 562 812 l 392 412 z "},"Ç":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 m 650 -170 q 599 -295 650 -256 q 441 -334 548 -334 q 342 -319 388 -334 l 342 -205 q 391 -215 360 -210 q 439 -220 422 -220 q 488 -178 488 -220 q 375 -104 488 -121 l 428 0 l 559 0 l 541 -41 q 621 -92 591 -58 q 650 -170 650 -126 z "},"È":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 430 1071 q 304 1167 387 1101 q 176 1279 222 1234 l 176 1293 l 408 1293 q 567 1089 450 1225 l 567 1071 l 430 1071 z "},"É":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 288 1071 l 288 1089 q 447 1293 404 1225 l 679 1293 l 679 1279 q 558 1174 644 1244 q 425 1071 473 1105 l 288 1071 z "},"Ê":{ha:778,x_min:119,x_max:708,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 570 1071 q 412 1190 464 1134 q 256 1071 359 1135 l 119 1071 l 119 1089 q 292 1293 247 1217 l 534 1293 q 607 1197 555 1258 q 708 1089 659 1137 l 708 1071 l 570 1071 z "},"Ë":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 184 1182 q 210 1250 184 1226 q 279 1274 235 1274 q 349 1249 323 1274 q 374 1182 374 1223 q 349 1117 374 1141 q 279 1092 323 1092 q 210 1116 235 1092 q 184 1182 184 1139 m 458 1182 q 485 1252 458 1230 q 553 1274 513 1274 q 624 1249 597 1274 q 650 1182 650 1225 q 623 1116 650 1141 q 553 1092 597 1092 q 485 1114 513 1092 q 458 1182 458 1136 z "},"Ð":{ha:1028,x_min:32,x_max:947,o:"m 32 576 l 125 576 l 125 991 l 436 991 q 813 863 679 991 q 947 505 947 735 q 808 130 947 260 q 406 0 669 0 l 125 0 l 125 404 l 32 404 l 32 576 m 729 500 q 659 738 729 657 q 446 819 588 819 l 335 819 l 335 576 l 496 576 l 496 404 l 335 404 l 335 174 l 424 174 q 729 500 729 174 z "},"Ñ":{ha:1129,x_min:125,x_max:1004,o:"m 1004 0 l 737 0 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 249 l 825 249 q 815 522 815 442 l 815 991 l 1004 991 l 1004 0 m 453 1142 q 413 1124 432 1142 q 385 1069 393 1106 l 283 1069 q 339 1223 291 1168 q 468 1279 388 1279 q 523 1268 496 1279 q 575 1243 549 1257 q 627 1219 602 1230 q 676 1208 652 1208 q 716 1226 697 1208 q 745 1280 736 1244 l 846 1280 q 789 1126 838 1182 q 661 1071 740 1071 q 607 1082 633 1071 q 554 1106 580 1093 q 503 1131 528 1120 q 453 1142 477 1142 z "},"Ò":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 559 1071 q 433 1167 516 1101 q 304 1279 351 1234 l 304 1293 l 536 1293 q 696 1089 579 1225 l 696 1071 l 559 1071 z "},"Ó":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 446 1071 l 446 1089 q 606 1293 563 1225 l 838 1293 l 838 1279 q 717 1174 802 1244 q 584 1071 632 1105 l 446 1071 z "},"Ô":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 710 1071 q 551 1190 604 1134 q 396 1071 498 1135 l 258 1071 l 258 1089 q 432 1293 387 1217 l 674 1293 q 747 1197 695 1258 q 848 1089 799 1137 l 848 1071 l 710 1071 z "},"Õ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 442 1142 q 402 1124 421 1142 q 374 1069 382 1106 l 273 1069 q 329 1223 280 1168 q 457 1279 377 1279 q 512 1268 485 1279 q 565 1243 538 1257 q 616 1219 591 1230 q 665 1208 641 1208 q 706 1226 686 1208 q 734 1280 725 1244 l 835 1280 q 778 1126 827 1182 q 650 1071 729 1071 q 596 1082 623 1071 q 543 1106 569 1093 q 492 1131 517 1120 q 442 1142 467 1142 z "},"Ö":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 321 1182 q 347 1250 321 1226 q 416 1274 372 1274 q 486 1249 460 1274 q 511 1182 511 1223 q 486 1117 511 1141 q 416 1092 460 1092 q 347 1116 372 1092 q 321 1182 321 1139 m 595 1182 q 622 1252 595 1230 q 690 1274 650 1274 q 761 1249 734 1274 q 787 1182 787 1225 q 760 1116 787 1141 q 690 1092 734 1092 q 622 1114 650 1092 q 595 1182 595 1136 z "},"×":{ha:793,x_min:87,x_max:705,o:"m 290 490 l 87 694 l 191 799 l 395 596 l 602 799 l 705 697 l 498 490 l 703 285 l 602 182 l 395 386 l 191 183 l 89 286 l 290 490 z "},"Ø":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 325 31 419 -14 l 264 -61 l 154 12 l 215 104 q 81 498 81 236 q 203 877 81 746 q 554 1007 326 1007 q 787 960 688 1007 l 844 1044 l 953 974 l 893 885 q 1025 497 1025 753 m 301 497 q 339 289 301 368 l 682 802 q 554 832 625 832 q 365 748 429 832 q 301 497 301 663 m 804 497 q 770 699 804 619 l 431 189 q 553 163 482 163 q 804 497 804 163 z "},"Ù":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 509 1071 q 383 1167 466 1101 q 254 1279 300 1234 l 254 1293 l 486 1293 q 646 1089 529 1225 l 646 1071 l 509 1071 z "},"Ú":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 408 1071 l 408 1089 q 568 1293 525 1225 l 800 1293 l 800 1279 q 679 1174 764 1244 q 546 1071 594 1105 l 408 1071 z "},"Û":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 682 1071 q 524 1190 576 1134 q 368 1071 471 1135 l 231 1071 l 231 1089 q 404 1293 359 1217 l 646 1293 q 719 1197 667 1258 q 820 1089 771 1137 l 820 1071 l 682 1071 z "},"Ü":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 294 1182 q 319 1250 294 1226 q 388 1274 345 1274 q 458 1249 433 1274 q 484 1182 484 1223 q 458 1117 484 1141 q 388 1092 432 1092 q 319 1116 345 1092 q 294 1182 294 1139 m 567 1182 q 594 1252 567 1230 q 663 1274 622 1274 q 733 1249 707 1274 q 759 1182 759 1225 q 732 1116 759 1141 q 663 1092 706 1092 q 594 1114 622 1092 q 567 1182 567 1136 z "},"Ý":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 313 1071 l 313 1089 q 472 1293 429 1225 l 704 1293 l 704 1279 q 584 1174 669 1244 q 450 1071 498 1105 l 313 1071 z "},"Þ":{ha:872,x_min:125,x_max:810,o:"m 810 522 q 713 283 810 367 q 439 199 616 199 l 335 199 l 335 0 l 125 0 l 125 991 l 335 991 l 335 836 l 456 836 q 719 755 628 836 q 810 522 810 675 m 335 368 l 403 368 q 549 404 501 368 q 597 522 597 439 q 554 630 597 595 q 419 665 511 665 l 335 665 l 335 368 z "},"ß":{ha:987,x_min:109,x_max:939,o:"m 847 842 q 833 765 847 798 q 797 707 819 732 q 750 661 775 681 q 703 625 725 642 q 667 595 682 609 q 653 566 653 581 q 671 530 653 547 q 734 485 689 512 q 868 390 833 423 q 921 315 904 357 q 939 221 939 274 q 860 45 939 104 q 627 -14 781 -14 q 511 -4 559 -14 q 421 29 462 6 l 421 193 q 513 152 457 169 q 612 135 569 135 q 726 218 726 135 q 715 263 726 246 q 677 301 705 281 q 599 350 649 321 q 480 439 513 399 q 447 534 447 479 q 471 614 447 578 q 542 683 494 650 q 615 747 594 720 q 636 806 636 774 q 593 874 636 846 q 482 901 550 901 q 359 866 404 901 q 315 765 315 830 l 315 0 l 109 0 l 109 772 q 208 986 109 909 q 482 1063 307 1063 q 747 1003 648 1063 q 847 842 847 943 z "},"à":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 416 842 q 291 938 374 871 q 162 1050 208 1005 l 162 1064 l 394 1064 q 553 860 437 996 l 553 842 l 416 842 z "},"á":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 299 842 l 299 860 q 458 1064 416 996 l 690 1064 l 690 1050 q 570 945 655 1015 q 437 842 485 876 l 299 842 z "},"â":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 572 841 q 413 960 465 904 q 258 841 360 905 l 120 841 l 120 859 q 294 1063 248 987 l 536 1063 q 609 967 557 1028 q 709 859 661 907 l 709 841 l 572 841 z "},"ã":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 317 913 q 276 895 296 913 q 248 840 257 877 l 147 840 q 203 994 155 939 q 332 1050 252 1050 q 386 1039 359 1050 q 439 1014 413 1027 q 490 990 465 1001 q 540 979 515 979 q 580 997 561 979 q 608 1051 600 1015 l 709 1051 q 653 897 702 953 q 525 842 604 842 q 470 853 497 842 q 417 877 444 864 q 366 902 391 890 q 317 913 341 913 z "},"ä":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 193 953 q 219 1021 193 997 q 288 1044 244 1044 q 358 1019 332 1044 q 383 953 383 994 q 357 887 383 912 q 288 863 332 863 q 219 886 244 863 q 193 953 193 910 m 467 953 q 494 1022 467 1000 q 562 1044 522 1044 q 632 1020 606 1044 q 659 953 659 996 q 632 887 659 911 q 562 863 606 863 q 494 885 522 863 q 467 953 467 907 z "},"å":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 599 1003 q 551 885 599 930 q 427 840 503 840 q 304 884 351 840 q 258 1002 258 927 q 304 1119 258 1075 q 427 1162 350 1162 q 550 1118 501 1162 q 599 1003 599 1073 m 492 1002 q 473 1049 492 1032 q 427 1067 455 1067 q 380 1049 398 1067 q 361 1002 361 1032 q 378 954 361 971 q 427 936 394 936 q 473 954 455 936 q 492 1002 492 971 z "},"æ":{ha:1274,x_min:58,x_max:1214,o:"m 901 -14 q 732 21 808 -14 q 607 126 656 55 q 474 17 541 47 q 300 -14 407 -14 q 124 51 191 -14 q 58 227 58 115 q 140 405 58 347 q 386 468 222 462 l 515 472 l 515 529 q 485 598 515 576 q 403 621 455 621 q 196 568 308 621 l 129 705 q 415 774 257 774 q 647 685 569 774 q 750 750 692 728 q 890 772 809 772 q 1127 679 1040 772 q 1214 428 1214 586 l 1214 328 l 724 328 q 776 190 727 239 q 913 140 825 140 q 1171 200 1046 140 l 1171 40 q 1055 0 1117 14 q 901 -14 992 -14 m 515 351 l 439 349 q 313 316 355 346 q 271 225 271 287 q 366 138 271 138 q 475 179 434 138 q 515 289 515 220 l 515 351 m 886 625 q 728 465 739 625 l 1019 465 q 982 583 1018 541 q 886 625 946 625 z "},"ç":{ha:714,x_min:62,x_max:671,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 m 546 -170 q 495 -295 546 -256 q 336 -334 444 -334 q 237 -319 283 -334 l 237 -205 q 287 -215 256 -210 q 334 -220 317 -220 q 383 -178 383 -220 q 271 -104 383 -121 l 323 0 l 454 0 l 436 -41 q 516 -92 486 -58 q 546 -170 546 -126 z "},"è":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 420 842 q 295 938 378 871 q 166 1050 212 1005 l 166 1064 l 398 1064 q 557 860 441 996 l 557 842 l 420 842 z "},"é":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 303 842 l 303 860 q 463 1064 420 996 l 694 1064 l 694 1050 q 574 945 659 1015 q 441 842 489 876 l 303 842 z "},"ê":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 583 842 q 425 961 477 905 q 269 842 372 906 l 132 842 l 132 860 q 305 1064 260 988 l 547 1064 q 620 968 568 1029 q 721 860 672 907 l 721 842 l 583 842 z "},"ë":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 201 953 q 227 1021 201 997 q 296 1044 252 1044 q 366 1019 340 1044 q 391 953 391 994 q 366 887 391 912 q 296 863 340 863 q 227 886 252 863 q 201 953 201 910 m 475 953 q 502 1022 475 1000 q 570 1044 530 1044 q 641 1020 614 1044 q 667 953 667 996 q 640 887 667 911 q 570 863 614 863 q 502 885 530 863 q 475 953 475 907 z "},"ì":{ha:424,x_min:-68,x_max:323,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 186 842 q 60 938 143 871 q -68 1050 -22 1005 l -68 1064 l 163 1064 q 323 860 206 996 l 323 842 l 186 842 z "},"í":{ha:424,x_min:98,x_max:490,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 98 842 l 98 860 q 258 1064 215 996 l 490 1064 l 490 1050 q 369 945 454 1015 q 236 842 284 876 l 98 842 z "},"î":{ha:424,x_min:-83,x_max:507,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 369 842 q 210 961 262 905 q 55 842 157 906 l -83 842 l -83 860 q 91 1064 45 988 l 333 1064 q 406 968 354 1029 q 507 860 458 907 l 507 842 l 369 842 z "},"ï":{ha:424,x_min:-20,x_max:446,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m -20 953 q 6 1021 -20 997 q 75 1044 31 1044 q 145 1019 119 1044 q 170 953 170 994 q 144 887 170 912 q 75 863 119 863 q 6 886 31 863 q -20 953 -20 910 m 254 953 q 281 1022 254 1000 q 349 1044 309 1044 q 419 1020 393 1044 q 446 953 446 996 q 419 887 446 911 q 349 863 393 863 q 281 885 309 863 q 254 953 254 907 z "},"ð":{ha:860,x_min:62,x_max:798,o:"m 346 884 q 243 946 292 920 l 311 1065 q 486 970 409 1021 l 639 1064 l 707 960 l 591 889 q 747 669 697 792 q 798 389 798 546 q 699 93 798 199 q 428 -14 601 -14 q 162 79 262 -14 q 62 332 62 172 q 151 582 62 490 q 389 675 239 675 q 575 608 528 675 l 581 611 q 450 802 535 721 l 294 705 l 227 811 l 346 884 m 586 361 q 545 478 586 434 q 431 522 503 522 q 311 476 349 522 q 273 330 273 429 q 314 187 273 235 q 431 139 355 139 q 550 195 514 139 q 586 361 586 250 z "},"ñ":{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 0 m 345 913 q 304 895 323 913 q 276 840 285 877 l 175 840 q 231 994 182 939 q 359 1050 279 1050 q 414 1039 387 1050 q 467 1014 441 1027 q 518 990 493 1001 q 568 979 543 979 q 608 997 589 979 q 636 1051 627 1015 l 737 1051 q 681 897 730 953 q 553 842 631 842 q 498 853 525 842 q 445 877 471 864 q 394 902 419 890 q 345 913 369 913 z "},"ò":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 415 842 q 290 938 372 871 q 161 1050 207 1005 l 161 1064 l 393 1064 q 552 860 435 996 l 552 842 l 415 842 z "},"ó":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 317 842 l 317 860 q 476 1064 433 996 l 708 1064 l 708 1050 q 588 945 673 1015 q 454 842 503 876 l 317 842 z "},"ô":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 586 842 q 427 961 479 905 q 272 842 374 906 l 134 842 l 134 860 q 308 1064 262 988 l 550 1064 q 623 968 571 1029 q 724 860 675 907 l 724 842 l 586 842 z "},"õ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 318 913 q 278 895 297 913 q 250 840 258 877 l 149 840 q 204 994 156 939 q 333 1050 253 1050 q 388 1039 361 1050 q 440 1014 414 1027 q 492 990 467 1001 q 541 979 517 979 q 582 997 562 979 q 610 1051 601 1015 l 711 1051 q 654 897 703 953 q 526 842 605 842 q 472 853 498 842 q 419 877 445 864 q 368 902 393 890 q 318 913 342 913 z "},"ö":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 197 953 q 223 1021 197 997 q 292 1044 248 1044 q 362 1019 336 1044 q 387 953 387 994 q 361 887 387 912 q 292 863 336 863 q 223 886 248 863 q 197 953 197 910 m 471 953 q 498 1022 471 1000 q 566 1044 526 1044 q 636 1020 610 1044 q 663 953 663 996 q 636 887 663 911 q 566 863 610 863 q 498 885 526 863 q 471 953 471 907 z "},"÷":{ha:793,x_min:60,x_max:733,o:"m 60 415 l 60 564 l 733 564 l 733 415 l 60 415 m 301 253 q 326 330 301 304 q 396 355 351 355 q 466 329 441 355 q 490 253 490 302 q 465 178 490 205 q 396 150 440 150 q 327 176 352 150 q 301 253 301 203 m 301 726 q 326 803 301 777 q 396 829 351 829 q 466 802 441 829 q 490 726 490 774 q 465 651 490 679 q 396 624 440 624 q 327 650 352 624 q 301 726 301 677 z "},"ø":{ha:860,x_min:62,x_max:798,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 269 17 342 -14 l 224 -52 l 119 20 l 165 87 q 62 380 62 193 q 159 669 62 566 q 432 772 256 772 q 600 737 522 772 l 637 793 l 741 720 l 701 663 q 798 380 798 557 m 273 380 q 286 268 273 317 l 501 590 q 429 606 472 606 q 310 550 347 606 q 273 380 273 494 m 586 380 q 578 476 586 435 l 368 163 q 431 153 394 153 q 550 210 513 153 q 586 380 586 267 z "},"ù":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 420 842 q 295 938 378 871 q 166 1050 212 1005 l 166 1064 l 398 1064 q 557 860 441 996 l 557 842 l 420 842 z "},"ú":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 338 842 l 338 860 q 497 1064 454 996 l 729 1064 l 729 1050 q 609 945 694 1015 q 475 842 524 876 l 338 842 z "},"û":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 611 842 q 452 961 505 905 q 297 842 399 906 l 159 842 l 159 860 q 333 1064 288 988 l 575 1064 q 648 968 596 1029 q 749 860 700 907 l 749 842 l 611 842 z "},"ü":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 221 953 q 247 1021 221 997 q 315 1044 272 1044 q 386 1019 360 1044 q 411 953 411 994 q 385 887 411 912 q 315 863 359 863 q 247 886 272 863 q 221 953 221 910 m 494 953 q 522 1022 494 1000 q 590 1044 549 1044 q 660 1020 634 1044 q 686 953 686 996 q 660 887 686 911 q 590 863 633 863 q 522 885 549 863 q 494 953 494 907 z "},"ý":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 267 842 l 267 860 q 426 1064 383 996 l 658 1064 l 658 1050 q 537 945 623 1015 q 404 842 452 876 l 267 842 z "},"þ":{ha:879,x_min:109,x_max:817,o:"m 315 660 q 404 744 349 715 q 530 772 459 772 q 741 668 665 772 q 817 380 817 563 q 741 91 817 195 q 530 -14 665 -14 q 315 79 386 -14 l 306 79 l 311 37 l 315 -26 l 315 -334 l 109 -334 l 109 1055 l 315 1055 l 315 790 l 311 709 l 306 660 l 315 660 m 464 607 q 352 560 387 607 q 315 404 317 513 l 315 382 q 352 207 315 260 q 467 154 388 154 q 606 383 606 154 q 571 551 606 495 q 464 607 537 607 z "},"ÿ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 165 953 q 190 1021 165 997 q 259 1044 216 1044 q 329 1019 304 1044 q 355 953 355 994 q 329 887 355 912 q 259 863 303 863 q 190 886 216 863 q 165 953 165 910 m 438 953 q 466 1022 438 1000 q 534 1044 493 1044 q 604 1020 578 1044 q 630 953 630 996 q 604 887 630 911 q 534 863 577 863 q 466 885 493 863 q 438 953 438 907 z "},"Ā":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 252 1214 l 711 1214 l 711 1071 l 252 1071 l 252 1214 z "},"ā":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 199 985 l 659 985 l 659 842 l 199 842 l 199 985 z "},"Ă":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 746 1300 q 663 1133 738 1196 q 476 1071 589 1071 q 288 1133 358 1071 q 212 1300 218 1194 l 328 1300 q 346 1250 330 1268 q 391 1223 362 1232 q 477 1215 420 1215 q 628 1300 617 1215 l 746 1300 z "},"ă":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 696 1071 q 613 904 688 966 q 426 842 538 842 q 238 903 308 842 q 162 1071 168 965 l 277 1071 q 296 1021 280 1039 q 341 994 312 1002 q 427 986 370 986 q 578 1071 567 986 l 696 1071 z "},"Ą":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 754 -154 q 769 -196 754 -182 q 808 -210 785 -210 q 886 -197 846 -210 l 886 -318 q 781 -334 831 -334 q 657 -291 704 -334 q 611 -178 611 -248 q 637 -92 611 -132 q 733 0 663 -52 l 854 0 q 781 -82 807 -45 q 754 -154 754 -119 z "},"ą":{ha:839,x_min:58,x_max:746,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 614 -154 q 629 -196 614 -182 q 668 -210 644 -210 q 746 -197 705 -210 l 746 -318 q 640 -334 690 -334 q 517 -291 564 -334 q 471 -178 471 -248 q 496 -92 471 -132 q 593 0 522 -52 l 714 0 q 640 -82 667 -45 q 614 -154 614 -119 z "},"Ć":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 m 406 1071 l 406 1089 q 565 1293 522 1225 l 797 1293 l 797 1279 q 676 1174 762 1244 q 543 1071 591 1105 l 406 1071 z "},"ć":{ha:714,x_min:62,x_max:692,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 m 300 842 l 300 860 q 460 1064 417 996 l 692 1064 l 692 1050 q 571 945 656 1015 q 438 842 486 876 l 300 842 z "},"Ĉ":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 m 693 1071 q 534 1190 587 1134 q 379 1071 481 1135 l 241 1071 l 241 1089 q 415 1293 370 1217 l 657 1293 q 730 1197 678 1258 q 831 1089 782 1137 l 831 1071 l 693 1071 z "},"ĉ":{ha:714,x_min:62,x_max:704,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 m 566 842 q 408 961 460 905 q 252 842 355 906 l 115 842 l 115 860 q 288 1064 243 988 l 530 1064 q 603 968 551 1029 q 704 860 655 907 l 704 842 l 566 842 z "},"Ċ":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 m 420 1183 q 533 1284 420 1284 q 646 1183 646 1284 q 617 1108 646 1135 q 533 1082 589 1082 q 420 1183 420 1082 z "},"ċ":{ha:714,x_min:62,x_max:671,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 m 313 954 q 426 1055 313 1055 q 538 954 538 1055 q 510 879 538 906 q 426 852 482 852 q 313 954 313 852 z "},"Č":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 m 832 1293 l 832 1275 q 727 1161 775 1218 q 659 1071 680 1105 l 416 1071 q 360 1147 397 1103 q 243 1275 323 1192 l 243 1293 l 380 1293 q 536 1174 480 1230 q 694 1293 593 1233 l 832 1293 z "},"č":{ha:714,x_min:62,x_max:715,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 m 715 1064 l 715 1046 q 611 932 659 989 q 542 842 563 876 l 300 842 q 243 918 280 873 q 126 1046 207 962 l 126 1064 l 264 1064 q 419 945 363 1001 q 578 1064 476 1004 l 715 1064 z "},"Ď":{ha:1028,x_min:125,x_max:947,o:"m 947 505 q 808 130 947 260 q 406 0 669 0 l 125 0 l 125 991 l 436 991 q 813 863 679 991 q 947 505 947 735 m 729 500 q 447 819 729 819 l 335 819 l 335 174 l 425 174 q 729 500 729 174 m 786 1293 l 786 1275 q 681 1161 729 1218 q 612 1071 633 1105 l 370 1071 q 314 1147 351 1103 q 197 1275 277 1192 l 197 1293 l 334 1293 q 490 1174 434 1230 q 648 1293 547 1233 l 786 1293 z "},"ď":{ha:879,x_min:62,x_max:1067,o:"m 349 -14 q 139 90 215 -14 q 62 378 62 194 q 140 668 62 564 q 354 772 218 772 q 572 661 497 772 l 579 661 q 564 812 564 746 l 564 1055 l 771 1055 l 771 0 l 612 0 l 572 98 l 564 98 q 349 -14 493 -14 m 421 151 q 537 197 500 151 q 578 354 574 243 l 578 376 q 540 551 578 498 q 418 604 503 604 q 310 546 349 604 q 272 375 272 487 q 311 207 272 263 q 421 151 349 151 m 833 851 q 857 948 844 884 q 876 1055 870 1012 l 1067 1055 l 1067 1042 q 954 833 1013 922 l 833 833 l 833 851 z "},"Đ":{ha:1028,x_min:32,x_max:947,o:"m 32 576 l 125 576 l 125 991 l 436 991 q 813 863 679 991 q 947 505 947 735 q 808 130 947 260 q 406 0 669 0 l 125 0 l 125 404 l 32 404 l 32 576 m 729 500 q 659 738 729 657 q 446 819 588 819 l 335 819 l 335 576 l 496 576 l 496 404 l 335 404 l 335 174 l 424 174 q 729 500 729 174 z "},"đ":{ha:901,x_min:62,x_max:876,o:"m 342 -14 q 137 84 212 -14 q 62 357 62 182 q 130 639 62 548 q 349 730 197 730 q 479 702 422 730 q 572 619 536 673 l 579 619 q 564 777 564 708 l 564 811 l 350 811 l 350 946 l 564 946 l 564 1055 l 771 1055 l 771 946 l 876 946 l 876 811 l 771 811 l 771 0 l 603 0 l 559 98 l 551 98 q 342 -14 481 -14 m 429 151 q 539 193 504 151 q 578 336 575 235 l 578 355 q 544 518 578 475 q 419 562 509 562 q 316 515 344 562 q 288 354 288 469 q 321 202 288 253 q 429 151 355 151 z "},"Ē":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 186 1214 l 646 1214 l 646 1071 l 186 1071 l 186 1214 z "},"ē":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 189 985 l 648 985 l 648 842 l 189 842 l 189 985 z "},"Ĕ":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 673 1300 q 590 1133 665 1196 q 403 1071 515 1071 q 215 1133 285 1071 q 139 1300 144 1194 l 254 1300 q 273 1250 257 1268 q 318 1223 289 1232 q 404 1215 347 1215 q 555 1300 544 1215 l 673 1300 z "},"ĕ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 688 1071 q 605 904 680 966 q 418 842 530 842 q 230 903 300 842 q 154 1071 159 965 l 269 1071 q 288 1021 272 1039 q 333 994 304 1002 q 419 986 361 986 q 570 1071 559 986 l 688 1071 z "},"Ė":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 305 1164 q 418 1265 305 1265 q 530 1164 530 1265 q 502 1089 530 1116 q 418 1062 474 1062 q 305 1164 305 1062 z "},"ė":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 316 954 q 429 1055 316 1055 q 541 954 541 1055 q 513 879 541 906 q 429 852 485 852 q 316 954 316 852 z "},"Ę":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 533 -154 q 548 -196 533 -182 q 587 -210 564 -210 q 665 -197 625 -210 l 665 -318 q 559 -334 610 -334 q 436 -291 483 -334 q 390 -178 390 -248 q 416 -92 390 -132 q 512 0 441 -52 l 633 0 q 559 -82 586 -45 q 533 -154 533 -119 z "},"ę":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 540 -140 q 555 -182 540 -169 q 594 -196 570 -196 q 672 -184 631 -196 l 672 -304 q 566 -320 616 -320 q 443 -277 490 -320 q 397 -164 397 -234 q 422 -79 397 -119 q 519 14 448 -39 l 640 14 q 566 -68 593 -31 q 540 -140 540 -105 z "},"Ě":{ha:778,x_min:119,x_max:708,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 708 1293 l 708 1275 q 603 1161 651 1218 q 534 1071 555 1105 l 292 1071 q 236 1147 273 1103 q 119 1275 199 1192 l 119 1293 l 256 1293 q 412 1174 356 1230 q 570 1293 469 1233 l 708 1293 z "},"ě":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 717 1064 l 717 1046 q 612 932 660 989 q 543 842 564 876 l 301 842 q 245 918 281 873 q 127 1046 208 962 l 127 1064 l 265 1064 q 420 945 365 1001 q 579 1064 477 1004 l 717 1064 z "},"Ĝ":{ha:1006,x_min:81,x_max:895,o:"m 501 557 l 895 557 l 895 43 q 714 -1 799 12 q 542 -14 630 -14 q 199 118 317 -14 q 81 497 81 250 q 218 871 81 737 q 599 1006 355 1006 q 893 945 751 1006 l 823 777 q 597 831 715 831 q 379 739 461 831 q 297 493 297 648 q 363 247 297 332 q 555 161 429 161 q 689 175 621 161 l 689 382 l 501 382 l 501 557 m 703 1071 q 544 1190 596 1134 q 389 1071 491 1135 l 251 1071 l 251 1089 q 425 1293 379 1217 l 667 1293 q 740 1197 688 1258 q 840 1089 791 1137 l 840 1071 l 703 1071 z "},"ĝ":{ha:785,x_min:4,x_max:768,o:"m 768 758 l 768 653 l 650 623 q 682 509 682 572 q 597 318 682 387 q 361 250 512 250 l 323 252 l 293 256 q 261 201 261 231 q 375 157 261 157 l 504 157 q 694 103 629 157 q 760 -54 760 50 q 649 -260 760 -187 q 330 -334 538 -334 q 88 -278 172 -334 q 4 -123 4 -223 q 47 -9 4 -55 q 172 57 90 37 q 117 101 140 71 q 93 167 93 132 q 118 239 93 210 q 191 296 143 268 q 96 378 131 321 q 61 513 61 435 q 142 705 61 637 q 372 772 222 772 q 448 767 404 772 q 504 758 492 761 l 768 758 m 183 -107 q 224 -174 183 -150 q 339 -199 265 -199 q 513 -168 450 -199 q 576 -85 576 -138 q 539 -26 576 -42 q 424 -9 502 -9 l 317 -9 q 221 -36 260 -9 q 183 -107 183 -63 m 258 510 q 287 412 258 448 q 372 376 315 376 q 458 412 431 376 q 485 510 485 448 q 372 647 485 647 q 258 510 258 647 m 553 842 q 395 961 447 905 q 239 842 342 906 l 102 842 l 102 860 q 275 1064 230 988 l 517 1064 q 590 968 538 1029 q 691 860 642 907 l 691 842 l 553 842 z "},"Ğ":{ha:1006,x_min:81,x_max:895,o:"m 501 557 l 895 557 l 895 43 q 714 -1 799 12 q 542 -14 630 -14 q 199 118 317 -14 q 81 497 81 250 q 218 871 81 737 q 599 1006 355 1006 q 893 945 751 1006 l 823 777 q 597 831 715 831 q 379 739 461 831 q 297 493 297 648 q 363 247 297 332 q 555 161 429 161 q 689 175 621 161 l 689 382 l 501 382 l 501 557 m 817 1300 q 734 1133 808 1196 q 547 1071 659 1071 q 358 1133 429 1071 q 283 1300 288 1194 l 398 1300 q 417 1250 401 1268 q 461 1223 433 1232 q 548 1215 490 1215 q 699 1300 688 1215 l 817 1300 z "},"ğ":{ha:785,x_min:4,x_max:768,o:"m 768 758 l 768 653 l 650 623 q 682 509 682 572 q 597 318 682 387 q 361 250 512 250 l 323 252 l 293 256 q 261 201 261 231 q 375 157 261 157 l 504 157 q 694 103 629 157 q 760 -54 760 50 q 649 -260 760 -187 q 330 -334 538 -334 q 88 -278 172 -334 q 4 -123 4 -223 q 47 -9 4 -55 q 172 57 90 37 q 117 101 140 71 q 93 167 93 132 q 118 239 93 210 q 191 296 143 268 q 96 378 131 321 q 61 513 61 435 q 142 705 61 637 q 372 772 222 772 q 448 767 404 772 q 504 758 492 761 l 768 758 m 183 -107 q 224 -174 183 -150 q 339 -199 265 -199 q 513 -168 450 -199 q 576 -85 576 -138 q 539 -26 576 -42 q 424 -9 502 -9 l 317 -9 q 221 -36 260 -9 q 183 -107 183 -63 m 258 510 q 287 412 258 448 q 372 376 315 376 q 458 412 431 376 q 485 510 485 448 q 372 647 485 647 q 258 510 258 647 m 667 1071 q 585 904 659 966 q 397 842 510 842 q 209 903 279 842 q 134 1071 139 965 l 249 1071 q 268 1021 252 1039 q 312 994 283 1002 q 399 986 341 986 q 549 1071 538 986 l 667 1071 z "},"Ġ":{ha:1006,x_min:81,x_max:895,o:"m 501 557 l 895 557 l 895 43 q 714 -1 799 12 q 542 -14 630 -14 q 199 118 317 -14 q 81 497 81 250 q 218 871 81 737 q 599 1006 355 1006 q 893 945 751 1006 l 823 777 q 597 831 715 831 q 379 739 461 831 q 297 493 297 648 q 363 247 297 332 q 555 161 429 161 q 689 175 621 161 l 689 382 l 501 382 l 501 557 m 444 1183 q 557 1284 444 1284 q 669 1183 669 1284 q 641 1108 669 1135 q 557 1082 613 1082 q 444 1183 444 1082 z "},"ġ":{ha:785,x_min:4,x_max:768,o:"m 768 758 l 768 653 l 650 623 q 682 509 682 572 q 597 318 682 387 q 361 250 512 250 l 323 252 l 293 256 q 261 201 261 231 q 375 157 261 157 l 504 157 q 694 103 629 157 q 760 -54 760 50 q 649 -260 760 -187 q 330 -334 538 -334 q 88 -278 172 -334 q 4 -123 4 -223 q 47 -9 4 -55 q 172 57 90 37 q 117 101 140 71 q 93 167 93 132 q 118 239 93 210 q 191 296 143 268 q 96 378 131 321 q 61 513 61 435 q 142 705 61 637 q 372 772 222 772 q 448 767 404 772 q 504 758 492 761 l 768 758 m 183 -107 q 224 -174 183 -150 q 339 -199 265 -199 q 513 -168 450 -199 q 576 -85 576 -138 q 539 -26 576 -42 q 424 -9 502 -9 l 317 -9 q 221 -36 260 -9 q 183 -107 183 -63 m 258 510 q 287 412 258 448 q 372 376 315 376 q 458 412 431 376 q 485 510 485 448 q 372 647 485 647 q 258 510 258 647 m 279 954 q 391 1055 279 1055 q 504 954 504 1055 q 476 879 504 906 q 391 852 448 852 q 279 954 279 852 z "},"Ģ":{ha:1006,x_min:81,x_max:895,o:"m 501 557 l 895 557 l 895 43 q 714 -1 799 12 q 542 -14 630 -14 q 199 118 317 -14 q 81 497 81 250 q 218 871 81 737 q 599 1006 355 1006 q 893 945 751 1006 l 823 777 q 597 831 715 831 q 379 739 461 831 q 297 493 297 648 q 363 247 297 332 q 555 161 429 161 q 689 175 621 161 l 689 382 l 501 382 l 501 557 m 427 -289 q 450 -192 437 -256 q 469 -85 463 -128 l 660 -85 l 660 -98 q 547 -307 609 -212 l 427 -307 l 427 -289 z "},"ģ":{ha:785,x_min:4,x_max:768,o:"m 768 758 l 768 653 l 650 623 q 682 509 682 572 q 597 318 682 387 q 361 250 512 250 l 323 252 l 293 256 q 261 201 261 231 q 375 157 261 157 l 504 157 q 694 103 629 157 q 760 -54 760 50 q 649 -260 760 -187 q 330 -334 538 -334 q 88 -278 172 -334 q 4 -123 4 -223 q 47 -9 4 -55 q 172 57 90 37 q 117 101 140 71 q 93 167 93 132 q 118 239 93 210 q 191 296 143 268 q 96 378 131 321 q 61 513 61 435 q 142 705 61 637 q 372 772 222 772 q 448 767 404 772 q 504 758 492 761 l 768 758 m 183 -107 q 224 -174 183 -150 q 339 -199 265 -199 q 513 -168 450 -199 q 576 -85 576 -138 q 539 -26 576 -42 q 424 -9 502 -9 l 317 -9 q 221 -36 260 -9 q 183 -107 183 -63 m 258 510 q 287 412 258 448 q 372 376 315 376 q 458 412 431 376 q 485 510 485 448 q 372 647 485 647 q 258 510 258 647 m 521 1046 q 497 949 511 1013 q 479 842 484 885 l 288 842 l 288 856 q 400 1064 340 971 l 521 1064 l 521 1046 z "},"Ĥ":{ha:1063,x_min:125,x_max:937,o:"m 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 0 m 686 1071 q 528 1190 580 1134 q 372 1071 475 1135 l 235 1071 l 235 1089 q 408 1293 363 1217 l 650 1293 q 723 1197 671 1258 q 824 1089 775 1137 l 824 1071 l 686 1071 z "},"ĥ":{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 479 607 602 607 q 354 548 393 607 q 315 357 315 489 l 315 0 l 109 0 l 109 1055 l 315 1055 l 315 840 q 311 722 315 815 l 306 661 l 317 661 q 536 772 386 772 q 739 701 670 772 q 808 494 808 629 l 808 0 m 614 1108 q 455 1227 507 1171 q 300 1108 402 1173 l 162 1108 l 162 1126 q 336 1331 290 1255 l 578 1331 q 651 1235 599 1295 q 751 1126 703 1174 l 751 1108 l 614 1108 z "},"Ħ":{ha:1063,x_min:0,x_max:1063,o:"m 937 860 l 1063 860 l 1063 725 l 937 725 l 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 725 l 0 725 l 0 860 l 125 860 l 125 991 l 335 991 l 335 860 l 728 860 l 728 991 l 937 991 l 937 860 m 728 603 l 728 725 l 335 725 l 335 603 l 728 603 z "},"ħ":{ha:913,x_min:3,x_max:808,o:"m 808 0 l 602 0 l 602 401 q 479 566 602 566 q 354 506 393 566 q 315 315 315 447 l 315 0 l 109 0 l 109 811 l 3 811 l 3 946 l 109 946 l 109 1055 l 315 1055 l 315 946 l 529 946 l 529 811 l 315 811 l 315 799 q 306 619 315 743 l 318 619 q 538 730 387 730 q 740 659 671 730 q 808 453 808 588 l 808 0 z "},"ĩ":{ha:424,x_min:-68,x_max:494,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 101 913 q 61 895 80 913 q 33 840 41 877 l -68 840 q -13 994 -61 939 q 116 1050 36 1050 q 171 1039 144 1050 q 223 1014 197 1027 q 275 990 250 1001 q 324 979 300 979 q 365 997 345 979 q 393 1051 384 1015 l 494 1051 q 437 897 486 953 q 309 842 388 842 q 255 853 281 842 q 202 877 228 864 q 151 902 176 890 q 101 913 125 913 z "},"ī":{ha:424,x_min:-16,x_max:444,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m -16 985 l 444 985 l 444 842 l -16 842 l -16 985 z "},"ĭ":{ha:424,x_min:-55,x_max:479,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 479 1071 q 396 904 471 966 q 209 842 321 842 q 21 903 91 842 q -55 1071 -50 965 l 60 1071 q 79 1021 63 1039 q 124 994 95 1002 q 210 986 153 986 q 361 1071 350 986 l 479 1071 z "},"į":{ha:424,x_min:29,x_max:325,o:"m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 172 -154 q 188 -196 172 -182 q 227 -210 203 -210 q 304 -197 264 -210 l 304 -318 q 199 -334 249 -334 q 76 -291 122 -334 q 29 -178 29 -248 q 55 -92 29 -132 q 151 0 81 -52 l 273 0 q 199 -82 225 -45 q 172 -154 172 -119 z "},"ı":{ha:424,x_min:109,x_max:315,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 z "},"ĳ":{ha:821,x_min:100,x_max:722,o:"m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 445 -334 q 309 -317 366 -334 l 309 -154 q 406 -167 356 -167 q 482 -138 458 -167 q 506 -52 506 -109 l 506 758 l 713 758 l 713 -82 q 643 -268 713 -203 q 445 -334 573 -334 m 497 954 q 610 1055 497 1055 q 722 954 722 1055 q 694 879 722 906 q 610 852 666 852 q 497 954 497 852 z "},"Ĵ":{ha:460,x_min:-103,x_max:527,o:"m 21 -292 q -103 -277 -50 -292 l -103 -102 q -4 -115 -49 -115 q 95 -72 65 -115 q 125 62 125 -29 l 125 991 l 335 991 l 335 64 q 256 -201 335 -110 q 21 -292 176 -292 m 389 1071 q 231 1190 283 1134 q 75 1071 178 1135 l -62 1071 l -62 1089 q 111 1293 66 1217 l 353 1293 q 426 1197 374 1258 q 527 1089 478 1137 l 527 1071 l 389 1071 z "},"ĵ":{ha:424,x_min:-89,x_max:504,o:"m 47 -334 q -89 -317 -32 -334 l -89 -154 q 8 -167 -41 -167 q 84 -138 60 -167 q 109 -52 109 -109 l 109 758 l 315 758 l 315 -82 q 245 -268 315 -203 q 47 -334 176 -334 m 366 842 q 208 961 260 905 q 52 842 155 906 l -85 842 l -85 860 q 88 1064 43 988 l 330 1064 q 403 968 351 1029 q 504 860 455 907 l 504 842 l 366 842 z "},"Ķ":{ha:922,x_min:125,x_max:922,o:"m 922 0 l 684 0 l 424 418 l 335 354 l 335 0 l 125 0 l 125 991 l 335 991 l 335 538 l 418 654 l 686 991 l 920 991 l 574 553 l 922 0 m 343 -289 q 367 -192 353 -256 q 385 -85 380 -128 l 576 -85 l 576 -98 q 464 -307 526 -212 l 343 -307 l 343 -289 z "},"ķ":{ha:861,x_min:109,x_max:861,o:"m 307 412 l 397 528 l 610 758 l 843 758 l 542 429 l 861 0 l 623 0 l 404 307 l 315 236 l 315 0 l 109 0 l 109 1055 l 315 1055 l 315 585 l 304 412 l 307 412 m 317 -289 q 340 -192 327 -256 q 359 -85 353 -128 l 550 -85 l 550 -98 q 437 -307 499 -212 l 317 -307 l 317 -289 z "},"ĸ":{ha:861,x_min:109,x_max:861,o:"m 314 395 l 410 510 l 623 758 l 843 758 l 545 411 l 861 0 l 625 0 l 412 289 l 315 228 l 315 0 l 109 0 l 109 758 l 315 758 l 315 559 l 313 450 l 311 395 l 314 395 z "},"Ĺ":{ha:785,x_min:125,x_max:737,o:"m 125 0 l 125 991 l 335 991 l 335 174 l 737 174 l 737 0 l 125 0 m 181 1071 l 181 1089 q 340 1293 298 1225 l 572 1293 l 572 1279 q 452 1174 537 1244 q 319 1071 367 1105 l 181 1071 z "},"ĺ":{ha:424,x_min:109,x_max:513,o:"m 315 0 l 109 0 l 109 1055 l 315 1055 l 315 0 m 121 1109 l 121 1128 q 281 1332 238 1263 l 513 1332 l 513 1318 q 392 1213 477 1282 q 259 1109 307 1143 l 121 1109 z "},"Ļ":{ha:785,x_min:125,x_max:737,o:"m 125 0 l 125 991 l 335 991 l 335 174 l 737 174 l 737 0 l 125 0 m 288 -289 q 311 -192 298 -256 q 330 -85 324 -128 l 521 -85 l 521 -98 q 408 -307 470 -212 l 288 -307 l 288 -289 z "},"ļ":{ha:424,x_min:67,x_max:315,o:"m 315 0 l 109 0 l 109 1055 l 315 1055 l 315 0 m 67 -289 q 91 -192 77 -256 q 109 -85 104 -128 l 300 -85 l 300 -98 q 188 -307 250 -212 l 67 -307 l 67 -289 z "},"Ľ":{ha:785,x_min:125,x_max:737,o:"m 125 0 l 125 991 l 335 991 l 335 174 l 737 174 l 737 0 l 125 0 m 490 788 q 514 885 500 821 q 532 992 527 949 l 724 992 l 724 979 q 611 770 669 859 l 490 770 l 490 788 z "},"ľ":{ha:424,x_min:109,x_max:611,o:"m 315 0 l 109 0 l 109 1055 l 315 1055 l 315 0 m 378 851 q 401 948 388 884 q 420 1055 414 1012 l 611 1055 l 611 1042 q 498 833 557 922 l 378 833 l 378 851 z "},"Ŀ":{ha:785,x_min:125,x_max:737,o:"m 125 0 l 125 991 l 335 991 l 335 174 l 737 174 l 737 0 l 125 0 m 479 509 q 591 610 479 610 q 704 509 704 610 q 676 434 704 461 q 591 408 648 408 q 479 509 479 408 z "},"ŀ":{ha:595,x_min:109,x_max:623,o:"m 315 0 l 109 0 l 109 1055 l 315 1055 l 315 0 m 398 471 q 511 572 398 572 q 623 471 623 572 q 595 396 623 423 q 511 370 567 370 q 398 471 398 370 z "},"Ł":{ha:785,x_min:1,x_max:737,o:"m 125 0 l 125 334 l 78 306 l 1 439 l 125 514 l 125 991 l 335 991 l 335 642 l 432 701 l 511 568 l 335 461 l 335 174 l 737 174 l 737 0 l 125 0 z "},"ł":{ha:458,x_min:0,x_max:458,o:"m 332 631 l 379 660 l 458 526 l 332 450 l 332 0 l 125 0 l 125 323 l 77 294 l 0 428 l 125 504 l 125 1055 l 332 1055 l 332 631 z "},"Ń":{ha:1129,x_min:125,x_max:1004,o:"m 1004 0 l 737 0 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 249 l 825 249 q 815 522 815 442 l 815 991 l 1004 991 l 1004 0 m 445 1071 l 445 1089 q 604 1293 562 1225 l 836 1293 l 836 1279 q 716 1174 801 1244 q 583 1071 631 1105 l 445 1071 z "},"ń":{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 0 m 340 842 l 340 860 q 500 1064 457 996 l 732 1064 l 732 1050 q 611 945 696 1015 q 478 842 526 876 l 340 842 z "},"Ņ":{ha:1129,x_min:125,x_max:1004,o:"m 1004 0 l 737 0 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 249 l 825 249 q 815 522 815 442 l 815 991 l 1004 991 l 1004 0 m 406 -289 q 429 -192 416 -256 q 448 -85 442 -128 l 639 -85 l 639 -98 q 526 -307 588 -212 l 406 -307 l 406 -289 z "},"ņ":{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 0 m 317 -289 q 340 -192 327 -256 q 359 -85 353 -128 l 550 -85 l 550 -98 q 437 -307 499 -212 l 317 -307 l 317 -289 z "},"Ň":{ha:1129,x_min:125,x_max:1004,o:"m 1004 0 l 737 0 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 249 l 825 249 q 815 522 815 442 l 815 991 l 1004 991 l 1004 0 m 877 1293 l 877 1275 q 772 1161 820 1218 q 703 1071 724 1105 l 461 1071 q 405 1147 441 1103 q 288 1275 368 1192 l 288 1293 l 425 1293 q 581 1174 525 1230 q 739 1293 637 1233 l 877 1293 z "},"ň":{ha:913,x_min:109,x_max:808,o:"m 808 0 l 602 0 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 0 m 768 1064 l 768 1046 q 664 932 711 989 q 595 842 616 876 l 353 842 q 296 918 333 873 q 179 1046 260 962 l 179 1064 l 317 1064 q 472 945 416 1001 q 631 1064 529 1004 l 768 1064 z "},"ŉ":{ha:1082,x_min:4,x_max:978,o:"m 978 0 l 771 0 l 771 443 q 742 566 771 525 q 649 607 713 607 q 524 549 562 607 q 485 357 485 491 l 485 0 l 278 0 l 278 758 l 436 758 l 464 661 l 475 661 q 571 744 510 716 q 709 772 631 772 q 909 701 841 772 q 978 494 978 629 l 978 0 m 262 991 l 272 977 q 153 652 238 843 l 4 652 q 72 991 51 852 l 262 991 z "},"Ŋ":{ha:1129,x_min:125,x_max:1004,o:"m 689 -292 q 555 -277 612 -292 l 555 -102 q 668 -115 618 -115 q 782 -84 742 -115 q 828 3 822 -54 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 387 l 825 387 l 820 490 q 815 661 815 564 l 815 991 l 1004 991 l 1004 0 q 923 -216 1004 -140 q 689 -292 841 -292 z "},"ŋ":{ha:913,x_min:109,x_max:808,o:"m 562 -334 q 437 -317 490 -334 l 437 -154 q 518 -167 477 -167 q 602 -52 602 -167 l 602 458 q 479 607 602 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 307 661 q 401 744 341 715 q 539 772 460 772 q 740 701 671 772 q 808 494 808 629 l 808 -82 q 745 -269 808 -203 q 562 -334 681 -334 z "},"Ō":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 324 1214 l 784 1214 l 784 1071 l 324 1071 l 324 1214 z "},"ō":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 200 985 l 660 985 l 660 842 l 200 842 l 200 985 z "},"Ŏ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 821 1300 q 739 1133 813 1196 q 551 1071 664 1071 q 363 1133 433 1071 q 288 1300 293 1194 l 403 1300 q 421 1250 406 1268 q 466 1223 437 1232 q 553 1215 495 1215 q 703 1300 692 1215 l 821 1300 z "},"ŏ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 696 1071 q 613 904 688 966 q 426 842 538 842 q 238 903 308 842 q 162 1071 168 965 l 277 1071 q 296 1021 280 1039 q 341 994 312 1002 q 427 986 370 986 q 578 1071 567 986 l 696 1071 z "},"Ő":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 324 1071 l 324 1089 q 404 1206 366 1147 q 456 1293 441 1265 l 660 1293 l 660 1279 q 561 1175 638 1243 q 433 1071 484 1107 l 324 1071 m 593 1071 l 593 1089 q 726 1293 688 1219 l 930 1293 l 930 1279 q 845 1188 913 1250 q 703 1071 777 1126 l 593 1071 z "},"ő":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 189 842 l 189 860 q 269 977 231 918 q 321 1064 307 1036 l 525 1064 l 525 1050 q 426 946 503 1014 q 298 842 349 878 l 189 842 m 458 842 l 458 860 q 591 1064 553 990 l 795 1064 l 795 1050 q 710 959 778 1021 q 568 842 642 897 l 458 842 z "},"Œ":{ha:1352,x_min:81,x_max:1270,o:"m 1270 0 l 677 0 q 604 -10 652 -6 q 525 -14 555 -14 q 195 120 309 -14 q 81 498 81 254 q 196 876 81 745 q 526 1007 311 1007 q 612 1002 568 1007 q 681 991 657 998 l 1270 991 l 1270 819 l 888 819 l 888 602 l 1244 602 l 1244 429 l 888 429 l 888 174 l 1270 174 l 1270 0 m 526 832 q 355 747 414 832 q 297 497 297 662 q 355 247 297 332 q 525 163 414 163 q 610 170 569 163 q 677 189 652 177 l 677 804 q 609 825 654 817 q 526 832 564 832 z "},"œ":{ha:1358,x_min:62,x_max:1299,o:"m 981 -14 q 696 92 797 -14 q 431 -14 600 -14 q 237 34 321 -14 q 107 171 153 81 q 62 380 62 260 q 158 670 62 568 q 429 772 254 772 q 573 746 505 772 q 689 667 641 719 q 949 772 787 772 q 1206 681 1114 772 q 1299 428 1299 589 l 1299 328 l 793 328 l 793 322 q 848 188 798 236 q 989 140 899 140 q 1124 155 1061 140 q 1255 200 1187 169 l 1255 40 q 1136 0 1200 14 q 981 -14 1072 -14 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 953 625 q 847 586 889 625 q 799 465 805 547 l 1104 465 q 1063 583 1103 541 q 953 625 1023 625 z "},"Ŕ":{ha:917,x_min:125,x_max:917,o:"m 335 551 l 403 551 q 550 585 503 551 q 597 689 597 618 q 549 789 597 760 q 399 819 500 819 l 335 819 l 335 551 m 335 380 l 335 0 l 125 0 l 125 991 l 414 991 q 713 918 616 991 q 810 694 810 844 q 762 539 810 607 q 625 432 713 471 q 917 0 849 98 l 684 0 l 447 380 l 335 380 m 323 1071 l 323 1089 q 483 1293 440 1225 l 715 1293 l 715 1279 q 594 1174 680 1244 q 461 1071 509 1105 l 323 1071 z "},"ŕ":{ha:631,x_min:109,x_max:621,o:"m 532 772 q 602 766 574 772 l 586 572 q 525 579 561 579 q 371 528 426 579 q 315 386 315 477 l 315 0 l 109 0 l 109 758 l 265 758 l 296 631 l 306 631 q 401 733 341 694 q 532 772 461 772 m 229 842 l 229 860 q 389 1064 346 996 l 621 1064 l 621 1050 q 500 945 585 1015 q 367 842 415 876 l 229 842 z "},"Ŗ":{ha:917,x_min:125,x_max:917,o:"m 335 551 l 403 551 q 550 585 503 551 q 597 689 597 618 q 549 789 597 760 q 399 819 500 819 l 335 819 l 335 551 m 335 380 l 335 0 l 125 0 l 125 991 l 414 991 q 713 918 616 991 q 810 694 810 844 q 762 539 810 607 q 625 432 713 471 q 917 0 849 98 l 684 0 l 447 380 l 335 380 m 359 -289 q 383 -192 370 -256 q 401 -85 396 -128 l 593 -85 l 593 -98 q 480 -307 542 -212 l 359 -307 l 359 -289 z "},"ŗ":{ha:631,x_min:67,x_max:602,o:"m 532 772 q 602 766 574 772 l 586 572 q 525 579 561 579 q 371 528 426 579 q 315 386 315 477 l 315 0 l 109 0 l 109 758 l 265 758 l 296 631 l 306 631 q 401 733 341 694 q 532 772 461 772 m 67 -289 q 91 -192 77 -256 q 109 -85 104 -128 l 300 -85 l 300 -98 q 188 -307 250 -212 l 67 -307 l 67 -289 z "},"Ř":{ha:917,x_min:125,x_max:917,o:"m 335 551 l 403 551 q 550 585 503 551 q 597 689 597 618 q 549 789 597 760 q 399 819 500 819 l 335 819 l 335 551 m 335 380 l 335 0 l 125 0 l 125 991 l 414 991 q 713 918 616 991 q 810 694 810 844 q 762 539 810 607 q 625 432 713 471 q 917 0 849 98 l 684 0 l 447 380 l 335 380 m 750 1293 l 750 1275 q 645 1161 693 1218 q 576 1071 597 1105 l 334 1071 q 278 1147 315 1103 q 161 1275 241 1192 l 161 1293 l 298 1293 q 454 1174 398 1230 q 612 1293 511 1233 l 750 1293 z "},"ř":{ha:631,x_min:56,x_max:646,o:"m 532 772 q 602 766 574 772 l 586 572 q 525 579 561 579 q 371 528 426 579 q 315 386 315 477 l 315 0 l 109 0 l 109 758 l 265 758 l 296 631 l 306 631 q 401 733 341 694 q 532 772 461 772 m 646 1064 l 646 1046 q 541 932 589 989 q 472 842 493 876 l 230 842 q 174 918 210 873 q 56 1046 137 962 l 56 1064 l 194 1064 q 349 945 294 1001 q 508 1064 406 1004 l 646 1064 z "},"Ś":{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 m 278 1071 l 278 1089 q 437 1293 395 1225 l 669 1293 l 669 1279 q 549 1174 634 1244 q 416 1071 464 1105 l 278 1071 z "},"ś":{ha:690,x_min:62,x_max:637,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 m 232 842 l 232 860 q 391 1064 349 996 l 623 1064 l 623 1050 q 503 945 588 1015 q 370 842 418 876 l 232 842 z "},"Ŝ":{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 m 563 1071 q 404 1190 456 1134 q 249 1071 351 1135 l 111 1071 l 111 1089 q 285 1293 239 1217 l 527 1293 q 600 1197 548 1258 q 701 1089 652 1137 l 701 1071 l 563 1071 z "},"ŝ":{ha:690,x_min:62,x_max:652,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 m 515 842 q 356 961 408 905 q 201 842 303 906 l 63 842 l 63 860 q 237 1064 191 988 l 479 1064 q 552 968 500 1029 q 652 860 604 907 l 652 842 l 515 842 z "},"Ş":{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 m 524 -170 q 472 -295 524 -256 q 314 -334 421 -334 q 215 -319 261 -334 l 215 -205 q 264 -215 233 -210 q 312 -220 295 -220 q 361 -178 361 -220 q 248 -104 361 -121 l 301 0 l 432 0 l 414 -41 q 494 -92 464 -58 q 524 -170 524 -126 z "},"ş":{ha:690,x_min:62,x_max:637,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 m 488 -170 q 436 -295 488 -256 q 278 -334 385 -334 q 179 -319 225 -334 l 179 -205 q 228 -215 197 -210 q 276 -220 259 -220 q 325 -178 325 -220 q 212 -104 325 -121 l 265 0 l 396 0 l 378 -41 q 458 -92 428 -58 q 488 -170 488 -126 z "},"Š":{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 m 701 1293 l 701 1275 q 596 1161 644 1218 q 527 1071 548 1105 l 285 1071 q 229 1147 265 1103 q 111 1275 192 1192 l 111 1293 l 249 1293 q 404 1174 349 1230 q 563 1293 461 1233 l 701 1293 z "},"š":{ha:690,x_min:62,x_max:659,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 m 659 1064 l 659 1046 q 554 932 602 989 q 486 842 507 876 l 243 842 q 187 918 224 873 q 70 1046 151 962 l 70 1064 l 208 1064 q 363 945 307 1001 q 522 1064 420 1004 l 659 1064 z "},"Ț":{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 0 m 265 -289 q 289 -192 275 -256 q 307 -85 302 -128 l 498 -85 l 498 -98 q 386 -307 448 -212 l 265 -307 l 265 -289 z "},"ț":{ha:603,x_min:32,x_max:558,o:"m 428 151 q 558 175 482 151 l 558 21 q 368 -14 481 -14 q 188 49 244 -14 q 131 237 131 112 l 131 603 l 32 603 l 32 690 l 146 760 l 205 920 l 338 920 l 338 758 l 550 758 l 550 603 l 338 603 l 338 237 q 362 172 338 193 q 428 151 387 151 m 203 -289 q 227 -192 214 -256 q 245 -85 240 -128 l 437 -85 l 437 -98 q 324 -307 386 -212 l 203 -307 l 203 -289 z "},"Ť":{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 0 m 698 1293 l 698 1275 q 593 1161 641 1218 q 524 1071 545 1105 l 282 1071 q 226 1147 262 1103 q 109 1275 189 1192 l 109 1293 l 246 1293 q 401 1174 346 1230 q 560 1293 458 1233 l 698 1293 z "},"ť":{ha:603,x_min:32,x_max:654,o:"m 428 151 q 558 175 482 151 l 558 21 q 368 -14 481 -14 q 188 49 244 -14 q 131 237 131 112 l 131 603 l 32 603 l 32 690 l 146 760 l 205 920 l 338 920 l 338 758 l 550 758 l 550 603 l 338 603 l 338 237 q 362 172 338 193 q 428 151 387 151 m 420 865 q 444 962 431 898 q 463 1069 457 1025 l 654 1069 l 654 1055 q 541 847 600 936 l 420 847 l 420 865 z "},"Ŧ":{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 404 l 129 404 l 129 576 l 297 576 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 576 l 675 576 l 675 404 l 507 404 l 507 0 z "},"ŧ":{ha:603,x_min:32,x_max:558,o:"m 428 151 q 558 175 482 151 l 558 21 q 472 -5 523 4 q 372 -14 422 -14 q 189 48 246 -14 q 131 237 131 110 l 131 338 l 45 338 l 45 472 l 131 472 l 131 603 l 32 603 l 32 690 l 146 760 l 205 920 l 338 920 l 338 758 l 550 758 l 550 603 l 338 603 l 338 472 l 526 472 l 526 338 l 338 338 l 338 237 q 362 172 338 193 q 428 151 387 151 z "},"Ũ":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 416 1142 q 375 1124 395 1142 q 347 1069 356 1106 l 246 1069 q 302 1223 254 1168 q 431 1279 351 1279 q 485 1268 458 1279 q 538 1243 512 1257 q 589 1219 564 1230 q 639 1208 614 1208 q 679 1226 660 1208 q 707 1280 699 1244 l 808 1280 q 752 1126 801 1182 q 624 1071 703 1071 q 569 1082 596 1071 q 516 1106 543 1093 q 465 1131 490 1120 q 416 1142 440 1142 z "},"ũ":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 343 913 q 303 895 322 913 q 275 840 283 877 l 174 840 q 230 994 181 939 q 358 1050 278 1050 q 413 1039 386 1050 q 466 1014 439 1027 q 517 990 492 1001 q 566 979 542 979 q 607 997 587 979 q 635 1051 626 1015 l 736 1051 q 679 897 728 953 q 551 842 630 842 q 497 853 524 842 q 444 877 470 864 q 393 902 418 890 q 343 913 368 913 z "},"Ū":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 296 1214 l 756 1214 l 756 1071 l 296 1071 l 296 1214 z "},"ū":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 224 985 l 684 985 l 684 842 l 224 842 l 224 985 z "},"Ŭ":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 792 1300 q 709 1133 784 1196 q 522 1071 635 1071 q 334 1133 404 1071 q 258 1300 264 1194 l 374 1300 q 392 1250 376 1268 q 437 1223 408 1232 q 524 1215 466 1215 q 674 1300 663 1215 l 792 1300 z "},"ŭ":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 721 1071 q 638 904 713 966 q 451 842 564 842 q 263 903 333 842 q 187 1071 193 965 l 302 1071 q 321 1021 305 1039 q 366 994 337 1002 q 452 986 395 986 q 603 1071 592 986 l 721 1071 z "},"Ů":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 696 1232 q 648 1114 696 1159 q 524 1069 600 1069 q 401 1113 448 1069 q 355 1231 355 1156 q 401 1348 355 1304 q 524 1392 447 1392 q 647 1347 598 1392 q 696 1232 696 1302 m 589 1231 q 570 1279 589 1261 q 524 1296 552 1296 q 477 1279 495 1296 q 458 1231 458 1261 q 475 1183 458 1200 q 524 1165 491 1165 q 570 1183 552 1165 q 589 1231 589 1200 z "},"ů":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 624 1003 q 576 885 624 930 q 452 840 528 840 q 330 884 376 840 q 283 1002 283 927 q 329 1119 283 1075 q 452 1162 375 1162 q 575 1118 526 1162 q 624 1003 624 1073 m 517 1002 q 498 1049 517 1032 q 452 1067 480 1067 q 405 1049 423 1067 q 387 1002 387 1032 q 403 954 387 971 q 452 936 419 936 q 498 954 480 936 q 517 1002 517 971 z "},"Ű":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 299 1071 l 299 1089 q 379 1206 341 1147 q 431 1293 416 1265 l 635 1293 l 635 1279 q 536 1175 613 1243 q 408 1071 458 1107 l 299 1071 m 568 1071 l 568 1089 q 701 1293 663 1219 l 905 1293 l 905 1279 q 820 1188 888 1250 q 678 1071 751 1126 l 568 1071 z "},"ű":{ha:913,x_min:104,x_max:839,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 233 842 l 233 860 q 313 977 275 918 q 365 1064 351 1036 l 569 1064 l 569 1050 q 470 946 547 1014 q 342 842 393 878 l 233 842 m 503 842 l 503 860 q 635 1064 597 990 l 839 1064 l 839 1050 q 754 959 822 1021 q 612 842 686 897 l 503 842 z "},"Ų":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 546 -154 q 561 -196 546 -182 q 600 -210 576 -210 q 678 -197 637 -210 l 678 -318 q 572 -334 623 -334 q 449 -291 496 -334 q 403 -178 403 -248 q 429 -92 403 -132 q 525 0 454 -52 l 646 0 q 572 -82 599 -45 q 546 -154 546 -119 z "},"ų":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 665 -154 q 681 -196 665 -182 q 720 -210 696 -210 q 798 -197 757 -210 l 798 -318 q 692 -334 742 -334 q 569 -291 615 -334 q 522 -178 522 -248 q 548 -92 522 -132 q 644 0 574 -52 l 766 0 q 692 -82 718 -45 q 665 -154 665 -119 z "},"Ŵ":{ha:1343,x_min:0,x_max:1343,o:"m 1090 0 l 851 0 l 717 521 q 691 636 709 549 q 671 753 673 723 q 650 635 667 716 q 625 519 634 554 l 492 0 l 253 0 l 0 991 l 207 991 l 334 450 q 382 191 367 300 q 400 310 386 229 q 428 436 415 391 l 572 991 l 771 991 l 916 436 q 939 322 925 399 q 961 191 954 245 q 983 322 968 243 q 1010 450 998 401 l 1136 991 l 1343 991 l 1090 0 m 828 1071 q 669 1190 722 1134 q 514 1071 616 1135 l 376 1071 l 376 1089 q 550 1293 505 1217 l 792 1293 q 865 1197 813 1258 q 966 1089 917 1137 l 966 1071 l 828 1071 z "},"ŵ":{ha:1189,x_min:14,x_max:1175,o:"m 732 0 l 673 265 l 595 600 l 590 600 l 452 0 l 229 0 l 14 758 l 220 758 l 307 422 q 350 174 328 332 l 354 174 q 378 337 357 225 l 389 395 l 482 758 l 710 758 l 799 395 q 807 351 802 380 q 819 289 813 321 q 828 224 824 256 q 833 174 833 193 l 838 174 q 859 308 844 222 q 882 422 875 393 l 972 758 l 1175 758 l 957 0 l 732 0 m 751 842 q 593 961 645 905 q 437 842 540 906 l 300 842 l 300 860 q 473 1064 428 988 l 715 1064 q 788 968 736 1029 q 889 860 840 907 l 889 842 l 751 842 z "},"Ŷ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 591 1071 q 433 1190 485 1134 q 277 1071 380 1135 l 140 1071 l 140 1089 q 313 1293 268 1217 l 555 1293 q 628 1197 576 1258 q 729 1089 680 1137 l 729 1071 l 591 1071 z "},"ŷ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 553 842 q 395 961 447 905 q 239 842 342 906 l 102 842 l 102 860 q 275 1064 230 988 l 517 1064 q 590 968 538 1029 q 691 860 642 907 l 691 842 l 553 842 z "},"Ÿ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 201 1182 q 227 1250 201 1226 q 296 1274 252 1274 q 366 1249 340 1274 q 391 1182 391 1223 q 366 1117 391 1141 q 296 1092 340 1092 q 227 1116 252 1092 q 201 1182 201 1139 m 475 1182 q 502 1252 475 1230 q 570 1274 530 1274 q 641 1249 614 1274 q 667 1182 667 1225 q 640 1116 667 1141 q 570 1092 614 1092 q 502 1114 530 1092 q 475 1182 475 1136 z "},"Ź":{ha:804,x_min:33,x_max:771,o:"m 771 0 l 33 0 l 33 136 l 509 818 l 46 818 l 46 991 l 758 991 l 758 856 l 283 174 l 771 174 l 771 0 m 278 1071 l 278 1089 q 437 1293 395 1225 l 669 1293 l 669 1279 q 549 1174 634 1244 q 416 1071 464 1105 l 278 1071 z "},"ź":{ha:677,x_min:37,x_max:636,o:"m 636 0 l 37 0 l 37 122 l 389 600 l 58 600 l 58 758 l 624 758 l 624 624 l 282 158 l 636 158 l 636 0 m 239 842 l 239 860 q 398 1064 355 996 l 630 1064 l 630 1050 q 510 945 595 1015 q 376 842 425 876 l 239 842 z "},"Ż":{ha:804,x_min:33,x_max:771,o:"m 771 0 l 33 0 l 33 136 l 509 818 l 46 818 l 46 991 l 758 991 l 758 856 l 283 174 l 771 174 l 771 0 m 289 1183 q 401 1284 289 1284 q 514 1183 514 1284 q 486 1108 514 1135 q 401 1082 458 1082 q 289 1183 289 1082 z "},"ż":{ha:677,x_min:37,x_max:636,o:"m 636 0 l 37 0 l 37 122 l 389 600 l 58 600 l 58 758 l 624 758 l 624 624 l 282 158 l 636 158 l 636 0 m 223 954 q 336 1055 223 1055 q 448 954 448 1055 q 420 879 448 906 q 336 852 392 852 q 223 954 223 852 z "},"Ž":{ha:804,x_min:33,x_max:771,o:"m 771 0 l 33 0 l 33 136 l 509 818 l 46 818 l 46 991 l 758 991 l 758 856 l 283 174 l 771 174 l 771 0 m 705 1293 l 705 1275 q 601 1161 648 1218 q 532 1071 553 1105 l 290 1071 q 233 1147 270 1103 q 116 1275 197 1192 l 116 1293 l 254 1293 q 409 1174 353 1230 q 568 1293 466 1233 l 705 1293 z "},"ž":{ha:677,x_min:37,x_max:646,o:"m 636 0 l 37 0 l 37 122 l 389 600 l 58 600 l 58 758 l 624 758 l 624 624 l 282 158 l 636 158 l 636 0 m 646 1064 l 646 1046 q 541 932 589 989 q 472 842 493 876 l 230 842 q 174 918 210 873 q 56 1046 137 962 l 56 1064 l 194 1064 q 349 945 294 1001 q 508 1064 406 1004 l 646 1064 z "},"ſ":{ha:532,x_min:109,x_max:564,o:"m 401 899 q 315 806 315 899 l 315 0 l 109 0 l 109 814 q 172 1003 109 943 q 375 1063 236 1063 q 564 1031 482 1063 l 515 879 q 401 899 453 899 z "},"ƒ":{ha:793,x_min:134,x_max:726,o:"m 505 -82 q 441 -268 505 -202 q 258 -334 378 -334 q 134 -317 186 -334 l 134 -154 q 214 -167 174 -167 q 298 -52 298 -167 l 298 546 l 184 546 l 184 646 l 298 701 l 298 757 q 358 945 298 885 q 549 1006 417 1006 q 726 974 650 1006 l 677 822 q 579 842 622 842 q 505 749 505 842 l 505 701 l 660 701 l 660 546 l 505 546 l 505 -82 z "},"Ǻ":{ha:958,x_min:0,x_max:958,o:"m 650 991 q 618 892 650 934 l 958 0 l 733 0 l 661 224 l 298 224 l 225 0 l 0 0 l 339 892 q 310 990 310 931 q 356 1108 310 1065 q 478 1152 402 1152 q 601 1108 552 1152 q 650 991 650 1064 m 616 400 l 547 596 q 479 799 489 752 q 420 618 467 751 l 345 400 l 616 400 m 396 1189 l 396 1200 q 463 1269 427 1228 q 514 1331 499 1310 l 746 1331 l 746 1322 q 668 1265 730 1305 q 533 1189 606 1226 l 396 1189 m 543 990 q 525 1038 543 1021 q 478 1055 507 1055 q 431 1038 450 1055 q 412 990 412 1021 q 471 925 412 928 l 484 925 q 526 944 509 926 q 543 990 543 961 z "},"ǻ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 319 1189 l 319 1200 q 387 1269 351 1228 q 437 1331 422 1310 l 669 1331 l 669 1322 q 600 1271 655 1306 q 457 1189 544 1235 l 319 1189 m 597 975 q 549 857 597 902 q 425 812 501 812 q 303 856 349 812 q 257 974 257 899 q 303 1091 257 1047 q 425 1135 349 1135 q 549 1090 500 1135 q 597 975 597 1045 m 490 974 q 472 1022 490 1004 q 425 1039 454 1039 q 378 1022 397 1039 q 359 974 359 1004 q 376 926 359 943 q 425 908 393 908 q 472 926 454 908 q 490 974 490 943 z "},"Ǽ":{ha:1322,x_min:0,x_max:1240,o:"m 1240 0 l 648 0 l 648 236 l 315 236 l 214 0 l 0 0 l 444 991 l 1240 991 l 1240 819 l 859 819 l 859 602 l 1215 602 l 1215 429 l 859 429 l 859 174 l 1240 174 l 1240 0 m 392 412 l 648 412 l 648 812 l 562 812 l 392 412 m 681 1071 l 681 1089 q 840 1293 798 1225 l 1072 1293 l 1072 1279 q 952 1174 1037 1244 q 819 1071 867 1105 l 681 1071 z "},"ǽ":{ha:1274,x_min:58,x_max:1214,o:"m 901 -14 q 732 21 808 -14 q 607 126 656 55 q 474 17 541 47 q 300 -14 407 -14 q 124 51 191 -14 q 58 227 58 115 q 140 405 58 347 q 386 468 222 462 l 515 472 l 515 529 q 485 598 515 576 q 403 621 455 621 q 196 568 308 621 l 129 705 q 415 774 257 774 q 647 685 569 774 q 750 750 692 728 q 890 772 809 772 q 1127 679 1040 772 q 1214 428 1214 586 l 1214 328 l 724 328 q 776 190 727 239 q 913 140 825 140 q 1171 200 1046 140 l 1171 40 q 1055 0 1117 14 q 901 -14 992 -14 m 515 351 l 439 349 q 313 316 355 346 q 271 225 271 287 q 366 138 271 138 q 475 179 434 138 q 515 289 515 220 l 515 351 m 886 625 q 728 465 739 625 l 1019 465 q 982 583 1018 541 q 886 625 946 625 m 541 842 l 541 860 q 700 1064 657 996 l 932 1064 l 932 1050 q 811 945 897 1015 q 678 842 726 876 l 541 842 z "},"Ǿ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 325 31 419 -14 l 264 -61 l 154 12 l 215 104 q 81 498 81 236 q 203 877 81 746 q 554 1007 326 1007 q 787 960 688 1007 l 844 1044 l 953 974 l 893 885 q 1025 497 1025 753 m 301 497 q 339 289 301 368 l 682 802 q 554 832 625 832 q 365 748 429 832 q 301 497 301 663 m 804 497 q 770 699 804 619 l 431 189 q 553 163 482 163 q 804 497 804 163 m 432 1071 l 432 1089 q 591 1293 549 1225 l 823 1293 l 823 1279 q 703 1174 788 1244 q 570 1071 618 1105 l 432 1071 z "},"ǿ":{ha:860,x_min:62,x_max:798,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 269 17 342 -14 l 224 -52 l 119 20 l 165 87 q 62 380 62 193 q 159 669 62 566 q 432 772 256 772 q 600 737 522 772 l 637 793 l 741 720 l 701 663 q 798 380 798 557 m 273 380 q 286 268 273 317 l 501 590 q 429 606 472 606 q 310 550 347 606 q 273 380 273 494 m 586 380 q 578 476 586 435 l 368 163 q 431 153 394 153 q 550 210 513 153 q 586 380 586 267 m 309 842 l 309 860 q 468 1064 425 996 l 700 1064 l 700 1050 q 579 945 665 1015 q 446 842 494 876 l 309 842 z "},"Ș":{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 m 234 -289 q 257 -192 244 -256 q 276 -85 271 -128 l 467 -85 l 467 -98 q 355 -307 416 -212 l 234 -307 l 234 -289 z "},"ș":{ha:690,x_min:62,x_max:637,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 m 199 -289 q 223 -192 210 -256 q 241 -85 236 -128 l 433 -85 l 433 -98 q 320 -307 382 -212 l 199 -307 l 199 -289 z "},"ˆ":{ha:843,x_min:126,x_max:715,o:"m 578 842 q 419 961 471 905 q 264 842 366 906 l 126 842 l 126 860 q 300 1064 254 988 l 542 1064 q 615 968 563 1029 q 715 860 667 907 l 715 842 l 578 842 z "},"ˇ":{ha:843,x_min:126,x_max:715,o:"m 715 1064 l 715 1046 q 611 932 659 989 q 542 842 563 876 l 300 842 q 243 918 280 873 q 126 1046 207 962 l 126 1064 l 264 1064 q 419 945 363 1001 q 578 1064 476 1004 l 715 1064 z "},"ˉ":{ha:843,x_min:192,x_max:652,o:"m 192 985 l 652 985 l 652 842 l 192 842 l 192 985 z "},"˘":{ha:843,x_min:154,x_max:688,o:"m 688 1071 q 605 904 680 966 q 418 842 530 842 q 230 903 300 842 q 154 1071 159 965 l 269 1071 q 288 1021 272 1039 q 333 994 304 1002 q 419 986 361 986 q 570 1071 559 986 l 688 1071 z "},"˙":{ha:424,x_min:100,x_max:325,o:"m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 z "},"˚":{ha:802,x_min:231,x_max:571,o:"m 571 1003 q 523 885 571 930 q 399 840 475 840 q 277 884 323 840 q 231 1002 231 927 q 276 1119 231 1075 q 399 1162 322 1162 q 522 1118 473 1162 q 571 1003 571 1073 m 464 1002 q 446 1049 464 1032 q 399 1067 427 1067 q 352 1049 370 1067 q 334 1002 334 1032 q 350 954 334 971 q 399 936 366 936 q 446 954 427 936 q 464 1002 464 971 z "},"˛":{ha:286,x_min:7,x_max:282,o:"m 150 -154 q 165 -196 150 -182 q 204 -210 180 -210 q 282 -197 241 -210 l 282 -318 q 176 -334 227 -334 q 53 -291 100 -334 q 7 -178 7 -248 q 33 -92 7 -132 q 129 0 58 -52 l 250 0 q 176 -82 203 -45 q 150 -154 150 -119 z "},"˜":{ha:843,x_min:140,x_max:703,o:"m 310 913 q 270 895 289 913 q 241 840 250 877 l 140 840 q 196 994 148 939 q 325 1050 245 1050 q 379 1039 353 1050 q 432 1014 406 1027 q 484 990 458 1001 q 533 979 509 979 q 573 997 554 979 q 602 1051 593 1015 l 703 1051 q 646 897 695 953 q 518 842 597 842 q 464 853 490 842 q 411 877 437 864 q 359 902 385 890 q 310 913 334 913 z "},"˝":{ha:817,x_min:106,x_max:711,o:"m 106 842 l 106 860 q 185 977 148 918 q 237 1064 223 1036 l 441 1064 l 441 1050 q 342 946 420 1014 q 215 842 265 878 l 106 842 m 375 842 l 375 860 q 507 1064 469 990 l 711 1064 l 711 1050 q 626 959 694 1021 q 485 842 558 897 l 375 842 z "},"΄":{ha:802,x_min:319,x_max:567,o:"m 319 863 q 350 974 332 899 q 375 1105 368 1048 l 567 1105 l 567 1089 q 440 842 514 963 l 319 842 l 319 863 z "},"΅":{ha:802,x_min:126,x_max:675,o:"m 126 953 q 150 1023 126 1001 q 214 1044 174 1044 q 277 1023 252 1044 q 302 953 302 1001 q 277 885 302 907 q 214 863 252 863 q 150 885 174 863 q 126 953 126 907 m 497 953 q 586 1044 497 1044 q 650 1023 625 1044 q 675 953 675 1001 q 650 885 675 907 q 586 863 625 863 q 521 885 545 863 q 497 953 497 907 m 330 960 q 354 1057 340 993 q 372 1164 367 1120 l 550 1164 l 550 1150 q 424 942 511 1063 l 330 942 l 330 960 z "},"Ά":{ha:958,x_min:-38,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m -38 791 q -8 903 -26 828 q 18 1034 10 977 l 210 1034 l 210 1018 q 83 770 157 892 l -38 770 l -38 791 z "},"·":{ha:396,x_min:79,x_max:317,o:"m 79 489 q 110 575 79 546 q 199 604 140 604 q 286 574 255 604 q 317 489 317 545 q 286 405 317 435 q 199 374 254 374 q 111 404 142 374 q 79 489 79 434 z "},"Έ":{ha:875,x_min:-67,x_max:793,o:"m 793 0 l 222 0 l 222 991 l 793 991 l 793 819 l 432 819 l 432 602 l 768 602 l 768 429 l 432 429 l 432 174 l 793 174 l 793 0 m -67 791 q -37 903 -55 828 q -12 1034 -19 977 l 180 1034 l 180 1018 q 54 770 127 892 l -67 770 l -67 791 z "},"Ή":{ha:1160,x_min:-67,x_max:1034,o:"m 1034 0 l 825 0 l 825 428 l 432 428 l 432 0 l 222 0 l 222 991 l 432 991 l 432 603 l 825 603 l 825 991 l 1034 991 l 1034 0 m -67 791 q -37 903 -55 828 q -12 1034 -19 977 l 180 1034 l 180 1018 q 54 770 127 892 l -67 770 l -67 791 z "},"Ό":{ha:1161,x_min:-39,x_max:1080,o:"m 1080 497 q 958 119 1080 251 q 608 -14 836 -14 q 258 119 380 -14 q 136 498 136 251 q 259 877 136 746 q 610 1007 381 1007 q 959 876 838 1007 q 1080 497 1080 744 m 357 497 q 420 247 357 331 q 608 163 483 163 q 860 497 860 163 q 610 832 860 832 q 420 748 484 832 q 357 497 357 663 m -39 791 q -9 903 -27 828 q 16 1034 9 977 l 208 1034 l 208 1018 q 81 770 155 892 l -39 770 l -39 791 z "},"Ύ":{ha:1061,x_min:-81,x_max:1061,o:"m 628 583 l 835 991 l 1061 991 l 732 386 l 732 0 l 524 0 l 524 379 l 195 991 l 422 991 l 628 583 m -81 791 q -51 903 -69 828 q -26 1034 -33 977 l 166 1034 l 166 1018 q 39 770 113 892 l -81 770 l -81 791 z "},"Ώ":{ha:1092,x_min:-39,x_max:1115,o:"m 607 832 q 418 758 484 832 q 351 547 351 683 q 396 324 351 410 q 532 189 441 238 l 532 0 l 98 0 l 98 176 l 350 176 q 191 348 247 239 q 135 591 135 457 q 193 811 135 716 q 358 956 251 905 q 607 1007 465 1007 q 951 894 823 1007 q 1079 590 1079 781 q 1023 349 1079 456 q 861 176 966 241 l 1115 176 l 1115 0 l 679 0 l 679 189 q 818 326 773 238 q 863 549 863 413 q 796 758 863 684 q 607 832 729 832 m -39 791 q -9 903 -27 828 q 16 1034 9 977 l 208 1034 l 208 1018 q 81 770 155 892 l -39 770 l -39 791 z "},"ΐ":{ha:566,x_min:-37,x_max:536,o:"m 315 758 l 315 237 q 340 172 315 193 q 406 151 365 151 q 536 175 460 151 l 536 21 q 358 -14 463 -14 q 169 49 229 -14 q 109 237 109 112 l 109 758 l 315 758 m -37 953 q -13 1023 -37 1001 q 50 1044 11 1044 q 114 1023 89 1044 q 139 953 139 1001 q 114 885 139 907 q 50 863 89 863 q -13 885 11 863 q -37 953 -37 907 m 334 953 q 422 1044 334 1044 q 486 1023 461 1044 q 511 953 511 1001 q 486 885 511 907 q 422 863 461 863 q 358 885 382 863 q 334 953 334 907 m 167 960 q 190 1057 177 993 q 209 1164 203 1120 l 387 1164 l 387 1150 q 260 942 347 1063 l 167 942 l 167 960 z "},"Α":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 z "},"Β":{ha:933,x_min:125,x_max:860,o:"m 125 991 l 433 991 q 740 931 644 991 q 835 741 835 871 q 793 595 835 652 q 682 526 751 538 l 682 519 q 818 441 777 498 q 860 288 860 383 q 762 76 860 152 q 496 0 664 0 l 125 0 l 125 991 m 335 599 l 457 599 q 581 625 543 599 q 619 713 619 652 q 577 794 619 770 q 446 819 536 819 l 335 819 l 335 599 m 335 432 l 335 174 l 472 174 q 600 207 559 174 q 642 309 642 240 q 465 432 642 432 l 335 432 z "},"Γ":{ha:779,x_min:125,x_max:751,o:"m 751 991 l 751 818 l 335 818 l 335 0 l 125 0 l 125 991 l 751 991 z "},"Δ":{ha:914,x_min:39,x_max:875,o:"m 39 121 l 339 996 l 576 996 l 875 119 l 875 0 l 39 0 l 39 121 m 457 823 q 449 784 456 813 q 428 707 441 754 q 253 175 414 661 l 661 175 l 490 696 l 483 722 q 457 823 458 810 z "},"Ε":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 z "},"Ζ":{ha:804,x_min:33,x_max:771,o:"m 771 0 l 33 0 l 33 136 l 509 818 l 46 818 l 46 991 l 758 991 l 758 856 l 283 174 l 771 174 l 771 0 z "},"Η":{ha:1063,x_min:125,x_max:937,o:"m 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 0 z "},"Θ":{ha:1105,x_min:81,x_max:1025,o:"m 729 590 l 729 418 l 376 418 l 376 590 l 729 590 m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 297 497 q 362 248 297 333 q 553 163 427 163 q 745 248 681 163 q 808 497 808 333 q 745 747 808 661 q 554 832 681 832 q 362 747 427 832 q 297 497 297 662 z "},"Κ":{ha:922,x_min:125,x_max:922,o:"m 922 0 l 684 0 l 424 418 l 335 354 l 335 0 l 125 0 l 125 991 l 335 991 l 335 538 l 418 654 l 686 991 l 920 991 l 574 553 l 922 0 z "},"Λ":{ha:903,x_min:0,x_max:903,o:"m 452 815 q 426 698 444 773 q 400 595 409 623 l 212 0 l 0 0 l 336 991 l 566 991 l 903 0 l 690 0 l 505 596 q 478 697 498 616 q 452 815 458 779 z "},"Μ":{ha:1310,x_min:125,x_max:1185,o:"m 545 0 l 306 778 l 300 778 q 313 461 313 541 l 313 0 l 125 0 l 125 991 l 411 991 l 646 233 l 650 233 l 899 991 l 1185 991 l 1185 0 l 989 0 l 989 469 q 990 546 989 503 q 999 777 991 589 l 993 777 l 737 0 l 545 0 z "},"Ν":{ha:1129,x_min:125,x_max:1004,o:"m 1004 0 l 737 0 l 306 750 l 300 750 q 313 467 313 551 l 313 0 l 125 0 l 125 991 l 390 991 l 821 249 l 825 249 q 815 522 815 442 l 815 991 l 1004 991 l 1004 0 z "},"Ξ":{ha:793,x_min:56,x_max:737,o:"m 139 602 l 654 602 l 654 429 l 139 429 l 139 602 m 83 991 l 710 991 l 710 819 l 83 819 l 83 991 m 737 174 l 737 0 l 56 0 l 56 174 l 737 174 z "},"Ο":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 z "},"Π":{ha:1035,x_min:125,x_max:909,o:"m 909 0 l 700 0 l 700 817 l 335 817 l 335 0 l 125 0 l 125 991 l 909 991 l 909 0 z "},"Ρ":{ha:872,x_min:125,x_max:810,o:"m 335 525 l 404 525 q 549 563 501 525 q 597 675 597 602 q 557 784 597 749 q 431 819 517 819 l 335 819 l 335 525 m 810 682 q 710 437 810 522 q 425 353 610 353 l 335 353 l 335 0 l 125 0 l 125 991 l 441 991 q 716 914 622 991 q 810 682 810 836 z "},"Σ":{ha:823,x_min:53,x_max:777,o:"m 53 0 l 53 165 l 372 519 l 61 831 l 61 991 l 736 991 l 736 819 l 439 819 q 285 827 404 819 l 593 521 l 269 165 q 463 174 432 174 l 777 174 l 777 0 l 53 0 z "},"Τ":{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 0 z "},"Υ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 z "},"Φ":{ha:1194,x_min:62,x_max:1132,o:"m 692 301 l 701 301 q 872 358 810 301 q 935 515 935 416 q 877 664 935 608 q 720 720 819 720 l 692 720 l 692 301 m 503 -14 l 503 139 l 488 139 q 267 183 361 139 q 117 317 172 228 q 62 514 62 406 q 111 704 62 619 q 251 836 159 788 q 467 884 342 884 l 503 884 l 503 1006 l 692 1006 l 692 884 l 728 884 q 943 836 851 884 q 1083 704 1034 788 q 1132 514 1132 619 q 1077 317 1132 406 q 928 183 1023 228 q 707 139 833 139 l 692 139 l 692 -14 l 503 -14 m 503 720 l 475 720 q 317 664 375 720 q 260 515 260 608 q 321 359 260 418 q 493 301 382 301 l 503 301 l 503 720 z "},"Χ":{ha:926,x_min:0,x_max:926,o:"m 926 0 l 686 0 l 456 375 l 225 0 l 0 0 l 329 511 l 21 991 l 253 991 l 467 635 l 676 991 l 903 991 l 591 500 l 926 0 z "},"Ψ":{ha:1217,x_min:74,x_max:1143,o:"m 1143 667 q 1042 386 1143 476 q 737 296 941 296 l 703 296 l 703 0 l 514 0 l 514 296 l 479 296 q 173 386 273 296 q 74 664 74 475 l 74 991 l 271 991 l 271 667 q 321 513 271 560 q 493 465 372 465 l 514 465 l 514 991 l 703 991 l 703 465 l 724 465 q 894 514 842 465 q 946 664 946 564 l 946 991 l 1143 991 l 1143 667 z "},"Ω":{ha:1092,x_min:37,x_max:1054,o:"m 546 832 q 357 758 423 832 q 290 547 290 683 q 335 324 290 410 q 471 189 380 238 l 471 0 l 37 0 l 37 176 l 289 176 q 130 348 186 239 q 74 591 74 457 q 132 811 74 716 q 297 956 190 905 q 546 1007 404 1007 q 890 894 762 1007 q 1018 590 1018 781 q 962 349 1018 456 q 800 176 905 241 l 1054 176 l 1054 0 l 618 0 l 618 189 q 757 326 712 238 q 802 549 802 413 q 735 758 802 684 q 546 832 668 832 z "},"Ϋ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 203 1182 q 228 1250 203 1226 q 297 1274 254 1274 q 367 1249 342 1274 q 393 1182 393 1223 q 367 1117 393 1141 q 297 1092 341 1092 q 228 1116 254 1092 q 203 1182 203 1139 m 476 1182 q 504 1252 476 1230 q 572 1274 531 1274 q 642 1249 616 1274 q 668 1182 668 1225 q 642 1116 668 1141 q 572 1092 615 1092 q 504 1114 531 1092 q 476 1182 476 1136 z "},"ά":{ha:899,x_min:62,x_max:868,o:"m 422 151 q 539 200 503 151 q 578 370 575 248 l 578 378 q 540 553 578 500 q 419 606 503 606 q 273 375 273 606 q 310 207 273 263 q 422 151 346 151 m 359 -14 q 141 90 220 -14 q 62 376 62 193 q 145 668 62 565 q 375 771 227 771 q 507 743 455 771 q 593 657 559 714 l 603 657 q 648 758 619 721 l 819 758 q 784 607 798 692 q 771 452 771 522 l 771 240 q 828 160 771 160 q 868 167 850 160 l 868 4 q 826 -8 857 -3 q 775 -14 795 -14 q 659 13 699 -14 q 596 100 619 39 l 582 100 q 359 -14 507 -14 m 353 863 q 383 974 365 899 q 408 1105 401 1048 l 600 1105 l 600 1089 q 473 842 547 963 l 353 842 l 353 863 z "},"έ":{ha:771,x_min:53,x_max:720,o:"m 570 467 l 570 323 l 456 323 q 307 301 357 323 q 257 231 257 279 q 439 146 257 146 q 583 161 509 146 q 718 204 658 176 l 718 39 q 424 -14 602 -14 q 148 42 243 -14 q 53 210 53 98 q 96 328 53 282 q 237 392 140 373 l 237 399 q 93 574 93 432 q 179 721 93 669 q 424 772 265 772 q 581 757 502 772 q 720 715 660 741 l 656 566 q 528 609 575 598 q 429 619 481 619 q 315 602 353 619 q 278 549 278 585 q 323 485 278 504 q 465 467 368 467 l 570 467 m 345 863 q 375 974 357 899 q 400 1105 393 1048 l 592 1105 l 592 1089 q 465 842 539 963 l 345 842 l 345 863 z "},"ή":{ha:913,x_min:109,x_max:808,o:"m 808 -334 l 602 -334 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 -334 m 400 863 q 430 974 412 899 q 456 1105 448 1048 l 648 1105 l 648 1089 q 521 842 595 963 l 400 842 l 400 863 z "},"ί":{ha:566,x_min:109,x_max:536,o:"m 315 758 l 315 237 q 340 172 315 193 q 406 151 365 151 q 536 175 460 151 l 536 21 q 358 -14 463 -14 q 169 49 229 -14 q 109 237 109 112 l 109 758 l 315 758 m 155 863 q 185 974 167 899 q 210 1105 203 1048 l 402 1105 l 402 1089 q 275 842 349 963 l 155 842 l 155 863 z "},"ΰ":{ha:896,x_min:97,x_max:822,o:"m 446 -12 q 183 76 270 -12 q 97 346 97 163 l 97 758 l 304 758 l 304 339 q 340 196 304 240 q 453 153 376 153 q 576 216 538 153 q 615 416 615 279 q 606 562 615 489 q 567 758 596 634 l 775 758 q 812 571 802 652 q 822 411 822 491 q 729 93 822 198 q 446 -12 637 -12 m 172 953 q 196 1023 172 1001 q 260 1044 220 1044 q 323 1023 298 1044 q 349 953 349 1001 q 323 885 349 907 q 260 863 298 863 q 196 885 220 863 q 172 953 172 907 m 543 953 q 632 1044 543 1044 q 696 1023 671 1044 q 721 953 721 1001 q 696 885 721 907 q 632 863 671 863 q 567 885 591 863 q 543 953 543 907 m 376 960 q 400 1057 387 993 q 418 1164 413 1120 l 596 1164 l 596 1150 q 470 942 557 1063 l 376 942 l 376 960 z "},"α":{ha:899,x_min:62,x_max:868,o:"m 422 151 q 539 200 503 151 q 578 370 575 248 l 578 378 q 540 553 578 500 q 419 606 503 606 q 273 375 273 606 q 310 207 273 263 q 422 151 346 151 m 359 -14 q 141 90 220 -14 q 62 376 62 193 q 145 668 62 565 q 375 771 227 771 q 507 743 455 771 q 593 657 559 714 l 603 657 q 648 758 619 721 l 819 758 q 784 607 798 692 q 771 452 771 522 l 771 240 q 828 160 771 160 q 868 167 850 160 l 868 4 q 826 -8 857 -3 q 775 -14 795 -14 q 659 13 699 -14 q 596 100 619 39 l 582 100 q 359 -14 507 -14 z "},"β":{ha:917,x_min:109,x_max:868,o:"m 471 1063 q 722 992 630 1063 q 814 796 814 922 q 762 636 814 695 q 615 562 711 578 l 615 558 q 805 476 743 542 q 868 293 868 411 q 780 68 868 151 q 536 -14 691 -14 q 315 29 401 -14 l 315 -334 l 109 -334 l 109 743 q 203 979 109 895 q 471 1063 298 1063 m 465 901 q 315 724 315 901 l 315 199 q 395 164 348 178 q 484 151 443 151 q 612 193 570 151 q 654 311 654 235 q 609 425 654 386 q 478 464 564 464 l 429 464 l 429 628 l 465 628 q 570 665 532 628 q 607 771 607 702 q 570 867 607 833 q 465 901 532 901 z "},"γ":{ha:789,x_min:1,x_max:789,o:"m 441 -334 l 222 -334 q 241 -178 222 -275 q 290 8 260 -81 l 1 758 l 216 758 l 328 424 q 364 300 342 382 q 396 168 387 218 l 400 168 q 422 276 403 198 q 463 414 441 353 l 574 758 l 789 758 l 509 12 q 460 -162 478 -66 q 441 -334 441 -257 z "},"δ":{ha:860,x_min:62,x_max:798,o:"m 329 623 q 168 854 168 725 q 250 1007 168 952 q 476 1063 332 1063 q 622 1047 551 1063 q 789 987 693 1032 l 707 842 q 586 891 644 872 q 468 909 528 909 q 393 891 418 909 q 368 842 368 873 q 415 769 368 805 q 555 686 462 734 q 739 539 680 623 q 798 347 798 456 q 702 79 798 172 q 427 -14 606 -14 q 162 71 261 -14 q 62 297 62 155 q 128 502 62 420 q 329 623 193 583 m 586 334 q 554 448 586 397 q 450 538 522 498 q 321 453 367 514 q 275 306 275 391 q 316 195 275 237 q 428 153 357 153 q 545 199 503 153 q 586 334 586 245 z "},"ε":{ha:771,x_min:53,x_max:720,o:"m 570 467 l 570 323 l 456 323 q 307 301 357 323 q 257 231 257 279 q 439 146 257 146 q 583 161 509 146 q 718 204 658 176 l 718 39 q 424 -14 602 -14 q 148 42 243 -14 q 53 210 53 98 q 96 328 53 282 q 237 392 140 373 l 237 399 q 93 574 93 432 q 179 721 93 669 q 424 772 265 772 q 581 757 502 772 q 720 715 660 741 l 656 566 q 528 609 575 598 q 429 619 481 619 q 315 602 353 619 q 278 549 278 585 q 323 485 278 504 q 465 467 368 467 l 570 467 z "},"ζ":{ha:692,x_min:62,x_max:685,o:"m 685 -25 q 591 -257 685 -126 l 383 -257 q 457 -141 430 -194 q 484 -57 484 -89 q 457 -21 484 -35 q 361 5 430 -7 q 62 317 62 58 q 151 602 62 458 q 449 916 240 745 q 381 907 430 911 q 298 904 333 904 l 102 904 l 102 1055 l 681 1055 l 681 932 q 455 718 545 819 q 320 521 366 616 q 275 326 275 426 q 289 245 275 276 q 327 197 302 215 q 386 170 351 179 q 465 151 421 160 q 631 86 578 129 q 685 -25 685 44 z "},"η":{ha:913,x_min:109,x_max:808,o:"m 808 -334 l 602 -334 l 602 443 q 572 566 602 525 q 479 607 543 607 q 354 549 393 607 q 315 357 315 491 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 401 744 340 716 q 539 772 462 772 q 740 701 671 772 q 808 494 808 629 l 808 -334 z "},"θ":{ha:859,x_min:62,x_max:796,o:"m 796 529 q 705 120 796 254 q 428 -14 614 -14 q 155 126 248 -14 q 62 529 62 265 q 153 938 62 805 q 428 1071 244 1071 q 702 933 608 1071 q 796 529 796 795 m 428 136 q 544 215 507 136 q 583 456 580 294 l 273 456 q 312 216 276 296 q 428 136 347 136 m 429 921 q 319 849 356 921 q 275 610 281 777 l 583 610 q 542 843 578 766 q 429 921 507 921 z "},"ι":{ha:566,x_min:109,x_max:536,o:"m 315 758 l 315 237 q 340 172 315 193 q 406 151 365 151 q 536 175 460 151 l 536 21 q 358 -14 463 -14 q 169 49 229 -14 q 109 237 109 112 l 109 758 l 315 758 z "},"κ":{ha:861,x_min:109,x_max:861,o:"m 314 395 l 410 510 l 623 758 l 843 758 l 545 411 l 861 0 l 625 0 l 412 289 l 315 228 l 315 0 l 109 0 l 109 758 l 315 758 l 315 559 l 313 450 l 311 395 l 314 395 z "},"λ":{ha:854,x_min:5,x_max:847,o:"m 5 0 l 326 717 l 302 779 q 247 865 278 840 q 151 890 216 890 q 82 882 117 890 l 82 1053 q 195 1064 136 1064 q 328 1040 273 1064 q 422 967 383 1017 q 496 821 461 917 l 686 297 q 737 193 711 227 q 800 160 763 160 q 847 167 823 160 l 847 7 q 793 -7 831 -1 q 728 -14 754 -14 q 606 23 653 -14 q 530 140 558 60 q 438 405 453 359 q 415 485 424 450 l 411 485 q 359 329 380 380 l 220 0 l 5 0 z "},"μ":{ha:917,x_min:109,x_max:808,o:"m 315 315 q 345 192 315 233 q 439 151 375 151 q 563 210 524 151 q 602 401 602 269 l 602 758 l 808 758 l 808 0 l 652 0 l 623 102 l 612 102 q 543 15 584 44 q 443 -14 503 -14 q 366 2 401 -14 q 309 47 330 18 l 312 -10 l 315 -117 l 315 -334 l 109 -334 l 109 758 l 315 758 l 315 315 z "},"ν":{ha:827,x_min:4,x_max:772,o:"m 4 758 l 216 758 l 364 338 l 411 183 l 416 183 q 529 421 494 287 q 564 758 564 555 l 772 758 q 743 459 772 585 q 648 221 713 333 q 475 0 583 109 l 289 0 l 4 758 z "},"ξ":{ha:692,x_min:62,x_max:685,o:"m 62 297 q 112 447 62 382 q 254 549 161 512 l 254 555 q 106 728 106 591 q 152 844 106 800 q 301 913 197 888 q 117 904 162 904 l 102 904 l 102 1055 l 647 1055 l 647 913 l 596 913 q 391 866 471 913 q 311 741 311 820 q 355 648 311 676 q 498 621 399 621 l 611 621 l 611 478 l 497 478 q 328 436 380 478 q 275 311 275 395 q 291 234 275 263 q 340 188 307 205 q 465 151 373 170 q 631 86 578 129 q 685 -25 685 44 q 591 -257 685 -126 l 383 -257 q 457 -141 430 -194 q 484 -57 484 -89 q 457 -21 484 -35 q 361 5 430 -7 q 138 105 214 31 q 62 297 62 179 z "},"ο":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 z "},"π":{ha:1026,x_min:17,x_max:978,o:"m 882 149 q 970 172 927 149 l 970 24 q 899 -3 942 7 q 819 -14 856 -14 q 664 42 718 -14 q 611 208 611 98 l 611 600 l 382 600 l 382 0 l 175 0 l 175 600 l 17 600 l 17 689 l 138 758 l 978 758 l 978 600 l 818 600 l 818 216 q 836 165 818 182 q 882 149 854 149 z "},"ρ":{ha:859,x_min:82,x_max:796,o:"m 796 379 q 713 90 796 194 q 482 -14 630 -14 q 292 39 378 -14 l 279 39 q 290 -143 290 -78 l 290 -334 l 82 -334 l 82 380 q 176 670 82 567 q 443 772 270 772 q 628 725 548 772 q 752 587 708 677 q 796 379 796 498 m 439 606 q 326 554 362 606 q 290 390 290 502 l 290 211 q 359 167 319 182 q 439 153 398 153 q 550 206 516 153 q 583 379 583 259 q 550 552 583 498 q 439 606 517 606 z "},"ς":{ha:692,x_min:62,x_max:685,o:"m 62 335 q 154 665 62 557 q 441 772 245 772 q 684 718 566 772 l 624 561 q 436 606 507 606 q 312 539 351 606 q 273 340 273 473 q 290 258 273 290 q 341 207 307 227 q 465 168 375 188 q 632 100 578 144 q 685 -16 685 56 q 591 -257 685 -119 l 383 -257 q 484 -46 484 -112 q 456 -7 484 -22 q 361 21 428 7 q 138 129 214 50 q 62 335 62 208 z "},"σ":{ha:907,x_min:62,x_max:879,o:"m 808 322 q 763 146 808 223 q 632 28 717 69 q 433 -14 547 -14 q 160 89 257 -14 q 62 370 62 191 q 490 760 62 760 l 879 760 l 879 608 l 686 608 q 808 322 808 479 m 275 370 q 316 208 275 264 q 436 153 356 153 q 555 204 515 153 q 596 354 596 256 q 576 491 596 429 q 510 608 556 552 l 476 608 q 321 553 366 608 q 275 370 275 497 z "},"τ":{ha:747,x_min:28,x_max:694,o:"m 425 603 l 425 237 q 450 172 425 193 q 515 151 475 151 q 646 175 570 151 l 646 21 q 468 -14 573 -14 q 279 49 339 -14 q 218 237 218 112 l 218 603 l 28 603 l 28 689 l 147 758 l 694 758 l 694 603 l 425 603 z "},"υ":{ha:896,x_min:97,x_max:822,o:"m 446 -12 q 183 76 270 -12 q 97 346 97 163 l 97 758 l 304 758 l 304 339 q 340 196 304 240 q 453 153 376 153 q 576 216 538 153 q 615 416 615 279 q 606 562 615 489 q 567 758 596 634 l 775 758 q 812 571 802 652 q 822 411 822 491 q 729 93 822 198 q 446 -12 637 -12 z "},"φ":{ha:1100,x_min:62,x_max:1038,o:"m 839 400 q 807 563 839 506 q 714 619 775 619 q 654 592 675 619 q 632 500 632 566 l 632 149 q 782 226 725 157 q 839 400 839 295 m 440 -334 l 440 -8 q 158 111 254 12 q 62 376 62 210 q 100 579 62 481 q 218 775 137 676 l 368 677 q 282 525 307 595 q 257 372 257 454 q 440 149 257 184 l 440 498 q 513 697 440 624 q 711 770 585 770 q 951 671 864 770 q 1038 401 1038 572 q 987 197 1038 286 q 845 56 937 109 q 632 -8 753 3 l 632 -334 l 440 -334 z "},"χ":{ha:822,x_min:-33,x_max:831,o:"m 163 768 q 262 751 224 768 q 328 695 301 734 q 383 574 355 657 l 433 424 l 623 758 l 831 758 l 522 241 l 654 -81 q 697 -142 673 -124 q 762 -160 721 -160 q 831 -151 795 -160 l 831 -313 q 699 -334 773 -334 q 560 -288 614 -334 q 471 -135 506 -242 l 400 86 l 187 -334 l -33 -334 l 307 267 l 216 505 q 176 574 199 553 q 114 595 152 595 q 36 582 76 595 l 36 747 q 163 768 113 768 z "},"ψ":{ha:1162,x_min:97,x_max:1089,o:"m 684 1054 l 684 147 q 851 215 803 159 q 899 392 899 271 q 844 758 899 544 l 1036 758 q 1089 390 1089 568 q 987 102 1089 204 q 684 -12 885 -1 l 684 -334 l 492 -334 l 492 -12 q 196 92 295 -6 q 97 376 97 190 l 97 758 l 294 758 l 294 371 q 338 204 294 254 q 492 146 381 154 l 492 1054 l 684 1054 z "},"ω":{ha:1198,x_min:74,x_max:1125,o:"m 819 -14 q 684 22 736 -14 q 603 129 631 58 l 596 129 q 512 20 565 54 q 379 -14 460 -14 q 154 89 234 -14 q 74 368 74 191 q 90 561 74 473 q 150 758 106 649 l 349 758 q 264 375 264 581 q 297 205 264 264 q 396 147 331 147 q 478 186 452 147 q 504 317 504 226 l 504 517 l 694 517 l 694 317 q 720 186 694 225 q 803 147 746 147 q 901 204 867 147 q 935 372 935 262 q 850 758 935 581 l 1048 758 q 1108 561 1092 648 q 1125 368 1125 473 q 1044 88 1125 190 q 819 -14 964 -14 z "},"ϊ":{ha:566,x_min:8,x_max:536,o:"m 315 758 l 315 237 q 340 172 315 193 q 406 151 365 151 q 536 175 460 151 l 536 21 q 358 -14 463 -14 q 169 49 229 -14 q 109 237 109 112 l 109 758 l 315 758 m 8 953 q 34 1021 8 997 q 102 1044 59 1044 q 173 1019 147 1044 q 198 953 198 994 q 172 887 198 912 q 102 863 146 863 q 34 886 59 863 q 8 953 8 910 m 281 953 q 309 1022 281 1000 q 377 1044 336 1044 q 447 1020 421 1044 q 473 953 473 996 q 447 887 473 911 q 377 863 420 863 q 309 885 336 863 q 281 953 281 907 z "},"ϋ":{ha:896,x_min:97,x_max:822,o:"m 446 -12 q 183 76 270 -12 q 97 346 97 163 l 97 758 l 304 758 l 304 339 q 340 196 304 240 q 453 153 376 153 q 576 216 538 153 q 615 416 615 279 q 606 562 615 489 q 567 758 596 634 l 775 758 q 812 571 802 652 q 822 411 822 491 q 729 93 822 198 q 446 -12 637 -12 m 216 953 q 241 1021 216 997 q 310 1044 267 1044 q 380 1019 355 1044 q 406 953 406 994 q 380 887 406 912 q 310 863 354 863 q 241 886 267 863 q 216 953 216 910 m 489 953 q 516 1022 489 1000 q 585 1044 544 1044 q 655 1020 629 1044 q 681 953 681 996 q 654 887 681 911 q 585 863 628 863 q 516 885 544 863 q 489 953 489 907 z "},"ό":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 364 863 q 394 974 376 899 q 420 1105 412 1048 l 612 1105 l 612 1089 q 485 842 559 963 l 364 842 l 364 863 z "},"ύ":{ha:896,x_min:97,x_max:822,o:"m 446 -12 q 183 76 270 -12 q 97 346 97 163 l 97 758 l 304 758 l 304 339 q 340 196 304 240 q 453 153 376 153 q 576 216 538 153 q 615 416 615 279 q 606 562 615 489 q 567 758 596 634 l 775 758 q 812 571 802 652 q 822 411 822 491 q 729 93 822 198 q 446 -12 637 -12 m 372 863 q 402 974 385 899 q 428 1105 420 1048 l 620 1105 l 620 1089 q 493 842 567 963 l 372 842 l 372 863 z "},"ώ":{ha:1198,x_min:74,x_max:1125,o:"m 819 -14 q 684 22 736 -14 q 603 129 631 58 l 596 129 q 512 20 565 54 q 379 -14 460 -14 q 154 89 234 -14 q 74 368 74 191 q 90 561 74 473 q 150 758 106 649 l 349 758 q 264 375 264 581 q 297 205 264 264 q 396 147 331 147 q 478 186 452 147 q 504 317 504 226 l 504 517 l 694 517 l 694 317 q 720 186 694 225 q 803 147 746 147 q 901 204 867 147 q 935 372 935 262 q 850 758 935 581 l 1048 758 q 1108 561 1092 648 q 1125 368 1125 473 q 1044 88 1125 190 q 819 -14 964 -14 m 529 863 q 559 974 541 899 q 585 1105 577 1048 l 777 1105 l 777 1089 q 650 842 724 963 l 529 842 l 529 863 z "},"Ё":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 179 1182 q 204 1250 179 1226 q 273 1274 230 1274 q 343 1249 318 1274 q 369 1182 369 1223 q 343 1117 369 1141 q 273 1092 317 1092 q 204 1116 230 1092 q 179 1182 179 1139 m 452 1182 q 480 1252 452 1230 q 548 1274 507 1274 q 618 1249 592 1274 q 644 1182 644 1225 q 618 1116 644 1141 q 548 1092 591 1092 q 480 1114 507 1092 q 452 1182 452 1136 z "},"Ђ":{ha:1118,x_min:28,x_max:1044,o:"m 768 -12 q 631 14 690 -12 l 631 187 q 747 158 698 158 q 801 169 784 158 q 826 202 818 179 q 835 262 835 225 l 835 349 q 807 433 835 409 q 714 457 779 457 l 486 457 l 486 0 l 277 0 l 277 817 l 28 817 l 28 991 l 783 991 l 783 817 l 486 817 l 486 632 l 722 632 q 961 562 877 632 q 1044 364 1044 492 l 1044 277 q 975 61 1044 135 q 768 -12 905 -12 z "},"Ѓ":{ha:779,x_min:125,x_max:751,o:"m 751 991 l 751 818 l 335 818 l 335 0 l 125 0 l 125 991 l 751 991 m 315 1071 l 315 1089 q 475 1293 432 1225 l 707 1293 l 707 1279 q 586 1174 671 1244 q 453 1071 501 1105 l 315 1071 z "},"Є":{ha:940,x_min:81,x_max:892,o:"m 571 831 q 383 766 456 831 q 302 586 311 701 l 732 586 l 732 414 l 301 414 q 378 227 310 293 q 574 161 446 161 q 854 214 690 161 l 854 37 q 713 -2 783 10 q 561 -14 644 -14 q 204 118 328 -14 q 81 494 81 249 q 141 765 81 648 q 314 943 201 881 q 581 1006 427 1006 q 744 987 669 1006 q 892 936 819 968 l 817 765 l 758 790 q 571 831 661 831 z "},"Ѕ":{ha:765,x_min:64,x_max:710,o:"m 710 275 q 613 64 710 141 q 345 -14 517 -14 q 64 46 186 -14 l 64 241 q 234 178 164 197 q 361 160 303 160 q 467 186 430 160 q 504 265 504 213 q 488 317 504 294 q 440 361 471 340 q 311 428 408 382 q 175 510 220 471 q 102 602 130 549 q 75 724 75 654 q 164 930 75 855 q 411 1006 254 1006 q 558 987 488 1006 q 705 936 629 969 l 637 772 q 506 818 558 805 q 404 831 454 831 q 313 803 345 831 q 281 730 281 775 q 294 682 281 703 q 335 642 307 661 q 468 572 363 623 q 659 439 607 506 q 710 275 710 372 z "},"Ј":{ha:460,x_min:-103,x_max:335,o:"m 21 -292 q -103 -277 -50 -292 l -103 -102 q -4 -115 -49 -115 q 95 -72 65 -115 q 125 62 125 -29 l 125 991 l 335 991 l 335 64 q 256 -201 335 -110 q 21 -292 176 -292 z "},"Љ":{ha:1388,x_min:11,x_max:1325,o:"m 864 611 l 942 611 q 1225 532 1125 611 q 1325 310 1325 454 q 1225 78 1325 155 q 930 0 1126 0 l 654 0 l 654 817 l 457 817 l 446 726 q 372 239 404 379 q 278 42 340 99 q 111 -14 216 -15 q 11 1 54 -14 l 11 174 q 85 160 50 160 q 142 193 121 160 q 181 315 163 226 q 231 607 200 404 q 283 991 262 810 l 864 991 l 864 611 m 864 172 l 928 172 q 1068 207 1023 172 q 1112 310 1112 241 q 1068 408 1112 377 q 913 439 1023 439 l 864 439 l 864 172 z "},"Њ":{ha:1392,x_min:125,x_max:1329,o:"m 1329 310 q 1230 78 1329 155 q 935 0 1130 0 l 659 0 l 659 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 659 603 l 659 991 l 868 991 l 868 611 l 946 611 q 1229 532 1129 611 q 1329 310 1329 454 m 868 172 l 932 172 q 1072 207 1027 172 q 1117 310 1117 241 q 1071 409 1117 378 q 917 439 1025 439 l 868 439 l 868 172 z "},"Ћ":{ha:1118,x_min:28,x_max:1044,o:"m 835 0 l 835 349 q 811 433 835 409 q 733 457 787 457 l 486 457 l 486 0 l 277 0 l 277 817 l 28 817 l 28 991 l 783 991 l 783 817 l 486 817 l 486 632 l 747 632 q 966 561 888 632 q 1044 364 1044 490 l 1044 0 l 835 0 z "},"Ќ":{ha:933,x_min:125,x_max:933,o:"m 933 0 l 694 0 l 335 503 l 335 0 l 125 0 l 125 991 l 335 991 l 335 511 l 690 991 l 914 991 l 553 515 l 933 0 m 393 1071 l 393 1089 q 553 1293 510 1225 l 785 1293 l 785 1279 q 664 1174 749 1244 q 531 1071 579 1105 l 393 1071 z "},"Ў":{ha:907,x_min:0,x_max:907,o:"m 907 991 l 600 290 q 492 100 543 158 q 372 15 441 43 q 204 -14 303 -14 q 46 7 119 -14 l 46 187 q 195 163 106 163 q 286 189 251 163 q 343 279 320 215 l 0 991 l 222 991 l 467 439 l 473 439 l 486 473 l 690 991 l 907 991 m 793 1314 q 697 1129 780 1187 q 458 1071 614 1071 q 221 1126 298 1071 q 134 1314 144 1182 l 319 1314 q 354 1216 324 1244 q 463 1187 385 1187 q 565 1218 531 1187 q 606 1314 598 1249 l 793 1314 z "},"Џ":{ha:1035,x_min:125,x_max:909,o:"m 909 0 l 619 0 l 619 -289 l 416 -289 l 416 0 l 125 0 l 125 991 l 335 991 l 335 175 l 700 175 l 700 991 l 909 991 l 909 0 z "},"А":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 z "},"Б":{ha:886,x_min:125,x_max:823,o:"m 335 611 l 418 611 q 718 532 612 611 q 823 310 823 454 q 414 0 823 0 l 125 0 l 125 991 l 751 991 l 751 818 l 335 818 l 335 611 m 335 172 l 406 172 q 562 207 512 172 q 611 310 611 241 q 561 409 611 378 q 389 439 511 439 l 335 439 l 335 172 z "},"В":{ha:933,x_min:125,x_max:860,o:"m 125 991 l 433 991 q 740 931 644 991 q 835 741 835 871 q 793 595 835 652 q 682 526 751 538 l 682 519 q 818 441 777 498 q 860 288 860 383 q 762 76 860 152 q 496 0 664 0 l 125 0 l 125 991 m 335 599 l 457 599 q 581 625 543 599 q 619 713 619 652 q 577 794 619 770 q 446 819 536 819 l 335 819 l 335 599 m 335 432 l 335 174 l 472 174 q 600 207 559 174 q 642 309 642 240 q 465 432 642 432 l 335 432 z "},"Г":{ha:779,x_min:125,x_max:751,o:"m 751 991 l 751 818 l 335 818 l 335 0 l 125 0 l 125 991 l 751 991 z "},"Д":{ha:1061,x_min:7,x_max:1034,o:"m 7 175 l 83 175 q 239 568 182 372 q 323 991 296 764 l 901 991 l 901 175 l 1034 175 l 1034 -289 l 831 -289 l 831 0 l 210 0 l 210 -289 l 7 -289 l 7 175 m 490 817 q 418 488 469 661 q 304 175 368 314 l 692 175 l 692 817 l 490 817 z "},"Е":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 z "},"Ж":{ha:1310,x_min:0,x_max:1310,o:"m 353 515 l 20 991 l 236 991 l 557 511 l 557 991 l 753 991 l 753 511 l 1074 991 l 1291 991 l 957 515 l 1310 0 l 1084 0 l 753 503 l 753 0 l 557 0 l 557 503 l 225 0 l 0 0 l 353 515 z "},"З":{ha:900,x_min:64,x_max:840,o:"m 810 760 q 742 602 810 664 q 558 522 674 539 l 558 518 q 767 443 694 505 q 840 282 840 381 q 729 66 840 145 q 422 -14 618 -14 q 72 40 204 -14 l 72 216 q 221 169 136 186 q 382 151 307 151 q 632 297 632 151 q 552 398 632 363 q 314 433 471 433 l 221 433 l 221 597 l 304 597 q 534 627 462 597 q 606 726 606 657 q 561 807 606 777 q 425 838 515 838 q 155 757 286 838 l 64 897 q 243 980 149 954 q 454 1006 338 1006 q 713 938 616 1006 q 810 760 810 870 z "},"И":{ha:1143,x_min:125,x_max:1018,o:"m 125 991 l 314 991 l 314 513 l 311 385 l 304 239 l 309 239 l 766 991 l 1018 991 l 1018 0 l 831 0 l 831 476 q 843 760 831 572 l 838 760 l 378 0 l 125 0 l 125 991 z "},"Й":{ha:1143,x_min:125,x_max:1018,o:"m 125 991 l 314 991 l 314 513 l 311 385 l 304 239 l 309 239 l 766 991 l 1018 991 l 1018 0 l 831 0 l 831 476 q 843 760 831 572 l 838 760 l 378 0 l 125 0 l 125 991 m 900 1314 q 804 1129 887 1187 q 566 1071 722 1071 q 328 1126 405 1071 q 241 1314 251 1182 l 427 1314 q 461 1216 431 1244 q 570 1187 492 1187 q 672 1218 638 1187 q 713 1314 705 1249 l 900 1314 z "},"К":{ha:933,x_min:125,x_max:933,o:"m 933 0 l 694 0 l 335 503 l 335 0 l 125 0 l 125 991 l 335 991 l 335 511 l 690 991 l 914 991 l 553 515 l 933 0 z "},"Л":{ha:1035,x_min:11,x_max:909,o:"m 909 0 l 700 0 l 700 817 l 457 817 l 446 726 q 372 239 404 379 q 278 42 340 99 q 111 -14 216 -15 q 11 1 54 -14 l 11 174 q 85 160 50 160 q 142 193 121 160 q 181 315 163 226 q 231 607 200 404 q 283 991 262 810 l 909 991 l 909 0 z "},"М":{ha:1310,x_min:125,x_max:1185,o:"m 545 0 l 306 778 l 300 778 q 313 461 313 541 l 313 0 l 125 0 l 125 991 l 411 991 l 646 233 l 650 233 l 899 991 l 1185 991 l 1185 0 l 989 0 l 989 469 q 990 546 989 503 q 999 777 991 589 l 993 777 l 737 0 l 545 0 z "},"Н":{ha:1063,x_min:125,x_max:937,o:"m 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 0 z "},"О":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 z "},"П":{ha:1035,x_min:125,x_max:909,o:"m 909 0 l 700 0 l 700 817 l 335 817 l 335 0 l 125 0 l 125 991 l 909 991 l 909 0 z "},"Р":{ha:872,x_min:125,x_max:810,o:"m 335 525 l 404 525 q 549 563 501 525 q 597 675 597 602 q 557 784 597 749 q 431 819 517 819 l 335 819 l 335 525 m 810 682 q 710 437 810 522 q 425 353 610 353 l 335 353 l 335 0 l 125 0 l 125 991 l 441 991 q 716 914 622 991 q 810 682 810 836 z "},"С":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 z "},"Т":{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 0 z "},"У":{ha:907,x_min:0,x_max:907,o:"m 907 991 l 600 290 q 492 100 543 158 q 372 15 441 43 q 204 -14 303 -14 q 46 7 119 -14 l 46 187 q 195 163 106 163 q 286 189 251 163 q 343 279 320 215 l 0 991 l 222 991 l 467 439 l 473 439 l 486 473 l 690 991 l 907 991 z "},"Ф":{ha:1194,x_min:62,x_max:1132,o:"m 692 301 l 701 301 q 872 358 810 301 q 935 515 935 416 q 877 664 935 608 q 720 720 819 720 l 692 720 l 692 301 m 503 -14 l 503 139 l 488 139 q 267 183 361 139 q 117 317 172 228 q 62 514 62 406 q 111 704 62 619 q 251 836 159 788 q 467 884 342 884 l 503 884 l 503 1006 l 692 1006 l 692 884 l 728 884 q 943 836 851 884 q 1083 704 1034 788 q 1132 514 1132 619 q 1077 317 1132 406 q 928 183 1023 228 q 707 139 833 139 l 692 139 l 692 -14 l 503 -14 m 503 720 l 475 720 q 317 664 375 720 q 260 515 260 608 q 321 359 260 418 q 493 301 382 301 l 503 301 l 503 720 z "},"Х":{ha:926,x_min:0,x_max:926,o:"m 926 0 l 686 0 l 456 375 l 225 0 l 0 0 l 329 511 l 21 991 l 253 991 l 467 635 l 676 991 l 903 991 l 591 500 l 926 0 z "},"Ц":{ha:1084,x_min:125,x_max:1057,o:"m 909 167 l 1057 167 l 1057 -289 l 854 -289 l 854 0 l 125 0 l 125 991 l 335 991 l 335 175 l 700 175 l 700 991 l 909 991 l 909 167 z "},"Ч":{ha:1011,x_min:74,x_max:886,o:"m 886 0 l 676 0 l 676 383 q 502 335 572 348 q 370 322 433 322 q 151 390 228 322 q 74 582 74 458 l 74 991 l 283 991 l 283 642 q 317 533 283 570 q 429 497 350 497 q 540 508 485 497 q 676 547 595 519 l 676 991 l 886 991 l 886 0 z "},"Ш":{ha:1497,x_min:125,x_max:1372,o:"m 854 175 l 1162 175 l 1162 991 l 1372 991 l 1372 0 l 125 0 l 125 991 l 335 991 l 335 175 l 643 175 l 643 991 l 854 991 l 854 175 z "},"Щ":{ha:1547,x_min:125,x_max:1520,o:"m 854 175 l 1162 175 l 1162 991 l 1372 991 l 1372 167 l 1520 167 l 1520 -289 l 1317 -289 l 1317 0 l 125 0 l 125 991 l 335 991 l 335 175 l 643 175 l 643 991 l 854 991 l 854 175 m 1497 0 z "},"Ъ":{ha:1010,x_min:0,x_max:947,o:"m 947 310 q 844 78 947 155 q 538 0 741 0 l 249 0 l 249 817 l 0 817 l 0 991 l 458 991 l 458 611 l 542 611 q 842 532 736 611 q 947 310 947 454 m 458 172 l 529 172 q 685 207 635 172 q 734 310 734 241 q 684 409 734 378 q 513 439 634 439 l 458 439 l 458 172 z "},"Ы":{ha:1258,x_min:125,x_max:1133,o:"m 803 310 q 700 78 803 155 q 396 0 597 0 l 125 0 l 125 991 l 335 991 l 335 611 l 403 611 q 698 532 593 611 q 803 310 803 453 m 335 172 l 390 172 q 542 207 494 172 q 590 310 590 241 q 544 409 590 379 q 380 439 497 439 l 335 439 l 335 172 m 1133 0 l 924 0 l 924 991 l 1133 991 l 1133 0 z "},"Ь":{ha:886,x_min:125,x_max:823,o:"m 823 310 q 414 0 823 0 l 125 0 l 125 991 l 335 991 l 335 611 l 418 611 q 718 532 612 611 q 823 310 823 454 m 335 172 l 406 172 q 562 207 512 172 q 611 310 611 241 q 561 409 611 378 q 389 439 511 439 l 335 439 l 335 172 z "},"Э":{ha:921,x_min:49,x_max:840,o:"m 375 831 q 243 812 308 831 q 115 766 178 793 l 49 936 q 379 1006 206 1006 q 720 870 600 1006 q 840 494 840 735 q 716 118 840 249 q 359 -14 593 -14 q 66 37 199 -14 l 66 214 q 347 161 231 161 q 545 224 477 161 q 619 414 613 288 l 189 414 l 189 586 l 618 586 q 549 766 614 701 q 375 831 484 831 z "},"Ю":{ha:1486,x_min:125,x_max:1406,o:"m 1406 497 q 1292 120 1406 253 q 964 -14 1177 -14 q 655 99 768 -14 q 525 428 543 212 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 529 603 q 664 903 552 799 q 965 1007 775 1007 q 1293 874 1179 1007 q 1406 497 1406 741 m 741 497 q 798 247 741 332 q 964 163 854 163 q 1189 497 1189 163 q 1133 747 1189 663 q 966 832 1077 832 q 798 747 855 832 q 741 497 741 663 z "},"Я":{ha:924,x_min:-7,x_max:799,o:"m 458 380 l 227 0 l -7 0 l 275 436 q 146 541 191 470 q 102 708 102 612 q 198 918 102 844 q 476 991 295 991 l 799 991 l 799 0 l 589 0 l 589 380 l 458 380 m 589 819 l 485 819 q 359 790 404 819 q 314 693 314 761 q 357 589 314 627 q 490 551 401 551 l 589 551 l 589 819 z "},"а":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 z "},"б":{ha:864,x_min:62,x_max:802,o:"m 62 454 q 162 851 62 715 q 472 1022 261 986 q 778 1067 574 1040 l 802 886 q 489 843 713 876 q 361 802 404 829 q 299 725 319 775 q 273 591 278 675 l 283 591 q 378 677 319 647 q 505 707 437 707 q 724 621 646 707 q 802 375 802 535 q 703 89 802 191 q 431 -14 604 -14 q 160 111 257 -14 q 62 454 62 235 m 443 154 q 590 357 590 154 q 457 554 590 554 q 384 537 420 554 q 318 493 348 520 q 273 437 288 465 q 317 227 273 300 q 443 154 361 154 z "},"в":{ha:888,x_min:109,x_max:832,o:"m 808 559 q 770 455 808 498 q 657 400 732 412 l 657 395 q 785 339 738 385 q 832 227 832 294 q 745 58 832 116 q 497 0 659 0 l 109 0 l 109 758 l 497 758 q 731 708 653 758 q 808 559 808 657 m 618 237 q 583 302 618 282 q 479 322 549 322 l 315 322 l 315 143 l 484 143 q 584 168 549 143 q 618 237 618 193 m 599 543 q 489 612 599 612 l 315 612 l 315 463 l 465 463 q 565 481 531 463 q 599 543 599 500 z "},"г":{ha:664,x_min:109,x_max:632,o:"m 632 758 l 632 603 l 315 603 l 315 0 l 109 0 l 109 758 l 632 758 z "},"д":{ha:922,x_min:20,x_max:901,o:"m 583 151 l 583 603 l 428 603 q 381 363 411 477 q 300 151 352 250 l 583 151 m 901 -272 l 715 -272 l 715 0 l 205 0 l 205 -272 l 20 -272 l 20 151 l 83 151 q 193 406 149 252 q 254 758 237 560 l 790 758 l 790 151 l 901 151 l 901 -272 z "},"е":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 z "},"ж":{ha:1213,x_min:0,x_max:1213,o:"m 510 390 l 510 758 l 703 758 l 703 390 l 972 758 l 1186 758 l 907 395 l 1213 0 l 991 0 l 703 385 l 703 0 l 510 0 l 510 385 l 221 0 l 0 0 l 306 395 l 26 758 l 240 758 l 510 390 z "},"з":{ha:771,x_min:53,x_max:718,o:"m 297 467 q 464 486 414 467 q 513 546 513 505 q 477 601 513 583 q 358 619 441 619 q 240 606 306 619 q 119 571 174 593 l 58 715 q 215 759 139 746 q 385 772 291 772 q 612 718 526 772 q 697 571 697 664 q 546 404 697 443 l 546 397 q 679 332 639 374 q 718 221 718 290 q 673 98 718 152 q 544 16 629 45 q 345 -14 459 -14 q 53 33 155 -14 l 53 204 q 181 161 111 177 q 315 146 250 146 q 467 169 416 146 q 517 233 517 191 q 464 301 517 279 q 301 323 411 323 l 221 323 l 221 467 l 297 467 z "},"и":{ha:1e3,x_min:109,x_max:892,o:"m 309 758 l 309 458 q 293 227 309 411 l 643 758 l 892 758 l 892 0 l 692 0 l 692 302 q 705 530 692 383 l 357 0 l 109 0 l 109 758 l 309 758 z "},"й":{ha:1e3,x_min:109,x_max:892,o:"m 309 758 l 309 458 q 293 227 309 411 l 643 758 l 892 758 l 892 0 l 692 0 l 692 302 q 705 530 692 383 l 357 0 l 109 0 l 109 758 l 309 758 m 831 1084 q 735 900 818 958 q 496 842 652 842 q 259 897 336 842 q 172 1084 182 953 l 357 1084 q 392 986 362 1015 q 500 958 422 958 q 603 989 569 958 q 644 1084 636 1020 l 831 1084 z "},"к":{ha:860,x_min:109,x_max:860,o:"m 606 758 l 833 758 l 533 395 l 860 0 l 625 0 l 315 385 l 315 0 l 109 0 l 109 758 l 315 758 l 315 390 l 606 758 z "},"л":{ha:896,x_min:0,x_max:787,o:"m 787 0 l 581 0 l 581 603 l 390 603 q 337 223 368 349 q 254 42 306 98 q 118 -14 202 -14 q 0 8 46 -14 l 0 174 q 66 160 33 160 q 131 216 105 160 q 178 401 157 271 q 214 758 199 531 l 787 758 l 787 0 z "},"м":{ha:1173,x_min:109,x_max:1064,o:"m 1064 0 l 871 0 l 871 597 l 860 555 q 794 339 823 412 l 660 0 l 513 0 l 376 342 q 314 551 347 416 l 301 597 l 301 0 l 109 0 l 109 758 l 393 758 l 524 435 q 561 315 544 382 q 585 199 578 247 q 620 345 607 300 q 647 427 632 389 q 782 758 662 464 l 1064 758 l 1064 0 z "},"н":{ha:920,x_min:109,x_max:811,o:"m 315 758 l 315 467 l 604 467 l 604 758 l 811 758 l 811 0 l 604 0 l 604 313 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 z "},"о":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 z "},"п":{ha:905,x_min:109,x_max:798,o:"m 798 758 l 798 0 l 590 0 l 590 603 l 315 603 l 315 0 l 109 0 l 109 758 l 798 758 z "},"р":{ha:879,x_min:109,x_max:817,o:"m 525 -14 q 315 83 391 -14 l 304 83 q 315 -26 315 -12 l 315 -334 l 109 -334 l 109 758 l 277 758 l 306 660 l 315 660 q 530 772 388 772 q 741 669 665 772 q 817 380 817 565 q 781 170 817 259 q 680 33 745 80 q 525 -14 614 -14 m 464 607 q 352 560 387 607 q 315 404 317 513 l 315 382 q 352 207 315 260 q 467 154 388 154 q 606 383 606 154 q 571 551 606 495 q 464 607 537 607 z "},"с":{ha:714,x_min:62,x_max:671,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 z "},"т":{ha:768,x_min:32,x_max:736,o:"m 736 758 l 736 603 l 488 603 l 488 0 l 281 0 l 281 603 l 32 603 l 32 758 l 736 758 z "},"у":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 z "},"ф":{ha:1131,x_min:62,x_max:1068,o:"m 663 762 q 960 645 852 747 q 1068 379 1068 543 q 962 111 1068 212 q 663 -5 855 10 l 663 -334 l 471 -334 l 471 -5 q 171 115 279 12 q 62 379 62 218 q 167 650 62 551 q 471 762 271 749 l 471 1055 l 663 1055 l 663 762 m 275 379 q 328 223 275 283 q 471 151 380 163 l 471 607 q 329 533 383 595 q 275 379 275 471 m 856 379 q 805 530 856 469 q 663 604 754 591 l 663 151 q 804 224 753 163 q 856 379 856 284 z "},"х":{ha:803,x_min:7,x_max:796,o:"m 264 387 l 20 758 l 254 758 l 401 517 l 550 758 l 785 758 l 538 387 l 796 0 l 561 0 l 401 260 l 241 0 l 7 0 l 264 387 z "},"ц":{ha:956,x_min:109,x_max:936,o:"m 825 151 l 936 151 l 936 -272 l 750 -272 l 750 0 l 109 0 l 109 758 l 315 758 l 315 155 l 618 155 l 618 758 l 825 758 l 825 151 z "},"ч":{ha:911,x_min:83,x_max:803,o:"m 290 758 l 290 481 q 382 382 290 382 q 493 395 441 382 q 596 431 544 409 l 596 758 l 803 758 l 803 0 l 596 0 l 596 301 q 463 248 524 263 q 343 232 401 232 q 151 295 219 232 q 83 476 83 359 l 83 758 l 290 758 z "},"ш":{ha:1346,x_min:109,x_max:1238,o:"m 1238 0 l 109 0 l 109 758 l 315 758 l 315 155 l 570 155 l 570 758 l 777 758 l 777 155 l 1031 155 l 1031 758 l 1238 758 l 1238 0 z "},"щ":{ha:1368,x_min:109,x_max:1349,o:"m 1238 151 l 1349 151 l 1349 -272 l 1162 -272 l 1162 0 l 109 0 l 109 758 l 315 758 l 315 155 l 570 155 l 570 758 l 777 758 l 777 155 l 1031 155 l 1031 758 l 1238 758 l 1238 151 m 1346 0 z "},"ъ":{ha:986,x_min:0,x_max:937,o:"m 449 758 l 449 465 l 595 465 q 853 410 770 465 q 937 241 937 354 q 603 0 937 0 l 241 0 l 241 603 l 0 603 l 0 758 l 449 758 m 730 239 q 695 302 730 283 q 590 322 661 322 l 449 322 l 449 143 l 593 143 q 730 239 730 143 z "},"ы":{ha:1181,x_min:109,x_max:1072,o:"m 315 465 l 415 465 q 672 410 589 465 q 755 241 755 354 q 672 61 755 121 q 422 0 589 0 l 109 0 l 109 758 l 315 758 l 315 465 m 549 239 q 513 302 549 283 q 408 322 478 322 l 315 322 l 315 143 l 411 143 q 549 239 549 143 m 1072 0 l 865 0 l 865 758 l 1072 758 l 1072 0 z "},"ь":{ha:852,x_min:109,x_max:804,o:"m 315 465 l 461 465 q 720 410 636 465 q 804 241 804 354 q 469 0 804 0 l 109 0 l 109 758 l 315 758 l 315 465 m 597 239 q 562 302 597 283 q 457 322 527 322 l 315 322 l 315 143 l 460 143 q 597 239 597 143 z "},"э":{ha:711,x_min:50,x_max:648,o:"m 283 -14 q 50 33 141 -14 l 50 195 q 272 140 168 140 q 387 184 347 140 q 435 314 428 227 l 149 314 l 149 452 l 435 452 q 393 577 429 535 q 289 619 357 619 q 113 576 208 619 l 54 718 q 169 757 105 742 q 297 772 233 772 q 562 676 475 772 q 648 387 648 580 q 556 88 648 189 q 283 -14 465 -14 z "},"ю":{ha:1218,x_min:109,x_max:1156,o:"m 1156 380 q 1061 90 1156 194 q 800 -14 967 -14 q 561 71 650 -14 q 452 313 471 155 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 l 315 467 l 454 467 q 567 692 474 612 q 804 772 659 772 q 1060 667 965 772 q 1156 380 1156 562 m 660 380 q 693 210 660 267 q 803 153 726 153 q 911 210 878 153 q 945 380 945 267 q 911 550 945 494 q 802 606 878 606 q 693 549 726 606 q 660 380 660 493 z "},"я":{ha:823,x_min:0,x_max:715,o:"m 224 0 l 0 0 l 204 300 q 93 388 131 330 q 56 524 56 446 q 138 696 56 633 q 363 758 220 758 l 715 758 l 715 0 l 509 0 l 509 282 l 395 282 l 224 0 m 258 522 q 296 448 258 475 q 393 421 333 421 l 509 421 l 509 612 l 367 612 q 287 588 316 612 q 258 522 258 563 z "},"ё":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 191 953 q 216 1021 191 997 q 285 1044 241 1044 q 355 1019 330 1044 q 380 953 380 994 q 355 887 380 912 q 285 863 329 863 q 216 886 241 863 q 191 953 191 910 m 464 953 q 491 1022 464 1000 q 559 1044 519 1044 q 630 1020 604 1044 q 656 953 656 996 q 629 887 656 911 q 559 863 603 863 q 491 885 519 863 q 464 953 464 907 z "},"ђ":{ha:913,x_min:3,x_max:808,o:"m 562 -334 q 437 -317 490 -334 l 437 -154 q 518 -167 477 -167 q 602 -52 602 -167 l 602 416 q 570 528 602 491 q 479 566 538 566 q 354 506 393 566 q 315 315 315 447 l 315 0 l 109 0 l 109 811 l 3 811 l 3 946 l 109 946 l 109 1055 l 315 1055 l 315 946 l 529 946 l 529 811 l 315 811 l 315 799 q 306 619 315 743 l 318 619 q 538 730 387 730 q 740 659 671 730 q 808 453 808 588 l 808 -82 q 745 -269 808 -203 q 562 -334 681 -334 z "},"ѓ":{ha:664,x_min:109,x_max:636,o:"m 632 758 l 632 603 l 315 603 l 315 0 l 109 0 l 109 758 l 632 758 m 245 842 l 245 860 q 404 1064 361 996 l 636 1064 l 636 1050 q 516 945 601 1015 q 382 842 431 876 l 245 842 z "},"є":{ha:728,x_min:62,x_max:684,o:"m 443 -14 q 158 85 254 -14 q 62 375 62 184 q 154 675 62 577 q 441 772 245 772 q 684 722 566 772 l 624 575 q 436 619 509 619 q 326 578 365 619 q 277 452 287 536 l 562 452 l 562 314 l 277 314 q 323 183 286 225 q 431 140 361 140 q 538 153 484 140 q 661 195 592 165 l 661 36 q 443 -14 565 -14 z "},"ѕ":{ha:690,x_min:62,x_max:637,o:"m 637 225 q 556 47 637 109 q 314 -14 475 -14 q 173 -2 231 -14 q 64 31 115 9 l 64 201 q 194 156 121 174 q 321 138 266 138 q 433 203 433 138 q 418 242 433 227 q 367 277 404 258 q 269 322 330 296 q 141 390 182 359 q 81 461 100 421 q 62 561 62 502 q 141 717 62 662 q 363 772 219 772 q 629 713 500 772 l 567 564 q 460 604 510 588 q 359 619 411 619 q 268 570 268 619 q 297 522 268 542 q 427 461 327 501 q 557 394 515 425 q 618 322 598 363 q 637 225 637 281 z "},"і":{ha:424,x_min:100,x_max:325,o:"m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 z "},"ї":{ha:424,x_min:-18,x_max:447,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m -18 953 q 7 1021 -18 997 q 76 1044 33 1044 q 146 1019 121 1044 q 172 953 172 994 q 146 887 172 912 q 76 863 120 863 q 7 886 33 863 q -18 953 -18 910 m 255 953 q 282 1022 255 1000 q 351 1044 310 1044 q 421 1020 395 1044 q 447 953 447 996 q 420 887 447 911 q 351 863 394 863 q 282 885 310 863 q 255 953 255 907 z "},"ј":{ha:424,x_min:-89,x_max:325,o:"m 47 -334 q -89 -317 -32 -334 l -89 -154 q 8 -167 -41 -167 q 84 -138 60 -167 q 109 -52 109 -109 l 109 758 l 315 758 l 315 -82 q 245 -268 315 -203 q 47 -334 176 -334 m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 z "},"љ":{ha:1234,x_min:0,x_max:1185,o:"m 551 0 l 551 603 l 390 603 q 337 223 368 349 q 254 42 306 98 q 118 -14 202 -14 q 0 8 46 -14 l 0 174 q 66 160 33 160 q 131 216 105 160 q 178 401 157 271 q 214 758 199 531 l 758 758 l 758 465 l 854 465 q 1104 410 1023 465 q 1185 241 1185 354 q 859 0 1185 0 l 551 0 m 978 239 q 945 302 978 283 q 846 322 911 322 l 758 322 l 758 143 l 848 143 q 978 239 978 143 z "},"њ":{ha:1234,x_min:109,x_max:1185,o:"m 758 465 l 854 465 q 1104 410 1023 465 q 1185 241 1185 354 q 859 0 1185 0 l 551 0 l 551 313 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 l 315 467 l 551 467 l 551 758 l 758 758 l 758 465 m 978 239 q 945 302 978 283 q 846 322 911 322 l 758 322 l 758 143 l 848 143 q 978 239 978 143 z "},"ћ":{ha:913,x_min:3,x_max:808,o:"m 808 0 l 602 0 l 602 401 q 479 566 602 566 q 354 506 393 566 q 315 315 315 447 l 315 0 l 109 0 l 109 811 l 3 811 l 3 946 l 109 946 l 109 1055 l 315 1055 l 315 946 l 529 946 l 529 811 l 315 811 l 315 799 q 306 619 315 743 l 318 619 q 538 730 387 730 q 740 659 671 730 q 808 453 808 588 l 808 0 z "},"ќ":{ha:860,x_min:109,x_max:860,o:"m 606 758 l 833 758 l 533 395 l 860 0 l 625 0 l 315 385 l 315 0 l 109 0 l 109 758 l 315 758 l 315 390 l 606 758 m 343 842 l 343 860 q 503 1064 460 996 l 734 1064 l 734 1050 q 614 945 699 1015 q 481 842 529 876 l 343 842 z "},"ў":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 726 1084 q 630 900 713 958 q 391 842 547 842 q 154 897 231 842 q 67 1084 77 953 l 252 1084 q 287 986 257 1015 q 395 958 317 958 q 497 989 464 958 q 538 1084 531 1020 l 726 1084 z "},"џ":{ha:933,x_min:109,x_max:825,o:"m 109 0 l 109 758 l 315 758 l 315 155 l 618 155 l 618 758 l 825 758 l 825 0 l 559 0 l 559 -272 l 374 -272 l 374 0 l 109 0 z "},"Ґ":{ha:807,x_min:125,x_max:779,o:"m 335 0 l 125 0 l 125 991 l 597 991 l 597 1202 l 779 1202 l 779 818 l 335 818 l 335 0 z "},"ґ":{ha:711,x_min:109,x_max:661,o:"m 315 0 l 109 0 l 109 758 l 475 758 l 475 965 l 661 965 l 661 603 l 315 603 l 315 0 z "},"Ẁ":{ha:1343,x_min:0,x_max:1343,o:"m 1090 0 l 851 0 l 717 521 q 691 636 709 549 q 671 753 673 723 q 650 635 667 716 q 625 519 634 554 l 492 0 l 253 0 l 0 991 l 207 991 l 334 450 q 382 191 367 300 q 400 310 386 229 q 428 436 415 391 l 572 991 l 771 991 l 916 436 q 939 322 925 399 q 961 191 954 245 q 983 322 968 243 q 1010 450 998 401 l 1136 991 l 1343 991 l 1090 0 m 650 1071 q 525 1167 608 1101 q 396 1279 442 1234 l 396 1293 l 628 1293 q 787 1089 671 1225 l 787 1071 l 650 1071 z "},"ẁ":{ha:1189,x_min:14,x_max:1175,o:"m 732 0 l 673 265 l 595 600 l 590 600 l 452 0 l 229 0 l 14 758 l 220 758 l 307 422 q 350 174 328 332 l 354 174 q 378 337 357 225 l 389 395 l 482 758 l 710 758 l 799 395 q 807 351 802 380 q 819 289 813 321 q 828 224 824 256 q 833 174 833 193 l 838 174 q 859 308 844 222 q 882 422 875 393 l 972 758 l 1175 758 l 957 0 l 732 0 m 571 842 q 446 938 528 871 q 317 1050 363 1005 l 317 1064 l 549 1064 q 708 860 591 996 l 708 842 l 571 842 z "},"Ẃ":{ha:1343,x_min:0,x_max:1343,o:"m 1090 0 l 851 0 l 717 521 q 691 636 709 549 q 671 753 673 723 q 650 635 667 716 q 625 519 634 554 l 492 0 l 253 0 l 0 991 l 207 991 l 334 450 q 382 191 367 300 q 400 310 386 229 q 428 436 415 391 l 572 991 l 771 991 l 916 436 q 939 322 925 399 q 961 191 954 245 q 983 322 968 243 q 1010 450 998 401 l 1136 991 l 1343 991 l 1090 0 m 525 1071 l 525 1089 q 684 1293 642 1225 l 916 1293 l 916 1279 q 796 1174 881 1244 q 663 1071 711 1105 l 525 1071 z "},"ẃ":{ha:1189,x_min:14,x_max:1175,o:"m 732 0 l 673 265 l 595 600 l 590 600 l 452 0 l 229 0 l 14 758 l 220 758 l 307 422 q 350 174 328 332 l 354 174 q 378 337 357 225 l 389 395 l 482 758 l 710 758 l 799 395 q 807 351 802 380 q 819 289 813 321 q 828 224 824 256 q 833 174 833 193 l 838 174 q 859 308 844 222 q 882 422 875 393 l 972 758 l 1175 758 l 957 0 l 732 0 m 467 842 l 467 860 q 626 1064 583 996 l 858 1064 l 858 1050 q 738 945 823 1015 q 604 842 652 876 l 467 842 z "},"Ẅ":{ha:1343,x_min:0,x_max:1343,o:"m 1090 0 l 851 0 l 717 521 q 691 636 709 549 q 671 753 673 723 q 650 635 667 716 q 625 519 634 554 l 492 0 l 253 0 l 0 991 l 207 991 l 334 450 q 382 191 367 300 q 400 310 386 229 q 428 436 415 391 l 572 991 l 771 991 l 916 436 q 939 322 925 399 q 961 191 954 245 q 983 322 968 243 q 1010 450 998 401 l 1136 991 l 1343 991 l 1090 0 m 438 1182 q 464 1250 438 1226 q 532 1274 489 1274 q 603 1249 577 1274 q 628 1182 628 1223 q 602 1117 628 1141 q 532 1092 576 1092 q 464 1116 489 1092 q 438 1182 438 1139 m 711 1182 q 739 1252 711 1230 q 807 1274 766 1274 q 877 1249 851 1274 q 903 1182 903 1225 q 877 1116 903 1141 q 807 1092 850 1092 q 739 1114 766 1092 q 711 1182 711 1136 z "},"ẅ":{ha:1189,x_min:14,x_max:1175,o:"m 732 0 l 673 265 l 595 600 l 590 600 l 452 0 l 229 0 l 14 758 l 220 758 l 307 422 q 350 174 328 332 l 354 174 q 378 337 357 225 l 389 395 l 482 758 l 710 758 l 799 395 q 807 351 802 380 q 819 289 813 321 q 828 224 824 256 q 833 174 833 193 l 838 174 q 859 308 844 222 q 882 422 875 393 l 972 758 l 1175 758 l 957 0 l 732 0 m 361 953 q 387 1021 361 997 q 456 1044 412 1044 q 526 1019 500 1044 q 551 953 551 994 q 526 887 551 912 q 456 863 500 863 q 387 886 412 863 q 361 953 361 910 m 635 953 q 662 1022 635 1000 q 730 1044 690 1044 q 801 1020 774 1044 q 827 953 827 996 q 800 887 827 911 q 730 863 774 863 q 662 885 690 863 q 635 953 635 907 z "},"Ỳ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 390 1071 q 264 1167 347 1101 q 136 1279 182 1234 l 136 1293 l 368 1293 q 527 1089 410 1225 l 527 1071 l 390 1071 z "},"ỳ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 366 842 q 241 938 323 871 q 112 1050 158 1005 l 112 1064 l 344 1064 q 503 860 387 996 l 503 842 l 366 842 z "},"–":{ha:694,x_min:56,x_max:639,o:"m 56 296 l 56 452 l 639 452 l 639 296 l 56 296 z "},"—":{ha:1389,x_min:56,x_max:1333,o:"m 56 296 l 56 452 l 1333 452 l 1333 296 l 56 296 z "},"―":{ha:1389,x_min:56,x_max:1333,o:"m 56 296 l 56 452 l 1333 452 l 1333 296 l 56 296 z "},"‗":{ha:571,x_min:-3,x_max:574,o:"m 574 -314 l -3 -314 l -3 -220 l 574 -220 l 574 -314 m 574 -125 l -3 -125 l -3 -31 l 574 -31 l 574 -125 z "},"‘":{ha:301,x_min:17,x_max:285,o:"m 26 652 l 17 667 q 66 822 32 728 q 136 991 100 915 l 285 991 q 216 652 240 810 l 26 652 z "},"’":{ha:301,x_min:17,x_max:285,o:"m 275 991 l 285 977 q 165 652 251 843 l 17 652 q 85 991 64 852 l 275 991 z "},"‚":{ha:404,x_min:43,x_max:311,o:"m 311 146 q 192 -179 276 9 l 43 -179 q 111 161 87 1 l 301 161 l 311 146 z "},"‛":{ha:300,x_min:17,x_max:285,o:"m 216 991 q 285 652 241 825 l 136 652 q 63 828 96 738 q 17 977 31 919 l 26 991 l 216 991 z "},"“":{ha:618,x_min:17,x_max:602,o:"m 334 667 q 383 822 349 728 q 453 991 417 915 l 602 991 q 533 652 557 810 l 343 652 l 334 667 m 17 667 q 66 822 32 728 q 136 991 100 915 l 285 991 q 216 652 240 810 l 26 652 l 17 667 z "},"”":{ha:618,x_min:17,x_max:602,o:"m 285 977 q 165 652 251 843 l 17 652 q 85 991 64 852 l 275 991 l 285 977 m 602 977 q 482 652 568 843 l 334 652 q 401 991 380 852 l 591 991 l 602 977 z "},"„":{ha:720,x_min:43,x_max:628,o:"m 311 146 q 192 -179 276 9 l 43 -179 q 111 161 87 1 l 301 161 l 311 146 m 628 146 q 509 -179 593 9 l 359 -179 q 428 161 404 1 l 618 161 l 628 146 z "},"†":{ha:717,x_min:83,x_max:633,o:"m 633 629 l 408 650 l 446 0 l 257 0 l 294 650 l 83 629 l 83 793 l 294 772 l 257 1055 l 446 1055 l 408 772 l 633 793 l 633 629 z "},"‡":{ha:730,x_min:83,x_max:647,o:"m 422 378 l 647 399 l 647 235 l 422 256 l 460 0 l 271 0 l 309 256 l 83 235 l 83 399 l 309 378 l 277 533 l 309 677 l 83 657 l 83 821 l 309 800 l 271 1055 l 460 1055 l 422 800 l 647 821 l 647 657 l 422 677 l 454 533 l 422 378 z "},"•":{ha:522,x_min:66,x_max:456,o:"m 66 507 q 117 667 66 612 q 261 722 167 722 q 405 667 354 722 q 456 507 456 611 q 405 348 456 404 q 261 292 353 292 q 117 348 168 292 q 66 507 66 404 z "},"…":{ha:1187,x_min:79,x_max:1108,o:"m 79 97 q 110 183 79 154 q 199 212 140 212 q 286 182 255 212 q 317 97 317 153 q 286 13 317 43 q 199 -18 254 -18 q 111 12 142 -18 q 79 97 79 42 m 475 97 q 505 183 475 154 q 595 212 536 212 q 682 182 651 212 q 713 97 713 153 q 682 13 713 43 q 595 -18 650 -18 q 506 12 537 -18 q 475 97 475 42 m 871 97 q 901 183 871 154 q 990 212 932 212 q 1077 182 1046 212 q 1108 97 1108 153 q 1077 13 1108 43 q 990 -18 1046 -18 q 902 12 933 -18 q 871 97 871 42 z "},"‰":{ha:1779,x_min:43,x_max:1736,o:"m 214 694 q 229 566 214 608 q 278 524 244 524 q 343 694 343 524 q 278 864 343 864 q 229 822 244 864 q 214 694 214 781 m 514 696 q 454 461 514 540 q 277 383 393 383 q 104 464 165 383 q 43 696 43 544 q 277 1006 43 1006 q 453 925 391 1006 q 514 696 514 845 m 981 991 l 431 0 l 268 0 l 818 991 l 981 991 m 908 298 q 923 170 908 212 q 972 127 939 127 q 1038 298 1038 127 q 972 468 1038 468 q 923 426 939 468 q 908 298 908 385 m 1208 300 q 1148 66 1208 144 q 971 -12 1088 -12 q 798 68 859 -12 q 737 300 737 149 q 971 610 737 610 q 1147 529 1086 610 q 1208 300 1208 449 m 1436 298 q 1451 170 1436 212 q 1500 127 1466 127 q 1565 298 1565 127 q 1500 468 1565 468 q 1451 426 1466 468 q 1436 298 1436 385 m 1736 300 q 1676 66 1736 145 q 1499 -12 1617 -12 q 1326 68 1388 -12 q 1265 300 1265 149 q 1499 610 1265 610 q 1675 529 1613 610 q 1736 300 1736 449 m 1251 0 z "},"′":{ha:370,x_min:90,x_max:279,o:"m 279 991 l 252 633 l 118 633 l 90 991 l 279 991 z "},"″":{ha:656,x_min:90,x_max:566,o:"m 279 991 l 252 633 l 118 633 l 90 991 l 279 991 m 566 991 l 538 633 l 404 633 l 376 991 l 566 991 z "},"‹":{ha:511,x_min:56,x_max:456,o:"m 56 389 l 307 697 l 456 616 l 267 380 l 456 144 l 307 64 l 56 371 l 56 389 z "},"›":{ha:511,x_min:56,x_max:456,o:"m 456 371 l 204 64 l 56 144 l 244 380 l 56 616 l 204 697 l 456 389 l 456 371 z "},"‼":{ha:791,x_min:79,x_max:713,o:"m 678 329 l 513 329 l 478 991 l 713 991 l 678 329 m 475 97 q 506 183 475 154 q 595 212 536 212 q 682 182 651 212 q 713 97 713 153 q 682 13 713 43 q 595 -18 650 -18 q 507 12 538 -18 q 475 97 475 42 m 282 329 l 117 329 l 82 991 l 317 991 l 282 329 m 79 97 q 110 183 79 154 q 199 212 140 212 q 286 182 255 212 q 317 97 317 153 q 286 13 317 43 q 199 -18 254 -18 q 111 12 142 -18 q 79 97 79 42 z "},"⁄":{ha:180,x_min:-267,x_max:446,o:"m 446 991 l -104 0 l -267 0 l 283 991 l 446 991 z "},"ⁿ":{ha:587,x_min:69,x_max:528,o:"m 393 518 l 393 790 q 373 863 393 842 q 314 885 353 885 q 229 852 253 885 q 204 743 204 820 l 204 518 l 69 518 l 69 991 l 179 991 l 197 935 l 207 935 q 353 1003 256 1003 q 528 833 528 1003 l 528 518 l 393 518 z "},"₣":{ha:793,x_min:24,x_max:721,o:"m 332 298 l 546 298 l 546 178 l 332 178 l 332 0 l 125 0 l 125 178 l 24 178 l 24 298 l 125 298 l 125 991 l 721 991 l 721 819 l 332 819 l 332 591 l 696 591 l 696 419 l 332 419 l 332 298 z "},"₤":{ha:793,x_min:56,x_max:766,o:"m 478 1006 q 739 950 607 1006 l 676 794 q 579 826 623 814 q 488 838 534 838 q 408 808 433 838 q 382 721 382 779 l 382 644 l 625 644 l 625 525 l 382 525 l 382 447 l 625 447 l 625 326 l 380 326 q 353 239 377 276 q 279 176 330 203 l 766 176 l 766 0 l 56 0 l 56 168 q 149 233 123 197 q 178 326 174 269 l 57 326 l 57 447 l 178 447 l 178 525 l 57 525 l 57 644 l 178 644 l 178 722 q 255 934 178 862 q 478 1006 332 1006 z "},"₧":{ha:1239,x_min:125,x_max:1200,o:"m 321 525 l 366 525 q 508 560 460 525 q 555 675 555 595 q 513 784 555 749 q 378 819 470 819 l 321 819 l 321 525 m 754 682 q 651 437 754 522 q 357 353 547 353 l 321 353 l 321 0 l 125 0 l 125 991 l 378 991 q 658 914 562 991 q 754 682 754 836 m 1090 138 q 1200 161 1143 138 l 1200 21 q 1040 -14 1134 -14 q 879 43 930 -14 q 828 216 828 99 l 828 432 l 729 432 l 729 505 l 843 575 l 903 734 l 1007 734 l 1007 574 l 1192 574 l 1192 432 l 1007 432 l 1007 224 q 1031 160 1007 183 q 1090 138 1056 138 z "},"€":{ha:793,x_min:45,x_max:783,o:"m 545 831 q 408 783 462 831 q 339 644 355 735 l 612 644 l 612 525 l 329 525 l 328 501 l 328 469 l 329 447 l 570 447 l 570 326 l 340 326 q 558 161 375 161 q 745 200 655 161 l 745 26 q 546 -14 666 -14 q 273 77 380 -14 q 138 326 165 167 l 45 326 l 45 447 l 125 447 q 122 489 122 463 l 123 525 l 45 525 l 45 644 l 135 644 q 270 904 160 808 q 545 999 380 999 q 783 943 672 999 l 717 786 q 629 819 670 807 q 545 831 589 831 z "},"℅":{ha:1104,x_min:43,x_max:1061,o:"m 889 991 l 339 0 l 176 0 l 726 991 l 889 991 m 1061 233 q 1000 52 1061 117 q 832 -14 939 -14 q 669 53 731 -14 q 607 233 607 119 q 667 414 607 349 q 836 479 728 479 q 1000 412 938 479 q 1061 233 1061 345 m 745 233 q 766 131 745 165 q 835 97 787 97 q 902 131 881 97 q 922 233 922 165 q 902 335 922 301 q 835 368 881 368 q 766 335 787 368 q 745 233 745 301 m 285 513 q 107 575 172 513 q 43 753 43 637 q 104 936 43 873 q 283 999 166 999 q 431 965 363 999 l 393 860 q 281 888 324 888 q 207 853 231 888 q 182 754 182 819 q 277 625 182 625 q 416 654 355 625 l 416 543 q 285 513 363 513 z "},"ℓ":{ha:722,x_min:28,x_max:672,o:"m 435 129 q 502 162 475 129 q 532 265 528 196 l 672 265 q 602 52 665 116 q 414 -12 540 -12 q 220 58 290 -12 q 151 261 151 128 l 151 347 l 28 314 l 28 447 q 151 484 94 465 l 151 762 q 215 946 151 887 q 412 1004 279 1004 q 587 945 523 1004 q 652 785 652 886 q 583 575 652 663 q 350 412 514 488 l 350 254 q 435 129 350 129 m 473 781 q 412 875 473 875 q 363 849 376 875 q 350 781 350 823 l 350 558 q 441 642 410 585 q 473 781 473 699 z "},"№":{ha:1428,x_min:92,x_max:1377,o:"m 835 0 l 612 0 l 267 710 l 257 710 q 273 427 273 536 l 273 0 l 92 0 l 92 991 l 315 991 l 659 286 l 671 286 q 654 559 654 444 l 654 991 l 835 991 l 835 0 m 929 0 l 929 127 l 1362 127 l 1362 0 l 929 0 m 1377 433 q 1314 252 1377 317 q 1145 186 1252 186 q 978 253 1040 186 q 916 433 916 320 q 977 613 916 547 q 1147 679 1038 679 q 1314 611 1252 679 q 1377 433 1377 544 m 1053 433 q 1075 331 1053 366 q 1146 297 1097 297 q 1216 331 1194 297 q 1238 433 1238 366 q 1216 535 1238 501 q 1146 568 1194 568 q 1075 535 1097 568 q 1053 433 1053 501 z "},"™":{ha:1040,x_min:11,x_max:978,o:"m 258 503 l 144 503 l 144 890 l 11 890 l 11 991 l 393 991 l 393 890 l 258 890 l 258 503 m 648 503 l 536 861 l 532 861 l 534 786 l 534 503 l 424 503 l 424 991 l 591 991 l 700 646 l 815 991 l 978 991 l 978 503 l 864 503 l 864 779 l 867 861 l 863 861 l 745 503 l 648 503 z "},"Ω":{ha:1092,x_min:37,x_max:1054,o:"m 546 832 q 357 758 423 832 q 290 547 290 683 q 335 324 290 410 q 471 189 380 238 l 471 0 l 37 0 l 37 176 l 289 176 q 130 348 186 239 q 74 591 74 457 q 132 811 74 716 q 297 956 190 905 q 546 1007 404 1007 q 890 894 762 1007 q 1018 590 1018 781 q 962 349 1018 456 q 800 176 905 241 l 1054 176 l 1054 0 l 618 0 l 618 189 q 757 326 712 238 q 802 549 802 413 q 735 758 802 684 q 546 832 668 832 z "},"℮":{ha:860,x_min:69,x_max:789,o:"m 429 -24 q 241 26 323 -24 q 114 164 159 76 q 69 359 69 253 q 116 562 69 475 q 245 696 163 648 q 429 743 328 743 q 615 695 532 743 q 743 559 697 647 q 789 359 789 471 l 228 359 l 228 118 q 317 58 261 82 q 429 35 374 35 q 580 70 518 35 q 697 193 642 106 l 746 165 q 606 18 680 60 q 429 -24 532 -24 m 632 418 l 632 606 q 543 664 598 642 q 428 686 488 686 q 228 607 311 686 l 228 418 l 632 418 z "},"⅛":{ha:1223,x_min:39,x_max:1160,o:"m 913 991 l 363 0 l 201 0 l 751 991 l 913 991 m 928 606 q 1080 565 1023 606 q 1137 453 1137 524 q 1115 376 1137 410 q 1040 313 1092 342 q 1114 264 1091 285 q 1148 219 1136 243 q 1160 164 1160 194 q 1095 34 1160 85 q 928 -16 1030 -16 q 756 31 819 -16 q 694 160 694 79 q 719 240 694 204 q 802 307 743 276 q 715 453 715 368 q 774 565 715 524 q 928 606 833 606 m 847 160 q 867 110 847 130 q 925 91 886 91 q 985 110 965 91 q 1006 160 1006 130 q 916 245 1006 215 q 847 160 847 215 m 926 499 q 882 483 897 499 q 867 448 867 467 q 884 403 867 420 q 928 372 902 386 q 970 401 954 385 q 987 448 987 418 q 973 483 987 467 q 926 499 959 499 m 373 397 l 212 397 l 212 700 l 214 776 l 217 840 q 166 787 199 816 l 113 746 l 39 832 l 243 991 l 373 991 l 373 397 z "},"⅜":{ha:1223,x_min:40,x_max:1183,o:"m 961 991 l 411 0 l 249 0 l 799 991 l 961 991 m 951 606 q 1104 565 1047 606 q 1161 453 1161 524 q 1138 376 1161 410 q 1064 313 1116 342 q 1137 264 1115 285 q 1172 219 1160 243 q 1183 164 1183 194 q 1119 34 1183 85 q 951 -16 1054 -16 q 780 31 842 -16 q 718 160 718 79 q 742 240 718 204 q 825 307 766 276 q 739 453 739 368 q 798 565 739 524 q 951 606 857 606 m 871 160 q 890 110 871 130 q 949 91 910 91 q 1009 110 989 91 q 1029 160 1029 130 q 939 245 1029 215 q 871 160 871 215 m 950 499 q 906 483 921 499 q 890 448 890 467 q 908 403 890 420 q 951 372 926 386 q 994 401 977 385 q 1011 448 1011 418 q 997 483 1011 467 q 950 499 983 499 m 452 847 q 336 713 452 750 l 336 704 q 435 653 400 690 q 471 562 471 616 q 411 433 471 480 q 225 386 351 386 q 40 433 128 386 l 40 562 q 224 501 140 501 q 321 574 321 501 q 291 628 321 610 q 208 646 261 646 l 132 646 l 132 754 l 195 754 q 278 772 251 754 q 306 828 306 789 q 289 871 306 854 q 237 888 272 888 q 177 875 205 888 q 110 835 149 862 l 41 930 q 135 983 83 962 q 256 1004 186 1004 q 397 961 342 1004 q 452 847 452 918 z "},"⅝":{ha:1223,x_min:61,x_max:1183,o:"m 961 991 l 411 0 l 249 0 l 799 991 l 961 991 m 951 606 q 1104 565 1047 606 q 1161 453 1161 524 q 1138 376 1161 410 q 1064 313 1116 342 q 1137 264 1115 285 q 1172 219 1160 243 q 1183 164 1183 194 q 1119 34 1183 85 q 951 -16 1054 -16 q 780 31 842 -16 q 718 160 718 79 q 742 240 718 204 q 825 307 766 276 q 739 453 739 368 q 798 565 739 524 q 951 606 857 606 m 871 160 q 890 110 871 130 q 949 91 910 91 q 1009 110 989 91 q 1029 160 1029 130 q 939 245 1029 215 q 871 160 871 215 m 950 499 q 906 483 921 499 q 890 448 890 467 q 908 403 890 420 q 951 372 926 386 q 994 401 977 385 q 1011 448 1011 418 q 997 483 1011 467 q 950 499 983 499 m 273 781 q 430 730 370 781 q 489 593 489 680 q 425 440 489 494 q 236 386 360 386 q 61 421 129 386 l 61 551 q 140 515 95 530 q 222 501 185 501 q 339 590 339 501 q 310 654 339 633 q 225 676 280 676 q 144 664 182 676 l 71 693 l 96 991 l 448 991 l 448 867 l 207 867 l 196 775 q 273 781 234 781 z "},"⅞":{ha:1223,x_min:45,x_max:1145,o:"m 900 991 l 350 0 l 188 0 l 738 991 l 900 991 m 913 606 q 1066 565 1009 606 q 1123 453 1123 524 q 1100 376 1123 410 q 1026 313 1078 342 q 1099 264 1077 285 q 1134 219 1122 243 q 1145 164 1145 194 q 1081 34 1145 85 q 913 -16 1016 -16 q 742 31 804 -16 q 680 160 680 79 q 704 240 680 204 q 787 307 728 276 q 701 453 701 368 q 760 565 701 524 q 913 606 819 606 m 833 160 q 852 110 833 130 q 911 91 872 91 q 971 110 951 91 q 991 160 991 130 q 901 245 991 215 q 833 160 833 215 m 912 499 q 868 483 883 499 q 852 448 852 467 q 870 403 852 420 q 913 372 888 386 q 956 401 939 385 q 973 448 973 418 q 959 483 973 467 q 912 499 945 499 m 110 397 l 340 867 l 45 867 l 45 991 l 498 991 l 498 890 l 281 397 l 110 397 z "},"∂":{ha:807,x_min:40,x_max:761,o:"m 761 624 q 702 296 761 448 q 545 65 644 144 q 318 -14 446 -14 q 112 58 183 -14 q 40 271 40 130 q 91 494 40 389 q 225 651 141 599 q 418 704 310 704 q 546 676 489 704 q 410 836 530 836 q 321 818 373 836 q 211 761 269 800 l 211 945 q 439 1006 326 1006 q 679 907 597 1006 q 761 624 761 809 m 326 151 q 453 245 396 151 q 532 479 510 338 q 496 532 522 515 q 433 550 469 550 q 347 513 386 550 q 283 404 308 477 q 258 254 258 330 q 326 151 258 151 z "},"∆":{ha:914,x_min:39,x_max:875,o:"m 39 121 l 339 996 l 576 996 l 875 119 l 875 0 l 39 0 l 39 121 m 457 823 q 449 784 456 813 q 428 707 441 754 q 253 175 414 661 l 661 175 l 490 696 l 483 722 q 457 823 458 810 z "},"∏":{ha:1029,x_min:113,x_max:917,o:"m 701 -310 l 701 817 l 328 817 l 328 -310 l 113 -310 l 113 991 l 917 991 l 917 -310 l 701 -310 z "},"∑":{ha:876,x_min:28,x_max:869,o:"m 28 -310 l 28 -195 l 418 371 l 39 879 l 39 991 l 829 991 l 829 821 l 317 821 l 652 375 l 300 -138 l 869 -138 l 869 -310 l 28 -310 z "},"−":{ha:793,x_min:60,x_max:733,o:"m 60 415 l 60 564 l 733 564 l 733 415 l 60 415 z "},"√":{ha:762,x_min:25,x_max:865,o:"m 450 -9 l 326 -9 l 144 490 l 25 490 l 25 635 l 245 635 l 385 250 l 717 1192 l 865 1192 l 450 -9 z "},"∞":{ha:982,x_min:77,x_max:905,o:"m 905 486 q 844 323 905 390 q 690 257 782 257 q 488 376 571 257 q 398 293 448 324 q 294 261 348 261 q 138 323 199 261 q 77 490 77 386 q 138 653 77 588 q 294 718 199 718 q 492 600 414 718 q 690 715 576 715 q 845 653 785 715 q 905 486 905 590 m 301 399 q 414 490 361 399 q 361 559 388 536 q 300 582 334 582 q 238 556 262 582 q 215 489 215 530 q 238 424 215 448 q 301 399 262 399 m 681 578 q 567 488 622 578 q 682 395 621 395 q 743 422 720 395 q 766 488 766 449 q 743 552 766 527 q 681 578 719 578 z "},"∫":{ha:572,x_min:0,x_max:572,o:"m 465 882 q 410 857 431 882 q 390 789 390 833 l 390 -77 q 323 -269 390 -203 q 132 -334 257 -334 q 0 -306 58 -334 l 0 -134 q 107 -160 62 -160 q 182 -64 182 -160 l 182 799 q 248 990 182 924 q 440 1055 313 1055 q 572 1028 514 1055 l 572 856 q 465 882 512 882 z "},"≈":{ha:793,x_min:60,x_max:733,o:"m 218 589 q 139 567 181 589 q 60 507 96 544 l 60 664 q 233 738 130 738 q 327 727 283 738 q 421 694 370 716 q 575 657 509 657 q 654 679 611 657 q 733 739 696 701 l 733 583 q 559 509 665 509 q 474 517 515 509 q 372 551 433 526 q 218 589 283 589 m 218 319 q 139 296 181 319 q 60 237 96 273 l 60 393 q 233 467 130 467 q 327 456 283 467 q 421 424 370 446 q 575 387 509 387 q 654 408 611 387 q 733 469 696 430 l 733 312 q 559 238 665 238 q 474 247 515 238 q 372 281 433 256 q 218 319 283 319 z "},"≠":{ha:793,x_min:60,x_max:733,o:"m 380 283 l 294 97 l 158 154 l 218 283 l 60 283 l 60 432 l 288 432 l 342 547 l 60 547 l 60 694 l 410 694 l 498 885 l 635 827 l 572 694 l 733 694 l 733 547 l 504 547 l 450 432 l 733 432 l 733 283 l 380 283 z "},"≤":{ha:793,x_min:58,x_max:733,o:"m 58 0 l 58 149 l 732 149 l 732 0 l 58 0 m 733 179 l 60 476 l 60 574 l 733 909 l 733 747 l 269 532 l 733 342 l 733 179 z "},"≥":{ha:793,x_min:60,x_max:733,o:"m 60 0 l 60 149 l 733 149 l 733 0 l 60 0 m 60 342 l 524 532 l 60 747 l 60 909 l 733 574 l 733 476 l 60 179 l 60 342 z "},"◊":{ha:810,x_min:60,x_max:749,o:"m 749 498 l 443 0 l 366 0 l 60 498 l 366 999 l 443 999 l 749 498 m 570 498 l 404 777 l 239 498 l 404 221 l 570 498 z "},"ﬁ":{ha:961,x_min:28,x_max:863,o:"m 528 603 l 349 603 l 349 0 l 142 0 l 142 603 l 28 603 l 28 703 l 142 758 l 142 814 q 205 1003 142 943 q 410 1063 269 1063 q 600 1031 517 1063 l 547 879 q 432 899 485 899 q 368 872 388 899 q 349 806 349 846 l 349 758 l 528 758 l 528 603 m 637 954 q 750 1055 637 1055 q 863 954 863 1055 q 834 879 863 906 q 750 852 806 852 q 637 954 637 852 m 853 0 l 646 0 l 646 758 l 853 758 l 853 0 z "},"ﬂ":{ha:961,x_min:28,x_max:853,o:"m 528 603 l 349 603 l 349 0 l 142 0 l 142 603 l 28 603 l 28 703 l 142 758 l 142 814 q 205 1003 142 943 q 410 1063 269 1063 q 600 1031 517 1063 l 547 879 q 432 899 485 899 q 368 872 388 899 q 349 806 349 846 l 349 758 l 528 758 l 528 603 m 853 0 l 646 0 l 646 1055 l 853 1055 l 853 0 z "},"ȷ":{ha:424,x_min:-89,x_max:315,o:"m 47 -334 q -89 -317 -32 -334 l -89 -154 q 8 -167 -41 -167 q 84 -138 60 -167 q 109 -52 109 -109 l 109 758 l 315 758 l 315 -82 q 245 -268 315 -203 q 47 -334 176 -334 z "},"⁰":{ha:526,x_min:28,x_max:498,o:"m 199 694 q 214 566 199 608 q 262 524 229 524 q 312 566 296 524 q 328 694 328 608 q 312 822 328 781 q 262 864 296 864 q 214 822 229 864 q 199 694 199 781 m 498 696 q 261 383 498 383 q 89 464 150 383 q 28 696 28 544 q 261 1006 28 1006 q 437 925 376 1006 q 498 696 498 845 z "},"⁴":{ha:526,x_min:8,x_max:514,o:"m 514 500 l 429 500 l 429 397 l 268 397 l 268 500 l 8 500 l 8 604 l 269 996 l 429 996 l 429 614 l 514 614 l 514 500 m 268 614 l 268 725 q 272 850 268 783 q 248 795 266 832 q 220 743 230 759 l 134 614 l 268 614 z "},"⁵":{ha:526,x_min:57,x_max:485,o:"m 269 781 q 426 730 366 781 q 485 593 485 680 q 420 440 485 494 q 232 386 356 386 q 57 421 125 386 l 57 551 q 136 515 91 530 q 218 501 181 501 q 335 590 335 501 q 306 654 335 633 q 221 676 276 676 q 140 664 178 676 l 66 693 l 92 991 l 444 991 l 444 867 l 203 867 l 192 775 q 269 781 230 781 z "},"⁶":{ha:526,x_min:31,x_max:494,o:"m 494 595 q 435 440 494 497 q 271 383 376 383 q 97 448 163 383 q 31 619 31 513 q 401 1014 31 903 l 447 904 q 267 823 328 868 q 187 720 205 779 l 195 720 q 246 765 216 749 q 326 781 276 781 q 450 733 405 781 q 494 595 494 686 m 261 504 q 322 528 301 504 q 343 595 343 552 q 323 654 343 631 q 264 677 302 677 q 176 606 176 677 q 199 532 176 561 q 261 504 222 504 z "},"⁷":{ha:526,x_min:40,x_max:493,o:"m 104 397 l 335 867 l 40 867 l 40 991 l 493 991 l 493 890 l 275 397 l 104 397 z "},"⁸":{ha:526,x_min:31,x_max:496,o:"m 264 1006 q 416 965 359 1006 q 473 852 473 924 q 451 776 473 810 q 376 713 428 742 q 450 664 427 684 q 484 618 472 643 q 496 564 496 593 q 431 434 496 484 q 264 383 366 383 q 93 431 155 383 q 31 559 31 478 q 55 640 31 604 q 138 707 79 675 q 52 852 52 767 q 111 964 52 923 q 264 1006 170 1006 m 183 559 q 203 510 183 529 q 261 490 222 490 q 321 510 301 490 q 342 559 342 529 q 252 644 342 614 q 183 559 183 614 m 262 899 q 218 883 233 899 q 203 847 203 867 q 220 802 203 819 q 264 771 238 785 q 307 801 290 784 q 323 847 323 818 q 309 883 323 867 q 262 899 295 899 z "},"⁹":{ha:526,x_min:29,x_max:492,o:"m 492 729 q 408 471 492 557 q 168 386 325 386 q 82 396 119 386 l 82 524 q 150 509 115 509 q 292 547 245 509 q 345 673 339 585 l 339 673 q 205 607 291 607 q 76 657 123 607 q 29 796 29 707 q 91 947 29 889 q 253 1004 153 1004 q 428 932 364 1004 q 492 729 492 860 m 261 884 q 203 860 225 884 q 180 791 180 836 q 199 732 180 754 q 258 710 218 710 q 319 731 296 710 q 343 782 343 753 q 320 856 343 827 q 261 884 297 884 z "}," ":{ha:694,x_min:0,x_max:0,o:""}," ":{ha:1389,x_min:0,x_max:0,o:""}," ":{ha:694,x_min:0,x_max:0,o:""}," ":{ha:1389,x_min:0,x_max:0,o:""}," ":{ha:463,x_min:0,x_max:0,o:""}," ":{ha:347,x_min:0,x_max:0,o:""}," ":{ha:232,x_min:0,x_max:0,o:""}," ":{ha:777,x_min:0,x_max:0,o:""}," ":{ha:396,x_min:0,x_max:0,o:""}," ":{ha:278,x_min:0,x_max:0,o:""}," ":{ha:139,x_min:0,x_max:0,o:""},"​":{ha:0,x_min:0,x_max:0,o:""},"\ufeff":{ha:0,x_min:0,x_max:0,o:""},"￼":{ha:1389,x_min:57,x_max:1346,o:"m 57 823 l 57 1029 l 262 1029 l 262 954 l 132 954 l 132 823 l 57 823 m 1140 954 l 1140 1029 l 1346 1029 l 1346 823 l 1272 823 l 1272 954 l 1140 954 m 57 -260 l 57 -54 l 132 -54 l 132 -186 l 262 -186 l 262 -260 l 57 -260 m 1140 -260 l 1140 -186 l 1272 -186 l 1272 -54 l 1346 -54 l 1346 -260 l 1140 -260 m 875 -260 l 875 -186 l 1060 -186 l 1060 -260 l 875 -260 m 345 -260 l 345 -186 l 528 -186 l 528 -260 l 345 -260 m 345 954 l 345 1029 l 528 1029 l 528 954 l 345 954 m 1346 26 l 1272 26 l 1272 210 l 1346 210 l 1346 26 m 1346 558 l 1272 558 l 1272 742 l 1346 742 l 1346 558 m 610 -260 l 610 -186 l 794 -186 l 794 -260 l 610 -260 m 132 26 l 57 26 l 57 210 l 132 210 l 132 26 m 610 954 l 610 1029 l 794 1029 l 794 954 l 610 954 m 875 954 l 875 1029 l 1060 1029 l 1060 954 l 875 954 m 132 292 l 57 292 l 57 476 l 132 476 l 132 292 m 132 558 l 57 558 l 57 742 l 132 742 l 132 558 m 1346 292 l 1272 292 l 1272 476 l 1346 476 l 1346 292 m 586 427 q 540 275 586 328 q 408 222 494 222 q 276 275 322 222 q 231 427 231 328 q 276 578 231 526 q 408 631 322 631 q 540 578 494 631 q 586 427 586 526 m 317 427 q 408 293 317 293 q 500 427 500 293 q 408 559 500 559 q 317 427 317 559 m 643 625 l 760 625 q 871 603 833 625 q 909 524 909 580 q 894 467 909 490 q 848 439 878 444 l 848 436 q 905 404 888 427 q 921 343 921 381 q 884 258 921 288 q 783 228 847 228 l 643 228 l 643 625 m 726 468 l 771 468 q 814 479 802 468 q 827 513 827 491 q 812 546 827 536 q 766 555 798 555 l 726 555 l 726 468 m 726 401 l 726 297 l 777 297 q 822 312 810 297 q 835 351 835 326 q 774 401 835 401 l 726 401 m 1011 224 q 957 231 976 224 l 957 300 q 1003 294 986 294 q 1061 353 1061 294 l 1061 625 l 1146 625 l 1146 355 q 1111 257 1146 291 q 1011 224 1075 224 z "},"�":{ha:1389,x_min:57,x_max:1331,o:"m 693 1055 l 1331 419 l 693 -216 l 57 419 l 693 1055 m 737 249 l 737 281 q 752 337 737 315 q 811 392 767 359 q 906 490 881 448 q 930 593 930 533 q 867 736 930 684 q 692 789 804 789 q 575 770 638 789 q 464 722 512 751 l 519 602 q 689 656 628 656 q 753 636 732 656 q 774 585 774 616 q 757 523 774 549 q 692 461 741 498 q 615 377 635 415 q 595 289 595 339 l 595 249 l 737 249 m 576 62 q 601 -5 576 20 q 672 -29 625 -29 q 742 -4 717 -29 q 766 62 766 20 q 742 131 766 106 q 672 155 718 155 q 600 131 623 155 q 576 62 576 106 z "},"ǰ":{ha:424,x_min:-89,x_max:505,o:"m 47 -334 q -89 -317 -32 -334 l -89 -154 q 8 -167 -41 -167 q 84 -138 60 -167 q 109 -52 109 -109 l 109 758 l 315 758 l 315 -82 q 245 -268 315 -203 q 47 -334 176 -334 m 505 1064 l 505 1046 q 400 932 448 989 q 332 842 353 876 l 90 842 q 33 918 70 873 q -84 1046 -3 962 l -84 1064 l 54 1064 q 209 945 153 1001 q 368 1064 266 1004 l 505 1064 z "},"ʼ":{ha:301,x_min:17,x_max:285,o:"m 275 991 l 285 977 q 165 652 251 843 l 17 652 q 85 991 64 852 l 275 991 z "},"ϑ":{ha:1017,x_min:28,x_max:975,o:"m 672 672 q 610 850 657 787 q 494 914 563 914 q 431 895 454 914 q 407 838 407 876 q 477 717 407 760 q 672 672 547 673 m 888 517 l 889 488 l 889 457 q 782 107 889 228 q 467 -14 674 -14 q 244 42 318 -14 q 170 211 170 98 q 174 282 170 247 q 178 347 178 318 q 169 385 178 376 q 140 395 159 395 q 79 375 112 395 l 28 498 q 232 557 129 557 q 328 525 293 557 q 363 433 363 493 q 358 345 363 391 q 353 252 353 300 q 386 174 353 201 q 481 147 418 147 q 629 225 579 147 q 679 471 679 303 l 679 492 l 677 514 q 420 555 526 515 q 259 665 314 594 q 204 831 204 736 q 280 1005 204 940 q 490 1069 357 1069 q 750 970 654 1069 q 876 672 846 871 l 975 672 l 975 517 l 888 517 z "},"ϒ":{ha:876,x_min:0,x_max:872,o:"m 432 578 q 515 753 474 670 q 591 896 555 836 q 666 978 626 956 q 770 1000 705 1000 q 872 982 827 1000 l 872 827 q 825 835 842 835 q 780 820 798 835 q 745 779 762 806 q 637 593 699 714 q 539 376 576 473 l 539 0 l 330 0 l 330 379 l 0 991 l 228 991 l 432 578 z "},"ϖ":{ha:1388,x_min:35,x_max:1353,o:"m 916 -14 q 699 129 755 -14 l 692 129 q 475 -14 636 -14 q 247 78 325 -14 q 170 340 170 170 q 212 603 170 461 l 35 603 l 35 689 l 153 758 l 1353 758 l 1353 603 l 1178 603 q 1221 340 1221 461 q 1143 78 1221 170 q 916 -14 1065 -14 m 1031 345 q 987 603 1031 459 l 401 603 q 359 347 359 467 q 391 196 359 245 q 492 147 422 147 q 574 186 549 147 q 600 317 600 225 l 600 410 l 790 410 l 790 317 q 816 186 790 225 q 899 147 842 147 q 1000 196 968 147 q 1031 345 1031 245 z "},"Ḿ":{ha:1310,x_min:125,x_max:1185,o:"m 545 0 l 306 778 l 300 778 q 313 461 313 541 l 313 0 l 125 0 l 125 991 l 411 991 l 646 233 l 650 233 l 899 991 l 1185 991 l 1185 0 l 989 0 l 989 469 q 990 546 989 503 q 999 777 991 589 l 993 777 l 737 0 l 545 0 m 531 1072 l 531 1090 q 690 1295 648 1226 l 922 1295 l 922 1280 q 802 1176 887 1245 q 669 1072 717 1106 l 531 1072 z "},"ḿ":{ha:1364,x_min:109,x_max:1260,o:"m 787 0 l 581 0 l 581 443 q 553 566 581 525 q 467 607 526 607 q 351 549 387 607 q 315 357 315 490 l 315 0 l 109 0 l 109 758 l 267 758 l 294 661 l 306 661 q 394 743 336 713 q 526 772 452 772 q 757 661 696 772 l 775 661 q 865 743 806 714 q 999 772 924 772 q 1194 706 1128 772 q 1260 494 1260 640 l 1260 0 l 1053 0 l 1053 443 q 1025 566 1053 525 q 939 607 998 607 q 825 553 863 607 q 787 380 787 498 l 787 0 m 560 842 l 560 860 q 720 1064 677 996 l 951 1064 l 951 1050 q 831 945 916 1015 q 698 842 746 876 l 560 842 z "},"Ḁ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 652 -244 q 604 -362 652 -317 q 479 -407 555 -407 q 357 -363 404 -407 q 311 -245 311 -320 q 357 -129 311 -172 q 479 -85 403 -85 q 603 -130 554 -85 q 652 -244 652 -174 m 545 -245 q 526 -198 545 -215 q 479 -180 508 -180 q 433 -198 451 -180 q 414 -245 414 -215 q 431 -294 414 -276 q 479 -311 447 -311 q 526 -294 508 -311 q 545 -245 545 -276 z "},"ḁ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 574 -244 q 526 -362 574 -317 q 401 -407 477 -407 q 279 -363 326 -407 q 233 -245 233 -320 q 279 -129 233 -172 q 401 -85 325 -85 q 525 -130 476 -85 q 574 -244 574 -174 m 467 -245 q 448 -198 467 -215 q 401 -180 430 -180 q 355 -198 373 -180 q 336 -245 336 -215 q 353 -294 336 -276 q 401 -311 369 -311 q 448 -294 430 -311 q 467 -245 467 -276 z "},"Ὅ":{ha:1161,x_min:-270,x_max:1080,o:"m 1080 497 q 958 119 1080 251 q 608 -14 836 -14 q 258 119 380 -14 q 136 498 136 251 q 259 877 136 746 q 610 1007 381 1007 q 959 876 838 1007 q 1080 497 1080 744 m 357 497 q 420 247 357 331 q 608 163 483 163 q 860 497 860 163 q 610 832 860 832 q 420 748 484 832 q 357 497 357 663 m -270 859 q -218 952 -270 914 q -71 1003 -167 990 l -71 953 q -144 925 -121 938 q -168 893 -168 913 q -155 875 -168 881 q -127 863 -142 869 q -99 848 -112 857 q -87 821 -87 840 q -108 780 -87 795 q -174 765 -130 765 q -245 790 -220 765 q -270 859 -270 815 m -35 789 l -22 834 q 20 993 6 934 l 198 993 l 198 979 q 58 771 170 916 l -35 771 l -35 789 z "},"˳":{ha:463,x_min:60,x_max:400,o:"m 400 -244 q 352 -362 400 -317 q 228 -407 304 -407 q 106 -363 152 -407 q 60 -245 60 -320 q 105 -129 60 -172 q 228 -85 151 -85 q 351 -130 302 -85 q 400 -244 400 -174 m 293 -245 q 275 -198 293 -215 q 228 -180 256 -180 q 181 -198 199 -180 q 163 -245 163 -215 q 179 -294 163 -276 q 228 -311 195 -311 q 275 -294 256 -311 q 293 -245 293 -276 z "},"ﬃ":{ha:1497,x_min:28,x_max:1398,o:"m 528 603 l 349 603 l 349 0 l 142 0 l 142 603 l 28 603 l 28 703 l 142 758 l 142 814 q 205 1003 142 943 q 410 1063 269 1063 q 600 1031 517 1063 l 547 879 q 432 899 485 899 q 368 872 388 899 q 349 806 349 846 l 349 758 l 528 758 l 528 603 m 1065 603 l 886 603 l 886 0 l 680 0 l 680 603 l 566 603 l 566 703 l 680 758 l 680 814 q 743 1003 680 943 q 947 1063 807 1063 q 1138 1031 1055 1063 l 1085 879 q 970 899 1023 899 q 906 872 926 899 q 886 806 886 846 l 886 758 l 1065 758 l 1065 603 m 1173 954 q 1286 1055 1173 1055 q 1398 954 1398 1055 q 1370 879 1398 906 q 1286 852 1342 852 q 1173 954 1173 852 m 1389 0 l 1182 0 l 1182 758 l 1389 758 l 1389 0 z "},"ﬄ":{ha:1497,x_min:28,x_max:1389,o:"m 528 603 l 349 603 l 349 0 l 142 0 l 142 603 l 28 603 l 28 703 l 142 758 l 142 814 q 205 1003 142 943 q 410 1063 269 1063 q 600 1031 517 1063 l 547 879 q 432 899 485 899 q 368 872 388 899 q 349 806 349 846 l 349 758 l 528 758 l 528 603 m 1065 603 l 886 603 l 886 0 l 680 0 l 680 603 l 566 603 l 566 703 l 680 758 l 680 814 q 743 1003 680 943 q 947 1063 807 1063 q 1138 1031 1055 1063 l 1085 879 q 970 899 1023 899 q 906 872 926 899 q 886 806 886 846 l 886 758 l 1065 758 l 1065 603 m 1389 0 l 1182 0 l 1182 1055 l 1389 1055 l 1389 0 z "},"Ơ":{ha:1146,x_min:81,x_max:1187,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 876 81 745 q 555 1007 326 1007 q 911 869 790 1007 q 974 1055 974 911 l 1178 1055 l 1187 1040 q 1115 852 1163 920 q 983 750 1067 784 q 1025 497 1025 642 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 1105 0 z "},"ơ":{ha:943,x_min:62,x_max:1007,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 576 749 508 772 q 692 679 644 726 q 793 872 793 709 l 997 872 l 1007 857 q 959 713 989 766 q 882 624 930 660 q 762 570 833 587 q 798 380 798 485 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 860 0 z "},"Ư":{ha:1229,x_min:118,x_max:1243,o:"m 932 991 l 932 864 q 1006 932 982 882 q 1029 1055 1029 983 l 1234 1055 l 1243 1040 q 1185 879 1221 936 q 1087 788 1149 823 q 932 739 1025 753 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 368 q 375 213 328 262 q 526 163 423 163 q 676 215 629 163 q 722 370 722 267 l 722 991 l 932 991 m 1050 0 z "},"ư":{ha:1055,x_min:104,x_max:1120,o:"m 646 0 l 618 97 l 606 97 q 512 16 573 45 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 679 q 879 744 852 694 q 905 872 905 793 l 1109 872 l 1120 857 q 1061 694 1098 751 q 963 603 1025 637 q 804 554 901 568 l 804 0 l 646 0 m 913 0 z "},"̀":{ha:0,x_min:-680,x_max:-288,o:"m -425 842 q -551 938 -468 871 q -680 1050 -633 1005 l -680 1064 l -448 1064 q -288 860 -405 996 l -288 842 l -425 842 z "},"́":{ha:0,x_min:-553,x_max:-162,o:"m -553 842 l -553 860 q -394 1064 -437 996 l -162 1064 l -162 1050 q -282 945 -197 1015 q -416 842 -368 876 l -553 842 z "},"̃":{ha:0,x_min:-716,x_max:-154,o:"m -547 913 q -587 895 -568 913 q -615 840 -606 877 l -716 840 q -660 994 -709 939 q -532 1050 -612 1050 q -477 1039 -504 1050 q -424 1014 -450 1027 q -373 990 -398 1001 q -323 979 -348 979 q -283 997 -302 979 q -255 1051 -264 1015 l -154 1051 q -211 897 -161 953 q -338 842 -260 842 q -393 853 -366 842 q -446 877 -420 864 q -497 902 -472 890 q -547 913 -522 913 z "},"̉":{ha:0,x_min:-547,x_max:-239,o:"m -239 1008 q -349 875 -239 903 l -355 827 l -473 827 l -489 926 q -420 952 -438 935 q -401 994 -401 969 q -416 1027 -401 1016 q -453 1039 -430 1039 q -547 1023 -497 1039 l -547 1137 q -491 1148 -527 1144 q -428 1153 -456 1153 q -286 1115 -333 1153 q -239 1008 -239 1078 z "},"̣":{ha:0,x_min:-547,x_max:-322,o:"m -547 -191 q -435 -89 -547 -89 q -322 -191 -322 -89 q -351 -265 -322 -239 q -435 -292 -379 -292 q -547 -191 -547 -292 z "},"Ѐ":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 389 1071 q 263 1167 346 1101 q 134 1279 180 1234 l 134 1293 l 366 1293 q 526 1089 409 1225 l 526 1071 l 389 1071 z "},"Ѝ":{ha:1143,x_min:125,x_max:1018,o:"m 125 991 l 314 991 l 314 513 l 311 385 l 304 239 l 309 239 l 766 991 l 1018 991 l 1018 0 l 831 0 l 831 476 q 843 760 831 572 l 838 760 l 378 0 l 125 0 l 125 991 m 536 1071 q 411 1167 494 1101 q 282 1279 328 1234 l 282 1293 l 514 1293 q 673 1089 557 1225 l 673 1071 l 536 1071 z "},"ѐ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 420 842 q 295 938 378 871 q 166 1050 212 1005 l 166 1064 l 398 1064 q 557 860 441 996 l 557 842 l 420 842 z "},"ѝ":{ha:1e3,x_min:109,x_max:892,o:"m 309 758 l 309 458 q 293 227 309 411 l 643 758 l 892 758 l 892 0 l 692 0 l 692 302 q 705 530 692 383 l 357 0 l 109 0 l 109 758 l 309 758 m 488 842 q 362 938 445 871 q 233 1050 279 1005 l 233 1064 l 465 1064 q 625 860 508 996 l 625 842 l 488 842 z "},"Ѡ":{ha:1511,x_min:81,x_max:1430,o:"m 1040 838 q 983 826 1014 838 q 907 785 953 815 l 833 930 q 937 984 877 964 q 1047 1004 996 1004 q 1330 878 1229 1004 q 1430 521 1430 751 q 1319 126 1430 267 q 1006 -14 1208 -14 q 867 11 927 -14 q 754 86 806 35 q 643 11 702 35 q 505 -14 584 -14 q 192 126 304 -14 q 81 521 81 266 q 181 877 81 750 q 464 1004 282 1004 q 573 985 514 1004 q 677 930 633 965 l 604 785 q 527 826 558 815 q 471 838 496 838 q 336 755 384 838 q 288 519 288 673 q 351 259 288 349 q 533 170 414 170 q 647 216 589 170 l 647 485 l 857 485 l 857 216 q 979 170 906 170 q 1161 259 1099 170 q 1223 519 1223 349 q 1175 755 1223 672 q 1040 838 1126 838 z "},"ѡ":{ha:1229,x_min:4,x_max:1175,o:"m 272 0 l 4 758 l 221 758 l 353 323 q 383 168 375 256 l 389 168 q 440 323 399 224 l 514 511 l 428 758 l 661 758 l 786 338 l 828 183 l 833 183 q 935 425 903 288 q 966 758 966 562 l 1175 758 q 1107 323 1175 509 q 899 0 1040 138 l 713 0 l 602 258 l 485 0 l 272 0 z "},"Ѣ":{ha:935,x_min:0,x_max:872,o:"m 383 762 l 383 611 l 467 611 q 766 532 661 611 q 872 310 872 454 q 463 0 872 0 l 174 0 l 174 762 l 0 762 l 0 918 l 174 918 l 174 1055 l 383 1055 l 383 918 l 639 918 l 639 762 l 383 762 m 383 172 l 454 172 q 610 207 561 172 q 660 310 660 241 q 610 409 660 378 q 437 439 559 439 l 383 439 l 383 172 z "},"ѣ":{ha:920,x_min:0,x_max:871,o:"m 382 603 l 382 465 l 528 465 q 787 410 703 465 q 871 241 871 354 q 536 0 871 0 l 175 0 l 175 603 l 0 603 l 0 758 l 175 758 l 175 895 l 382 895 l 382 758 l 625 758 l 625 603 l 382 603 m 664 239 q 629 302 664 283 q 524 322 593 322 l 382 322 l 382 143 l 526 143 q 664 239 664 143 z "},"Ѥ":{ha:1320,x_min:125,x_max:1271,o:"m 1111 428 l 694 428 q 774 233 703 305 q 960 161 844 161 q 1091 175 1025 161 q 1234 214 1156 189 l 1234 37 q 1095 -2 1163 10 q 946 -14 1027 -14 q 612 100 732 -14 q 475 428 492 213 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 481 603 q 640 899 511 793 q 966 1006 768 1006 q 1271 936 1122 1006 l 1203 765 q 1081 811 1142 791 q 961 831 1020 831 q 780 772 850 831 q 696 603 709 713 l 1111 603 l 1111 428 z "},"ѥ":{ha:1111,x_min:109,x_max:1061,o:"m 828 -14 q 574 68 665 -14 q 465 313 482 151 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 l 315 467 l 465 467 q 569 696 481 619 q 814 772 656 772 q 940 758 876 772 q 1057 718 1005 743 l 999 576 q 822 619 903 619 q 718 581 754 619 q 676 467 682 543 l 962 467 l 962 313 l 676 313 q 722 183 682 226 q 839 140 761 140 q 1061 195 942 140 l 1061 33 q 828 -14 969 -14 z "},"Ѧ":{ha:1014,x_min:0,x_max:1014,o:"m 810 0 l 668 428 l 600 428 l 600 0 l 415 0 l 415 428 l 346 428 l 205 0 l 0 0 l 378 996 l 635 996 l 1014 0 l 810 0 m 399 589 l 611 589 q 507 869 520 823 q 399 589 500 834 z "},"ѧ":{ha:889,x_min:0,x_max:889,o:"m 587 286 l 534 286 l 534 0 l 355 0 l 355 286 l 301 286 l 199 0 l 0 0 l 319 758 l 568 758 l 889 0 l 690 0 l 587 286 m 354 427 l 536 427 l 513 481 q 444 646 464 587 q 354 427 427 583 z "},"Ѩ":{ha:1396,x_min:125,x_max:1396,o:"m 1192 0 l 1050 428 l 982 428 l 982 0 l 798 0 l 798 428 l 728 428 l 587 0 l 382 0 l 545 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 611 603 l 760 996 l 1017 996 l 1396 0 l 1192 0 m 781 589 l 993 589 l 958 682 q 889 869 896 843 q 781 589 882 834 z "},"ѩ":{ha:1253,x_min:109,x_max:1253,o:"m 943 311 l 899 311 l 899 0 l 720 0 l 720 311 l 675 311 l 562 0 l 364 0 l 496 313 l 288 313 l 288 0 l 109 0 l 109 758 l 288 758 l 288 467 l 559 467 l 684 758 l 932 758 l 1253 0 l 1054 0 l 943 311 m 730 452 l 889 452 q 808 646 824 600 q 730 452 794 596 z "},"Ѫ":{ha:1117,x_min:28,x_max:1089,o:"m 28 0 l 131 307 q 227 492 170 429 q 374 579 284 555 l 119 897 l 119 991 l 1002 991 l 1002 897 l 742 579 q 890 489 833 554 q 986 307 947 425 l 1089 0 l 878 0 l 794 261 q 738 379 766 345 q 664 424 709 413 l 664 0 l 456 0 l 456 424 q 378 379 408 413 q 322 261 349 345 l 239 0 l 28 0 m 558 604 l 730 817 l 387 817 l 558 604 z "},"ѫ":{ha:865,x_min:14,x_max:851,o:"m 14 0 l 93 235 q 162 368 120 319 q 267 439 205 417 l 71 686 l 71 758 l 800 758 l 800 686 l 602 437 q 703 367 662 416 q 772 235 744 318 l 851 0 l 676 0 l 612 200 q 576 275 595 252 q 525 304 557 297 l 525 0 l 346 0 l 346 306 q 289 276 309 299 q 253 200 269 253 l 189 0 l 14 0 m 433 465 l 555 618 l 313 618 l 433 465 z "},"Ѭ":{ha:1491,x_min:125,x_max:1463,o:"m 401 0 l 504 307 q 568 428 534 393 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 493 897 l 493 991 l 1375 991 l 1375 897 l 1116 579 q 1264 489 1207 554 q 1360 307 1321 425 l 1463 0 l 1251 0 l 1168 261 q 1112 379 1140 345 q 1038 424 1083 413 l 1038 0 l 829 0 l 829 424 q 752 379 781 413 q 696 261 723 345 l 612 0 l 401 0 m 932 604 l 1104 817 l 761 817 l 932 604 m 374 0 z "},"ѭ":{ha:1222,x_min:109,x_max:1208,o:"m 371 0 l 450 235 q 492 313 470 292 l 288 313 l 288 0 l 109 0 l 109 758 l 288 758 l 288 467 l 602 467 l 428 686 l 428 758 l 1157 758 l 1157 686 l 958 437 q 1060 367 1019 416 q 1129 235 1101 318 l 1208 0 l 1034 0 l 970 200 q 934 273 954 249 q 882 304 913 298 l 882 0 l 703 0 l 703 306 q 646 276 666 299 q 610 200 625 253 l 546 0 l 371 0 m 790 465 l 913 618 l 669 618 l 790 465 m 357 0 z "},"Ѯ":{ha:878,x_min:28,x_max:818,o:"m 653 1204 q 736 1193 703 1204 l 736 1090 q 676 1099 718 1099 q 549 994 613 1099 q 725 909 663 971 q 787 760 787 846 q 725 602 787 665 q 555 522 663 539 l 555 518 q 749 443 680 505 q 818 282 818 380 q 704 66 818 146 q 389 -14 589 -14 q 293 -19 326 -14 q 246 -38 260 -25 q 232 -79 232 -52 q 330 -139 232 -139 q 461 -136 391 -139 l 566 -132 q 681 -160 661 -132 l 681 -315 q 640 -296 670 -304 q 572 -288 609 -288 l 450 -290 l 288 -293 q 97 -235 167 -293 q 28 -77 28 -176 q 108 94 28 41 q 361 151 188 146 q 551 188 493 154 q 610 297 610 222 q 529 398 610 363 q 292 433 449 433 l 199 433 l 199 597 l 282 597 q 511 627 439 597 q 583 726 583 657 q 538 807 583 777 q 403 838 493 838 q 134 757 262 838 l 41 897 q 160 960 98 934 q 302 997 222 985 q 149 1166 237 1078 l 149 1185 l 290 1185 q 432 1053 327 1158 q 514 1147 485 1120 q 578 1189 544 1173 q 653 1204 612 1204 z "},"ѯ":{ha:771,x_min:21,x_max:718,o:"m 604 936 q 688 925 653 936 l 688 822 q 628 831 665 831 q 521 755 571 831 q 652 685 606 732 q 697 571 697 637 q 662 465 697 507 q 555 404 626 423 l 555 397 q 681 332 643 374 q 718 221 718 290 q 619 47 718 107 q 336 -14 520 -14 q 230 -27 263 -14 q 197 -75 197 -40 q 223 -125 197 -111 q 309 -139 248 -139 q 420 -136 366 -139 q 505 -132 473 -132 q 618 -160 597 -132 l 618 -315 q 577 -296 606 -304 q 513 -288 548 -288 q 406 -290 467 -288 q 261 -293 345 -293 q 81 -241 141 -293 q 21 -85 21 -189 q 99 90 21 34 q 338 146 177 146 q 472 168 427 146 q 517 233 517 189 q 464 301 517 279 q 301 323 411 323 l 221 323 l 221 467 l 297 467 q 464 486 414 467 q 513 546 513 505 q 477 601 513 583 q 358 619 441 619 q 240 606 306 619 q 119 571 174 593 l 58 715 q 145 743 102 732 q 231 761 189 754 l 168 834 l 109 899 l 109 917 l 241 917 q 383 785 280 889 q 468 880 439 854 q 531 921 497 905 q 604 936 564 936 z "},"Ѱ":{ha:1217,x_min:74,x_max:1143,o:"m 1143 667 q 1042 386 1143 476 q 737 296 941 296 l 703 296 l 703 0 l 514 0 l 514 296 l 479 296 q 173 386 273 296 q 74 664 74 475 l 74 991 l 271 991 l 271 667 q 321 513 271 560 q 493 465 372 465 l 514 465 l 514 991 l 703 991 l 703 465 l 724 465 q 894 514 842 465 q 946 664 946 564 l 946 991 l 1143 991 l 1143 667 z "},"ѱ":{ha:1162,x_min:97,x_max:1089,o:"m 684 1054 l 684 147 q 851 215 803 159 q 899 392 899 271 q 844 758 899 544 l 1036 758 q 1089 390 1089 568 q 987 102 1089 204 q 684 -12 885 -1 l 684 -334 l 492 -334 l 492 -12 q 196 92 295 -6 q 97 376 97 190 l 97 758 l 294 758 l 294 371 q 338 204 294 254 q 492 146 381 154 l 492 1054 l 684 1054 z "},"Ѳ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 553 163 q 727 228 663 163 q 804 421 791 293 l 300 421 q 375 231 313 299 q 553 163 437 163 m 554 832 q 384 773 447 832 q 302 596 321 714 l 802 596 q 723 771 785 711 q 554 832 661 832 z "},"ѳ":{ha:860,x_min:62,x_max:798,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 431 153 q 534 192 496 153 q 582 310 572 231 l 277 310 q 324 192 287 231 q 431 153 361 153 m 429 606 q 325 567 363 606 q 277 453 287 529 l 582 453 q 535 567 572 529 q 429 606 498 606 z "},"Ѵ":{ha:996,x_min:0,x_max:981,o:"m 913 825 q 860 801 882 825 q 810 697 838 777 l 566 0 l 336 0 l 0 991 l 212 991 l 408 375 q 452 172 437 267 q 500 375 463 259 l 615 728 q 684 897 652 844 q 755 975 715 949 q 854 1000 796 1000 q 981 974 933 1000 l 981 810 q 913 825 946 825 z "},"ѵ":{ha:840,x_min:0,x_max:836,o:"m 0 758 l 216 758 l 355 334 q 395 170 389 223 l 397 170 q 436 329 406 245 l 519 562 q 580 694 554 659 q 642 747 606 730 q 736 764 678 764 q 836 745 787 764 l 836 585 q 781 597 807 597 q 742 583 759 597 q 710 530 724 568 l 501 0 l 290 0 l 0 758 z "},"Ѷ":{ha:996,x_min:0,x_max:981,o:"m 913 825 q 860 801 882 825 q 810 697 838 777 l 566 0 l 336 0 l 0 991 l 212 991 l 408 375 q 452 172 437 267 q 500 375 463 259 l 615 728 q 684 897 652 844 q 755 975 715 949 q 854 1000 796 1000 q 981 974 933 1000 l 981 810 q 913 825 946 825 m 595 1071 q 479 1173 553 1104 q 382 1279 405 1242 l 382 1293 l 586 1293 q 642 1186 608 1244 q 704 1089 676 1127 l 704 1071 l 595 1071 m 325 1071 q 204 1177 275 1109 q 113 1279 134 1245 l 113 1293 l 317 1293 q 373 1186 339 1244 q 435 1089 407 1127 l 435 1071 l 325 1071 z "},"ѷ":{ha:840,x_min:0,x_max:836,o:"m 0 758 l 216 758 l 355 334 q 395 170 389 223 l 397 170 q 436 329 406 245 l 519 562 q 580 694 554 659 q 642 747 606 730 q 736 764 678 764 q 836 745 787 764 l 836 585 q 781 597 807 597 q 742 583 759 597 q 710 530 724 568 l 501 0 l 290 0 l 0 758 m 532 842 q 416 944 490 875 q 319 1050 342 1013 l 319 1064 l 524 1064 q 580 957 546 1015 q 642 860 614 898 l 642 842 l 532 842 m 262 842 q 142 948 213 880 q 50 1050 71 1016 l 50 1064 l 254 1064 q 311 957 277 1015 q 372 860 345 898 l 372 842 l 262 842 z "},"Ѹ":{ha:1832,x_min:81,x_max:1832,o:"m 1042 758 l 1268 758 l 1411 332 q 1436 200 1430 276 l 1440 200 q 1470 332 1448 270 l 1610 758 l 1832 758 l 1511 -97 q 1385 -275 1467 -216 q 1194 -334 1303 -334 q 1089 -322 1141 -334 l 1089 -158 q 1171 -167 1126 -167 q 1266 -133 1225 -167 q 1331 -32 1308 -100 l 1343 5 l 1042 758 m 970 497 q 858 116 970 245 q 525 -14 746 -14 q 193 115 305 -14 q 81 498 81 243 q 193 880 81 753 q 526 1007 306 1007 q 858 879 745 1007 q 970 497 970 751 m 297 497 q 353 243 297 323 q 525 163 408 163 q 697 240 642 163 q 753 497 753 318 q 698 753 753 674 q 526 832 644 832 q 352 751 408 832 q 297 497 297 671 z "},"ѹ":{ha:1590,x_min:62,x_max:1590,o:"m 800 758 l 1026 758 l 1169 332 q 1194 200 1187 281 l 1198 200 q 1227 332 1207 270 l 1368 758 l 1590 758 l 1270 -97 q 1144 -275 1225 -216 q 953 -334 1062 -334 q 847 -322 901 -334 l 847 -158 q 929 -167 886 -167 q 1025 -133 984 -167 q 1089 -32 1066 -100 l 1101 5 l 800 758 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 z "},"Ѻ":{ha:1161,x_min:81,x_max:1080,o:"m 1080 497 q 978 150 1080 279 q 682 -7 876 20 q 582 -85 659 -85 q 482 -7 502 -85 q 184 148 288 18 q 81 498 81 277 q 183 846 81 718 q 484 1000 286 975 q 517 1058 494 1041 q 582 1075 541 1075 q 642 1060 618 1075 q 679 1000 667 1045 q 977 846 873 975 q 1080 497 1080 717 m 297 497 q 345 281 297 363 q 488 174 393 199 q 526 212 503 202 q 582 222 549 222 q 636 212 612 222 q 675 174 659 202 q 864 497 864 224 q 677 819 864 767 q 582 768 651 768 q 485 819 513 768 q 297 497 297 767 z "},"ѻ":{ha:943,x_min:62,x_max:880,o:"m 880 380 q 799 123 880 221 q 562 0 718 26 q 532 -56 556 -36 q 471 -75 507 -75 q 408 -55 432 -75 q 378 1 384 -35 q 144 127 227 28 q 62 380 62 227 q 145 640 62 541 q 383 761 227 739 q 471 817 396 817 q 557 761 543 817 q 794 638 709 738 q 880 380 880 539 m 273 380 q 380 155 273 197 q 413 196 393 182 q 471 211 432 211 q 521 200 500 211 q 559 154 542 189 q 643 235 616 175 q 669 380 669 295 q 642 525 669 469 q 566 600 615 581 q 533 549 554 568 q 471 530 512 530 q 411 547 434 530 q 375 600 388 564 q 273 380 273 556 z "},"Ѽ":{ha:1511,x_min:81,x_max:1430,o:"m 1040 838 q 983 826 1014 838 q 907 785 953 815 l 847 930 q 940 983 888 962 q 1047 1004 993 1004 q 1330 878 1229 1004 q 1430 521 1430 751 q 1319 126 1430 267 q 1006 -14 1208 -14 q 873 11 933 -14 q 755 90 812 35 q 644 13 703 39 q 505 -14 584 -14 q 192 126 304 -14 q 81 521 81 266 q 181 877 81 750 q 464 1004 282 1004 q 571 983 519 1004 q 664 930 623 962 l 604 785 q 527 826 558 815 q 471 838 496 838 q 336 755 384 838 q 288 519 288 673 q 347 259 288 351 q 514 167 406 167 q 642 205 579 167 q 755 310 705 243 q 869 204 806 241 q 997 167 932 167 q 1165 260 1107 167 q 1223 519 1223 353 q 1175 755 1223 672 q 1040 838 1126 838 m 1050 1402 l 1050 1271 l 1039 1271 q 825 1308 917 1271 q 738 1340 755 1335 q 704 1344 721 1344 q 658 1327 673 1344 q 636 1270 644 1310 l 513 1270 l 513 1303 q 534 1409 513 1369 q 593 1466 555 1448 q 701 1485 630 1485 q 779 1472 741 1485 q 857 1443 817 1459 q 942 1415 897 1428 q 1040 1402 987 1402 l 1050 1402 m 865 1177 q 805 1066 865 1114 q 656 1014 744 1019 l 656 1072 q 713 1101 691 1082 q 734 1141 734 1121 q 722 1160 734 1154 q 694 1172 709 1166 q 667 1186 680 1177 q 654 1214 654 1195 q 681 1270 654 1250 q 755 1289 707 1289 q 837 1259 808 1289 q 865 1177 865 1228 z "},"ѽ":{ha:1236,x_min:62,x_max:1174,o:"m 416 -14 q 152 87 241 -14 q 62 387 62 188 q 142 675 62 578 q 389 772 222 772 q 574 732 490 772 l 515 590 q 450 615 473 610 q 403 619 428 619 q 277 387 277 619 q 317 203 277 267 q 431 140 357 140 q 618 232 530 140 q 806 140 706 140 q 920 204 880 140 q 960 387 960 267 q 833 619 960 619 q 785 614 807 619 q 721 590 763 610 l 663 732 q 847 772 747 772 q 1094 675 1014 772 q 1174 387 1174 578 q 1085 88 1174 190 q 819 -14 996 -14 q 618 62 702 -14 q 416 -14 535 -14 m 908 1189 l 908 1057 l 897 1057 q 683 1094 775 1057 q 596 1126 613 1122 q 562 1131 579 1131 q 516 1113 531 1131 q 494 1055 502 1095 l 371 1055 l 371 1089 q 382 1170 371 1136 q 414 1225 394 1204 q 468 1259 433 1246 q 559 1271 503 1271 q 637 1258 599 1271 q 715 1230 675 1245 q 801 1202 755 1215 q 899 1189 846 1189 l 908 1189 m 724 962 q 662 851 724 899 q 514 800 600 804 l 514 859 q 570 887 548 867 q 593 928 593 907 q 580 947 593 941 q 553 958 568 953 q 525 972 538 964 q 513 1000 513 981 q 539 1055 513 1036 q 614 1075 566 1075 q 695 1045 667 1075 q 724 962 724 1015 z "},"Ѿ":{ha:1511,x_min:81,x_max:1430,o:"m 1040 838 q 983 826 1014 838 q 907 785 953 815 l 847 930 q 940 983 888 962 q 1047 1004 993 1004 q 1330 878 1229 1004 q 1430 521 1430 751 q 1319 126 1430 267 q 1006 -14 1208 -14 q 873 11 933 -14 q 755 90 812 35 q 644 13 703 39 q 505 -14 584 -14 q 192 126 304 -14 q 81 521 81 266 q 181 877 81 750 q 464 1004 282 1004 q 571 983 519 1004 q 664 930 623 962 l 604 785 q 527 826 558 815 q 471 838 496 838 q 336 755 384 838 q 288 519 288 673 q 351 259 288 349 q 533 170 414 170 q 647 220 587 170 l 647 485 l 857 485 l 857 227 q 979 170 918 170 q 1161 259 1099 170 q 1223 519 1223 349 q 1175 755 1223 672 q 1040 838 1126 838 m 1036 1260 l 1036 1200 l 981 1083 l 943 1083 l 909 1153 l 806 1153 l 772 1083 l 734 1083 l 701 1153 l 597 1153 l 564 1083 l 526 1083 l 472 1200 l 472 1260 l 1036 1260 z "},"ѿ":{ha:1229,x_min:4,x_max:1175,o:"m 282 0 l 4 758 l 221 758 l 353 326 q 386 171 378 251 l 390 171 q 400 208 394 189 q 518 505 406 226 l 424 758 l 640 758 l 777 338 q 788 301 781 322 q 801 259 795 280 q 814 217 808 237 q 823 183 820 197 l 829 183 q 934 419 901 286 q 966 758 966 553 l 1175 758 q 1108 332 1175 506 q 889 0 1040 158 l 696 0 l 606 261 l 503 0 l 282 0 m 876 979 l 876 920 l 821 803 l 783 803 l 750 872 l 646 872 l 612 803 l 575 803 l 542 872 l 437 872 l 404 803 l 367 803 l 313 920 l 313 979 l 876 979 z "},"Ҁ":{ha:940,x_min:81,x_max:892,o:"m 582 -14 q 210 118 338 -14 q 81 494 81 249 q 141 765 81 648 q 314 943 201 881 q 581 1006 427 1006 q 892 936 733 1006 l 823 765 q 699 811 762 791 q 575 831 636 831 q 370 742 443 831 q 297 493 297 653 q 578 161 297 161 q 678 168 617 161 q 791 186 739 174 l 791 -334 l 582 -334 l 582 -14 z "},"ҁ":{ha:728,x_min:62,x_max:684,o:"m 408 -11 q 150 99 237 2 q 62 375 62 197 q 154 675 62 577 q 441 772 245 772 q 684 718 566 772 l 624 561 q 436 606 507 606 q 312 548 351 606 q 273 376 273 491 q 317 212 273 271 q 441 154 361 154 q 615 179 526 154 l 615 -334 l 408 -334 l 408 -11 z "},"҂":{ha:846,x_min:71,x_max:777,o:"m 399 293 l 591 180 l 543 97 l 350 208 l 228 -4 l 140 46 l 262 260 l 71 371 l 118 454 l 313 343 l 447 578 l 254 689 l 302 774 l 496 663 l 619 875 l 705 825 l 582 611 l 777 500 l 726 416 l 534 528 l 399 293 z "},"҃":{ha:774,x_min:122,x_max:654,o:"m 268 842 q 245 795 264 812 q 195 778 227 778 q 139 802 157 778 q 122 864 122 826 q 196 943 122 943 l 507 943 q 581 1007 514 1007 q 654 929 654 1007 q 636 866 654 890 q 579 842 618 842 l 268 842 z "},"҄":{ha:802,x_min:165,x_max:703,o:"m 175 974 q 273 986 228 974 q 358 1014 318 999 q 437 1042 399 1029 q 514 1055 475 1055 q 623 1037 585 1055 q 681 979 660 1019 q 703 873 703 939 l 703 840 l 579 840 q 557 898 572 880 q 511 916 543 916 q 466 907 491 916 q 391 879 441 899 q 176 842 300 842 l 165 842 l 165 974 l 175 974 z "},"҅":{ha:802,x_min:313,x_max:524,o:"m 422 1101 q 497 1082 471 1101 q 524 1026 524 1062 q 511 999 524 1008 q 483 984 498 990 q 455 973 468 979 q 443 954 443 967 q 466 913 443 932 q 522 885 489 893 l 522 827 q 375 877 437 831 q 313 989 313 924 q 341 1071 313 1041 q 422 1101 370 1101 z "},"҆":{ha:802,x_min:311,x_max:522,o:"m 522 989 q 460 878 522 925 q 313 827 399 831 l 313 885 q 369 912 345 892 q 392 954 392 932 q 379 973 392 967 q 352 984 367 979 q 324 999 336 990 q 311 1026 311 1008 q 338 1082 311 1062 q 412 1101 364 1101 q 494 1071 465 1101 q 522 989 522 1041 z "},"҈":{ha:1373,x_min:28,x_max:1346,o:"m 679 966 q 780 932 742 966 q 823 835 819 898 l 770 835 q 746 880 766 865 q 679 895 726 895 q 609 881 626 895 q 589 835 592 867 l 538 835 q 679 966 545 966 m 679 -85 q 780 -119 741 -85 q 823 -216 819 -154 l 770 -216 q 746 -172 766 -186 q 679 -157 726 -157 q 609 -171 626 -157 q 589 -216 592 -184 l 538 -216 q 575 -120 541 -156 q 679 -85 609 -85 m 1072 104 q 1174 70 1135 104 q 1217 -28 1213 35 l 1162 -28 q 1139 17 1159 3 q 1072 32 1118 32 q 1002 19 1019 32 q 982 -28 985 5 l 930 -28 q 968 69 934 33 q 1072 104 1002 104 m 290 104 q 392 70 353 104 q 435 -28 431 35 l 380 -28 q 357 17 377 3 q 290 32 336 32 q 220 19 237 32 q 200 -28 203 5 l 149 -28 q 186 69 152 33 q 290 104 220 104 m 1072 774 q 1174 739 1135 774 q 1217 642 1213 705 l 1162 642 q 1139 687 1159 672 q 1072 701 1118 701 q 1002 688 1019 701 q 982 642 985 675 l 930 642 q 968 738 934 703 q 1072 774 1002 774 m 290 774 q 392 739 353 774 q 435 642 431 705 l 380 642 q 357 687 377 672 q 290 701 336 701 q 220 688 237 701 q 200 642 203 675 l 149 642 q 186 738 152 703 q 290 774 220 774 m 1202 443 q 1303 408 1264 443 q 1346 311 1342 372 l 1292 311 q 1268 356 1289 341 q 1202 371 1248 371 q 1132 357 1149 371 q 1111 311 1114 344 l 1060 311 q 1202 443 1067 443 m 170 443 q 271 408 232 443 q 314 311 310 374 l 260 311 q 236 356 256 342 q 170 371 216 371 q 100 358 117 371 q 79 311 83 345 l 28 311 q 65 408 31 372 q 170 443 100 443 z "},"҉":{ha:1328,x_min:28,x_max:1300,o:"m 739 -33 q 704 -143 728 -78 q 656 -261 680 -208 l 590 -261 q 637 -24 626 -111 l 732 -24 l 739 -33 m 590 783 q 628 899 603 831 q 673 1011 652 967 l 739 1011 q 692 774 704 862 l 597 774 l 590 783 m 1072 449 q 1188 411 1120 436 q 1300 366 1256 387 l 1300 300 q 1063 347 1150 336 l 1063 441 l 1072 449 m 256 300 q 146 335 211 311 q 28 383 81 359 l 28 449 q 265 401 178 413 l 265 307 l 256 300 m 1120 804 l 1166 758 q 965 624 1046 684 l 899 690 l 900 701 q 1010 758 945 728 q 1120 804 1074 787 m 208 -83 l 161 -37 q 363 97 281 37 l 429 31 l 428 20 q 208 -83 323 -41 m 220 815 l 265 863 q 400 661 349 728 l 334 595 l 322 596 q 220 815 267 691 m 1107 -96 l 1061 -143 q 996 -43 1040 -109 q 926 58 952 23 l 993 125 l 1004 123 q 1061 11 1031 77 q 1107 -96 1092 -55 z "},"Ҋ":{ha:1272,x_min:125,x_max:1244,o:"m 125 991 l 314 991 l 314 513 l 311 385 l 304 239 l 309 239 l 766 991 l 1018 991 l 1018 180 l 1244 180 l 1124 -289 l 890 -289 l 1018 0 l 831 0 l 831 476 q 843 760 831 572 l 838 760 l 378 0 l 125 0 l 125 991 m 900 1314 q 804 1129 887 1187 q 566 1071 722 1071 q 328 1126 405 1071 q 241 1314 251 1182 l 427 1314 q 461 1216 431 1244 q 570 1187 492 1187 q 671 1218 637 1187 q 713 1314 705 1249 l 900 1314 m 1143 0 z "},"ҋ":{ha:1114,x_min:109,x_max:1095,o:"m 309 758 l 309 458 q 293 227 309 411 l 643 758 l 892 758 l 892 151 l 1095 151 l 996 -272 l 799 -272 l 892 0 l 692 0 l 692 302 q 705 530 692 383 l 357 0 l 109 0 l 109 758 l 309 758 m 831 1084 q 734 899 817 956 q 496 842 652 842 q 318 867 387 842 q 214 943 249 892 q 172 1084 179 994 l 357 1084 q 393 985 363 1011 q 500 958 423 958 q 604 990 570 958 q 643 1084 637 1023 l 831 1084 m 1000 0 z "},"Ҍ":{ha:856,x_min:32,x_max:823,o:"m 335 889 l 538 889 l 538 717 l 335 717 l 335 611 l 418 611 q 718 532 612 611 q 823 310 823 454 q 414 0 823 0 l 125 0 l 125 717 l 32 717 l 32 889 l 125 889 l 125 991 l 335 991 l 335 889 m 335 172 l 406 172 q 562 207 512 172 q 611 310 611 241 q 561 409 611 378 q 389 439 511 439 l 335 439 l 335 172 z "},"ҍ":{ha:852,x_min:3,x_max:804,o:"m 3 904 l 109 904 l 109 1055 l 315 1055 l 315 904 l 571 904 l 571 770 l 315 770 l 315 465 l 461 465 q 720 410 636 465 q 804 241 804 354 q 469 0 804 0 l 109 0 l 109 770 l 3 770 l 3 904 m 597 239 q 562 302 597 283 q 457 322 527 322 l 315 322 l 315 143 l 460 143 q 597 239 597 143 z "},"Ҏ":{ha:872,x_min:125,x_max:810,o:"m 810 682 q 778 527 810 595 q 682 416 745 458 l 742 332 l 639 256 l 561 367 q 425 353 503 353 l 335 353 l 335 0 l 125 0 l 125 991 l 441 991 q 716 914 622 991 q 810 682 810 836 m 335 525 l 433 525 l 449 526 l 410 582 l 514 657 l 570 578 q 597 675 597 614 q 557 784 597 749 q 431 819 517 819 l 335 819 l 335 525 z "},"ҏ":{ha:879,x_min:109,x_max:817,o:"m 525 -14 q 315 83 391 -14 l 304 83 q 315 -26 315 -12 l 315 -334 l 109 -334 l 109 758 l 277 758 l 306 660 l 317 660 q 408 744 353 716 q 530 772 463 772 q 741 669 665 772 q 817 380 817 565 q 718 66 817 175 l 782 -17 l 675 -97 l 602 -3 q 525 -14 566 -14 m 464 607 q 352 560 387 607 q 315 404 317 513 l 315 382 q 352 207 315 260 q 467 154 388 154 l 478 154 l 490 155 l 421 241 l 534 325 l 590 257 q 606 383 606 310 q 571 551 606 495 q 464 607 537 607 z "},"Ғ":{ha:777,x_min:32,x_max:749,o:"m 749 991 l 749 819 l 335 819 l 335 576 l 607 576 l 607 404 l 335 404 l 335 0 l 125 0 l 125 404 l 32 404 l 32 576 l 125 576 l 125 991 l 749 991 z "},"ғ":{ha:682,x_min:3,x_max:650,o:"m 650 758 l 650 590 l 302 590 l 302 443 l 528 443 l 528 283 l 302 283 l 302 0 l 96 0 l 96 283 l 3 283 l 3 443 l 96 443 l 96 758 l 650 758 z "},"Ҕ":{ha:1019,x_min:125,x_max:950,o:"m 421 364 q 335 355 385 364 l 335 0 l 125 0 l 125 991 l 749 991 l 749 819 l 335 819 l 335 547 q 509 555 408 555 q 743 498 640 555 q 898 337 846 440 q 950 96 950 235 q 903 -137 950 -37 q 771 -293 856 -238 q 582 -347 686 -347 q 460 -340 507 -347 q 363 -315 413 -332 l 363 -131 q 541 -163 450 -163 q 690 -93 635 -163 q 745 96 745 -24 q 667 296 745 229 q 421 364 589 364 z "},"ҕ":{ha:836,x_min:109,x_max:787,o:"m 787 46 q 746 -163 787 -75 q 629 -295 705 -250 q 453 -340 553 -340 q 279 -306 357 -340 l 279 -127 q 351 -154 310 -144 q 425 -164 392 -164 q 546 -109 504 -164 q 589 49 589 -54 q 375 256 589 256 q 315 252 347 256 l 315 0 l 109 0 l 109 758 l 663 758 l 663 590 l 315 590 l 315 427 q 416 435 366 435 q 609 387 524 435 q 741 252 694 340 q 787 46 787 163 z "},"Җ":{ha:1429,x_min:0,x_max:1401,o:"m 353 515 l 20 991 l 236 991 l 557 511 l 557 991 l 753 991 l 753 511 l 1074 991 l 1291 991 l 957 515 l 1186 180 l 1401 180 l 1401 -289 l 1198 -289 l 1198 0 l 1084 0 l 753 503 l 753 0 l 557 0 l 557 503 l 225 0 l 0 0 l 353 515 m 1310 0 z "},"җ":{ha:1308,x_min:0,x_max:1275,o:"m 510 390 l 510 758 l 703 758 l 703 390 l 972 758 l 1186 758 l 907 395 l 1095 151 l 1275 151 l 1275 -272 l 1089 -272 l 1089 0 l 991 0 l 703 385 l 703 0 l 510 0 l 510 385 l 221 0 l 0 0 l 306 395 l 26 758 l 240 758 l 510 390 m 1213 0 z "},"Ҙ":{ha:900,x_min:64,x_max:840,o:"m 810 760 q 742 602 810 664 q 558 522 674 539 l 558 518 q 767 443 694 505 q 840 282 840 381 q 729 66 840 145 q 422 -14 618 -14 q 72 40 204 -14 l 72 216 q 221 169 136 186 q 382 151 307 151 q 632 297 632 151 q 552 398 632 363 q 314 433 471 433 l 221 433 l 221 597 l 304 597 q 534 627 462 597 q 606 726 606 657 q 561 807 606 777 q 425 838 515 838 q 155 757 286 838 l 64 897 q 243 980 149 954 q 454 1006 338 1006 q 713 938 616 1006 q 810 760 810 870 m 420 -154 q 393 -82 420 -119 q 319 0 367 -45 l 441 0 q 517 -66 494 -41 q 551 -119 539 -92 q 563 -178 563 -146 q 516 -291 563 -248 q 393 -334 469 -334 q 288 -318 343 -334 l 288 -197 q 366 -210 328 -210 q 405 -196 389 -210 q 420 -154 420 -182 z "},"ҙ":{ha:771,x_min:53,x_max:718,o:"m 297 467 q 464 486 414 467 q 513 546 513 505 q 477 601 513 583 q 358 619 441 619 q 240 606 306 619 q 119 571 174 593 l 58 715 q 215 759 139 746 q 385 772 291 772 q 612 718 526 772 q 697 571 697 664 q 546 404 697 443 l 546 397 q 679 332 639 374 q 718 221 718 290 q 673 98 718 152 q 544 16 629 45 q 345 -14 459 -14 q 53 33 155 -14 l 53 204 q 181 161 111 177 q 315 146 250 146 q 467 169 416 146 q 517 233 517 191 q 464 301 517 279 q 301 323 411 323 l 221 323 l 221 467 l 297 467 m 346 -154 q 319 -82 346 -119 q 245 0 293 -45 l 367 0 q 443 -66 420 -41 q 477 -119 465 -92 q 489 -178 489 -146 q 442 -291 489 -248 q 319 -334 395 -334 q 214 -318 269 -334 l 214 -197 q 292 -210 254 -210 q 331 -196 315 -210 q 346 -154 346 -182 z "},"Қ":{ha:1050,x_min:125,x_max:1022,o:"m 800 180 l 1022 180 l 1022 -289 l 819 -289 l 819 0 l 694 0 l 335 503 l 335 0 l 125 0 l 125 991 l 335 991 l 335 511 l 690 991 l 914 991 l 553 515 l 800 180 m 933 0 z "},"қ":{ha:924,x_min:109,x_max:904,o:"m 606 758 l 833 758 l 533 395 l 734 151 l 904 151 l 904 -272 l 718 -272 l 718 0 l 625 0 l 315 385 l 315 0 l 109 0 l 109 758 l 315 758 l 315 390 l 606 758 m 860 0 z "},"Ҝ":{ha:922,x_min:125,x_max:922,o:"m 419 415 l 335 354 l 335 0 l 125 0 l 125 991 l 335 991 l 335 538 l 418 654 l 419 656 l 419 896 l 510 896 l 510 770 l 686 991 l 920 991 l 574 553 l 922 0 l 684 0 l 510 279 l 510 129 l 419 129 l 419 415 z "},"ҝ":{ha:832,x_min:109,x_max:832,o:"m 109 758 l 301 758 l 301 390 l 368 473 l 368 688 l 467 688 l 467 600 l 591 758 l 806 758 l 505 395 l 832 0 l 611 0 l 465 180 l 465 61 l 367 61 l 367 302 l 301 385 l 301 0 l 109 0 l 109 758 z "},"Ҟ":{ha:893,x_min:3,x_max:893,o:"m 3 900 l 96 900 l 96 991 l 306 991 l 306 900 l 399 900 l 399 728 l 306 728 l 306 538 l 389 654 l 657 991 l 890 991 l 545 553 l 893 0 l 654 0 l 395 418 l 306 354 l 306 0 l 96 0 l 96 728 l 3 728 l 3 900 z "},"ҟ":{ha:861,x_min:3,x_max:861,o:"m 3 946 l 109 946 l 109 1055 l 315 1055 l 315 946 l 529 946 l 529 811 l 315 811 l 315 585 l 304 412 l 307 412 l 397 528 l 610 758 l 843 758 l 542 429 l 861 0 l 623 0 l 404 307 l 315 236 l 315 0 l 109 0 l 109 811 l 3 811 l 3 946 z "},"Ҡ":{ha:1018,x_min:0,x_max:1018,o:"m 0 991 l 431 991 l 431 538 l 514 654 l 782 991 l 1015 991 l 669 553 l 1018 0 l 779 0 l 519 418 l 431 354 l 431 0 l 221 0 l 221 817 l 0 817 l 0 991 m 96 0 z "},"ҡ":{ha:965,x_min:0,x_max:965,o:"m 0 758 l 435 758 l 435 390 l 725 758 l 939 758 l 639 395 l 965 0 l 745 0 l 435 385 l 435 0 l 241 0 l 241 603 l 0 603 l 0 758 m 133 0 z "},"Ң":{ha:1168,x_min:125,x_max:1140,o:"m 937 180 l 1140 180 l 1140 -289 l 937 -289 l 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 180 m 1063 0 z "},"ң":{ha:1032,x_min:109,x_max:999,o:"m 315 758 l 315 467 l 604 467 l 604 758 l 811 758 l 811 151 l 999 151 l 999 -272 l 812 -272 l 812 0 l 604 0 l 604 313 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 m 920 0 z "},"Ҥ":{ha:1158,x_min:125,x_max:1158,o:"m 1158 817 l 937 817 l 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 1158 991 l 1158 817 m 1063 0 z "},"ҥ":{ha:1053,x_min:109,x_max:1053,o:"m 315 758 l 315 467 l 604 467 l 604 758 l 1053 758 l 1053 603 l 811 603 l 811 0 l 604 0 l 604 313 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 m 920 0 z "},"Ҧ":{ha:1563,x_min:125,x_max:1493,o:"m 882 545 q 1072 555 960 555 q 1296 497 1198 555 q 1444 337 1394 439 q 1493 96 1493 235 q 1446 -137 1493 -37 q 1314 -293 1399 -238 q 1125 -347 1229 -347 q 1005 -340 1051 -347 q 905 -315 960 -334 l 905 -131 q 1083 -163 993 -163 q 1230 -91 1172 -163 q 1287 96 1287 -18 q 1215 296 1287 229 q 987 364 1143 364 q 882 350 948 364 l 882 0 l 672 0 l 672 817 l 335 817 l 335 0 l 125 0 l 125 991 l 882 991 l 882 545 z "},"ҧ":{ha:1235,x_min:109,x_max:1186,o:"m 1186 46 q 1145 -162 1186 -75 q 1028 -295 1104 -249 q 851 -340 952 -340 q 677 -306 755 -340 l 677 -127 q 749 -154 708 -144 q 823 -164 790 -164 q 944 -109 901 -164 q 987 49 987 -54 q 935 203 987 150 q 781 256 882 256 l 777 256 l 777 0 l 570 0 l 570 603 l 315 603 l 315 0 l 109 0 l 109 758 l 777 758 l 777 432 l 831 435 q 1015 387 933 435 q 1141 251 1097 339 q 1186 46 1186 163 z "},"Ҩ":{ha:1079,x_min:81,x_max:1038,o:"m 1007 460 q 974 279 1007 363 q 864 119 941 195 q 940 109 895 109 q 1038 123 991 109 l 1038 -40 q 917 -57 996 -57 q 701 9 800 -57 q 532 -14 631 -14 q 201 119 321 -14 q 81 484 81 251 q 191 874 81 742 q 517 1007 301 1007 q 604 999 555 1007 q 685 978 654 990 l 632 815 q 517 835 570 835 q 293 490 293 835 q 361 249 293 334 q 549 164 429 164 q 570 167 566 164 q 501 301 527 218 q 475 468 475 383 q 542 693 475 616 q 739 770 610 770 q 937 688 866 770 q 1007 460 1007 606 m 819 454 q 743 612 819 612 q 685 571 706 612 q 664 457 664 529 q 683 315 664 374 q 728 222 702 256 q 794 323 769 260 q 819 454 819 386 z "},"ҩ":{ha:911,x_min:62,x_max:864,o:"m 844 345 q 815 201 844 264 q 733 103 786 138 q 781 98 752 98 q 864 110 821 98 l 864 -33 q 758 -49 815 -49 q 572 9 659 -49 q 415 -14 506 -14 q 158 92 254 -14 q 62 376 62 197 q 155 668 62 564 q 416 772 248 772 q 486 765 445 772 q 559 745 527 758 l 514 590 q 416 607 454 607 q 306 551 341 607 q 271 370 271 494 q 308 210 271 267 q 419 153 346 153 q 444 155 436 153 q 406 253 416 209 q 396 349 396 296 q 452 522 396 462 q 621 582 509 582 q 784 519 724 582 q 844 345 844 456 m 681 345 q 666 408 681 383 q 621 432 651 432 q 559 343 559 432 q 611 199 559 258 q 681 345 681 242 z "},"Ҫ":{ha:885,x_min:81,x_max:836,o:"m 546 831 q 362 742 427 831 q 297 493 297 652 q 546 161 297 161 q 799 214 650 161 l 799 37 q 526 -14 677 -14 q 195 118 310 -14 q 81 494 81 249 q 137 765 81 649 q 299 944 193 882 q 546 1006 404 1006 q 836 936 690 1006 l 768 765 q 656 811 713 791 q 546 831 600 831 m 525 -154 q 498 -82 525 -119 q 425 0 472 -45 l 546 0 q 622 -66 600 -41 q 656 -119 644 -92 q 668 -178 668 -146 q 621 -291 668 -248 q 498 -334 574 -334 q 393 -318 448 -334 l 393 -197 q 471 -210 433 -210 q 510 -196 494 -210 q 525 -154 525 -182 z "},"ҫ":{ha:714,x_min:62,x_max:671,o:"m 416 -14 q 62 375 62 -14 q 159 670 62 568 q 435 772 255 772 q 671 721 566 772 l 610 561 q 519 593 561 581 q 435 606 477 606 q 273 376 273 606 q 435 154 273 154 q 545 170 494 154 q 647 220 596 186 l 647 43 q 546 -1 597 11 q 416 -14 494 -14 m 421 -154 q 395 -82 421 -119 q 321 0 368 -45 l 442 0 q 518 -66 496 -41 q 552 -119 541 -92 q 564 -178 564 -146 q 517 -291 564 -248 q 395 -334 471 -334 q 289 -318 345 -334 l 289 -197 q 367 -210 330 -210 q 406 -196 391 -210 q 421 -154 421 -182 z "},"Ҭ":{ha:804,x_min:28,x_max:777,o:"m 507 180 l 710 180 l 710 -289 l 507 -289 l 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 180 z "},"ҭ":{ha:764,x_min:32,x_max:736,o:"m 736 758 l 736 603 l 488 603 l 488 151 l 673 151 l 673 -272 l 488 -272 l 488 0 l 281 0 l 281 603 l 32 603 l 32 758 l 736 758 z "},"Ү":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 z "},"ү":{ha:798,x_min:0,x_max:798,o:"m 503 -334 l 294 -334 l 294 0 l 0 758 l 228 758 l 347 416 q 386 270 365 367 l 395 229 l 403 229 q 450 416 427 351 l 571 758 l 798 758 l 503 0 l 503 -334 z "},"Ұ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 358 l 754 358 l 754 183 l 538 183 l 538 0 l 329 0 l 329 183 l 113 183 l 113 358 l 329 358 l 329 379 l 0 991 l 228 991 l 433 583 z "},"ұ":{ha:798,x_min:0,x_max:798,o:"m 700 0 l 700 -155 l 503 -155 l 503 -334 l 294 -334 l 294 -155 l 97 -155 l 97 0 l 294 0 l 0 758 l 228 758 l 347 416 q 386 270 365 367 l 395 229 l 403 229 q 450 416 427 351 l 571 758 l 798 758 l 503 0 l 700 0 z "},"Ҳ":{ha:1032,x_min:0,x_max:1004,o:"m 806 180 l 1004 180 l 1004 -289 l 802 -289 l 802 0 l 686 0 l 456 375 l 225 0 l 0 0 l 329 511 l 21 991 l 253 991 l 467 635 l 676 991 l 903 991 l 591 500 l 806 180 m 926 0 z "},"ҳ":{ha:889,x_min:7,x_max:869,o:"m 264 387 l 20 758 l 254 758 l 401 517 l 550 758 l 785 758 l 538 387 l 694 151 l 869 151 l 869 -272 l 684 -272 l 684 0 l 561 0 l 401 260 l 241 0 l 7 0 l 264 387 m 796 0 m 803 0 z "},"Ҵ":{ha:1292,x_min:28,x_max:1264,o:"m 277 0 l 277 817 l 28 817 l 28 991 l 762 991 l 762 817 l 486 817 l 486 175 l 851 175 l 851 991 l 1061 991 l 1061 180 l 1264 180 l 1264 -289 l 1061 -289 l 1061 0 l 277 0 z "},"ҵ":{ha:1099,x_min:32,x_max:1079,o:"m 611 758 l 611 603 l 411 603 l 411 155 l 686 155 l 686 758 l 893 758 l 893 151 l 1079 151 l 1079 -272 l 893 -272 l 893 0 l 204 0 l 204 603 l 32 603 l 32 758 l 611 758 z "},"Ҷ":{ha:1117,x_min:74,x_max:1089,o:"m 886 180 l 1089 180 l 1089 -289 l 886 -289 l 886 0 l 676 0 l 676 383 q 502 335 572 348 q 370 322 433 322 q 151 390 228 322 q 74 582 74 458 l 74 991 l 283 991 l 283 642 q 317 533 283 570 q 429 497 350 497 q 540 508 485 497 q 676 547 595 519 l 676 991 l 886 991 l 886 180 m 1011 0 z "},"ҷ":{ha:1008,x_min:83,x_max:989,o:"m 290 758 l 290 481 q 382 382 290 382 q 493 395 441 382 q 596 431 544 409 l 596 758 l 803 758 l 803 151 l 989 151 l 989 -272 l 803 -272 l 803 0 l 596 0 l 596 301 q 463 248 524 263 q 343 232 401 232 q 151 295 219 232 q 83 476 83 359 l 83 758 l 290 758 m 911 0 z "},"Ҹ":{ha:1011,x_min:74,x_max:886,o:"m 424 323 l 397 322 l 370 322 q 151 390 228 322 q 74 582 74 458 l 74 991 l 283 991 l 283 642 q 317 533 283 567 q 424 497 350 498 l 424 720 l 514 720 l 514 504 q 676 547 574 513 l 676 991 l 886 991 l 886 0 l 676 0 l 676 383 q 514 336 589 353 l 514 117 l 424 117 l 424 323 z "},"ҹ":{ha:911,x_min:83,x_max:803,o:"m 395 235 q 343 232 378 232 q 151 295 219 232 q 83 476 83 359 l 83 758 l 290 758 l 290 481 q 382 382 290 382 l 395 382 l 395 555 l 479 555 l 479 392 q 596 431 532 403 l 596 758 l 803 758 l 803 0 l 596 0 l 596 301 q 479 252 525 264 l 479 87 l 395 87 l 395 235 z "},"Һ":{ha:1011,x_min:125,x_max:937,o:"m 125 991 l 335 991 l 335 608 q 507 656 435 643 q 642 669 580 669 q 859 602 781 669 q 937 410 937 534 l 937 0 l 728 0 l 728 350 q 694 458 728 422 q 582 494 661 494 q 472 484 528 494 q 335 444 415 473 l 335 0 l 125 0 l 125 991 z "},"һ":{ha:925,x_min:109,x_max:828,o:"m 621 0 l 621 285 q 529 376 621 376 q 315 328 431 376 l 315 0 l 109 0 l 109 758 l 315 758 l 315 457 q 448 511 387 495 q 568 526 509 526 q 760 463 692 526 q 828 282 828 399 l 828 0 l 621 0 z "},"Ҽ":{ha:1317,x_min:0,x_max:1206,o:"m 761 161 q 967 193 854 161 q 1154 271 1080 224 l 1154 82 q 973 9 1069 31 q 760 -14 876 -14 q 414 102 544 -14 q 265 428 285 218 l 222 428 q 56 475 112 428 q 0 604 0 522 q 36 743 0 683 l 195 743 q 183 707 189 732 q 176 663 176 683 q 241 603 176 603 l 269 603 q 415 901 294 795 q 734 1007 536 1007 q 1088 873 970 1007 q 1206 476 1206 739 l 1206 428 l 482 428 q 562 229 491 297 q 761 161 633 161 m 734 832 q 560 771 627 832 q 485 603 493 711 l 987 603 q 926 777 987 722 q 734 832 864 832 z "},"ҽ":{ha:993,x_min:0,x_max:933,o:"m 227 465 q 343 693 249 614 q 586 772 437 772 q 842 681 750 772 q 933 428 933 590 l 933 328 l 429 328 q 483 190 433 239 q 625 140 534 140 q 761 155 697 140 q 890 200 824 170 l 890 40 q 773 0 838 14 q 618 -14 709 -14 q 339 75 442 -14 q 222 328 235 163 q 0 479 0 328 q 28 591 0 545 l 167 591 q 150 518 150 554 q 215 465 150 465 l 227 465 m 587 625 q 481 586 524 625 q 433 465 439 547 l 739 465 q 697 583 738 541 q 587 625 657 625 z "},"Ҿ":{ha:1317,x_min:0,x_max:1206,o:"m 648 -5 q 382 133 481 22 q 265 428 283 245 l 222 428 q 56 475 112 428 q 0 604 0 522 q 36 743 0 683 l 195 743 q 183 707 189 732 q 176 663 176 683 q 241 603 176 603 l 269 603 q 415 901 294 795 q 734 1007 536 1007 q 1088 873 970 1007 q 1206 476 1206 739 l 1206 428 l 482 428 q 562 229 491 297 q 761 161 633 161 q 967 193 854 161 q 1154 271 1080 224 l 1154 82 q 1008 18 1080 39 q 850 -9 935 -3 l 850 -289 l 648 -289 l 648 -5 m 734 832 q 560 771 627 832 q 485 603 493 711 l 987 603 q 926 777 987 722 q 734 832 864 832 z "},"ҿ":{ha:993,x_min:0,x_max:933,o:"m 497 -1 q 303 110 374 26 q 222 328 233 194 q 0 479 0 328 q 28 591 0 545 l 167 591 q 150 518 150 554 q 215 465 150 465 l 227 465 q 343 693 249 614 q 586 772 437 772 q 842 681 750 772 q 933 428 933 590 l 933 328 l 429 328 q 483 190 433 239 q 625 140 534 140 q 761 155 697 140 q 890 200 824 170 l 890 40 q 684 -11 804 -3 l 684 -272 l 497 -272 l 497 -1 m 587 625 q 481 586 524 625 q 433 465 439 547 l 739 465 q 697 583 738 541 q 587 625 657 625 z "},"Ӂ":{ha:1310,x_min:0,x_max:1310,o:"m 353 515 l 20 991 l 236 991 l 557 511 l 557 991 l 753 991 l 753 511 l 1074 991 l 1291 991 l 957 515 l 1310 0 l 1084 0 l 753 503 l 753 0 l 557 0 l 557 503 l 225 0 l 0 0 l 353 515 m 982 1314 q 886 1129 969 1187 q 648 1071 804 1071 q 410 1126 487 1071 q 323 1314 333 1182 l 509 1314 q 544 1216 513 1244 q 652 1187 574 1187 q 754 1218 720 1187 q 795 1314 787 1249 l 982 1314 z "},"ӂ":{ha:1213,x_min:0,x_max:1213,o:"m 510 390 l 510 758 l 703 758 l 703 390 l 972 758 l 1186 758 l 907 395 l 1213 0 l 991 0 l 703 385 l 703 0 l 510 0 l 510 385 l 221 0 l 0 0 l 306 395 l 26 758 l 240 758 l 510 390 m 935 1084 q 839 900 922 958 q 600 842 756 842 q 362 897 439 842 q 276 1084 286 953 l 461 1084 q 496 986 466 1015 q 604 958 526 958 q 706 989 673 958 q 747 1084 740 1020 l 935 1084 z "},"Ӄ":{ha:1055,x_min:125,x_max:986,o:"m 461 364 q 335 347 410 364 l 335 0 l 125 0 l 125 991 l 335 991 l 335 514 l 433 654 l 700 991 l 933 991 l 542 525 l 545 525 q 783 472 680 525 q 936 323 886 419 q 986 96 986 227 q 939 -137 986 -37 q 807 -293 892 -238 q 618 -347 722 -347 q 496 -340 543 -347 q 399 -315 449 -332 l 399 -131 q 576 -163 486 -163 q 727 -93 673 -163 q 781 96 781 -24 q 704 296 781 228 q 461 364 627 364 z "},"ӄ":{ha:918,x_min:109,x_max:863,o:"m 863 46 q 822 -162 863 -75 q 705 -295 781 -249 q 528 -340 629 -340 q 354 -306 431 -340 l 354 -127 q 426 -154 385 -144 q 500 -164 467 -164 q 621 -108 578 -164 q 664 49 664 -52 q 610 202 664 149 q 453 256 557 256 q 378 249 419 256 q 315 233 336 241 l 315 0 l 109 0 l 109 758 l 315 758 l 315 424 l 610 758 l 843 758 l 522 419 q 770 320 677 419 q 863 46 863 220 z "},"Ӆ":{ha:1164,x_min:11,x_max:1136,o:"m 909 0 l 700 0 l 700 817 l 457 817 l 446 726 q 372 239 404 379 q 278 42 340 99 q 111 -14 216 -15 q 11 1 54 -14 l 11 174 q 85 160 50 160 q 142 193 121 160 q 181 315 163 226 q 231 607 200 404 q 283 991 262 810 l 909 991 l 909 180 l 1136 180 l 1015 -289 l 782 -289 l 909 0 m 1035 0 z "},"ӆ":{ha:1010,x_min:0,x_max:990,o:"m 787 151 l 990 151 l 892 -272 l 694 -272 l 787 0 l 581 0 l 581 603 l 390 603 q 337 223 368 349 q 254 42 306 98 q 118 -14 202 -14 q 0 8 46 -14 l 0 174 q 66 160 33 160 q 131 216 105 160 q 178 401 157 271 q 214 758 199 531 l 787 758 l 787 151 m 896 0 z "},"Ӈ":{ha:1063,x_min:125,x_max:937,o:"m 937 61 q 892 -153 937 -59 q 763 -297 846 -246 q 570 -347 679 -347 q 350 -315 440 -347 l 350 -131 q 446 -156 401 -149 q 546 -163 490 -163 q 680 -97 631 -163 q 728 85 728 -32 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 61 z "},"ӈ":{ha:920,x_min:109,x_max:811,o:"m 315 313 l 315 0 l 109 0 l 109 758 l 315 758 l 315 467 l 604 467 l 604 758 l 811 758 l 811 16 q 722 -246 811 -152 q 475 -340 632 -340 q 383 -332 423 -340 q 300 -302 343 -324 l 300 -125 q 453 -164 376 -164 q 564 -114 526 -164 q 604 32 602 -64 l 604 313 l 315 313 z "},"Ӊ":{ha:1192,x_min:125,x_max:1164,o:"m 937 180 l 1164 180 l 1043 -289 l 810 -289 l 937 0 l 728 0 l 728 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 728 603 l 728 991 l 937 991 l 937 180 m 1063 0 z "},"ӊ":{ha:1034,x_min:109,x_max:1014,o:"m 315 758 l 315 467 l 604 467 l 604 758 l 811 758 l 811 151 l 1014 151 l 916 -272 l 718 -272 l 811 0 l 604 0 l 604 313 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 m 920 0 z "},"Ӌ":{ha:1011,x_min:74,x_max:886,o:"m 886 0 l 711 0 l 711 -289 l 509 -289 l 509 180 l 676 180 l 676 383 q 502 335 572 348 q 370 322 433 322 q 151 390 228 322 q 74 582 74 458 l 74 991 l 283 991 l 283 642 q 317 533 283 570 q 429 497 350 497 q 540 508 485 497 q 676 547 595 519 l 676 991 l 886 991 l 886 0 z "},"ӌ":{ha:911,x_min:83,x_max:803,o:"m 290 758 l 290 481 q 382 382 290 382 q 493 395 441 382 q 596 431 544 409 l 596 758 l 803 758 l 803 0 l 627 0 l 627 -272 l 440 -272 l 440 151 l 596 151 l 596 301 q 463 248 524 263 q 343 232 401 232 q 151 295 219 232 q 83 476 83 359 l 83 758 l 290 758 z "},"Ӎ":{ha:1439,x_min:125,x_max:1411,o:"m 545 0 l 306 778 l 300 778 q 313 461 313 541 l 313 0 l 125 0 l 125 991 l 411 991 l 646 233 l 650 233 l 899 991 l 1185 991 l 1185 180 l 1411 180 l 1291 -289 l 1057 -289 l 1185 0 l 989 0 l 989 469 q 990 546 989 503 q 999 777 991 589 l 993 777 l 737 0 l 545 0 m 1310 0 z "},"ӎ":{ha:1286,x_min:109,x_max:1267,o:"m 1064 151 l 1267 151 l 1168 -272 l 971 -272 l 1064 0 l 871 0 l 871 597 l 860 555 q 794 339 823 412 l 660 0 l 513 0 l 376 342 q 314 551 347 416 l 301 597 l 301 0 l 109 0 l 109 758 l 393 758 l 524 435 q 561 315 544 382 q 585 199 578 247 q 620 345 607 300 q 647 427 632 389 q 782 758 662 464 l 1064 758 l 1064 151 m 1173 0 z "},"Ӑ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 808 1314 q 713 1129 795 1187 q 474 1071 630 1071 q 236 1126 313 1071 q 150 1314 159 1182 l 335 1314 q 370 1216 340 1244 q 478 1187 400 1187 q 580 1218 547 1187 q 621 1314 614 1249 l 808 1314 z "},"ӑ":{ha:839,x_min:58,x_max:757,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 757 1084 q 661 900 744 958 q 422 842 578 842 q 185 897 262 842 q 98 1084 108 953 l 283 1084 q 318 986 288 1015 q 427 958 349 958 q 529 989 495 958 q 570 1084 562 1020 l 757 1084 z "},"Ӓ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 248 1182 q 273 1250 248 1226 q 342 1274 298 1274 q 412 1249 387 1274 q 437 1182 437 1223 q 412 1117 437 1141 q 342 1092 386 1092 q 273 1116 298 1092 q 248 1182 248 1139 m 521 1182 q 548 1252 521 1230 q 616 1274 576 1274 q 687 1249 661 1274 q 713 1182 713 1225 q 686 1116 713 1141 q 616 1092 660 1092 q 548 1114 576 1092 q 521 1182 521 1136 z "},"ӓ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 186 953 q 211 1021 186 997 q 280 1044 237 1044 q 350 1019 325 1044 q 376 953 376 994 q 350 887 376 912 q 280 863 324 863 q 211 886 237 863 q 186 953 186 910 m 459 953 q 487 1022 459 1000 q 555 1044 514 1044 q 625 1020 599 1044 q 651 953 651 996 q 625 887 651 911 q 555 863 598 863 q 487 885 514 863 q 459 953 459 907 z "},"Ӕ":{ha:1322,x_min:0,x_max:1240,o:"m 1240 0 l 648 0 l 648 236 l 315 236 l 214 0 l 0 0 l 444 991 l 1240 991 l 1240 819 l 859 819 l 859 602 l 1215 602 l 1215 429 l 859 429 l 859 174 l 1240 174 l 1240 0 m 392 412 l 648 412 l 648 812 l 562 812 l 392 412 z "},"ӕ":{ha:1274,x_min:58,x_max:1214,o:"m 901 -14 q 732 21 808 -14 q 607 126 656 55 q 474 17 541 47 q 300 -14 407 -14 q 124 51 191 -14 q 58 227 58 115 q 140 405 58 347 q 386 468 222 462 l 515 472 l 515 529 q 485 598 515 576 q 403 621 455 621 q 196 568 308 621 l 129 705 q 415 774 257 774 q 647 685 569 774 q 750 750 692 728 q 890 772 809 772 q 1127 679 1040 772 q 1214 428 1214 586 l 1214 328 l 724 328 q 776 190 727 239 q 913 140 825 140 q 1171 200 1046 140 l 1171 40 q 1055 0 1117 14 q 901 -14 992 -14 m 515 351 l 439 349 q 313 316 355 346 q 271 225 271 287 q 366 138 271 138 q 475 179 434 138 q 515 289 515 220 l 515 351 m 886 625 q 728 465 739 625 l 1019 465 q 982 583 1018 541 q 886 625 946 625 z "},"Ӗ":{ha:778,x_min:80,x_max:739,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 739 1314 q 643 1129 726 1187 q 404 1071 560 1071 q 166 1126 243 1071 q 80 1314 90 1182 l 265 1314 q 300 1216 270 1244 q 408 1187 330 1187 q 510 1218 477 1187 q 551 1314 544 1249 l 739 1314 z "},"ӗ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 749 1084 q 653 900 736 958 q 414 842 570 842 q 177 897 254 842 q 90 1084 100 953 l 275 1084 q 310 986 280 1015 q 418 958 340 958 q 520 989 487 958 q 562 1084 554 1020 l 749 1084 z "},"Ә":{ha:1135,x_min:111,x_max:1054,o:"m 555 832 q 347 801 455 832 q 163 722 239 770 l 163 904 q 352 984 257 960 q 557 1007 446 1007 q 923 871 791 1007 q 1054 494 1054 734 q 930 120 1054 254 q 582 -14 807 -14 q 230 119 349 -14 q 111 517 111 252 l 111 566 l 835 566 q 754 764 826 696 q 555 832 683 832 m 582 161 q 759 223 692 161 q 832 390 825 285 l 329 390 q 390 216 329 271 q 582 161 451 161 z "},"ә":{ha:835,x_min:62,x_max:775,o:"m 408 134 q 515 174 475 134 q 562 293 555 214 l 257 293 q 298 176 258 218 q 408 134 337 134 m 378 772 q 670 671 565 772 q 775 385 775 570 q 679 91 775 195 q 410 -14 583 -14 q 154 77 246 -14 q 62 330 62 168 l 62 431 l 567 431 q 513 568 564 519 q 371 618 462 618 q 241 605 304 618 q 106 558 178 592 l 106 718 q 230 760 165 748 q 378 772 294 772 z "},"Ӛ":{ha:1135,x_min:111,x_max:1054,o:"m 555 832 q 347 801 455 832 q 163 722 239 770 l 163 904 q 352 984 257 960 q 557 1007 446 1007 q 923 871 791 1007 q 1054 494 1054 734 q 930 120 1054 254 q 582 -14 807 -14 q 230 119 349 -14 q 111 517 111 252 l 111 566 l 835 566 q 754 764 826 696 q 555 832 683 832 m 582 161 q 759 223 692 161 q 832 390 825 285 l 329 390 q 390 216 329 271 q 582 161 451 161 m 351 1182 q 376 1250 351 1226 q 445 1274 401 1274 q 515 1249 490 1274 q 541 1182 541 1223 q 515 1117 541 1141 q 445 1092 489 1092 q 376 1116 401 1092 q 351 1182 351 1139 m 624 1182 q 651 1252 624 1230 q 720 1274 679 1274 q 790 1249 764 1274 q 816 1182 816 1225 q 789 1116 816 1141 q 720 1092 763 1092 q 651 1114 679 1092 q 624 1182 624 1136 z "},"ӛ":{ha:835,x_min:62,x_max:775,o:"m 408 134 q 515 174 475 134 q 562 293 555 214 l 257 293 q 298 176 258 218 q 408 134 337 134 m 378 772 q 670 671 565 772 q 775 385 775 570 q 679 91 775 195 q 410 -14 583 -14 q 154 77 246 -14 q 62 330 62 168 l 62 431 l 567 431 q 513 568 564 519 q 371 618 462 618 q 241 605 304 618 q 106 558 178 592 l 106 718 q 230 760 165 748 q 378 772 294 772 m 189 953 q 214 1021 189 997 q 283 1044 239 1044 q 353 1019 328 1044 q 378 953 378 994 q 353 887 378 912 q 283 863 327 863 q 214 886 239 863 q 189 953 189 910 m 462 953 q 489 1022 462 1000 q 557 1044 517 1044 q 628 1020 602 1044 q 654 953 654 996 q 627 887 654 911 q 557 863 601 863 q 489 885 517 863 q 462 953 462 907 z "},"Ӝ":{ha:1310,x_min:0,x_max:1310,o:"m 353 515 l 20 991 l 236 991 l 557 511 l 557 991 l 753 991 l 753 511 l 1074 991 l 1291 991 l 957 515 l 1310 0 l 1084 0 l 753 503 l 753 0 l 557 0 l 557 503 l 225 0 l 0 0 l 353 515 m 422 1182 q 448 1250 422 1226 q 517 1274 473 1274 q 587 1249 562 1274 q 612 1182 612 1223 q 587 1117 612 1141 q 517 1092 561 1092 q 448 1116 473 1092 q 422 1182 422 1139 m 696 1182 q 723 1252 696 1230 q 791 1274 751 1274 q 862 1249 836 1274 q 888 1182 888 1225 q 861 1116 888 1141 q 791 1092 835 1092 q 723 1114 751 1092 q 696 1182 696 1136 z "},"ӝ":{ha:1213,x_min:0,x_max:1213,o:"m 510 390 l 510 758 l 703 758 l 703 390 l 972 758 l 1186 758 l 907 395 l 1213 0 l 991 0 l 703 385 l 703 0 l 510 0 l 510 385 l 221 0 l 0 0 l 306 395 l 26 758 l 240 758 l 510 390 m 374 953 q 399 1021 374 997 q 468 1044 425 1044 q 538 1019 513 1044 q 564 953 564 994 q 538 887 564 912 q 468 863 512 863 q 399 886 425 863 q 374 953 374 910 m 647 953 q 674 1022 647 1000 q 743 1044 702 1044 q 813 1020 787 1044 q 839 953 839 996 q 812 887 839 911 q 743 863 786 863 q 674 885 702 863 q 647 953 647 907 z "},"Ӟ":{ha:900,x_min:64,x_max:840,o:"m 810 760 q 742 602 810 664 q 558 522 674 539 l 558 518 q 767 443 694 505 q 840 282 840 381 q 729 66 840 145 q 422 -14 618 -14 q 72 40 204 -14 l 72 216 q 221 169 136 186 q 382 151 307 151 q 632 297 632 151 q 552 398 632 363 q 314 433 471 433 l 221 433 l 221 597 l 304 597 q 534 627 462 597 q 606 726 606 657 q 561 807 606 777 q 425 838 515 838 q 155 757 286 838 l 64 897 q 243 980 149 954 q 454 1006 338 1006 q 713 938 616 1006 q 810 760 810 870 m 220 1182 q 245 1250 220 1226 q 314 1274 271 1274 q 384 1249 359 1274 q 410 1182 410 1223 q 384 1117 410 1141 q 314 1092 358 1092 q 245 1116 271 1092 q 220 1182 220 1139 m 493 1182 q 520 1252 493 1230 q 589 1274 548 1274 q 659 1249 633 1274 q 685 1182 685 1225 q 659 1116 685 1141 q 589 1092 632 1092 q 520 1114 548 1092 q 493 1182 493 1136 z "},"ӟ":{ha:771,x_min:53,x_max:718,o:"m 297 467 q 464 486 414 467 q 513 546 513 505 q 477 601 513 583 q 358 619 441 619 q 240 606 306 619 q 119 571 174 593 l 58 715 q 215 759 139 746 q 385 772 291 772 q 612 718 526 772 q 697 571 697 664 q 546 404 697 443 l 546 397 q 679 332 639 374 q 718 221 718 290 q 673 98 718 152 q 544 16 629 45 q 345 -14 459 -14 q 53 33 155 -14 l 53 204 q 181 161 111 177 q 315 146 250 146 q 467 169 416 146 q 517 233 517 191 q 464 301 517 279 q 301 323 411 323 l 221 323 l 221 467 l 297 467 m 155 953 q 181 1021 155 997 q 250 1044 206 1044 q 320 1019 294 1044 q 345 953 345 994 q 319 887 345 912 q 250 863 294 863 q 181 886 206 863 q 155 953 155 910 m 429 953 q 456 1022 429 1000 q 524 1044 484 1044 q 594 1020 568 1044 q 621 953 621 996 q 594 887 621 911 q 524 863 568 863 q 456 885 484 863 q 429 953 429 907 z "},"Ӡ":{ha:821,x_min:39,x_max:766,o:"m 192 582 l 436 818 l 72 818 l 72 991 l 722 991 l 722 857 l 429 578 q 680 496 593 571 q 766 289 766 422 q 656 67 766 148 q 345 -14 546 -14 q 39 40 169 -14 l 39 218 q 181 171 102 189 q 332 153 261 153 q 501 188 445 153 q 557 301 557 224 q 486 402 557 370 q 275 435 416 435 l 192 435 l 192 582 z "},"ӡ":{ha:807,x_min:39,x_max:753,o:"m 192 340 l 467 600 l 66 600 l 66 758 l 722 758 l 722 624 l 422 343 q 668 239 583 326 q 753 1 753 153 q 704 -177 753 -101 q 563 -293 656 -252 q 339 -334 470 -334 q 39 -279 169 -334 l 39 -102 q 178 -150 101 -132 q 323 -167 255 -167 q 487 -121 431 -167 q 543 11 543 -75 q 475 149 543 104 q 272 193 406 193 l 192 193 l 192 340 z "},"Ӣ":{ha:1143,x_min:125,x_max:1018,o:"m 125 991 l 314 991 l 314 513 l 311 385 l 304 239 l 309 239 l 766 991 l 1018 991 l 1018 0 l 831 0 l 831 476 q 843 760 831 572 l 838 760 l 378 0 l 125 0 l 125 991 m 340 1214 l 800 1214 l 800 1071 l 340 1071 l 340 1214 z "},"ӣ":{ha:1e3,x_min:109,x_max:892,o:"m 309 758 l 309 458 q 293 227 309 411 l 643 758 l 892 758 l 892 0 l 692 0 l 692 302 q 705 530 692 383 l 357 0 l 109 0 l 109 758 l 309 758 m 271 985 l 731 985 l 731 842 l 271 842 l 271 985 z "},"Ӥ":{ha:1143,x_min:125,x_max:1018,o:"m 125 991 l 314 991 l 314 513 l 311 385 l 304 239 l 309 239 l 766 991 l 1018 991 l 1018 0 l 831 0 l 831 476 q 843 760 831 572 l 838 760 l 378 0 l 125 0 l 125 991 m 339 1182 q 365 1250 339 1226 q 433 1274 390 1274 q 504 1249 478 1274 q 529 1182 529 1223 q 503 1117 529 1141 q 433 1092 477 1092 q 365 1116 390 1092 q 339 1182 339 1139 m 612 1182 q 640 1252 612 1230 q 708 1274 667 1274 q 778 1249 752 1274 q 804 1182 804 1225 q 778 1116 804 1141 q 708 1092 751 1092 q 640 1114 667 1092 q 612 1182 612 1136 z "},"ӥ":{ha:1e3,x_min:109,x_max:892,o:"m 309 758 l 309 458 q 293 227 309 411 l 643 758 l 892 758 l 892 0 l 692 0 l 692 302 q 705 530 692 383 l 357 0 l 109 0 l 109 758 l 309 758 m 269 953 q 294 1021 269 997 q 363 1044 319 1044 q 433 1019 408 1044 q 458 953 458 994 q 433 887 458 912 q 363 863 407 863 q 294 886 319 863 q 269 953 269 910 m 542 953 q 569 1022 542 1000 q 637 1044 597 1044 q 708 1020 682 1044 q 734 953 734 996 q 707 887 734 911 q 637 863 681 863 q 569 885 597 863 q 542 953 542 907 z "},"Ӧ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 321 1182 q 347 1250 321 1226 q 416 1274 372 1274 q 486 1249 460 1274 q 511 1182 511 1223 q 486 1117 511 1141 q 416 1092 460 1092 q 347 1116 372 1092 q 321 1182 321 1139 m 595 1182 q 622 1252 595 1230 q 690 1274 650 1274 q 761 1249 734 1274 q 787 1182 787 1225 q 760 1116 787 1141 q 690 1092 734 1092 q 622 1114 650 1092 q 595 1182 595 1136 z "},"ӧ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 199 953 q 224 1021 199 997 q 293 1044 250 1044 q 363 1019 338 1044 q 389 953 389 994 q 363 887 389 912 q 293 863 337 863 q 224 886 250 863 q 199 953 199 910 m 472 953 q 499 1022 472 1000 q 568 1044 527 1044 q 638 1020 612 1044 q 664 953 664 996 q 637 887 664 911 q 568 863 611 863 q 499 885 527 863 q 472 953 472 907 z "},"Ө":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 553 163 q 727 228 663 163 q 804 421 791 293 l 300 421 q 375 231 313 299 q 553 163 437 163 m 554 832 q 384 773 447 832 q 302 596 321 714 l 802 596 q 723 771 785 711 q 554 832 661 832 z "},"ө":{ha:860,x_min:62,x_max:798,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 431 153 q 534 192 496 153 q 582 310 572 231 l 277 310 q 324 192 287 231 q 431 153 361 153 m 429 606 q 325 567 363 606 q 277 453 287 529 l 582 453 q 535 567 572 529 q 429 606 498 606 z "},"Ӫ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 553 163 q 727 228 663 163 q 804 421 791 293 l 300 421 q 375 231 313 299 q 553 163 437 163 m 554 832 q 384 773 447 832 q 302 596 321 714 l 802 596 q 723 771 785 711 q 554 832 661 832 m 323 1182 q 348 1250 323 1226 q 417 1274 374 1274 q 487 1249 462 1274 q 513 1182 513 1223 q 487 1117 513 1141 q 417 1092 461 1092 q 348 1116 374 1092 q 323 1182 323 1139 m 596 1182 q 624 1252 596 1230 q 692 1274 651 1274 q 762 1249 736 1274 q 788 1182 788 1225 q 762 1116 788 1141 q 692 1092 735 1092 q 624 1114 651 1092 q 596 1182 596 1136 z "},"ӫ":{ha:860,x_min:62,x_max:798,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 431 153 q 534 192 496 153 q 582 310 572 231 l 277 310 q 324 192 287 231 q 431 153 361 153 m 429 606 q 325 567 363 606 q 277 453 287 529 l 582 453 q 535 567 572 529 q 429 606 498 606 m 197 953 q 223 1021 197 997 q 292 1044 248 1044 q 362 1019 336 1044 q 387 953 387 994 q 361 887 387 912 q 292 863 336 863 q 223 886 248 863 q 197 953 197 910 m 471 953 q 498 1022 471 1000 q 566 1044 526 1044 q 636 1020 610 1044 q 663 953 663 996 q 636 887 663 911 q 566 863 610 863 q 498 885 526 863 q 471 953 471 907 z "},"Ӭ":{ha:921,x_min:49,x_max:840,o:"m 375 831 q 243 812 308 831 q 115 766 178 793 l 49 936 q 379 1006 206 1006 q 720 870 600 1006 q 840 494 840 735 q 716 118 840 249 q 359 -14 593 -14 q 66 37 199 -14 l 66 214 q 347 161 231 161 q 545 224 477 161 q 619 414 613 288 l 189 414 l 189 586 l 618 586 q 549 766 614 701 q 375 831 484 831 m 213 1182 q 238 1250 213 1226 q 307 1274 264 1274 q 377 1249 352 1274 q 403 1182 403 1223 q 377 1117 403 1141 q 307 1092 351 1092 q 238 1116 264 1092 q 213 1182 213 1139 m 486 1182 q 514 1252 486 1230 q 582 1274 541 1274 q 652 1249 626 1274 q 678 1182 678 1225 q 652 1116 678 1141 q 582 1092 625 1092 q 514 1114 541 1092 q 486 1182 486 1136 z "},"ӭ":{ha:711,x_min:50,x_max:648,o:"m 283 -14 q 50 33 141 -14 l 50 195 q 272 140 168 140 q 387 184 347 140 q 435 314 428 227 l 149 314 l 149 452 l 435 452 q 393 577 429 535 q 289 619 357 619 q 113 576 208 619 l 54 718 q 169 757 105 742 q 297 772 233 772 q 562 676 475 772 q 648 387 648 580 q 556 88 648 189 q 283 -14 465 -14 m 118 953 q 143 1021 118 997 q 212 1044 169 1044 q 282 1019 257 1044 q 308 953 308 994 q 282 887 308 912 q 212 863 256 863 q 143 886 169 863 q 118 953 118 910 m 391 953 q 419 1022 391 1000 q 487 1044 446 1044 q 557 1020 531 1044 q 583 953 583 996 q 557 887 583 911 q 487 863 530 863 q 419 885 446 863 q 391 953 391 907 z "},"Ӯ":{ha:907,x_min:0,x_max:907,o:"m 907 991 l 600 290 q 492 100 543 158 q 372 15 441 43 q 204 -14 303 -14 q 46 7 119 -14 l 46 187 q 195 163 106 163 q 286 189 251 163 q 343 279 320 215 l 0 991 l 222 991 l 467 439 l 473 439 l 486 473 l 690 991 l 907 991 m 225 1214 l 685 1214 l 685 1071 l 225 1071 l 225 1214 z "},"ӯ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 168 985 l 627 985 l 627 842 l 168 842 l 168 985 z "},"Ӱ":{ha:907,x_min:0,x_max:907,o:"m 907 991 l 600 290 q 492 100 543 158 q 372 15 441 43 q 204 -14 303 -14 q 46 7 119 -14 l 46 187 q 195 163 106 163 q 286 189 251 163 q 343 279 320 215 l 0 991 l 222 991 l 467 439 l 473 439 l 486 473 l 690 991 l 907 991 m 222 1182 q 248 1250 222 1226 q 317 1274 273 1274 q 387 1249 361 1274 q 412 1182 412 1223 q 387 1117 412 1141 q 317 1092 361 1092 q 248 1116 273 1092 q 222 1182 222 1139 m 496 1182 q 523 1252 496 1230 q 591 1274 551 1274 q 662 1249 635 1274 q 688 1182 688 1225 q 661 1116 688 1141 q 591 1092 635 1092 q 523 1114 551 1092 q 496 1182 496 1136 z "},"ӱ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 165 953 q 190 1021 165 997 q 259 1044 216 1044 q 329 1019 304 1044 q 355 953 355 994 q 329 887 355 912 q 259 863 303 863 q 190 886 216 863 q 165 953 165 910 m 438 953 q 466 1022 438 1000 q 534 1044 493 1044 q 604 1020 578 1044 q 630 953 630 996 q 604 887 630 911 q 534 863 577 863 q 466 885 493 863 q 438 953 438 907 z "},"Ӳ":{ha:907,x_min:0,x_max:907,o:"m 907 991 l 600 290 q 492 100 543 158 q 372 15 441 43 q 204 -14 303 -14 q 46 7 119 -14 l 46 187 q 195 163 106 163 q 286 189 251 163 q 343 279 320 215 l 0 991 l 222 991 l 467 439 l 473 439 l 486 473 l 690 991 l 907 991 m 231 1071 l 231 1089 q 310 1206 273 1147 q 362 1293 348 1265 l 566 1293 l 566 1279 q 467 1175 545 1243 q 340 1071 390 1107 l 231 1071 m 500 1071 l 500 1089 q 632 1293 594 1219 l 836 1293 l 836 1279 q 751 1188 819 1250 q 610 1071 683 1126 l 500 1071 z "},"ӳ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 161 842 l 161 860 q 241 977 203 918 q 293 1064 279 1036 l 497 1064 l 497 1050 q 398 946 475 1014 q 271 842 321 878 l 161 842 m 431 842 l 431 860 q 563 1064 525 990 l 767 1064 l 767 1050 q 682 959 750 1021 q 541 842 614 897 l 431 842 z "},"Ӵ":{ha:1011,x_min:74,x_max:886,o:"m 886 0 l 676 0 l 676 383 q 502 335 572 348 q 370 322 433 322 q 151 390 228 322 q 74 582 74 458 l 74 991 l 283 991 l 283 642 q 317 533 283 570 q 429 497 350 497 q 540 508 485 497 q 676 547 595 519 l 676 991 l 886 991 l 886 0 m 248 1182 q 273 1250 248 1226 q 342 1274 298 1274 q 412 1249 387 1274 q 437 1182 437 1223 q 412 1117 437 1141 q 342 1092 386 1092 q 273 1116 298 1092 q 248 1182 248 1139 m 521 1182 q 548 1252 521 1230 q 616 1274 576 1274 q 687 1249 661 1274 q 713 1182 713 1225 q 686 1116 713 1141 q 616 1092 660 1092 q 548 1114 576 1092 q 521 1182 521 1136 z "},"ӵ":{ha:911,x_min:83,x_max:803,o:"m 290 758 l 290 481 q 382 382 290 382 q 493 395 441 382 q 596 431 544 409 l 596 758 l 803 758 l 803 0 l 596 0 l 596 301 q 463 248 524 263 q 343 232 401 232 q 151 295 219 232 q 83 476 83 359 l 83 758 l 290 758 m 213 953 q 238 1021 213 997 q 307 1044 264 1044 q 377 1019 352 1044 q 403 953 403 994 q 377 887 403 912 q 307 863 351 863 q 238 886 264 863 q 213 953 213 910 m 486 953 q 514 1022 486 1000 q 582 1044 541 1044 q 652 1020 626 1044 q 678 953 678 996 q 652 887 678 911 q 582 863 625 863 q 514 885 541 863 q 486 953 486 907 z "},"Ӷ":{ha:779,x_min:125,x_max:751,o:"m 751 991 l 751 818 l 335 818 l 335 180 l 538 180 l 538 -289 l 335 -289 l 335 0 l 125 0 l 125 991 l 751 991 z "},"ӷ":{ha:664,x_min:109,x_max:632,o:"m 632 758 l 632 603 l 315 603 l 315 151 l 501 151 l 501 -272 l 315 -272 l 315 0 l 109 0 l 109 758 l 632 758 z "},"Ӹ":{ha:1258,x_min:125,x_max:1133,o:"m 803 310 q 700 78 803 155 q 396 0 597 0 l 125 0 l 125 991 l 335 991 l 335 611 l 403 611 q 698 532 593 611 q 803 310 803 453 m 335 172 l 390 172 q 542 207 494 172 q 590 310 590 241 q 544 409 590 379 q 380 439 497 439 l 335 439 l 335 172 m 1133 0 l 924 0 l 924 991 l 1133 991 l 1133 0 m 399 1182 q 424 1250 399 1226 q 493 1274 450 1274 q 563 1249 538 1274 q 589 1182 589 1223 q 563 1117 589 1141 q 493 1092 537 1092 q 424 1116 450 1092 q 399 1182 399 1139 m 672 1182 q 700 1252 672 1230 q 768 1274 727 1274 q 838 1249 812 1274 q 864 1182 864 1225 q 838 1116 864 1141 q 768 1092 811 1092 q 700 1114 727 1092 q 672 1182 672 1136 z "},"ӹ":{ha:1181,x_min:109,x_max:1072,o:"m 315 465 l 415 465 q 672 410 589 465 q 755 241 755 354 q 672 61 755 121 q 422 0 589 0 l 109 0 l 109 758 l 315 758 l 315 465 m 549 239 q 513 302 549 283 q 408 322 478 322 l 315 322 l 315 143 l 411 143 q 549 239 549 143 m 1072 0 l 865 0 l 865 758 l 1072 758 l 1072 0 m 359 953 q 384 1021 359 997 q 453 1044 410 1044 q 523 1019 498 1044 q 549 953 549 994 q 523 887 549 912 q 453 863 497 863 q 384 886 410 863 q 359 953 359 910 m 632 953 q 660 1022 632 1000 q 728 1044 687 1044 q 798 1020 772 1044 q 824 953 824 996 q 798 887 824 911 q 728 863 771 863 q 660 885 687 863 q 632 953 632 907 z "},"Ӻ":{ha:777,x_min:32,x_max:749,o:"m 749 991 l 749 819 l 335 819 l 335 576 l 607 576 l 607 404 l 335 404 l 335 0 l 125 0 l 125 404 l 32 404 l 32 576 l 125 576 l 125 991 l 749 991 m 296 -336 q 171 -319 229 -336 l 171 -157 q 252 -170 211 -170 q 335 -54 335 -170 l 335 205 l 535 205 l 535 -85 q 473 -271 535 -205 q 296 -336 411 -336 z "},"ӻ":{ha:682,x_min:3,x_max:650,o:"m 650 758 l 650 590 l 302 590 l 302 443 l 528 443 l 528 283 l 302 283 l 302 0 l 96 0 l 96 283 l 3 283 l 3 443 l 96 443 l 96 758 l 650 758 m 264 -336 q 138 -319 196 -336 l 138 -157 q 219 -170 178 -170 q 302 -54 302 -170 l 302 178 l 503 178 l 503 -85 q 440 -271 503 -205 q 264 -336 378 -336 z "},"Ӽ":{ha:1017,x_min:0,x_max:989,o:"m 926 0 l 686 0 l 456 375 l 225 0 l 0 0 l 329 511 l 21 991 l 253 991 l 467 635 l 676 991 l 903 991 l 591 500 l 926 0 m 750 -336 q 625 -319 682 -336 l 625 -157 q 705 -170 665 -170 q 789 -54 789 -170 l 789 205 l 989 205 l 989 -85 q 927 -271 989 -205 q 750 -336 865 -336 z "},"ӽ":{ha:896,x_min:7,x_max:876,o:"m 264 387 l 20 758 l 254 758 l 401 517 l 550 758 l 785 758 l 538 387 l 796 0 l 561 0 l 401 260 l 241 0 l 7 0 l 264 387 m 637 -336 q 512 -319 570 -336 l 512 -157 q 593 -170 552 -170 q 676 -54 676 -170 l 676 178 l 876 178 l 876 -85 q 814 -271 876 -205 q 637 -336 752 -336 z "},"Ӿ":{ha:926,x_min:0,x_max:926,o:"m 77 591 l 278 591 l 21 991 l 253 991 l 467 635 l 676 991 l 903 991 l 650 591 l 850 591 l 850 419 l 646 419 l 926 0 l 686 0 l 456 375 l 225 0 l 0 0 l 269 419 l 77 419 l 77 591 z "},"ӿ":{ha:803,x_min:7,x_max:796,o:"m 69 461 l 215 461 l 20 758 l 254 758 l 401 517 l 550 758 l 785 758 l 586 461 l 733 461 l 733 306 l 591 306 l 796 0 l 561 0 l 401 260 l 241 0 l 7 0 l 210 306 l 69 306 l 69 461 z "},"Ԁ":{ha:886,x_min:62,x_max:761,o:"m 62 310 q 168 532 62 454 q 468 611 274 611 l 551 611 l 551 991 l 761 991 l 761 0 l 472 0 q 62 310 62 0 m 551 439 l 497 439 q 325 409 375 439 q 275 310 275 378 q 325 207 275 241 q 481 172 374 172 l 551 172 l 551 439 z "},"ԁ":{ha:879,x_min:62,x_max:771,o:"m 349 -14 q 139 90 215 -14 q 62 378 62 194 q 140 668 62 564 q 354 772 218 772 q 572 661 497 772 l 579 661 q 564 812 564 746 l 564 1055 l 771 1055 l 771 0 l 612 0 l 572 98 l 564 98 q 349 -14 493 -14 m 421 151 q 537 197 500 151 q 578 354 574 243 l 578 376 q 540 551 578 498 q 418 604 503 604 q 310 546 349 604 q 272 375 272 487 q 311 207 272 263 q 421 151 349 151 z "},"Ԃ":{ha:1286,x_min:62,x_max:1168,o:"m 62 297 q 163 527 62 444 q 446 611 264 611 l 524 611 l 524 991 l 733 991 l 733 249 q 762 182 735 204 q 847 160 789 160 q 935 195 908 160 q 961 306 961 229 l 961 575 l 1168 575 l 1168 258 q 1086 56 1168 126 q 844 -14 1005 -14 q 706 13 771 -14 q 614 81 640 39 q 526 13 585 38 q 382 -12 467 -12 q 143 67 224 -12 q 62 297 62 147 m 524 439 l 475 439 q 322 403 368 439 q 275 294 275 368 q 307 195 275 229 q 400 160 338 160 q 490 182 457 160 q 524 244 524 204 l 524 439 z "},"ԃ":{ha:1282,x_min:62,x_max:1178,o:"m 411 -14 q 153 87 243 -14 q 62 378 62 187 q 136 667 62 562 q 342 772 210 772 q 551 661 479 772 l 558 661 q 548 735 553 687 q 543 812 543 784 l 543 1055 l 750 1055 l 750 258 q 777 184 750 208 q 864 160 804 160 q 948 195 923 160 q 974 306 974 229 l 974 475 l 1178 475 l 1178 258 q 1098 56 1178 125 q 861 -14 1019 -14 q 728 7 780 -14 q 635 79 677 28 q 537 14 604 42 q 411 -14 471 -14 m 410 151 q 519 198 485 151 q 557 354 554 244 l 557 376 q 521 552 557 500 q 408 604 485 604 q 272 375 272 604 q 305 207 272 263 q 410 151 338 151 z "},"Ԅ":{ha:1268,x_min:17,x_max:1150,o:"m 686 770 q 630 612 686 677 q 472 522 574 547 l 472 518 q 654 445 592 503 q 715 289 715 387 q 744 190 715 220 q 829 160 772 160 q 917 195 890 160 q 943 306 943 229 l 943 575 l 1150 575 l 1150 258 q 1069 56 1150 125 q 829 -14 987 -14 q 588 64 671 -14 q 505 289 505 141 q 439 398 505 361 q 248 435 373 435 l 132 435 l 132 582 l 248 582 q 481 724 481 582 q 445 806 481 777 q 332 836 408 836 q 122 768 226 836 l 17 908 q 347 1006 153 1006 q 595 942 503 1006 q 686 770 686 879 z "},"ԅ":{ha:1208,x_min:39,x_max:1104,o:"m 273 467 q 426 486 380 467 q 472 546 472 505 q 438 601 472 583 q 326 619 404 619 q 214 607 274 619 q 100 571 153 594 l 39 715 q 193 760 120 747 q 355 772 266 772 q 575 718 493 772 q 657 571 657 664 q 515 404 657 443 l 515 397 q 676 243 676 371 q 790 160 676 160 q 874 195 849 160 q 900 306 900 229 l 900 475 l 1104 475 l 1104 258 q 1024 56 1104 125 q 790 -14 945 -14 q 555 38 640 -14 q 469 186 469 90 q 420 289 469 254 q 278 323 370 323 l 174 323 l 174 467 l 273 467 z "},"Ԇ":{ha:974,x_min:17,x_max:946,o:"m 714 770 q 658 612 714 677 q 500 522 602 547 l 500 518 q 682 445 620 503 q 743 289 743 387 l 743 180 l 946 180 l 946 -289 l 743 -289 l 743 0 l 533 0 l 533 289 q 462 398 533 361 q 256 435 391 435 l 132 435 l 132 582 l 256 582 q 509 724 509 582 q 347 836 509 836 q 122 768 234 836 l 17 908 q 361 1006 159 1006 q 619 942 524 1006 q 714 770 714 879 z "},"ԇ":{ha:918,x_min:53,x_max:899,o:"m 294 467 q 458 486 410 467 q 507 546 507 505 q 471 601 507 583 q 353 619 435 619 q 234 606 300 619 q 114 571 168 593 l 53 715 q 210 759 134 746 q 379 772 286 772 q 606 718 521 772 q 692 571 692 664 q 550 404 692 443 l 550 397 q 675 332 637 374 q 713 221 713 290 l 713 151 l 899 151 l 899 -272 l 713 -272 l 713 0 l 511 0 l 511 221 q 459 299 511 274 q 298 323 408 323 l 187 323 l 187 467 l 294 467 z "},"Ԉ":{ha:1435,x_min:11,x_max:1317,o:"m 882 254 q 910 183 883 205 q 996 160 937 160 q 1083 195 1057 160 q 1109 306 1109 229 l 1109 575 l 1317 575 l 1317 258 q 1236 56 1317 125 q 996 -14 1154 -14 q 754 54 836 -14 q 672 254 672 122 l 672 817 l 457 817 l 446 726 q 372 239 404 379 q 278 42 340 99 q 111 -14 216 -15 q 11 1 54 -14 l 11 174 q 85 160 50 160 q 142 193 121 160 q 181 315 163 226 q 231 607 200 404 q 283 991 262 810 l 882 991 l 882 254 z "},"ԉ":{ha:1299,x_min:0,x_max:1194,o:"m 766 256 q 793 183 766 205 q 880 160 821 160 q 965 195 939 160 q 990 306 990 229 l 990 475 l 1194 475 l 1194 258 q 1115 56 1194 125 q 880 -14 1035 -14 q 640 54 721 -14 q 559 256 559 122 l 559 603 l 390 603 q 337 223 368 349 q 254 42 306 98 q 118 -14 202 -14 q 0 8 46 -14 l 0 174 q 66 160 33 160 q 131 216 105 160 q 178 401 157 271 q 214 758 199 531 l 766 758 l 766 256 z "},"Ԋ":{ha:1449,x_min:125,x_max:1331,o:"m 909 258 q 934 184 909 208 q 1017 160 959 160 q 1099 195 1074 160 q 1124 306 1124 229 l 1124 575 l 1331 575 l 1331 258 q 1251 56 1331 125 q 1017 -14 1171 -14 q 781 54 861 -14 q 700 253 701 122 l 700 428 l 335 428 l 335 0 l 125 0 l 125 991 l 335 991 l 335 603 l 700 603 l 700 991 l 909 991 l 909 258 z "},"ԋ":{ha:1322,x_min:109,x_max:1218,o:"m 315 758 l 315 467 l 590 467 l 590 758 l 798 758 l 798 254 q 825 183 799 205 q 907 160 852 160 q 989 195 964 160 q 1014 306 1014 229 l 1014 475 l 1218 475 l 1218 258 q 1139 55 1218 124 q 907 -14 1060 -14 q 671 55 750 -14 q 590 254 591 123 l 590 313 l 315 313 l 315 0 l 109 0 l 109 758 l 315 758 z "},"Ԍ":{ha:1111,x_min:81,x_max:1031,o:"m 557 557 l 1031 557 l 1031 473 q 917 109 1031 231 q 582 -14 802 -14 q 211 120 340 -14 q 81 497 81 254 q 140 768 81 652 q 312 944 199 883 q 579 1006 425 1006 q 921 933 766 1006 l 848 764 q 706 817 771 802 q 571 831 642 831 q 370 741 443 831 q 297 493 297 652 q 371 248 297 334 q 587 161 444 161 q 751 218 692 161 q 810 377 810 275 l 810 382 l 557 382 l 557 557 z "},"ԍ":{ha:921,x_min:62,x_max:859,o:"m 449 450 l 859 450 l 859 387 q 465 -14 859 -14 q 168 87 274 -14 q 62 374 62 189 q 173 669 62 566 q 486 772 283 772 q 772 714 640 772 l 710 555 q 598 592 659 579 q 488 606 536 606 q 325 549 377 606 q 272 371 272 492 q 460 150 272 150 q 597 189 547 150 q 647 296 647 229 l 449 296 l 449 450 z "},"Ԏ":{ha:1053,x_min:28,x_max:935,o:"m 507 258 q 533 184 507 208 q 616 160 558 160 q 702 195 676 160 q 728 306 728 229 l 728 575 l 935 575 l 935 258 q 854 56 935 125 q 618 -14 774 -14 q 378 55 458 -14 q 297 253 297 124 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 258 z "},"ԏ":{ha:1019,x_min:32,x_max:916,o:"m 736 758 l 736 603 l 488 603 l 488 258 q 515 184 488 208 q 602 160 542 160 q 686 195 660 160 q 711 306 711 229 l 711 475 l 916 475 l 916 258 q 836 56 916 125 q 602 -14 756 -14 q 363 54 444 -14 q 281 254 282 121 l 281 603 l 32 603 l 32 758 l 736 758 z "},"Ԑ":{ha:900,x_min:60,x_max:836,o:"m 90 760 q 137 887 90 831 q 269 975 184 944 q 461 1006 353 1006 q 668 983 581 1006 q 836 907 756 960 l 745 751 q 475 832 614 832 q 339 805 385 832 q 294 726 294 777 q 367 627 294 657 q 596 597 439 597 l 679 597 l 679 433 l 586 433 q 348 398 427 433 q 268 297 268 363 q 324 194 268 227 q 496 161 380 161 q 672 178 583 161 q 828 227 762 195 l 828 40 q 479 -14 697 -14 q 172 66 283 -14 q 60 282 60 145 q 129 443 60 381 q 322 518 198 505 l 322 522 q 152 602 214 539 q 90 760 90 665 z "},"ԑ":{ha:772,x_min:53,x_max:720,o:"m 570 467 l 570 323 l 456 323 q 307 300 357 323 q 257 228 257 277 q 431 146 257 146 q 582 161 506 146 q 718 204 659 177 l 718 39 q 424 -14 602 -14 q 148 42 243 -14 q 53 210 53 98 q 96 328 53 282 q 237 392 140 373 l 237 399 q 93 574 93 432 q 180 721 93 669 q 427 772 267 772 q 580 758 502 772 q 720 715 658 743 l 664 571 q 432 619 549 619 q 278 549 278 619 q 323 485 278 504 q 465 467 368 467 l 570 467 z "},"Ԓ":{ha:1136,x_min:11,x_max:1108,o:"m 909 0 l 700 0 l 700 817 l 457 817 l 446 726 q 372 239 404 379 q 278 42 340 99 q 111 -14 216 -15 q 11 1 54 -14 l 11 174 q 85 160 50 160 q 142 193 121 160 q 181 315 163 226 q 231 607 200 404 q 283 991 262 810 l 909 991 l 909 0 m 869 -336 q 744 -319 802 -336 l 744 -157 q 825 -170 784 -170 q 908 -54 908 -170 l 908 205 l 1108 205 l 1108 -85 q 1046 -271 1108 -205 q 869 -336 984 -336 z "},"ԓ":{ha:1006,x_min:0,x_max:986,o:"m 787 0 l 581 0 l 581 603 l 390 603 q 337 223 368 349 q 254 42 306 98 q 118 -14 202 -14 q 0 8 46 -14 l 0 174 q 66 160 33 160 q 131 216 105 160 q 178 401 157 271 q 214 758 199 531 l 787 758 l 787 0 m 747 -336 q 622 -319 680 -336 l 622 -157 q 703 -170 662 -170 q 786 -54 786 -170 l 786 178 l 986 178 l 986 -85 q 924 -271 986 -205 q 747 -336 862 -336 z "},"Ạ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 367 -191 q 479 -89 367 -89 q 592 -191 592 -89 q 564 -265 592 -239 q 479 -292 535 -292 q 367 -191 367 -292 z "},"ạ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 282 -191 q 395 -89 282 -89 q 507 -191 507 -89 q 479 -265 507 -239 q 395 -292 450 -292 q 282 -191 282 -292 z "},"Ả":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 653 1238 q 543 1104 653 1132 l 536 1056 l 418 1056 l 403 1156 q 472 1181 454 1164 q 490 1223 490 1198 q 476 1257 490 1245 q 439 1268 462 1268 q 345 1253 395 1268 l 345 1367 q 400 1378 365 1373 q 464 1382 436 1382 q 606 1344 559 1382 q 653 1238 653 1307 z "},"ả":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 593 1008 q 484 875 593 903 l 477 827 l 359 827 l 343 926 q 412 952 394 935 q 431 994 431 969 q 416 1027 431 1016 q 379 1039 402 1039 q 285 1023 335 1039 l 285 1137 q 341 1148 305 1144 q 404 1153 376 1153 q 546 1115 499 1153 q 593 1008 593 1078 z "},"Ấ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 732 1071 l 623 1071 q 479 1183 547 1122 q 336 1071 402 1115 l 227 1071 l 227 1089 q 372 1279 302 1177 l 586 1279 q 668 1168 622 1226 q 732 1089 713 1110 l 732 1071 m 672 1221 q 766 1357 730 1282 l 929 1357 l 929 1343 q 775 1203 884 1282 l 672 1203 l 672 1221 z "},"ấ":{ha:839,x_min:58,x_max:867,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 670 842 l 560 842 q 417 954 484 892 q 274 842 340 886 l 164 842 l 164 860 q 310 1050 240 948 l 524 1050 q 605 939 559 997 q 670 860 651 881 l 670 842 m 610 991 q 703 1128 667 1053 l 867 1128 l 867 1114 q 713 974 821 1053 l 610 974 l 610 991 z "},"Ầ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 227 1089 q 372 1279 302 1177 l 587 1279 q 663 1175 620 1230 q 732 1089 705 1119 l 732 1071 l 623 1071 q 479 1183 557 1115 q 336 1071 408 1118 l 227 1071 l 227 1089 m 286 1203 l 184 1203 q 29 1343 73 1284 l 29 1357 l 193 1357 q 286 1221 230 1281 l 286 1203 z "},"ầ":{ha:839,x_min:-31,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 167 860 q 313 1050 243 948 l 527 1050 q 603 945 560 1001 q 673 860 646 890 l 673 842 l 563 842 q 420 954 497 886 q 277 842 348 889 l 167 842 l 167 860 m 227 974 l 124 974 q -31 1114 13 1055 l -31 1128 l 134 1128 q 227 991 170 1052 l 227 974 z "},"Ẩ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 868 1336 q 783 1242 868 1259 l 779 1200 l 693 1200 l 686 1279 q 746 1291 724 1280 q 768 1321 768 1301 q 756 1345 768 1335 q 714 1356 743 1356 q 665 1349 690 1356 l 665 1435 q 728 1439 680 1439 q 830 1415 791 1439 q 868 1336 868 1390 m 732 1071 l 623 1071 q 479 1183 547 1122 q 336 1071 402 1115 l 227 1071 l 227 1089 q 372 1279 302 1177 l 586 1279 q 668 1168 622 1226 q 732 1089 713 1110 l 732 1071 z "},"ẩ":{ha:839,x_min:58,x_max:808,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 808 1107 q 724 1013 808 1029 l 720 971 l 633 971 l 627 1050 q 686 1062 664 1051 q 709 1092 709 1072 q 696 1116 709 1106 q 654 1126 684 1126 q 606 1120 631 1126 l 606 1206 q 668 1210 621 1210 q 770 1185 732 1210 q 808 1107 808 1161 m 673 842 l 563 842 q 420 954 487 892 q 277 842 342 886 l 167 842 l 167 860 q 313 1050 243 948 l 526 1050 q 608 939 562 997 q 673 860 654 881 l 673 842 z "},"Ẫ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 578 1292 q 528 1300 553 1292 q 478 1319 503 1309 q 431 1338 454 1329 q 389 1346 408 1346 q 348 1335 362 1346 q 324 1291 333 1324 l 248 1291 q 290 1410 254 1366 q 382 1454 326 1454 q 434 1445 408 1454 q 484 1426 460 1436 q 531 1407 509 1416 q 571 1398 553 1398 q 613 1411 599 1398 q 636 1455 627 1423 l 713 1455 q 669 1334 705 1377 q 578 1292 633 1292 m 732 1071 l 636 1071 q 479 1174 541 1119 q 322 1071 423 1124 l 227 1071 l 227 1089 q 387 1265 342 1200 l 572 1265 q 648 1174 605 1219 q 732 1089 692 1129 l 732 1071 z "},"ẫ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 518 1063 q 468 1071 494 1063 q 418 1090 443 1080 q 371 1108 394 1100 q 330 1117 349 1117 q 288 1106 302 1117 q 264 1061 273 1095 l 188 1061 q 230 1181 194 1137 q 323 1225 267 1225 q 374 1216 348 1225 q 425 1197 400 1207 q 471 1178 449 1187 q 511 1169 494 1169 q 553 1181 539 1169 q 576 1226 567 1194 l 653 1226 q 609 1105 645 1147 q 518 1063 573 1063 m 673 842 l 576 842 q 420 945 481 890 q 262 842 363 895 l 167 842 l 167 860 q 327 1036 282 971 l 513 1036 q 589 945 545 989 q 673 860 632 900 l 673 842 z "},"Ậ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 637 1071 q 479 1190 531 1134 q 323 1071 426 1135 l 186 1071 l 186 1089 q 359 1293 314 1217 l 602 1293 q 674 1197 623 1258 q 775 1089 726 1137 l 775 1071 l 637 1071 m 367 -191 q 479 -89 367 -89 q 592 -191 592 -89 q 564 -265 592 -239 q 479 -292 535 -292 q 367 -191 367 -292 z "},"ậ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 574 841 q 416 960 468 904 q 260 841 363 905 l 123 841 l 123 859 q 296 1063 251 987 l 538 1063 q 611 967 559 1028 q 712 859 663 907 l 712 841 l 574 841 m 290 -191 q 403 -89 290 -89 q 515 -191 515 -89 q 487 -265 515 -239 q 403 -292 458 -292 q 290 -191 290 -292 z "},"Ắ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 412 1265 q 492 1402 460 1337 l 642 1402 l 642 1388 q 501 1247 579 1313 l 412 1247 l 412 1265 m 726 1300 q 653 1132 719 1193 q 478 1071 587 1071 q 303 1129 366 1071 q 235 1300 240 1187 l 336 1300 q 381 1213 342 1241 q 479 1185 420 1185 q 578 1217 539 1185 q 623 1300 616 1249 l 726 1300 z "},"ắ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 350 1036 q 429 1173 397 1107 l 579 1173 l 579 1158 q 439 1018 517 1084 l 350 1018 l 350 1036 m 664 1071 q 590 903 656 964 q 416 842 524 842 q 241 900 304 842 q 172 1071 178 958 l 274 1071 q 318 984 279 1012 q 417 956 357 956 q 515 987 477 956 q 560 1071 554 1019 l 664 1071 z "},"Ằ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 547 1247 l 458 1247 q 318 1388 387 1305 l 318 1402 l 468 1402 q 547 1265 500 1337 l 547 1247 m 338 1300 q 382 1217 343 1249 q 481 1185 420 1185 q 581 1214 543 1185 q 624 1300 618 1244 l 725 1300 q 656 1129 719 1187 q 482 1071 593 1071 q 307 1132 373 1071 q 233 1300 241 1192 l 338 1300 z "},"ằ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 485 1018 l 396 1018 q 256 1158 324 1076 l 256 1173 l 406 1173 q 485 1036 437 1107 l 485 1018 m 275 1071 q 319 988 281 1020 q 418 956 358 956 q 518 985 480 956 q 562 1071 556 1015 l 663 1071 q 594 900 656 958 q 420 842 531 842 q 244 902 311 842 q 171 1071 178 963 l 275 1071 z "},"Ẳ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 581 1357 q 564 1300 581 1322 q 510 1265 547 1278 l 506 1238 l 433 1238 l 427 1312 q 474 1326 461 1318 q 488 1352 488 1335 q 448 1379 488 1379 q 392 1374 412 1379 l 392 1444 q 454 1449 407 1449 q 547 1426 513 1449 q 581 1357 581 1403 m 338 1300 q 382 1217 343 1249 q 481 1185 420 1185 q 581 1214 543 1185 q 624 1300 618 1244 l 725 1300 q 656 1129 719 1187 q 482 1071 593 1071 q 307 1132 373 1071 q 233 1300 241 1192 l 338 1300 z "},"ẳ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 519 1128 q 503 1070 519 1093 q 449 1036 486 1048 l 445 1008 l 372 1008 l 366 1083 q 413 1097 400 1089 q 427 1122 427 1105 q 387 1150 427 1150 q 331 1145 351 1150 l 331 1215 q 393 1219 346 1219 q 486 1197 452 1219 q 519 1128 519 1174 m 277 1071 q 321 988 282 1020 q 420 956 359 956 q 519 985 481 956 q 563 1071 557 1015 l 664 1071 q 595 900 658 958 q 421 842 532 842 q 246 902 312 842 q 172 1071 180 963 l 277 1071 z "},"Ẵ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 338 1272 q 378 1208 342 1232 q 481 1185 414 1185 q 624 1272 614 1185 l 725 1272 q 656 1122 719 1173 q 482 1071 594 1071 q 306 1125 372 1071 q 233 1272 241 1179 l 338 1272 m 585 1305 q 535 1314 560 1305 q 485 1333 509 1322 q 438 1351 460 1343 q 396 1360 415 1360 q 353 1348 367 1360 q 331 1304 340 1335 l 254 1304 q 294 1413 260 1372 q 389 1454 327 1454 q 440 1445 414 1454 q 491 1426 467 1436 q 538 1407 515 1416 q 578 1398 560 1398 q 620 1411 606 1398 q 643 1455 633 1423 l 720 1455 q 677 1343 712 1381 q 585 1305 642 1305 z "},"ẵ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 277 1043 q 317 979 281 1003 q 420 956 353 956 q 563 1043 553 956 l 664 1043 q 595 893 658 944 q 421 842 533 842 q 245 896 311 842 q 172 1043 180 949 l 277 1043 m 524 1076 q 474 1085 499 1076 q 424 1103 448 1093 q 377 1122 399 1114 q 335 1131 354 1131 q 292 1118 306 1131 q 270 1075 279 1106 l 193 1075 q 233 1184 199 1143 q 328 1225 266 1225 q 379 1216 353 1225 q 430 1197 406 1207 q 477 1178 454 1187 q 517 1169 499 1169 q 558 1181 545 1169 q 582 1226 572 1194 l 659 1226 q 616 1114 651 1152 q 524 1076 581 1076 z "},"Ặ":{ha:958,x_min:0,x_max:958,o:"m 732 0 l 660 236 l 298 236 l 227 0 l 0 0 l 350 996 l 607 996 l 958 0 l 732 0 m 610 412 q 497 775 510 733 q 479 842 485 817 q 351 412 457 755 l 610 412 m 746 1300 q 663 1133 738 1196 q 476 1071 589 1071 q 288 1133 358 1071 q 212 1300 218 1194 l 328 1300 q 346 1250 330 1268 q 391 1223 362 1232 q 477 1215 420 1215 q 628 1300 617 1215 l 746 1300 m 367 -191 q 479 -89 367 -89 q 592 -191 592 -89 q 564 -265 592 -239 q 479 -292 535 -292 q 367 -191 367 -292 z "},"ặ":{ha:839,x_min:58,x_max:734,o:"m 590 0 l 550 103 l 545 103 q 437 12 492 37 q 293 -14 382 -14 q 121 49 184 -14 q 58 227 58 111 q 143 405 58 347 q 397 468 227 462 l 529 472 l 529 505 q 411 621 529 621 q 197 566 320 621 l 129 705 q 419 774 260 774 q 653 707 572 774 q 734 505 734 641 l 734 0 l 590 0 m 529 351 l 449 349 q 315 316 359 346 q 271 225 271 286 q 371 138 271 138 q 486 179 443 138 q 529 289 529 220 l 529 351 m 283 -191 q 396 -89 283 -89 q 509 -191 509 -89 q 480 -265 509 -239 q 396 -292 452 -292 q 283 -191 283 -292 m 684 1071 q 602 904 676 966 q 414 842 527 842 q 226 903 296 842 q 151 1071 156 965 l 266 1071 q 284 1021 269 1039 q 329 994 300 1002 q 416 986 358 986 q 566 1071 555 986 l 684 1071 z "},"Ẹ":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 296 -191 q 408 -89 296 -89 q 521 -191 521 -89 q 492 -265 521 -239 q 408 -292 464 -292 q 296 -191 296 -292 z "},"ẹ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 297 -191 q 410 -89 297 -89 q 522 -191 522 -89 q 494 -265 522 -239 q 410 -292 465 -292 q 297 -191 297 -292 z "},"Ẻ":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 589 1238 q 479 1104 589 1132 l 473 1056 l 355 1056 l 339 1156 q 408 1181 390 1164 q 427 1223 427 1198 q 412 1257 427 1245 q 375 1268 398 1268 q 281 1253 331 1268 l 281 1367 q 337 1378 301 1373 q 400 1382 372 1382 q 542 1344 495 1382 q 589 1238 589 1307 z "},"ẻ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 604 1008 q 494 875 604 903 l 488 827 l 370 827 l 354 926 q 423 952 405 935 q 441 994 441 969 q 427 1027 441 1016 q 390 1039 413 1039 q 296 1023 346 1039 l 296 1137 q 352 1148 316 1144 q 415 1153 387 1153 q 557 1115 510 1153 q 604 1008 604 1078 z "},"Ẽ":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 298 1142 q 258 1124 277 1142 q 230 1069 239 1106 l 129 1069 q 185 1223 136 1168 q 313 1279 233 1279 q 368 1268 341 1279 q 421 1243 395 1257 q 472 1219 447 1230 q 522 1208 497 1208 q 562 1226 543 1208 q 590 1280 581 1244 l 691 1280 q 634 1126 684 1182 q 507 1071 585 1071 q 452 1082 479 1071 q 399 1106 425 1093 q 348 1131 373 1120 q 298 1142 323 1142 z "},"ẽ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 307 913 q 266 895 286 913 q 238 840 247 877 l 137 840 q 193 994 144 939 q 321 1050 241 1050 q 376 1039 349 1050 q 429 1014 403 1027 q 480 990 455 1001 q 530 979 505 979 q 570 997 551 979 q 598 1051 589 1015 l 699 1051 q 643 897 692 953 q 515 842 593 842 q 460 853 487 842 q 407 877 433 864 q 356 902 381 890 q 307 913 331 913 z "},"Ế":{ha:778,x_min:125,x_max:861,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 664 1071 l 554 1071 q 411 1183 478 1122 q 268 1071 334 1115 l 158 1071 l 158 1089 q 304 1279 234 1177 l 517 1279 q 599 1168 553 1226 q 664 1089 645 1110 l 664 1071 m 604 1221 q 697 1357 661 1282 l 861 1357 l 861 1343 q 707 1203 815 1282 l 604 1203 l 604 1221 z "},"ế":{ha:821,x_min:62,x_max:871,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 674 842 l 564 842 q 421 954 488 892 q 278 842 344 886 l 168 842 l 168 860 q 314 1050 244 948 l 528 1050 q 609 939 564 997 q 674 860 655 881 l 674 842 m 614 991 q 707 1128 671 1053 l 871 1128 l 871 1114 q 717 974 825 1053 l 614 974 l 614 991 z "},"Ề":{ha:778,x_min:-35,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 163 1089 q 309 1279 239 1177 l 523 1279 q 599 1175 556 1230 q 669 1089 642 1119 l 669 1071 l 559 1071 q 416 1183 493 1115 q 273 1071 344 1118 l 163 1071 l 163 1089 m 222 1203 l 120 1203 q -35 1343 9 1284 l -35 1357 l 130 1357 q 222 1221 166 1281 l 222 1203 z "},"ề":{ha:821,x_min:-22,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 175 860 q 321 1050 251 948 l 535 1050 q 611 945 568 1001 q 681 860 654 890 l 681 842 l 571 842 q 428 954 505 886 q 285 842 356 889 l 175 842 l 175 860 m 235 974 l 132 974 q -22 1114 21 1055 l -22 1128 l 142 1128 q 235 991 178 1052 l 235 974 z "},"Ể":{ha:778,x_min:125,x_max:800,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 800 1336 q 715 1242 800 1259 l 711 1200 l 625 1200 l 618 1279 q 677 1291 655 1280 q 700 1321 700 1301 q 687 1345 700 1335 q 646 1356 675 1356 q 597 1349 622 1356 l 597 1435 q 659 1439 612 1439 q 761 1415 723 1439 q 800 1336 800 1390 m 664 1071 l 554 1071 q 411 1183 478 1122 q 268 1071 334 1115 l 158 1071 l 158 1089 q 304 1279 234 1177 l 517 1279 q 599 1168 553 1226 q 664 1089 645 1110 l 664 1071 z "},"ể":{ha:821,x_min:62,x_max:810,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 810 1107 q 725 1013 810 1029 l 721 971 l 635 971 l 628 1050 q 688 1062 665 1051 q 710 1092 710 1072 q 697 1116 710 1106 q 656 1126 685 1126 q 607 1120 632 1126 l 607 1206 q 669 1210 622 1210 q 771 1185 733 1210 q 810 1107 810 1161 m 674 842 l 564 842 q 421 954 488 892 q 278 842 344 886 l 168 842 l 168 860 q 314 1050 244 948 l 528 1050 q 609 939 564 997 q 674 860 655 881 l 674 842 z "},"Ễ":{ha:778,x_min:125,x_max:696,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 512 1292 q 462 1300 488 1292 q 412 1319 437 1309 q 365 1338 388 1329 q 323 1346 342 1346 q 282 1335 296 1346 q 258 1291 267 1324 l 182 1291 q 224 1410 188 1366 q 317 1454 260 1454 q 368 1445 342 1454 q 418 1426 394 1436 q 465 1407 443 1416 q 505 1398 488 1398 q 547 1411 533 1398 q 570 1455 561 1423 l 647 1455 q 603 1334 639 1377 q 512 1292 567 1292 m 667 1071 l 570 1071 q 414 1174 475 1119 q 256 1071 357 1124 l 161 1071 l 161 1089 q 321 1265 276 1200 l 507 1265 q 583 1174 539 1219 q 667 1089 626 1129 l 667 1071 z "},"ễ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 522 1063 q 472 1071 498 1063 q 422 1090 447 1080 q 375 1108 398 1100 q 334 1117 353 1117 q 292 1106 307 1117 q 269 1061 277 1095 l 192 1061 q 234 1181 198 1137 q 327 1225 271 1225 q 378 1216 352 1225 q 429 1197 404 1207 q 475 1178 453 1187 q 515 1169 498 1169 q 557 1181 543 1169 q 581 1226 571 1194 l 657 1226 q 613 1105 649 1147 q 522 1063 577 1063 m 677 842 l 581 842 q 424 945 485 890 q 267 842 368 895 l 171 842 l 171 860 q 331 1036 286 971 l 517 1036 q 593 945 549 989 q 677 860 636 900 l 677 842 z "},"Ệ":{ha:778,x_min:116,x_max:705,o:"m 696 0 l 125 0 l 125 991 l 696 991 l 696 819 l 335 819 l 335 602 l 671 602 l 671 429 l 335 429 l 335 174 l 696 174 l 696 0 m 568 1071 q 409 1190 461 1134 q 254 1071 356 1135 l 116 1071 l 116 1089 q 290 1293 244 1217 l 532 1293 q 605 1197 553 1258 q 705 1089 656 1137 l 705 1071 l 568 1071 m 296 -191 q 408 -89 296 -89 q 521 -191 521 -89 q 492 -265 521 -239 q 408 -292 464 -292 q 296 -191 296 -292 z "},"ệ":{ha:821,x_min:62,x_max:761,o:"m 422 625 q 319 584 357 625 q 277 465 282 542 l 567 465 q 527 584 566 542 q 422 625 488 625 m 452 -14 q 165 87 269 -14 q 62 374 62 189 q 158 668 62 564 q 421 772 253 772 q 671 681 582 772 q 761 428 761 589 l 761 328 l 272 328 q 324 190 275 239 q 461 140 373 140 q 591 155 530 140 q 718 200 652 169 l 718 40 q 602 0 664 13 q 452 -14 541 -14 m 569 842 q 410 961 463 905 q 255 842 357 906 l 117 842 l 117 860 q 291 1064 245 988 l 533 1064 q 606 968 554 1029 q 707 860 658 907 l 707 842 l 569 842 m 297 -189 q 410 -87 297 -87 q 522 -189 522 -87 q 494 -264 522 -237 q 410 -290 465 -290 q 297 -189 297 -290 z "},"ỉ":{ha:424,x_min:79,x_max:388,o:"m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 388 1008 q 278 875 388 903 l 271 827 l 153 827 l 138 926 q 207 952 189 935 q 225 994 225 969 q 211 1027 225 1016 q 174 1039 197 1039 q 79 1023 130 1039 l 79 1137 q 135 1148 100 1144 q 199 1153 171 1153 q 341 1115 294 1153 q 388 1008 388 1078 z "},"ị":{ha:424,x_min:98,x_max:325,o:"m 100 954 q 212 1055 100 1055 q 325 954 325 1055 q 297 879 325 906 q 212 852 269 852 q 100 954 100 852 m 315 0 l 109 0 l 109 758 l 315 758 l 315 0 m 98 -191 q 211 -89 98 -89 q 323 -191 323 -89 q 295 -265 323 -239 q 211 -292 267 -292 q 98 -191 98 -292 z "},"Ọ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 440 -191 q 553 -89 440 -89 q 665 -191 665 -89 q 637 -265 665 -239 q 553 -292 608 -292 q 440 -191 440 -292 z "},"ọ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 315 -191 q 428 -89 315 -89 q 541 -191 541 -89 q 512 -265 541 -239 q 428 -292 484 -292 q 315 -191 315 -292 z "},"Ỏ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 728 1238 q 618 1104 728 1132 l 611 1056 l 493 1056 l 477 1156 q 547 1181 528 1164 q 565 1223 565 1198 q 551 1257 565 1245 q 513 1268 536 1268 q 419 1253 469 1268 l 419 1367 q 475 1378 439 1373 q 538 1382 511 1382 q 681 1344 633 1382 q 728 1238 728 1307 z "},"ỏ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 604 1008 q 494 875 604 903 l 488 827 l 370 827 l 354 926 q 423 952 405 935 q 441 994 441 969 q 427 1027 441 1016 q 390 1039 413 1039 q 296 1023 346 1039 l 296 1137 q 352 1148 316 1144 q 415 1153 387 1153 q 557 1115 510 1153 q 604 1008 604 1078 z "},"Ố":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 800 1071 l 690 1071 q 547 1183 614 1122 q 404 1071 470 1115 l 294 1071 l 294 1089 q 440 1279 370 1177 l 654 1279 q 735 1168 690 1226 q 800 1089 781 1110 l 800 1071 m 740 1221 q 833 1357 798 1282 l 997 1357 l 997 1343 q 843 1203 951 1282 l 740 1203 l 740 1221 z "},"ố":{ha:860,x_min:62,x_max:875,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 678 842 l 568 842 q 425 954 492 892 q 282 842 348 886 l 172 842 l 172 860 q 318 1050 248 948 l 532 1050 q 613 939 568 997 q 678 860 659 881 l 678 842 m 618 991 q 711 1128 675 1053 l 875 1128 l 875 1114 q 721 974 829 1053 l 618 974 l 618 991 z "},"Ồ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 297 1089 q 443 1279 373 1177 l 657 1279 q 733 1175 690 1230 q 803 1089 776 1119 l 803 1071 l 693 1071 q 550 1183 627 1115 q 407 1071 478 1118 l 297 1071 l 297 1089 m 357 1203 l 254 1203 q 100 1343 143 1284 l 100 1357 l 264 1357 q 357 1221 300 1281 l 357 1203 z "},"ồ":{ha:860,x_min:-22,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 175 860 q 321 1050 251 948 l 535 1050 q 611 945 568 1001 q 681 860 654 890 l 681 842 l 571 842 q 428 954 505 886 q 285 842 356 889 l 175 842 l 175 860 m 235 974 l 132 974 q -22 1114 21 1055 l -22 1128 l 142 1128 q 235 991 178 1052 l 235 974 z "},"Ổ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 936 1336 q 851 1242 936 1259 l 847 1200 l 761 1200 l 754 1279 q 814 1291 791 1280 q 836 1321 836 1301 q 824 1345 836 1335 q 782 1356 811 1356 q 733 1349 758 1356 l 733 1435 q 795 1439 748 1439 q 898 1415 859 1439 q 936 1336 936 1390 m 800 1071 l 690 1071 q 547 1183 614 1122 q 404 1071 470 1115 l 294 1071 l 294 1089 q 440 1279 370 1177 l 654 1279 q 735 1168 690 1226 q 800 1089 781 1110 l 800 1071 z "},"ổ":{ha:860,x_min:62,x_max:814,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 814 1107 q 729 1013 814 1029 l 725 971 l 639 971 l 632 1050 q 692 1062 669 1051 q 714 1092 714 1072 q 702 1116 714 1106 q 660 1126 689 1126 q 611 1120 636 1126 l 611 1206 q 673 1210 626 1210 q 775 1185 737 1210 q 814 1107 814 1161 m 678 842 l 568 842 q 425 954 492 892 q 282 842 348 886 l 172 842 l 172 860 q 318 1050 248 948 l 532 1050 q 613 939 568 997 q 678 860 659 881 l 678 842 z "},"Ỗ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 650 1292 q 600 1300 625 1292 q 550 1319 574 1309 q 503 1338 526 1329 q 461 1346 480 1346 q 419 1335 434 1346 q 396 1291 405 1324 l 319 1291 q 362 1410 326 1366 q 454 1454 398 1454 q 506 1445 479 1454 q 556 1426 532 1436 q 603 1407 581 1416 q 643 1398 625 1398 q 685 1411 671 1398 q 708 1455 699 1423 l 785 1455 q 741 1334 777 1377 q 650 1292 705 1292 m 804 1071 l 708 1071 q 551 1174 612 1119 q 394 1071 495 1124 l 298 1071 l 298 1089 q 458 1265 414 1200 l 644 1265 q 720 1174 677 1219 q 804 1089 764 1129 l 804 1071 z "},"ỗ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 529 1063 q 479 1071 505 1063 q 429 1090 454 1080 q 382 1108 405 1100 q 340 1117 359 1117 q 299 1106 313 1117 q 275 1061 284 1095 l 199 1061 q 241 1181 205 1137 q 334 1225 277 1225 q 385 1216 359 1225 q 435 1197 411 1207 q 482 1178 460 1187 q 522 1169 505 1169 q 564 1181 550 1169 q 587 1226 578 1194 l 664 1226 q 620 1105 656 1147 q 529 1063 584 1063 m 684 842 l 587 842 q 431 945 492 890 q 273 842 374 895 l 178 842 l 178 860 q 338 1036 293 971 l 524 1036 q 600 945 556 989 q 684 860 643 900 l 684 842 z "},"Ộ":{ha:1105,x_min:81,x_max:1025,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 877 81 746 q 554 1007 326 1007 q 904 876 783 1007 q 1025 497 1025 744 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 440 -191 q 553 -89 440 -89 q 665 -191 665 -89 q 637 -265 665 -239 q 553 -292 608 -292 q 440 -191 440 -292 m 709 1071 q 550 1190 602 1134 q 395 1071 497 1135 l 257 1071 l 257 1089 q 431 1293 385 1217 l 673 1293 q 746 1197 694 1258 q 846 1089 798 1137 l 846 1071 l 709 1071 z "},"ộ":{ha:860,x_min:62,x_max:798,o:"m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 625 725 541 772 q 753 589 708 677 q 798 380 798 500 m 318 -191 q 431 -89 318 -89 q 543 -191 543 -89 q 515 -265 543 -239 q 431 -292 486 -292 q 318 -191 318 -292 m 586 842 q 427 961 479 905 q 272 842 374 906 l 134 842 l 134 860 q 308 1064 262 988 l 550 1064 q 623 968 571 1029 q 724 860 675 907 l 724 842 l 586 842 z "},"Ớ":{ha:1146,x_min:81,x_max:1187,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 876 81 745 q 555 1007 326 1007 q 911 869 790 1007 q 974 1055 974 911 l 1178 1055 l 1187 1040 q 1115 852 1163 920 q 983 750 1067 784 q 1025 497 1025 642 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 1105 0 m 416 1071 l 416 1089 q 575 1293 532 1225 l 807 1293 l 807 1279 q 687 1174 772 1244 q 553 1071 602 1105 l 416 1071 z "},"ớ":{ha:943,x_min:62,x_max:1007,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 576 749 508 772 q 692 679 644 726 q 793 872 793 709 l 997 872 l 1007 857 q 959 713 989 766 q 882 624 930 660 q 762 570 833 587 q 798 380 798 485 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 860 0 m 310 842 l 310 860 q 469 1064 427 996 l 701 1064 l 701 1050 q 581 945 666 1015 q 448 842 496 876 l 310 842 z "},"Ờ":{ha:1146,x_min:81,x_max:1187,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 876 81 745 q 555 1007 326 1007 q 911 869 790 1007 q 974 1055 974 911 l 1178 1055 l 1187 1040 q 1115 852 1163 920 q 983 750 1067 784 q 1025 497 1025 642 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 1105 0 m 547 1071 q 422 1167 505 1101 q 293 1279 339 1234 l 293 1293 l 525 1293 q 684 1089 568 1225 l 684 1071 l 547 1071 z "},"ờ":{ha:943,x_min:62,x_max:1007,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 576 749 508 772 q 692 679 644 726 q 793 872 793 709 l 997 872 l 1007 857 q 959 713 989 766 q 882 624 930 660 q 762 570 833 587 q 798 380 798 485 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 860 0 m 418 842 q 292 938 375 871 q 163 1050 210 1005 l 163 1064 l 395 1064 q 555 860 438 996 l 555 842 l 418 842 z "},"Ở":{ha:1146,x_min:81,x_max:1187,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 876 81 745 q 555 1007 326 1007 q 911 869 790 1007 q 974 1055 974 911 l 1178 1055 l 1187 1040 q 1115 852 1163 920 q 983 750 1067 784 q 1025 497 1025 642 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 1105 0 m 742 1238 q 632 1104 742 1132 l 625 1056 l 507 1056 l 492 1156 q 561 1181 543 1164 q 579 1223 579 1198 q 565 1257 579 1245 q 528 1268 551 1268 q 433 1253 484 1268 l 433 1367 q 489 1378 454 1373 q 553 1382 525 1382 q 695 1344 648 1382 q 742 1238 742 1307 z "},"ở":{ha:943,x_min:62,x_max:1007,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 576 749 508 772 q 692 679 644 726 q 793 872 793 709 l 997 872 l 1007 857 q 959 713 989 766 q 882 624 930 660 q 762 570 833 587 q 798 380 798 485 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 860 0 m 612 1008 q 503 875 612 903 l 496 827 l 378 827 l 362 926 q 431 952 413 935 q 450 994 450 969 q 435 1027 450 1016 q 398 1039 421 1039 q 304 1023 354 1039 l 304 1137 q 360 1148 324 1144 q 423 1153 395 1153 q 565 1115 518 1153 q 612 1008 612 1078 z "},"Ỡ":{ha:1146,x_min:81,x_max:1187,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 876 81 745 q 555 1007 326 1007 q 911 869 790 1007 q 974 1055 974 911 l 1178 1055 l 1187 1040 q 1115 852 1163 920 q 983 750 1067 784 q 1025 497 1025 642 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 1105 0 m 448 1142 q 407 1124 427 1142 q 379 1069 388 1106 l 278 1069 q 334 1223 286 1168 q 463 1279 382 1279 q 517 1268 490 1279 q 570 1243 544 1257 q 621 1219 596 1230 q 671 1208 646 1208 q 711 1226 692 1208 q 739 1280 730 1244 l 840 1280 q 784 1126 833 1182 q 656 1071 734 1071 q 601 1082 628 1071 q 548 1106 574 1093 q 497 1131 522 1120 q 448 1142 472 1142 z "},"ỡ":{ha:943,x_min:62,x_max:1007,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 576 749 508 772 q 692 679 644 726 q 793 872 793 709 l 997 872 l 1007 857 q 959 713 989 766 q 882 624 930 660 q 762 570 833 587 q 798 380 798 485 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 860 0 m 323 913 q 283 895 302 913 q 255 840 264 877 l 154 840 q 210 994 161 939 q 338 1050 258 1050 q 393 1039 366 1050 q 446 1014 420 1027 q 497 990 472 1001 q 547 979 522 979 q 587 997 568 979 q 615 1051 606 1015 l 716 1051 q 660 897 709 953 q 532 842 610 842 q 477 853 504 842 q 424 877 450 864 q 373 902 398 890 q 323 913 348 913 z "},"Ợ":{ha:1146,x_min:81,x_max:1187,o:"m 1025 497 q 903 119 1025 251 q 553 -14 781 -14 q 203 119 325 -14 q 81 498 81 251 q 203 876 81 745 q 555 1007 326 1007 q 911 869 790 1007 q 974 1055 974 911 l 1178 1055 l 1187 1040 q 1115 852 1163 920 q 983 750 1067 784 q 1025 497 1025 642 m 301 497 q 364 247 301 331 q 553 163 427 163 q 804 497 804 163 q 554 832 804 832 q 365 748 429 832 q 301 497 301 663 m 1105 0 m 441 -191 q 554 -89 441 -89 q 667 -191 667 -89 q 638 -265 667 -239 q 554 -292 610 -292 q 441 -191 441 -292 z "},"ợ":{ha:943,x_min:62,x_max:1007,o:"m 798 380 q 700 91 798 195 q 428 -14 602 -14 q 235 34 319 -14 q 107 172 152 82 q 62 380 62 261 q 159 669 62 566 q 432 772 256 772 q 576 749 508 772 q 692 679 644 726 q 793 872 793 709 l 997 872 l 1007 857 q 959 713 989 766 q 882 624 930 660 q 762 570 833 587 q 798 380 798 485 m 273 380 q 310 210 273 268 q 431 153 347 153 q 550 210 513 153 q 586 380 586 267 q 549 549 586 493 q 429 606 513 606 q 310 550 347 606 q 273 380 273 494 m 860 0 m 319 -191 q 432 -89 319 -89 q 545 -191 545 -89 q 516 -265 545 -239 q 432 -292 488 -292 q 319 -191 319 -292 z "},"Ụ":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 412 -191 q 525 -89 412 -89 q 637 -191 637 -89 q 609 -265 637 -239 q 525 -292 581 -292 q 412 -191 412 -292 z "},"ụ":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 342 -191 q 454 -89 342 -89 q 567 -191 567 -89 q 538 -265 567 -239 q 454 -292 510 -292 q 342 -191 342 -292 z "},"Ủ":{ha:1050,x_min:118,x_max:932,o:"m 932 991 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 385 q 374 216 328 270 q 526 163 420 163 q 676 217 629 163 q 722 386 722 271 l 722 991 l 932 991 m 693 1238 q 583 1104 693 1132 l 576 1056 l 458 1056 l 443 1156 q 512 1181 494 1164 q 530 1223 530 1198 q 516 1257 530 1245 q 479 1268 502 1268 q 385 1253 435 1268 l 385 1367 q 440 1378 405 1373 q 504 1382 476 1382 q 646 1344 599 1382 q 693 1238 693 1307 z "},"ủ":{ha:913,x_min:104,x_max:804,o:"m 646 0 l 618 97 l 607 97 q 513 15 574 44 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 0 l 646 0 m 624 1008 q 514 875 624 903 l 507 827 l 389 827 l 374 926 q 443 952 425 935 q 461 994 461 969 q 447 1027 461 1016 q 410 1039 433 1039 q 315 1023 366 1039 l 315 1137 q 371 1148 336 1144 q 435 1153 407 1153 q 577 1115 530 1153 q 624 1008 624 1078 z "},"Ứ":{ha:1229,x_min:118,x_max:1243,o:"m 932 991 l 932 864 q 1006 932 982 882 q 1029 1055 1029 983 l 1234 1055 l 1243 1040 q 1185 879 1221 936 q 1087 788 1149 823 q 932 739 1025 753 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 368 q 375 213 328 262 q 526 163 423 163 q 676 215 629 163 q 722 370 722 267 l 722 991 l 932 991 m 1050 0 m 414 1071 l 414 1089 q 574 1293 531 1225 l 806 1293 l 806 1279 q 685 1174 770 1244 q 552 1071 600 1105 l 414 1071 z "},"ứ":{ha:1055,x_min:104,x_max:1120,o:"m 646 0 l 618 97 l 606 97 q 512 16 573 45 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 679 q 879 744 852 694 q 905 872 905 793 l 1109 872 l 1120 857 q 1061 694 1098 751 q 963 603 1025 637 q 804 554 901 568 l 804 0 l 646 0 m 913 0 m 340 842 l 340 860 q 500 1064 457 996 l 732 1064 l 732 1050 q 611 945 696 1015 q 478 842 526 876 l 340 842 z "},"Ừ":{ha:1229,x_min:118,x_max:1243,o:"m 932 991 l 932 864 q 1006 932 982 882 q 1029 1055 1029 983 l 1234 1055 l 1243 1040 q 1185 879 1221 936 q 1087 788 1149 823 q 932 739 1025 753 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 368 q 375 213 328 262 q 526 163 423 163 q 676 215 629 163 q 722 370 722 267 l 722 991 l 932 991 m 1050 0 m 493 1071 q 368 1167 450 1101 q 239 1279 285 1234 l 239 1293 l 471 1293 q 630 1089 513 1225 l 630 1071 l 493 1071 z "},"ừ":{ha:1055,x_min:104,x_max:1120,o:"m 646 0 l 618 97 l 606 97 q 512 16 573 45 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 679 q 879 744 852 694 q 905 872 905 793 l 1109 872 l 1120 857 q 1061 694 1098 751 q 963 603 1025 637 q 804 554 901 568 l 804 0 l 646 0 m 913 0 m 416 842 q 291 938 374 871 q 162 1050 208 1005 l 162 1064 l 394 1064 q 553 860 437 996 l 553 842 l 416 842 z "},"Ử":{ha:1229,x_min:118,x_max:1243,o:"m 932 991 l 932 864 q 1006 932 982 882 q 1029 1055 1029 983 l 1234 1055 l 1243 1040 q 1185 879 1221 936 q 1087 788 1149 823 q 932 739 1025 753 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 368 q 375 213 328 262 q 526 163 423 163 q 676 215 629 163 q 722 370 722 267 l 722 991 l 932 991 m 1050 0 m 697 1238 q 587 1104 697 1132 l 581 1056 l 463 1056 l 447 1156 q 516 1181 498 1164 q 534 1223 534 1198 q 520 1257 534 1245 q 483 1268 506 1268 q 389 1253 439 1268 l 389 1367 q 445 1378 409 1373 q 508 1382 480 1382 q 650 1344 603 1382 q 697 1238 697 1307 z "},"ử":{ha:1055,x_min:104,x_max:1120,o:"m 646 0 l 618 97 l 606 97 q 512 16 573 45 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 679 q 879 744 852 694 q 905 872 905 793 l 1109 872 l 1120 857 q 1061 694 1098 751 q 963 603 1025 637 q 804 554 901 568 l 804 0 l 646 0 m 913 0 m 628 1008 q 518 875 628 903 l 511 827 l 393 827 l 378 926 q 447 952 429 935 q 465 994 465 969 q 451 1027 465 1016 q 414 1039 437 1039 q 319 1023 370 1039 l 319 1137 q 375 1148 340 1144 q 439 1153 411 1153 q 581 1115 534 1153 q 628 1008 628 1078 z "},"Ữ":{ha:1229,x_min:118,x_max:1243,o:"m 932 991 l 932 864 q 1006 932 982 882 q 1029 1055 1029 983 l 1234 1055 l 1243 1040 q 1185 879 1221 936 q 1087 788 1149 823 q 932 739 1025 753 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 368 q 375 213 328 262 q 526 163 423 163 q 676 215 629 163 q 722 370 722 267 l 722 991 l 932 991 m 1050 0 m 414 1142 q 374 1124 393 1142 q 346 1069 355 1106 l 245 1069 q 301 1223 252 1168 q 429 1279 349 1279 q 484 1268 457 1279 q 537 1243 511 1257 q 588 1219 563 1230 q 637 1208 613 1208 q 678 1226 659 1208 q 706 1280 697 1244 l 807 1280 q 750 1126 800 1182 q 623 1071 701 1071 q 568 1082 595 1071 q 515 1106 541 1093 q 464 1131 489 1120 q 414 1142 439 1142 z "},"ữ":{ha:1055,x_min:104,x_max:1120,o:"m 646 0 l 618 97 l 606 97 q 512 16 573 45 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 679 q 879 744 852 694 q 905 872 905 793 l 1109 872 l 1120 857 q 1061 694 1098 751 q 963 603 1025 637 q 804 554 901 568 l 804 0 l 646 0 m 913 0 m 345 913 q 304 895 323 913 q 276 840 285 877 l 175 840 q 231 994 182 939 q 359 1050 279 1050 q 414 1039 387 1050 q 467 1014 441 1027 q 518 990 493 1001 q 568 979 543 979 q 608 997 589 979 q 636 1051 627 1015 l 737 1051 q 681 897 730 953 q 553 842 631 842 q 498 853 525 842 q 445 877 471 864 q 394 902 419 890 q 345 913 369 913 z "},"Ự":{ha:1229,x_min:118,x_max:1243,o:"m 932 991 l 932 864 q 1006 932 982 882 q 1029 1055 1029 983 l 1234 1055 l 1243 1040 q 1185 879 1221 936 q 1087 788 1149 823 q 932 739 1025 753 l 932 350 q 883 157 932 240 q 741 31 833 75 q 521 -14 648 -14 q 224 84 330 -14 q 118 353 118 182 l 118 991 l 328 991 l 328 368 q 375 213 328 262 q 526 163 423 163 q 676 215 629 163 q 722 370 722 267 l 722 991 l 932 991 m 1050 0 m 406 -191 q 518 -89 406 -89 q 631 -191 631 -89 q 602 -265 631 -239 q 518 -292 574 -292 q 406 -191 406 -292 z "},"ự":{ha:1055,x_min:104,x_max:1120,o:"m 646 0 l 618 97 l 606 97 q 512 16 573 45 q 374 -14 452 -14 q 172 58 240 -14 q 104 264 104 130 l 104 758 l 311 758 l 311 315 q 340 192 311 233 q 433 151 370 151 q 559 209 520 151 q 597 401 597 267 l 597 758 l 804 758 l 804 679 q 879 744 852 694 q 905 872 905 793 l 1109 872 l 1120 857 q 1061 694 1098 751 q 963 603 1025 637 q 804 554 901 568 l 804 0 l 646 0 m 913 0 m 336 -191 q 449 -89 336 -89 q 562 -191 562 -89 q 533 -265 562 -239 q 449 -292 505 -292 q 336 -191 336 -292 z "},"Ỵ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 319 -191 q 432 -89 319 -89 q 545 -191 545 -89 q 516 -265 545 -239 q 432 -292 488 -292 q 319 -191 319 -292 z "},"ỵ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 553 -191 q 665 -89 553 -89 q 778 -191 778 -89 q 749 -265 778 -239 q 665 -292 721 -292 q 553 -191 553 -292 z "},"Ỷ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 603 1238 q 493 1104 603 1132 l 486 1056 l 368 1056 l 353 1156 q 422 1181 404 1164 q 440 1223 440 1198 q 426 1257 440 1245 q 389 1268 412 1268 q 294 1253 345 1268 l 294 1367 q 350 1378 315 1373 q 414 1382 386 1382 q 556 1344 509 1382 q 603 1238 603 1307 z "},"ỷ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 566 1008 q 456 875 566 903 l 449 827 l 331 827 l 315 926 q 385 952 366 935 q 403 994 403 969 q 389 1027 403 1016 q 351 1039 374 1039 q 257 1023 307 1039 l 257 1137 q 313 1148 277 1144 q 376 1153 349 1153 q 518 1115 471 1153 q 566 1008 566 1078 z "},"Ỹ":{ha:867,x_min:0,x_max:867,o:"m 433 583 l 640 991 l 867 991 l 538 386 l 538 0 l 329 0 l 329 379 l 0 991 l 228 991 l 433 583 m 322 1142 q 282 1124 301 1142 q 254 1069 262 1106 l 153 1069 q 209 1223 160 1168 q 337 1279 257 1279 q 392 1268 365 1279 q 445 1243 418 1257 q 496 1219 471 1230 q 545 1208 521 1208 q 586 1226 566 1208 q 614 1280 605 1244 l 715 1280 q 658 1126 707 1182 q 530 1071 609 1071 q 476 1082 503 1071 q 423 1106 449 1093 q 372 1131 397 1120 q 322 1142 347 1142 z "},"ỹ":{ha:790,x_min:0,x_max:790,o:"m 0 758 l 227 758 l 370 332 q 395 200 388 276 l 399 200 q 428 332 406 270 l 568 758 l 790 758 l 469 -97 q 343 -275 425 -216 q 153 -334 262 -334 q 47 -322 99 -334 l 47 -158 q 129 -167 85 -167 q 225 -133 184 -167 q 289 -32 266 -100 l 301 5 l 0 758 m 288 913 q 248 895 267 913 q 220 840 229 877 l 119 840 q 175 994 126 939 q 303 1050 223 1050 q 358 1039 331 1050 q 411 1014 385 1027 q 462 990 437 1001 q 511 979 487 979 q 552 997 532 979 q 580 1051 571 1015 l 681 1051 q 624 897 673 953 q 496 842 575 842 q 442 853 469 842 q 389 877 415 864 q 338 902 363 890 q 288 913 313 913 z "},"₫":{ha:901,x_min:62,x_max:876,o:"m 342 -14 q 137 84 212 -14 q 62 357 62 182 q 130 639 62 548 q 349 730 197 730 q 479 702 422 730 q 572 619 536 673 l 579 619 q 564 777 564 708 l 564 811 l 350 811 l 350 946 l 564 946 l 564 1055 l 771 1055 l 771 946 l 876 946 l 876 811 l 771 811 l 771 0 l 603 0 l 559 98 l 551 98 q 342 -14 481 -14 m 429 151 q 539 193 504 151 q 578 336 575 235 l 578 355 q 544 518 578 475 q 419 562 509 562 q 316 515 344 562 q 288 354 288 469 q 321 202 288 253 q 429 151 355 151 m 721 -220 l 144 -220 l 144 -125 l 721 -125 l 721 -220 z "},"̏":{ha:0,x_min:-782,x_max:-191,o:"m -300 842 q -416 944 -342 875 q -513 1050 -490 1013 l -513 1064 l -309 1064 q -252 957 -286 1015 q -191 860 -218 898 l -191 842 l -300 842 m -570 842 q -690 948 -619 880 q -782 1050 -761 1016 l -782 1064 l -578 1064 q -522 957 -555 1015 q -460 860 -488 898 l -460 842 l -570 842 z "},"ﬀ":{ha:1075,x_min:28,x_max:1138,o:"m 528 603 l 349 603 l 349 0 l 142 0 l 142 603 l 28 603 l 28 703 l 142 758 l 142 814 q 205 1003 142 943 q 410 1063 269 1063 q 600 1031 517 1063 l 547 879 q 432 899 485 899 q 368 872 388 899 q 349 806 349 846 l 349 758 l 528 758 l 528 603 m 1065 603 l 886 603 l 886 0 l 680 0 l 680 603 l 566 603 l 566 703 l 680 758 l 680 814 q 743 1003 680 943 q 947 1063 807 1063 q 1138 1031 1055 1063 l 1085 879 q 970 899 1023 899 q 906 872 926 899 q 886 806 886 846 l 886 758 l 1065 758 l 1065 603 z "},"℠":{ha:1021,x_min:56,x_max:958,o:"m 364 642 q 317 535 364 574 q 191 497 270 497 q 56 526 115 497 l 56 624 q 193 587 134 587 q 240 601 224 587 q 256 637 256 614 q 244 669 256 656 q 207 694 232 682 q 109 750 134 730 q 72 797 85 770 q 58 859 58 823 q 102 960 58 922 q 222 999 145 999 q 363 964 287 999 l 328 879 q 269 903 290 897 q 222 908 249 908 q 182 897 197 908 q 167 863 167 886 q 181 827 167 842 q 245 787 195 812 q 340 721 317 753 q 364 642 364 690 m 629 503 l 517 861 l 513 861 l 515 786 l 515 503 l 404 503 l 404 991 l 572 991 l 681 646 l 796 991 l 958 991 l 958 503 l 844 503 l 844 779 l 847 861 l 843 861 l 725 503 l 629 503 z "},"Ţ":{ha:804,x_min:28,x_max:777,o:"m 507 0 l 297 0 l 297 817 l 28 817 l 28 991 l 777 991 l 777 817 l 507 817 l 507 0 m 563 -170 q 512 -295 563 -256 q 353 -334 460 -334 q 254 -319 300 -334 l 254 -205 q 303 -215 273 -210 q 351 -220 334 -220 q 400 -178 400 -220 q 288 -104 400 -121 l 340 0 l 471 0 l 453 -41 q 533 -92 503 -58 q 563 -170 563 -126 z "},"ţ":{ha:603,x_min:32,x_max:558,o:"m 428 151 q 558 175 482 151 l 558 21 q 368 -14 481 -14 q 188 49 244 -14 q 131 237 131 112 l 131 603 l 32 603 l 32 690 l 146 760 l 205 920 l 338 920 l 338 758 l 550 758 l 550 603 l 338 603 l 338 237 q 362 172 338 193 q 428 151 387 151 m 502 -170 q 451 -295 502 -256 q 292 -334 399 -334 q 193 -319 239 -334 l 193 -205 q 242 -215 212 -210 q 290 -220 273 -220 q 339 -178 339 -220 q 227 -104 339 -121 l 279 0 l 410 0 l 392 -41 q 472 -92 442 -58 q 502 -170 502 -126 z "},I:{ha:460,x_min:125,x_max:335,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 z "},"Ì":{ha:460,x_min:-39,x_max:352,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 215 1071 q 90 1167 172 1101 q -39 1279 7 1234 l -39 1293 l 193 1293 q 352 1089 235 1225 l 352 1071 l 215 1071 z "},"Í":{ha:460,x_min:113,x_max:505,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 113 1071 l 113 1089 q 273 1293 230 1225 l 505 1293 l 505 1279 q 384 1174 469 1244 q 251 1071 299 1105 l 113 1071 z "},"Î":{ha:460,x_min:-65,x_max:524,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 387 1071 q 228 1190 280 1134 q 73 1071 175 1135 l -65 1071 l -65 1089 q 109 1293 63 1217 l 351 1293 q 424 1197 372 1258 q 524 1089 475 1137 l 524 1071 l 387 1071 z "},"Ï":{ha:460,x_min:-2,x_max:463,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m -2 1182 q 23 1250 -2 1226 q 92 1274 49 1274 q 162 1249 137 1274 q 188 1182 188 1223 q 162 1117 188 1141 q 92 1092 136 1092 q 23 1116 49 1092 q -2 1182 -2 1139 m 271 1182 q 299 1252 271 1230 q 367 1274 326 1274 q 437 1249 411 1274 q 463 1182 463 1225 q 437 1116 463 1141 q 367 1092 410 1092 q 299 1114 326 1092 q 271 1182 271 1136 z "},"Ĩ":{ha:460,x_min:-51,x_max:511,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 119 1142 q 78 1124 98 1142 q 50 1069 59 1106 l -51 1069 q 5 1223 -43 1168 q 134 1279 54 1279 q 188 1268 161 1279 q 241 1243 215 1257 q 292 1219 267 1230 q 342 1208 317 1208 q 382 1226 363 1208 q 410 1280 401 1244 l 511 1280 q 455 1126 504 1182 q 327 1071 406 1071 q 272 1082 299 1071 q 219 1106 245 1093 q 168 1131 193 1120 q 119 1142 143 1142 z "},"Ī":{ha:460,x_min:2,x_max:462,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 2 1214 l 462 1214 l 462 1071 l 2 1071 l 2 1214 z "},"Ĭ":{ha:460,x_min:-36,x_max:498,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 498 1300 q 415 1133 490 1196 q 228 1071 340 1071 q 40 1133 110 1071 q -36 1300 -31 1194 l 79 1300 q 98 1250 82 1268 q 143 1223 114 1232 q 229 1215 172 1215 q 380 1300 369 1215 l 498 1300 z "},"Į":{ha:460,x_min:75,x_max:350,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 218 -154 q 233 -196 218 -182 q 272 -210 248 -210 q 350 -197 309 -210 l 350 -318 q 244 -334 294 -334 q 121 -291 168 -334 q 75 -178 75 -248 q 100 -92 75 -132 q 197 0 126 -52 l 318 0 q 244 -82 271 -45 q 218 -154 218 -119 z "},"İ":{ha:460,x_min:117,x_max:342,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 117 1183 q 229 1284 117 1284 q 342 1183 342 1284 q 314 1108 342 1135 q 229 1082 286 1082 q 117 1183 117 1082 z "},"Ĳ":{ha:1e3,x_min:125,x_max:876,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 562 -292 q 437 -277 490 -292 l 437 -102 q 536 -115 492 -115 q 635 -72 606 -115 q 665 62 665 -29 l 665 991 l 876 991 l 876 64 q 796 -201 876 -110 q 562 -292 717 -292 z "},"Ί":{ha:711,x_min:-67,x_max:506,o:"m 296 0 l 296 991 l 506 991 l 506 0 l 296 0 m -67 791 q -37 903 -55 828 q -12 1034 -19 977 l 180 1034 l 180 1018 q 54 770 127 892 l -67 770 l -67 791 z "},"Ι":{ha:460,x_min:125,x_max:335,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 z "},"Ϊ":{ha:460,x_min:-2,x_max:463,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m -2 1182 q 23 1250 -2 1226 q 92 1274 49 1274 q 162 1249 137 1274 q 188 1182 188 1223 q 162 1117 188 1141 q 92 1092 136 1092 q 23 1116 49 1092 q -2 1182 -2 1139 m 271 1182 q 299 1252 271 1230 q 367 1274 326 1274 q 437 1249 411 1274 q 463 1182 463 1225 q 437 1116 463 1141 q 367 1092 410 1092 q 299 1114 326 1092 q 271 1182 271 1136 z "},"І":{ha:460,x_min:125,x_max:335,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 z "},"Ї":{ha:460,x_min:-2,x_max:463,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m -2 1182 q 23 1250 -2 1226 q 92 1274 49 1274 q 162 1249 137 1274 q 188 1182 188 1223 q 162 1117 188 1141 q 92 1092 136 1092 q 23 1116 49 1092 q -2 1182 -2 1139 m 271 1182 q 299 1252 271 1230 q 367 1274 326 1274 q 437 1249 411 1274 q 463 1182 463 1225 q 437 1116 463 1141 q 367 1092 410 1092 q 299 1114 326 1092 q 271 1182 271 1136 z "},"Ӏ":{ha:460,x_min:125,x_max:335,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 z "},"ӏ":{ha:460,x_min:125,x_max:335,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 z "},"Ỉ":{ha:460,x_min:94,x_max:403,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 403 1238 q 293 1104 403 1132 l 286 1056 l 168 1056 l 153 1156 q 222 1181 203 1164 q 240 1223 240 1198 q 226 1257 240 1245 q 189 1268 212 1268 q 94 1253 144 1268 l 94 1367 q 150 1378 115 1373 q 214 1382 186 1382 q 356 1344 309 1382 q 403 1238 403 1307 z "},"Ị":{ha:460,x_min:117,x_max:342,o:"m 125 0 l 125 991 l 335 991 l 335 0 l 125 0 m 117 -191 q 229 -89 117 -89 q 342 -191 342 -89 q 313 -265 342 -239 q 229 -292 285 -292 q 117 -191 117 -292 z "}},familyName:"Open Sans",ascender:1485,descender:-407,underlinePosition:-104,underlineThickness:69,boundingBox:{yMin:-407,xMin:-860,yMax:1485,xMax:1832},resolution:1e3,original_font_information:{format:0,copyright:"Digitized data copyright © 2010-2011, Google Corporation.",fontFamily:"Open Sans",fontSubfamily:"Bold",uniqueID:"1.10;1ASC;OpenSans-Bold",fullName:"Open Sans Bold",version:"Version 1.10",postScriptName:"OpenSans-Bold",trademark:"Open Sans is a trademark of Google and may be registered in certain jurisdictions.",manufacturer:"Ascender Corporation",manufacturerURL:"http://www.ascendercorp.com/",designerURL:"http://www.ascendercorp.com/typedesigners.html",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://www.apache.org/licenses/LICENSE-2.0"},cssFontWeight:"bold",cssFontStyle:"normal"};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.plane=n,this.updateHandler=null,this.rayCast=new r.Raycaster,this.pointerDownPos=new r.Vector2,this.mouseState=null,this.textStart=null,this.textMid=null,this.textEnd=null,this.font=(new r.FontLoader).parse(i),this.initializeText(this.font),this.cursor=new r.Mesh(new r.SphereBufferGeometry(1,16,16),new r.MeshPhongMaterial({color:16711680})),this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.keyUpBinder=this.onKeyUp.bind(this),this.previewTube=null,this.tubeList=[],this.on()}var t,n,a;return t=e,(n=[{key:"initializeText",value:function(e){var t=new r.TextBufferGeometry("Start",{font:e,size:5,height:2.5});t.computeBoundingBox();var n=new r.Vector3;t.boundingBox.getCenter(n),t.translate(-n.x,-n.y,-n.z),t.computeBoundingBox();var i=new r.MeshPhongMaterial({color:16711680});this.textStart=new r.Mesh(t,i);var o=new r.TextBufferGeometry("End",{font:e,size:5,height:2.5});o.computeBoundingBox(),o.boundingBox.getCenter(n),o.translate(-n.x,-n.y,-n.z),o.computeBoundingBox();var a=new r.MeshPhongMaterial({color:16711680});this.textEnd=new r.Mesh(o,a);var s=new r.TextBufferGeometry("Mid",{font:e,size:5,height:2.5});s.computeBoundingBox(),s.boundingBox.getCenter(n),s.translate(-n.x,-n.y,-n.z),s.computeBoundingBox();var l=new r.MeshPhongMaterial({color:16711680});this.textMid=new r.Mesh(s,l)}},{key:"on",value:function(){this.mouseState="setStartPoint",this.core.sysObjGroup.add(this.textStart),this.core.sysObjGroup.add(this.textEnd),this.core.sysObjGroup.add(this.textMid),this.core.sysObjGroup.add(this.cursor),window.addEventListener("pointerdown",this.pointerDownBinder,!1),window.addEventListener("pointermove",this.pointerMoveBinder,!1),window.addEventListener("pointerup",this.pointerUpBinder,!1),window.addEventListener("keyup",this.keyUpBinder,!1),this.update()}},{key:"off",value:function(){cancelAnimationFrame(this.updateHandler),this.core.sysObjGroup.remove(this.textStart),this.core.sysObjGroup.remove(this.textEnd),this.core.sysObjGroup.remove(this.textMid),this.core.sysObjGroup.remove(this.cursor),window.removeEventListener("pointerdown",this.pointerDownBinder),window.removeEventListener("pointermove",this.pointerMoveBinder),window.removeEventListener("pointerup",this.pointerUpBinder),window.removeEventListener("keyup",this.keyUpBinder)}},{key:"dispose",value:function(){this.off(),this.previewTube&&(this.core.sysObjGroup.remove(this.previewTube),this.previewTube.geometry.dispose(),this.previewTube.material.dispose());for(var e=0;e<this.tubeList.length;e++){var t=this.tubeList[e];this.core.sysObjGroup.remove(t),t.geometry.dispose(),t.material.dispose()}this.tubeList=[],this.cursor&&(this.cursor.geometry.dispose(),this.cursor.material.dispose()),this.textStart&&(this.textStart.geometry.dispose(),this.textStart.material.dispose()),this.textEnd&&(this.textEnd.geometry.dispose(),this.textEnd.material.dispose()),this.textMid&&(this.textMid.geometry.dispose(),this.textMid.material.dispose())}},{key:"onPointerDown",value:function(e){0===e.button&&(this.pointerDownPos.x=e.screenX,this.pointerDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){var t=new r.Vector2(e.offsetX/this.core.dom.clientWidth*2-1,-e.offsetY/this.core.dom.clientHeight*2+1);if(this.rayCast.setFromCamera(t,this.core.getCamera()),"setStartPoint"===this.mouseState){var n=new r.Vector3;this.rayCast.ray.intersectPlane(this.plane,n)&&this.cursor.position.copy(n)}else if("setEndPoint"===this.mouseState){var i=new r.Vector3;if(this.rayCast.ray.intersectPlane(this.plane,i)){this.cursor.position.copy(i);var o=(new r.Vector3).lerpVectors(this.textStart.position,i,.5);this.updatePreviewTube(this.textStart.position,o,i)}}else if("setMidPoint"===this.mouseState){var a=new r.Vector3;this.rayCast.ray.intersectPlane(this.plane,a)&&(this.cursor.position.copy(a),this.updatePreviewTube(this.textStart.position,a,this.textEnd.position))}}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY).distanceTo(this.pointerDownPos);0===e.button&&t<5&&("setStartPoint"===this.mouseState?(this.textStart.position.copy(this.cursor.position),this.mouseState="setEndPoint"):"setEndPoint"===this.mouseState?(this.textEnd.position.copy(this.cursor.position),this.mouseState="setMidPoint"):"setMidPoint"===this.mouseState&&(this.textMid.position.copy(this.cursor.position),this.previewTube.userData.curve=new r.QuadraticBezierCurve3(this.textStart.position.clone(),this.textMid.position.clone(),this.textEnd.position.clone()),this.previewTube.userData.curve.floorId=this.plane.floorId,this.previewTube.userData.curve.groupId=this.plane.groupId,this.previewTube.userData.curve.heightOffset=this.getFirstPointOffset(this.plane.floorId,this.textStart.position.y),this.tubeList.push(this.previewTube),this.previewTube=null,this.textStart.position.copy(this.textEnd.position),this.textEnd.position.set(0,0,0),this.textMid.position.set(0,0,0),this.mouseState="setEndPoint"))}},{key:"getFirstPointOffset",value:function(e,t){var n=0,r=this.core.workObjGroup.getObjectByName(e);return r&&(n=r.position.y-t),n}},{key:"onKeyUp",value:function(e){e.ctrlKey&&e.key}},{key:"update",value:function(){this.updateHandler=requestAnimationFrame(this.update.bind(this));var e=this.core.getCamera();this.textStart&&this.textStart.rotation.copy(e.rotation),this.textMid&&this.textMid.rotation.copy(e.rotation),this.textEnd&&this.textEnd.rotation.copy(e.rotation)}},{key:"updatePreviewTube",value:function(e,t,n){this.previewTube&&(this.core.sysObjGroup.remove(this.previewTube),this.previewTube.geometry.dispose(),this.previewTube.material.dispose());var i=new r.QuadraticBezierCurve3(e,t,n),o=new r.TubeBufferGeometry(i,50,1,16,!1),a=new r.MeshPhongMaterial({color:65280});this.previewTube=new r.Mesh(o,a),this.core.sysObjGroup.add(this.previewTube)}},{key:"finish",value:function(){for(var e=[],t=0;t<this.tubeList.length;t++){var n=this.tubeList[t].userData.curve;e.push(n)}return e}}])&&o(t.prototype,n),a&&o(t,a),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.curves=n,this.scene=r,this.subwayStopLocations={},this.headSource=i,this.bodySource=o,this.tailSource=a,this.visible=!0,this.tubeList=[],this.sphereList=[],this.clock=null,this.animLoopHandler=null,this.animationRatio=0,this.head=i.clone(),this.scene.add(this.head),this.head.position.copy(this.curves[0].v0),this.bodies=[];var s=o.clone();this.scene.add(s),s.position.copy(this.curves[0].v0),this.bodies.push(s),this.tail=a.clone(),this.scene.add(this.tail),this.tail.position.copy(this.curves[0].v0)}var t,n,i;return t=e,(n=[{key:"addSubwayBody",value:function(){var e=this.bodySource.clone();this.scene.add(e),e.position.copy(this.curves[0].v0),this.bodies.push(e)}},{key:"setVisible",value:function(e){for(var t=0;t<this.tubeList.length;t++){var n=this.tubeList[t];this.scene.remove(n),n.geometry.dispose(),n.material.dispose()}this.tubeList=[];for(var i=0;i<this.sphereList.length;i++){var o=this.sphereList[i];this.scene.remove(o),o.geometry.dispose(),o.material.dispose()}if(this.sphereList=[],e){for(var a=[],s=0;s<this.curves.length;s++){var l=this.curves[s],u=new r.TubeBufferGeometry(l,50,1,16,!1),c=new r.MeshPhongMaterial({color:255}),h=new r.Mesh(u,c);this.scene.add(h),this.tubeList.push(h),a.push(l.v0),s===this.curves.length-1&&a.push(l.v2)}for(var f=0;f<a.length;f++){var p=new r.SphereBufferGeometry(1,16,16),d=new r.MeshPhongMaterial({color:255}),m=new r.Mesh(p,d);this.scene.add(m),this.sphereList.push(m),m.position.copy(a[f])}}}},{key:"changeName",value:function(){var e=prompt("이름을 입력해주십시오.",this.name);e&&(this.name=e)}},{key:"getPositionByCurveInfo",value:function(e,t){if(0<=e&&e<this.curves.length){var n=this.curves[e];if("start"===t)return n.v0.clone();if("mid"===t)return n.v1.clone();if("end"===t)return n.v2.clone()}return null}},{key:"updateCurvePoint",value:function(e,t,n){if(0<=e&&e<this.curves.length){var r=this.curves[e];"start"===t?(r.v0.copy(n),0<e&&this.curves[e-1].v2.copy(n)):"mid"===t?r.v1.copy(n):"end"===t&&(r.v2.copy(n),e<this.curves.length-1&&this.curves[e+1].v0.copy(n)),this.visible&&this.setVisible(this.visible)}}},{key:"getCurveFullLength",value:function(){for(var e=0,t=0;t<this.curves.length;t++)this.curves[t],e+=this.curves[t].getLength();return e}},{key:"getCurvePointAt",value:function(e){for(var t=this.getCurveFullLength()*e,n=null,r=0;r<this.curves.length;r++){var i=this.curves[r],o=i.getLength();if(0<=t&&t<=o){n=i;break}t-=o}return n?n.getPointAt(t/n.getLength()):null}},{key:"setStopLocationRatio",value:function(){var e=this.head.userData.stopRatio,t=this.tail.userData.stopRatio;if(e&&t){this.head.userData.stopOffset=e;for(var n=0;n<this.bodies.length;n++){var r=this.bodies[n],i=e-r.userData.stopRatio;r.userData.stopOffset=i}var o=e-this.tail.userData.stopRatio;this.tail.userData.stopOffset=o}else alert("정차위치 비율이 설정되지 않음")}},{key:"setSubwayLocation",value:function(e,t){var n=this.getCurvePointAt(t);if(n){e.position.copy(n);var i=this.getCurveFullLength(),o=t-e.userData.depthLength/i,a=this.getCurvePointAt(o);if(a){var s=(new r.Vector3).lerpVectors(a,n,1.5);e.lookAt(s),this.scene.add(e)}else this.scene.remove(e)}else this.scene.remove(e)}},{key:"doEnterAnimation",value:function(){this.animLoopHandler&&cancelAnimationFrame(this.animLoopHandler),this.setSubwayLocation(this.head,0);for(var e=0;e<this.bodies.length;e++)this.setSubwayLocation(this.bodies[e],0);this.setSubwayLocation(this.tail,0),this.animationRatio=0,this.clock=new r.Clock,this.enterAnimationLoop()}},{key:"enterAnimationLoop",value:function(){this.animLoopHandler=requestAnimationFrame(this.enterAnimationLoop.bind(this));var e=this.clock.getDelta();if(this.animationRatio+=.1*e,this.animationRatio<=this.head.userData.stopOffset){this.setSubwayLocation(this.head,this.animationRatio);for(var t=0;t<this.bodies.length;t++)this.setSubwayLocation(this.bodies[t],this.animationRatio-this.bodies[t].userData.stopOffset);this.setSubwayLocation(this.tail,this.animationRatio-this.tail.userData.stopOffset)}else cancelAnimationFrame(this.animLoopHandler)}},{key:"doExitAnimation",value:function(){this.animLoopHandler&&cancelAnimationFrame(this.animLoopHandler);var e=this.head.userData.stopOffset;this.setSubwayLocation(this.head,e);for(var t=0;t<this.bodies.length;t++)this.setSubwayLocation(this.bodies[t],e-this.bodies[t].userData.stopOffset);this.setSubwayLocation(this.tail,e-this.tail.userData.stopOffset),this.animationRatio=e,this.clock=new r.Clock,this.exitAnimationLoop()}},{key:"exitAnimationLoop",value:function(){this.animLoopHandler=requestAnimationFrame(this.exitAnimationLoop.bind(this));var e=this.getCurveFullLength(),t=this.tail.userData.depthLength/e,n=this.head.userData.stopRatio-this.tail.userData.stopRatio,r=this.clock.getDelta();if(this.animationRatio+=.1*r,this.animationRatio<=1+n+t){this.setSubwayLocation(this.head,this.animationRatio);for(var i=0;i<this.bodies.length;i++)this.setSubwayLocation(this.bodies[i],this.animationRatio-this.bodies[i].userData.stopOffset);this.setSubwayLocation(this.tail,this.animationRatio-this.tail.userData.stopOffset)}else cancelAnimationFrame(this.animLoopHandler)}}])&&s(t.prototype,n),i&&s(t,i),e}(),u=n(191);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.line=n,this.pickPoints=[],this.initializePickPoints(),this.bSetHeadPos=!1,this.bSetTailPos=!1,this.bSetBodyPos=!1,this.selBodyIndex=0;var i=new r.SphereBufferGeometry(10,16,16),o=new r.MeshPhongMaterial({color:16711680});this.bodyCursor=new r.Mesh(i,o),this.core.sysObjGroup.add(this.bodyCursor),this.updateBodyCursor(),this.mousePos=new r.Vector2,this.rayCast=new r.Raycaster,this.keyStates={},this.keyDownBinder=this.onKeyDown.bind(this),this.keyUpBinder=this.onKeyUp.bind(this),this.mouseDownBinder=this.onMouseDown.bind(this),this.mouseMoveBinder=this.onMouseMove.bind(this),this.mouseUpBinder=this.onMouseUp.bind(this),window.addEventListener("keydown",this.keyDownBinder,!1),window.addEventListener("keyup",this.keyUpBinder,!1),window.addEventListener("mousedown",this.mouseDownBinder,!1),window.addEventListener("mousemove",this.mouseMoveBinder,!1),window.addEventListener("mouseup",this.mouseUpBinder,!1)}var t,n,i;return t=e,(n=[{key:"initializePickPoints",value:function(){this.pickPoints=[],this.line.getCurveFullLength();for(var e=0;e<this.line.curves.length;e++)for(var t=this.line.curves[e].getPoints(500),n=0;n<500;n++){var r=t[n],i=(1*e+(n+1)/500)/this.line.curves.length;this.pickPoints.push({point:r.clone(),ratio:i})}}},{key:"updateBodyCursor",value:function(){var e=this.line.bodies[this.selBodyIndex],t=(new r.Box3).setFromObject(e),n=new r.Vector3,i=new r.Vector3;t.getCenter(n),t.getSize(i),this.bodyCursor.position.copy(n),this.bodyCursor.position.y+=n.y+.5*i.y+5}},{key:"addSubwayBody",value:function(){this.line.addSubwayBody()}},{key:"selectNextBody",value:function(){this.selBodyIndex++,this.line.bodies.length<=this.selBodyIndex&&(this.selBodyIndex=0),this.updateBodyCursor()}},{key:"selectPrevBody",value:function(){this.selBodyIndex--,this.selBodyIndex<0&&(this.selBodyIndex=this.line.bodies.length-1),this.updateBodyCursor()}},{key:"onKeyDown",value:function(e){this.keyStates[e.key]=!0}},{key:"onKeyUp",value:function(e){this.keyStates[e.key]=!1}},{key:"onMouseDown",value:function(e){}},{key:"onMouseMove",value:function(e){if(this.keyStates[1]){var t=(new r.Plane).setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),this.pickPoints[0].point);this.mousePos.x=e.offsetX/this.core.dom.clientWidth*2-1,this.mousePos.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(this.mousePos,this.core.getCamera());var n=null;if(this.bSetHeadPos?n=this.line.head:this.bSetTailPos?n=this.line.tail:this.bSetBodyPos&&(n=this.line.bodies[this.selBodyIndex]),n){var i=new r.Vector3;if(this.rayCast.ray.intersectPlane(t,i)){for(var o=[],a=0;a<this.pickPoints.length;a++){var s=i.distanceTo(this.pickPoints[a].point);s<50&&o.push({distance:s,data:this.pickPoints[a]})}if(o.length){o.sort((function(e,t){return e.distance>t.distance?1:e.distance<t.distance?-1:0}));var l=o[0].data.ratio,u=this.line.getCurvePointAt(l);if(u){n.userData.stopRatio=l,n.position.copy(u);var c=this.line.getCurveFullLength(),h=l-n.userData.depthLength/c,f=this.line.getCurvePointAt(h);if(f){var p=(new r.Vector3).lerpVectors(f,u,1.5);n.lookAt(p)}this.updateBodyCursor()}}}}}}},{key:"onMouseUp",value:function(e){}}])&&c(t.prototype,n),i&&c(t,i),e}(),f=n(61),p=n(36);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}var v=Array.prototype.forEach,g=Array.prototype.slice,y={BREAK:{},extend:function(e){return this.each(g.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(g.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=g.call(arguments);return function(){for(var t=g.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(v&&e.forEach&&e.forEach===v)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||e.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():g.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},b=[{litmus:y.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:m},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:m},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:m},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:m}}},{litmus:y.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:y.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:y.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(y.isNumber(e.r)&&y.isNumber(e.g)&&y.isNumber(e.b)&&y.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(y.isNumber(e.r)&&y.isNumber(e.g)&&y.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(y.isNumber(e.h)&&y.isNumber(e.s)&&y.isNumber(e.v)&&y.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(y.isNumber(e.h)&&y.isNumber(e.s)&&y.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],x=void 0,w=void 0,q=function(){w=!1;var e=arguments.length>1?y.toArray(arguments):arguments[0];return y.each(b,(function(t){if(t.litmus(e))return y.each(t.conversions,(function(t,n){if(x=t.read(e),!1===w&&!1!==x)return w=x,x.conversionName=n,x.conversion=t,y.BREAK})),y.BREAK})),w},_=void 0,S={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(_=8*t)|e&~(255<<_)}},M="function"==typeof Symbol&&"symbol"===d(Symbol.iterator)?function(e){return d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":d(e)},E=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},A=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+d(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},O=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==d(t)&&"function"!=typeof t?e:t},L=function(){function e(){if(E(this,e),this.__state=q.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return T(e,[{key:"toString",value:function(){return m(this)}},{key:"toHexString",value:function(){return m(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function C(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||L.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(L.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function D(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||L.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(L.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}L.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=S.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");y.extend(e.__state,S.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},L.recalculateHSV=function(e){var t=S.rgb_to_hsv(e.r,e.g,e.b);y.extend(e.__state,{s:t.s,v:t.v}),y.isNaN(t.h)?y.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},L.COMPONENTS=["r","g","b","h","s","v","hex","a"],C(L.prototype,"r",2),C(L.prototype,"g",1),C(L.prototype,"b",0),D(L.prototype,"h"),D(L.prototype,"s"),D(L.prototype,"v"),Object.defineProperty(L.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(L.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=S.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var k=function(){function e(t,n){E(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return T(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),I={};y.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){y.each(e,(function(e){I[e]=t}))}));var R=/(\d+(\.\d+)?)px/;function F(e){if("0"===e||y.isUndefined(e))return 0;var t=e.match(R);return y.isNull(t)?0:parseFloat(t[1])}var N={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;y.isUndefined(i)&&(i=!0),y.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=I[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;y.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}y.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),N},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),N},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return N},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return N},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return F(t["border-left-width"])+F(t["border-right-width"])+F(t["padding-left"])+F(t["padding-right"])+F(t.width)},getHeight:function(e){var t=getComputedStyle(e);return F(t["border-top-width"])+F(t["border-bottom-width"])+F(t["padding-top"])+F(t["padding-bottom"])+F(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},j=function(e){function t(e,n){E(this,t);var r=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),N.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return A(t,e),T(t,[{key:"setValue",value:function(e){var n=P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(k),z=function(e){function t(e,n,r){E(this,t);var i=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),y.isArray(o)){var s={};y.each(o,(function(e){s[e]=e})),o=s}return y.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),N.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return A(t,e),T(t,[{key:"setValue",value:function(e){var n=P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return N.isActive(this.__select)?this:(this.__select.value=this.getValue(),P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(k),B=function(e){function t(e,n){E(this,t);var r=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),N.bind(r.__input,"keyup",o),N.bind(r.__input,"change",o),N.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),N.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return A(t,e),T(t,[{key:"updateDisplay",value:function(){return N.isActive(this.__input)||(this.__input.value=this.getValue()),P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(k);function U(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var V=function(e){function t(e,n,r){E(this,t);var i=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,y.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=U(i.__impliedStep),i}return A(t,e),T(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=U(e),this}}]),t}(k);var G=function(e){function t(e,n,r){E(this,t);var i=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function u(){N.unbind(window,"mousemove",l),N.unbind(window,"mouseup",u),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),N.bind(i.__input,"change",(function(){var e=parseFloat(o.__input.value);y.isNaN(e)||o.setValue(e)})),N.bind(i.__input,"blur",(function(){s()})),N.bind(i.__input,"mousedown",(function(e){N.bind(window,"mousemove",l),N.bind(window,"mouseup",u),a=e.clientY})),N.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return A(t,e),T(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(V);function H(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var W=function(e){function t(e,n,r,i,o){E(this,t);var a=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(H(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function u(){N.unbind(window,"mousemove",l),N.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(H(t,n.left,n.right,s.__min,s.__max))}function h(){N.unbind(window,"touchmove",c),N.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),N.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),N.bind(window,"mousemove",l),N.bind(window,"mouseup",u),l(e)})),N.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;N.bind(window,"touchmove",c),N.bind(window,"touchend",h),c(e)})),N.addClass(a.__background,"slider"),N.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return A(t,e),T(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(V),X=function(e){function t(e,n,r){E(this,t);var i=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,N.bind(i.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),N.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return A(t,e),T(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(k),Y=function(e){function t(e,n){E(this,t);var r=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new L(r.getValue()),r.__temp=new L(0);var i=r;r.domElement=document.createElement("div"),N.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",N.bind(r.__input,"keydown",(function(e){13===e.keyCode&&h.call(this)})),N.bind(r.__input,"blur",h),N.bind(r.__selector,"mousedown",(function(){N.addClass(this,"drag").bind(window,"mouseup",(function(){N.removeClass(i.__selector,"drag")}))})),N.bind(r.__selector,"touchstart",(function(){N.addClass(this,"drag").bind(window,"touchend",(function(){N.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function s(e){p(e),N.bind(window,"mousemove",p),N.bind(window,"touchmove",p),N.bind(window,"mouseup",u),N.bind(window,"touchend",u)}function l(e){d(e),N.bind(window,"mousemove",d),N.bind(window,"touchmove",d),N.bind(window,"mouseup",c),N.bind(window,"touchend",c)}function u(){N.unbind(window,"mousemove",p),N.unbind(window,"touchmove",p),N.unbind(window,"mouseup",u),N.unbind(window,"touchend",u),f()}function c(){N.unbind(window,"mousemove",d),N.unbind(window,"touchmove",d),N.unbind(window,"mouseup",c),N.unbind(window,"touchend",c),f()}function h(){var e=q(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function f(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,o=n.clientY,a=(r-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function d(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return y.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),y.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),y.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),y.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),y.extend(a.style,{width:"100%",height:"100%",background:"none"}),Z(a,"top","rgba(0,0,0,0)","#000"),y.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",y.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),N.bind(r.__saturation_field,"mousedown",s),N.bind(r.__saturation_field,"touchstart",s),N.bind(r.__field_knob,"mousedown",s),N.bind(r.__field_knob,"touchstart",s),N.bind(r.__hue_field,"mousedown",l),N.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return A(t,e),T(t,[{key:"updateDisplay",value:function(){var e=q(this.getValue());if(!1!==e){var t=!1;y.each(L.COMPONENTS,(function(n){if(!y.isUndefined(e[n])&&!y.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&y.extend(this.__color.__state,e)}y.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;y.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Z(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),y.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(k),Q=["-moz-","-o-","-webkit-","-ms-",""];function Z(e,t,n,r){e.style.background="",y.each(Q,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var K=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},J='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',$=function(e,t){var n=e[t];return y.isArray(arguments[2])||y.isObject(arguments[2])?new z(e,t,arguments[2]):y.isNumber(n)?y.isNumber(arguments[2])&&y.isNumber(arguments[3])?y.isNumber(arguments[4])?new W(e,t,arguments[2],arguments[3],arguments[4]):new W(e,t,arguments[2],arguments[3]):y.isNumber(arguments[4])?new G(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new G(e,t,{min:arguments[2],max:arguments[3]}):y.isString(n)?new B(e,t):y.isFunction(n)?new X(e,t,""):y.isBoolean(n)?new j(e,t):null};var ee=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},te=function(){function e(){E(this,e),this.backgroundElement=document.createElement("div"),y.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),N.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),y.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;N.bind(this.backgroundElement,"click",(function(){t.hide()}))}return T(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),y.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",N.unbind(e.domElement,"webkitTransitionEnd",t),N.unbind(e.domElement,"transitionend",t),N.unbind(e.domElement,"oTransitionEnd",t)};N.bind(this.domElement,"webkitTransitionEnd",t),N.bind(this.domElement,"transitionend",t),N.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-N.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-N.getHeight(this.domElement)/2+"px"}}]),e}();K(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var ne=function(){try{return!!window.localStorage}catch(e){return!1}}(),re=void 0,ie=!0,oe=void 0,ae=!1,se=[],le=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),N.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=y.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=y.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),y.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),y.isUndefined(r.parent)&&r.hideable&&se.push(this),r.resizable=y.isUndefined(r.parent)&&r.resizable,r.autoPlace&&y.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=ne&&"true"===localStorage.getItem(de(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,be(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?N.addClass(n.__ul,e.CLASS_CLOSED):N.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(e){ne&&(o=e,e?N.bind(window,"unload",a):N.unbind(window,"unload",a),localStorage.setItem(de(n,"isLocal"),e))}}}),y.isUndefined(r.parent)){if(this.closed=r.closed||!1,N.addClass(this.domElement,e.CLASS_MAIN),N.makeSelectable(this.domElement,!1),ne&&o){n.useLocalStorage=!0;var l=localStorage.getItem(de(this,"gui"));l&&(r.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,N.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(N.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(N.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),N.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var u=document.createTextNode(r.name);N.addClass(u,"controller-name"),s=ue(n,u);N.addClass(this.__ul,e.CLASS_CLOSED),N.addClass(s,"title"),N.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(y.isUndefined(r.parent)&&(ie&&(oe=document.createElement("div"),N.addClass(oe,"dg"),N.addClass(oe,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(oe),ie=!1),oe.appendChild(this.domElement),N.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||be(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},N.bind(window,"resize",this.__resizeHandler),N.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),N.bind(this.__ul,"transitionend",this.__resizeHandler),N.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&ye(this),a=function(){ne&&"true"===localStorage.getItem(de(n,"isLocal"))&&localStorage.setItem(de(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,y.defer((function(){i.width-=1})))};function ue(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function ce(e){N.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&N.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function he(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function fe(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function pe(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new Y(t,n);else{var o=[t,n].concat(r.factoryArgs);i=$.apply(e,o)}r.before instanceof k&&(r.before=r.before.__li),fe(e,i),N.addClass(i.domElement,"c");var a=document.createElement("span");N.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=ue(e,s,r.before);return N.addClass(l,le.CLASS_CONTROLLER_ROW),i instanceof Y?N.addClass(l,"color"):N.addClass(l,M(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,y.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),pe(e,n.object,n.property,{before:r,factoryArgs:[y.toArray(arguments)]})}if(y.isArray(t)||y.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),pe(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof W){var r=new G(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});y.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),N.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof G){var i=function(t){if(y.isNumber(n.__min)&&y.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=pe(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=y.compose(i,n.min),n.max=y.compose(i,n.max)}else n instanceof j?(N.bind(t,"click",(function(){N.fakeEvent(n.__checkbox,"click")})),N.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof X?(N.bind(t,"click",(function(){N.fakeEvent(n.__button,"click")})),N.bind(t,"mouseover",(function(){N.addClass(n.__button,"hover")})),N.bind(t,"mouseout",(function(){N.removeClass(n.__button,"hover")}))):n instanceof Y&&(N.addClass(t,"color"),n.updateDisplay=y.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=y.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&he(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function de(e,t){return document.location.href+"."+t}function me(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ve(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ge(e){var t=e.__save_row=document.createElement("li");N.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),N.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",N.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",N.addClass(r,"button"),N.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",N.addClass(i,"button"),N.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",N.addClass(o,"button"),N.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?y.each(e.load.remembered,(function(t,n){me(e,n,n===e.preset)})):me(e,"Default",!1),N.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),ne){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(de(0,"isLocal"))&&l.setAttribute("checked","checked"),ve(e,s),N.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,ve(e,s)}))}var u=document.getElementById("dg-new-constructor");N.bind(u,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||re.hide()})),N.bind(n,"click",(function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),re.show(),u.focus(),u.select()})),N.bind(r,"click",(function(){e.save()})),N.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),N.bind(o,"click",(function(){e.revert()}))}function ye(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){N.removeClass(e.__closeButton,le.CLASS_DRAG),N.unbind(window,"mousemove",n),N.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,N.addClass(e.__closeButton,le.CLASS_DRAG),N.bind(window,"mousemove",n),N.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),y.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),N.bind(e.__resize_handle,"mousedown",i),N.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function be(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function xe(e,t){var n={};return y.each(e.__rememberedObjects,(function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];y.each(a,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[i]=o})),n}le.toggleHide=function(){ae=!ae,y.each(se,(function(e){e.domElement.style.display=ae?"none":""}))},le.CLASS_AUTO_PLACE="a",le.CLASS_AUTO_PLACE_CONTAINER="ac",le.CLASS_MAIN="main",le.CLASS_CONTROLLER_ROW="cr",le.CLASS_TOO_TALL="taller-than-window",le.CLASS_CLOSED="closed",le.CLASS_CLOSE_BUTTON="close-button",le.CLASS_CLOSE_TOP="close-top",le.CLASS_CLOSE_BOTTOM="close-bottom",le.CLASS_DRAG="drag",le.DEFAULT_WIDTH=245,le.TEXT_CLOSED="Close Controls",le.TEXT_OPEN="Open Controls",le._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||le.toggleHide()},N.bind(window,"keydown",le._keydownHandler,!1),y.extend(le.prototype,{add:function(e,t){return pe(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return pe(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;y.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&oe.removeChild(this.domElement);var e=this;y.each(this.__folders,(function(t){e.removeFolder(t)})),N.unbind(window,"keydown",le._keydownHandler,!1),ce(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new le(t);this.__folders[e]=n;var r=ue(this,n.domElement);return N.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],ce(e);var t=this;y.each(e.__folders,(function(t){e.removeFolder(t)})),y.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=N.getOffset(e.__ul).top,n=0;y.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=N.getHeight(t))})),window.innerHeight-t-20<n?(N.addClass(e.domElement,le.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(N.removeClass(e.domElement,le.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&y.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:y.debounce((function(){this.onResize()}),50),remember:function(){if(y.isUndefined(re)&&((re=new te).domElement.innerHTML=J),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;y.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ge(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&be(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=xe(this)),e.folders={},y.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=xe(this),he(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=xe(this,!0)),this.load.remembered[e]=xe(this),this.preset=e,me(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){y.each(this.__controllers,(function(t){this.getRoot().load.remembered?fe(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),y.each(this.__folders,(function(e){e.revert(e)})),e||he(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&ee.call(window,(function(){e(t)}));y.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){y.each(this.__controllers,(function(e){e.updateDisplay()})),y.each(this.__folders,(function(e){e.updateDisplay()}))}});var we=le;n(164);function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"PxSubwayLineEditor",(function(){return _e}));var _e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.core=t,this.lineSegments=[],this.modelEditorList=[],this.uiContainer=null,this.uiFolder_Camera=null,this.uiFolder_SbmList=null,this.uiSbmItemArray=[],this.uiFolder_Line=null,this.uiFinishDraw=null,this.axesHelper=new r.AxesHelper(50),this.plane=new r.Plane(new r.Vector3(0,1,0),0),this.drawer=null,this.sectionEditor=null,this.mouseState=null,this.pointerDownPos=new r.Vector2,this.rayCast=new r.Raycaster,this.pointerDownBinder=this.onPointerDown.bind(this),this.pointerMoveBinder=this.onPointerMove.bind(this),this.pointerUpBinder=this.onPointerUp.bind(this),this.keyUpBinder=this.onKeyUp.bind(this),this.subwayHeadSource=null,this.subwayBodySource=null,this.subwayTailSource=null}var t,n,i;return t=e,(n=[{key:"on",value:function(e){this.createUI(),this.updateSbmList(),this.subwayHeadSource||this.subwayBodySource||this.subwayTailSource||this.loadSubwayModel(e),this.core.sysObjGroup.add(this.axesHelper),window.addEventListener("pointerdown",this.pointerDownBinder,!1),window.addEventListener("pointermove",this.pointerMoveBinder,!1),window.addEventListener("pointerup",this.pointerUpBinder,!1),window.addEventListener("keyup",this.keyUpBinder,!1)}},{key:"off",value:function(){this.core.sysObjGroup.remove(this.axesHelper),window.removeEventListener("pointerdown",this.pointerDownBinder),window.removeEventListener("pointermove",this.pointerMoveBinder),window.removeEventListener("pointerup",this.pointerUpBinder),window.removeEventListener("keyup",this.keyUpBinder)}},{key:"createUI",value:function(){try{this.uiContainer?console.warn("PxSubwayLineEditor.createUI: uiContainer is already exists."):(this.uiContainer=new we,this.uiContainer.add(this,"onExport").name("내보내기"),this.uiFolder_Camera=this.uiContainer.addFolder("카메라"),this.uiFolder_Camera.add(this.core.camera,"setPerspective").name("원근투영"),this.uiFolder_Camera.add(this.core.camera,"setOrthographic").name("직교투영"),this.uiFolder_SbmList=this.uiContainer.addFolder("Sbm 목록"),this.uiFolder_Line=this.uiContainer.addFolder("선"),this.uiFolder_Line.add(this,"onSetBasePoint").name("기준점 설정"),this.uiFolder_Line.add(this,"onDrawLine").name("그리기"))}catch(e){console.error(e)}}},{key:"updateSbmList",value:function(){for(var e=0;e<this.uiSbmItemArray.length;e++)this.uiSbmItemArray[e].remove();this.uiSbmItemArray=[];for(var t=0;t<this.core.workObjGroup.children.length;t++){var n=this.core.workObjGroup.children[t],r=this.uiFolder_SbmList.add(n,"visible").name(n.userData.DisplayName);this.uiSbmItemArray.push(r)}}},{key:"onPointerDown",value:function(e){0===e.button&&(this.pointerDownPos.x=e.screenX,this.pointerDownPos.y=e.screenY)}},{key:"onPointerMove",value:function(e){}},{key:"onPointerUp",value:function(e){var t=new r.Vector2(e.screenX,e.screenY);if(0===e.button&&t.distanceTo(this.pointerDownPos)<3&&(t.x=e.offsetX/this.core.dom.clientWidth*2-1,t.y=-e.offsetY/this.core.dom.clientHeight*2+1,this.rayCast.setFromCamera(t,this.core.getCamera()),"setBasePoint"===this.mouseState)){var n=this.rayCast.intersectObjects(this.core.workObjGroup.children,!0);if(n&&n.length>0){this.axesHelper.position.copy(n[0].point),this.plane.setFromNormalAndCoplanarPoint(new r.Vector3(0,1,0),n[0].point);var i=this.getSbmFloor(n[0].object);i&&(this.plane.floorId=i.name,this.plane.groupId=i.userData.groupId)}this.mouseState=null}}},{key:"onKeyUp",value:function(e){"esc"!==e.key.toLowerCase()&&"escape"!==e.key.toLowerCase()||this.sectionEditor&&(this.sectionEditor.finish(),this.sectionEditor=null)}},{key:"onSetBasePoint",value:function(){this.mouseState="setBasePoint"}},{key:"onDrawLine",value:function(){this.mouseState="setStartPoint",this.drawer&&this.drawer.dispose(),this.drawer=new a(this.core,this.plane),this.uiFinishDraw=this.uiFolder_Line.add(this,"onFinishDraw").name("그리기 종료")}},{key:"onFinishDraw",value:function(){if(this.uiFinishDraw&&(this.uiFinishDraw.remove(),this.uiFinishDraw=null),this.drawer){var e=this.drawer.finish(),t="Line_"+r.Math.randInt(0,99).toFixed(),n=new l(t,e,this.core.sysObjGroup,this.subwayHeadSource,this.subwayBodySource,this.subwayTailSource);n.setVisible(!0),this.lineSegments.push(n);var i=new h(this.core,n);this.modelEditorList.push(i),this.drawer.dispose(),this.drawer=null;var o=this.uiContainer.addFolder("라인: "+t);o.add(n,"changeName").name("이름변경").onFinishChange((function(){o.name="라인: "+n.name})),o.add(n,"visible").name("가시화").onChange((function(e){n.setVisible(e)}));for(var a=0;a<n.tubeList.length;a++){var s=o.addFolder("구간"+a.toString());s.add({sectionEdit:this.onSectionEdit.bind(this,n,a,"start")},"sectionEdit").name("시작점 편집"),s.add({sectionEdit:this.onSectionEdit.bind(this,n,a,"mid")},"sectionEdit").name("중간점 편집"),s.add({sectionEdit:this.onSectionEdit.bind(this,n,a,"end")},"sectionEdit").name("종료점 편집")}var u=o.addFolder("모델 위치");u.add(i,"bSetHeadPos").name("머리 위치"),u.add(i,"bSetTailPos").name("꼬리 위치"),u.add(i,"bSetBodyPos").name("몸체 위치"),u.add(i,"addSubwayBody").name("몸체 추가"),u.add(i,"selectNextBody").name("다음 몸체 선택"),u.add(i,"selectPrevBody").name("이전 몸체 선택"),u.add(n,"setStopLocationRatio").name("정차위치비율설정"),u.add(n,"doEnterAnimation").name("진입"),u.add(n,"doExitAnimation").name("진출"),o.add({remove:this.onRemoveLine.bind(this,o,n)},"remove").name("제거")}}},{key:"onRemoveLine",value:function(e,t){var n=t.name+"을 지우시겠습니까?";if(confirm(n)){t.setVisible(!1);var r=this.lineSegments.indexOf(t);r>=0&&(this.lineSegments.splice(r,1),this.uiContainer.removeFolder(e))}}},{key:"onSectionEdit",value:function(e,t,n){this.sectionEditor&&(this.sectionEditor.finish(),this.sectionEditor=null),this.sectionEditor=new u.a(this.core,e,t,n)}},{key:"loadSubwayModel",value:function(e){var t=e&&e.material?e.material:"/resources/model/subway/Subway_Head.mtl",n=e&&e.modelHead?e.modelHead:"/resources/model/subway/Subway_Head.obj",i=e&&e.modelBody?e.modelBody:"/resources/model/subway/Subway_Body.obj",o=this;(new f.MTLLoader).load(t,(function(e){(new p.OBJLoader).setMaterials(e).load(n,(function(e){o.subwayHeadSource=e;var t=(new r.Box3).setFromObject(e),n=new r.Vector3;t.getSize(n),e.traverse((function(e){e instanceof r.Mesh&&e.geometry.translate(0,0,.5*-n.z)})),o.subwayHeadSource.userData.depthLength=n.z})),(new p.OBJLoader).setMaterials(e).load(n,(function(e){o.subwayTailSource=e;var t=(new r.Box3).setFromObject(e),n=new r.Vector3;t.getSize(n),e.traverse((function(e){e instanceof r.Mesh&&(e.geometry.rotateY(r.Math.degToRad(180)),e.geometry.translate(0,0,.5*-n.z))})),o.subwayTailSource.userData.depthLength=n.z})),(new p.OBJLoader).setMaterials(e).load(i,(function(e){o.subwayBodySource=e;var t=(new r.Box3).setFromObject(e),n=new r.Vector3;t.getSize(n),e.traverse((function(e){e instanceof r.Mesh&&e.geometry.translate(0,0,.5*-n.z)})),o.subwayBodySource.userData.depthLength=n.z})),console.log("지하철 모델 로드 완료")}))}},{key:"onExport",value:function(){for(var e=[],t=0;t<this.lineSegments.length;t++){for(var n=this.lineSegments[t],r=n.name,i=[],o=[],a=0;a<n.curves.length;a++){var s=n.curves[a];i.push({v0:s.v0.clone(),v1:s.v1.clone(),v2:s.v2.clone()}),o.push({floorId:s.floorId,groupId:s.groupId,heightOffset:s.heightOffset})}for(var l=[],u=0;u<n.bodies.length;u++){var c=n.bodies[u];l.push({stopRatio:c.userData.stopRatio,stopOffset:c.userData.stopOffset})}e.push({name:r,groups:o,points:i,animation:{head:{stopRatio:n.head.userData.stopRatio,stopOffset:n.head.userData.stopOffset},tail:{stopRatio:n.tail.userData.stopRatio,stopOffset:n.tail.userData.stopOffset},bodies:l}})}var h="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4)),f=document.createElement("a");f.setAttribute("href",h),f.setAttribute("download","지하철데이터.json"),f.click(),f.remove()}},{key:"getSbmFloor",value:function(e){var t=e;return e.traverseAncestors((function(e){if(e.userData&&e.userData instanceof Object){var n=e.userData;for(var r in e.userData.hasOwnProperty("property")&&(n=e.userData.property),n)"type"===r.toLowerCase()&&("floor"!==n[r]&&"SBMFLOOR"!==n[r]||(t=e))}})),t}}])&&qe(t.prototype,n),i&&qe(t,i),e}()},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(89),o=n(91),a=function(e){r.CompressedTextureLoader.call(this,e)};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.prototype=Object.assign(Object.create(r.CompressedTextureLoader.prototype),{constructor:a,parse:function(e,t){var n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function i(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function o(e,t,n,r){for(var i=n*r*4,o=new Uint8Array(e,t,i),a=new Uint8Array(i),s=0,l=0,u=0;u<r;u++)for(var c=0;c<n;c++){var h=o[l],f=o[++l],p=o[++l],d=o[++l];l++,a[s]=p,a[++s]=f,a[++s]=h,a[++s]=d,s++}return a}var a,s=i("DXT1"),l=i("DXT3"),u=i("DXT5"),c=i("ETC1"),h=new Int32Array(e,0,31);if(542327876!==h[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),n;if(4&!h[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),n;var f,p=h[21],d=!1;switch(p){case s:a=8,n.format=r.RGB_S3TC_DXT1_Format;break;case l:a=16,n.format=r.RGBA_S3TC_DXT3_Format;break;case u:a=16,n.format=r.RGBA_S3TC_DXT5_Format;break;case c:a=8,n.format=r.RGB_ETC1_Format;break;default:if(!(32===h[22]&&16711680&h[23]&&65280&h[24]&&255&h[25]&&4278190080&h[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(f=p,String.fromCharCode(255&f,f>>8&255,f>>16&255,f>>24&255))),n;d=!0,a=64,n.format=r.RGBAFormat}n.mipmapCount=1,131072&h[2]&&!1!==t&&(n.mipmapCount=Math.max(1,h[7]));var m=h[28];if(n.isCubemap=!!(512&m),n.isCubemap&&(!(1024&m)||!(2048&m)||!(4096&m)||!(8192&m)||!(16384&m)||!(32768&m)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),n;n.width=h[4],n.height=h[3];for(var v=h[1]+4,g=n.isCubemap?6:1,y=0;y<g;y++)for(var b=n.width,x=n.height,w=0;w<n.mipmapCount;w++){if(d)var q=(_=o(e,v,b,x)).length;else{q=Math.max(4,b)/4*Math.max(4,x)/4*a;var _=new Uint8Array(e,v,q)}var S={data:_,width:b,height:x};n.mipmaps.push(S),v+=q,b=Math.max(b>>1,1),x=Math.max(x>>1,1)}return n}}),n.d(t,"FBXLoader",(function(){return l}));var l=function(){var e,t,n;function l(e){r.Loader.call(this,e)}function u(e,t){this.textureLoader=e,this.manager=t}function c(){}function h(){}function f(){}function p(){}function d(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function m(){}function v(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function g(e){return e/46186158e3}l.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:l,load:function(e,t,n,i){var o=this,a=""===o.path?r.LoaderUtils.extractUrlBase(e):o.path,s=new r.FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.load(e,(function(n){try{t(o.parse(n,a))}catch(t){setTimeout((function(){i&&i(t),o.manager.itemError(e)}),0)}}),n,i)},parse:function(t,n){if(a="Kaydara FBX Binary  \0",(o=t).byteLength>=a.length&&a===M(o,0,a.length))e=(new p).parse(t);else{var i=M(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;for(var r=0;r<t.length;++r){if((o=void 0,o=e[(i=1)-1],e=e.slice(n+i),n++,o)===t[r])return!1}var i,o;return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(v(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+v(i));e=(new f).parse(i)}var o,a;return new u(new r.TextureLoader(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),this.manager).parse(e)}}),u.prototype={constructor:u,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),i=this.parseMaterials(r),o=this.parseDeformers(),a=(new c).parse(o);return this.parseScene(o,a,i),n},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach((function(e){var n=e[0],r=e[1],i=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};t.get(n).parents.push(o),t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};t.get(r).children.push(a)}));return t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var r=e.Objects.Video;for(var i in r){var o=r[i];if(t[u=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var l=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=l}}}}for(var u in t){var c=t[u];void 0!==n[c]?t[u]=n[c]:t[u]=t[u].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],t);n.set(parseInt(i),o)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(n.wrapS=0===a?r.RepeatWrapping:r.ClampToEdgeWrapping,n.wrapT=0===s?r.RepeatWrapping:r.ClampToEdgeWrapping,"Scaling"in e){var l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n},loadTexture:function(e,n){var i,o,s=this.textureLoader.path,l=t.get(e.id).children;void 0!==l&&l.length>0&&void 0!==n[l[0].ID]&&(0!==(i=n[l[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var u=e.FileName.slice(-3).toLowerCase();if("tga"===u){var c=this.manager.getHandler(".tga");null===c?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new r.Texture):o=c.load(i)}else if("psd"===u)console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new r.Texture;else if("dds"===u){var h=new a(this.textureLoader.manager);h.setPath(this.textureLoader.path),h.setCrossOrigin(this.textureLoader.crossOrigin),o=h.load(i)}else o=this.textureLoader.load(i);return this.textureLoader.setPath(s),o},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],t);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(e,n){var i=e.id,o=e.attrName,a=e.ShadingModel;if("object"===s(a)&&(a=a.value),!t.has(i))return null;var l,u=this.parseParameters(e,n,i);switch(a.toLowerCase()){case"phong":l=new r.MeshPhongMaterial;break;case"lambert":l=new r.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),l=new r.MeshPhongMaterial}return l.setValues(u),l.name=o,l},parseParameters:function(e,n,i){var o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=(new r.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(o.color=(new r.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=(new r.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(o.emissive=(new r.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=(new r.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(o.specular=(new r.Color).fromArray(e.SpecularColor.value));var a=this;return t.get(i).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":o.bumpMap=a.getTexture(n,e.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(n,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(n,e.ID),o.map.encoding=r.sRGBEncoding;break;case"DisplacementColor":o.displacementMap=a.getTexture(n,e.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(n,e.ID),o.emissiveMap.encoding=r.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(n,e.ID);break;case"ReflectionColor":o.envMap=a.getTexture(n,e.ID),o.envMap.mapping=r.EquirectangularReflectionMapping,o.envMap.encoding=r.sRGBEncoding;break;case"SpecularColor":o.specularMap=a.getTexture(n,e.ID),o.specularMap.encoding=r.sRGBEncoding;break;case"TransparentColor":o.alphaMap=a.getTexture(n,e.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}})),o},getTexture:function(n,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o],s=t.get(parseInt(o));if("Skin"===a.attrType){var l=this.parseSkeleton(s,i);l.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=s.parents[0].ID,n[o]=l}else if("BlendShape"===a.attrType){var u={id:o};u.rawTargets=this.parseMorphTargets(s,i),u.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=u}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(e,t){var n=[];return e.children.forEach((function(e){var i=t[e.ID];if("Cluster"===i.attrType){var o={ID:e.ID,indices:[],weights:[],transformLink:(new r.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),n.push(o)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){var o=e.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=t.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(s)}return r},parseScene:function(i,o,a){n=new r.Group;var s=this.parseModels(i.skeletons,o,a),l=e.Objects.Model,u=this;s.forEach((function(e){var r=l[e.ID];u.setLookAtProperties(e,r),t.get(e.ID).parents.forEach((function(t){var n=s.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(i.skeletons,o,s),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=q(e.userData.transformData);e.applyMatrix4(t)}}));var c=(new h).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=c,n=n.children[0]),n.animations=c},parseModels:function(n,i,o){var a=new Map,s=e.Objects.Model;for(var l in s){var u=parseInt(l),c=s[l],h=t.get(u),f=this.buildSkeleton(h,n,u,c.attrName);if(!f){switch(c.attrType){case"Camera":f=this.createCamera(h);break;case"Light":f=this.createLight(h);break;case"Mesh":f=this.createMesh(h,i,o);break;case"NurbsCurve":f=this.createCurve(h,i);break;case"LimbNode":case"Root":f=new r.Bone;break;case"Null":default:f=new r.Group}f.name=c.attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",f.ID=u}this.getTransformData(f,c),a.set(u,f),c.hasOwnProperty("UDP3DSMAX")&&(f.userData.property=this.getUserDefinedProperty(c.UDP3DSMAX.value))}return a},getUserDefinedProperty:function(e){for(var t=e.split("\n"),n={},r=0;r<t.length;r++){var i=t[r].split("=");2===i.length&&(n[i[0]]=i[1])}return n},buildSkeleton:function(e,t,n,i){var o=null;return e.parents.forEach((function(e){for(var a in t){var s=t[a];s.rawBones.forEach((function(t,a){if(t.ID===e.ID){var l=o;(o=new r.Bone).matrixWorld.copy(t.transformLink),o.name=i?r.PropertyBinding.sanitizeNodeName(i):"",o.ID=n,s.bones[a]=o,null!==l&&o.add(l)}}))}})),o},createCamera:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(o=1);var a=1;void 0!==i.NearPlane&&(a=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var l=window.innerWidth,u=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(l=i.AspectWidth.value,u=i.AspectHeight.value);var c=l/u,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);var f=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:n=new r.PerspectiveCamera(h,c,a,s),null!==f&&n.setFocalLength(f);break;case 1:n=new r.OrthographicCamera(-l/2,l/2,u/2,-u/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),n=new r.Object3D}}return n},createLight:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new r.Object3D;else{var o;o=void 0===i.LightType?0:i.LightType.value;var a=16777215;void 0!==i.Color&&(a=(new r.Color).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var l=0;void 0!==i.FarAttenuationEnd&&(l=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);switch(o){case 0:n=new r.PointLight(a,s,l,1);break;case 1:n=new r.DirectionalLight(a,s);break;case 2:var u=Math.PI/3;void 0!==i.InnerAngle&&(u=r.MathUtils.degToRad(i.InnerAngle.value));var c=0;void 0!==i.OuterAngle&&(c=r.MathUtils.degToRad(i.OuterAngle.value),c=Math.max(c,1)),n=new r.SpotLight(a,s,l,u,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new r.PointLight(a,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var i,o=null,a=null,s=[];return e.children.forEach((function(e){t.has(e.ID)&&(o=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new r.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach((function(e){e.vertexColors=!0})),o.FBX_Deformer?(s.forEach((function(e){e.skinning=!0})),(i=new r.SkinnedMesh(o,a)).normalizeSkinWeights()):i=new r.Mesh(o,a),i},createCurve:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new r.LineBasicMaterial({color:3342591,linewidth:1});return new r.Line(n,i)},getTransformData:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?_(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n},setLookAtProperties:function(i,o){"LookAtProperty"in o&&t.get(i.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var o=e.Objects.Model[t.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(a),n.add(i.target)):i.lookAt((new r.Vector3).fromArray(a))}}}))},bindSkeleton:function(e,n,i){var o=this.parsePoseNodes();for(var a in e){var s=e[a];t.get(parseInt(s.ID)).parents.forEach((function(e){if(n.has(e.ID)){var a=e.ID;t.get(a).parents.forEach((function(e){i.has(e.ID)&&i.get(e.ID).bind(new r.Skeleton(s.bones),o[e.ID])}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var o=n[i].PoseNode;Array.isArray(o)?o.forEach((function(e){t[e.Node]=(new r.Matrix4).fromArray(e.Matrix.a)})):t[o.Node]=(new r.Matrix4).fromArray(o.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,i=t[0],o=t[1],a=t[2];if(0!==i||0!==o||0!==a){var s=new r.Color(i,o,a);n.add(new r.AmbientLight(s,1))}}},setupMorphMaterials:function(){var e=this;n.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(n,r){e.setupMorphMaterial(t,n,r)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,r){var i=e.uuid,o=t.uuid,a=!1;if(n.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===o&&e.uuid!==i&&(a=!0)})):e.material.uuid===o&&e.uuid!==i&&(a=!0))})),!0===a){var s=t.clone();s.morphTargets=!0,void 0===r?e.material=s:e.material[r]=s}else t.morphTargets=!0}},c.prototype={constructor:c,parse:function(n){var r=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var o in i){var a=t.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,r){var i=r.skeletons,o=[],a=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==a.length){var s=t.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null);t.children.forEach((function(e){void 0!==r.morphTargets[e.ID]&&o.push(r.morphTargets[e.ID])}));var l=a[0],u={};"RotationOrder"in l&&(u.eulerOrder=_(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);var c=q(u);return this.genGeometry(n,s,o,c)}},genGeometry:function(e,t,n,i){var o=new r.BufferGeometry;e.attrName&&(o.name=e.attrName);var a=this.parseGeoNode(e,t),s=this.genBuffers(a),l=new r.Float32BufferAttribute(s.vertex,3);if(l.applyMatrix4(i),o.setAttribute("position",l),s.colors.length>0&&o.setAttribute("color",new r.Float32BufferAttribute(s.colors,3)),t&&(o.setAttribute("skinIndex",new r.Uint16BufferAttribute(s.weightsIndices,4)),o.setAttribute("skinWeight",new r.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=t),s.normal.length>0){var u=(new r.Matrix3).getNormalMatrix(i),c=new r.Float32BufferAttribute(s.normal,3);c.applyNormalMatrix(u),o.setAttribute("normal",c)}if(s.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),o.setAttribute(n,new r.Float32BufferAttribute(s.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){var h=s.materialIndex[0],f=0;if(s.materialIndex.forEach((function(e,t){e!==h&&(o.addGroup(f,t-f,h),h=e,f=t)})),o.groups.length>0){var p=o.groups[o.groups.length-1],d=p.start+p.count;d!==s.materialIndex.length&&o.addGroup(d,s.materialIndex.length-d,h)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,e,n,i),o},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var r=0;e.LayerElementUV[r];)n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],l=[],u=[],c=[],h=this;return e.vertexIndices.forEach((function(f,p){var d=!1;f<0&&(f^=-1,d=!0);var m=[],v=[];if(o.push(3*f,3*f+1,3*f+2),e.color){var g=b(p,n,f,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach((function(e){v.push(e.weight),m.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var y=[0,0,0,0],x=[0,0,0,0];v.forEach((function(e,t){var n=e,r=m[t];x.forEach((function(e,t,i){if(n>e){i[t]=n,n=e;var o=y[t];y[t]=r,r=o}}))})),m=y,v=x}for(;v.length<4;)v.push(0),m.push(0);for(var w=0;w<4;++w)u.push(v[w]),c.push(m[w])}if(e.normal){g=b(p,n,f,e.normal);a.push(g[0],g[1],g[2])}if(e.material&&"AllSame"!==e.material.mappingType)var q=b(p,n,f,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var r=b(p,n,f,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,d&&(h.genFace(t,e,o,q,a,s,l,u,c,r),n++,r=0,o=[],a=[],s=[],l=[],u=[],c=[])})),t},genFace:function(e,t,n,r,i,o,a,s,l,u){for(var c=2;c<u;c++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(c-1)]]),e.vertex.push(t.vertexPositions[n[3*(c-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(c-1)+2]]),e.vertex.push(t.vertexPositions[n[3*c]]),e.vertex.push(t.vertexPositions[n[3*c+1]]),e.vertex.push(t.vertexPositions[n[3*c+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(c-1)]),e.vertexWeights.push(s[4*(c-1)+1]),e.vertexWeights.push(s[4*(c-1)+2]),e.vertexWeights.push(s[4*(c-1)+3]),e.vertexWeights.push(s[4*c]),e.vertexWeights.push(s[4*c+1]),e.vertexWeights.push(s[4*c+2]),e.vertexWeights.push(s[4*c+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(c-1)]),e.weightsIndices.push(l[4*(c-1)+1]),e.weightsIndices.push(l[4*(c-1)+2]),e.weightsIndices.push(l[4*(c-1)+3]),e.weightsIndices.push(l[4*c]),e.weightsIndices.push(l[4*c+1]),e.weightsIndices.push(l[4*c+2]),e.weightsIndices.push(l[4*c+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(c-1)]),e.colors.push(o[3*(c-1)+1]),e.colors.push(o[3*(c-1)+2]),e.colors.push(o[3*c]),e.colors.push(o[3*c+1]),e.colors.push(o[3*c+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(c-1)]),e.normal.push(i[3*(c-1)+1]),e.normal.push(i[3*(c-1)+2]),e.normal.push(i[3*c]),e.normal.push(i[3*c+1]),e.normal.push(i[3*c+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(c-1)]),e.uvs[n].push(a[n][2*(c-1)+1]),e.uvs[n].push(a[n][2*c]),e.uvs[n].push(a[n][2*c+1])}))},addMorphTargets:function(t,n,r,i){if(0!==r.length){t.morphTargetsRelative=!0,t.morphAttributes.position=[];var o=this;r.forEach((function(r){r.rawTargets.forEach((function(r){var a=e.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(t,n,a,i,r.name)}))}))}},genMorphGeometry:function(e,t,n,i,o){for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],l=void 0!==n.Indexes?n.Indexes.a:[],u=3*e.attributes.position.count,c=new Float32Array(u),h=0;h<l.length;h++){var f=3*l[h];c[f]=s[3*h],c[f+1]=s[3*h+1],c[f+2]=s[3*h+2]}var p={vertexIndices:a,vertexPositions:c},d=this.genBuffers(p),m=new r.Float32BufferAttribute(d.vertex,3);m.name=o||n.attrName,m.applyMatrix4(i),e.morphAttributes.position.push(m)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===o.a)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new r.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new r.BufferGeometry;for(var n,i,a=t-1,s=e.KnotVector.a,l=[],u=e.Points.a,c=0,h=u.length;c<h;c+=4)l.push((new r.Vector4).fromArray(u,c));if("Closed"===e.Form)l.push(l[0]);else if("Periodic"===e.Form){n=a,i=s.length-1-n;for(c=0;c<a;++c)l.push(l[c])}var f=new o.a(a,s,l,n,i).getPoints(7*l.length),p=new Float32Array(3*f.length);f.forEach((function(e,t){e.toArray(p,3*t)}));var d=new r.BufferGeometry;return d.setAttribute("position",new r.BufferAttribute(p,3)),d}},h.prototype={constructor:h,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var r in t){var i=t[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=e.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(g),values:r[i].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,l=a.parents[0].relationship;l.match(/X/)?n.get(s).curves.x=o:l.match(/Y/)?n.get(s).curves.y=o:l.match(/Z/)?n.get(s).curves.z=o:l.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(i){var o=e.Objects.AnimationLayer,a=new Map;for(var s in o){var l=[],u=t.get(parseInt(s));if(void 0!==u)u.children.forEach((function(o,a){if(i.has(o.ID)){var s=i.get(o.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===l[a])if(void 0!==(d=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){var u={modelName:(c=e.Objects.Model[d.toString()]).attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",ID:c.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(e){e.ID===c.id&&(u.transform=e.matrix,e.userData.transformData&&(u.eulerOrder=e.userData.transformData.eulerOrder))})),u.transform||(u.transform=new r.Matrix4),"PreRotation"in c&&(u.preRotation=c.PreRotation.value),"PostRotation"in c&&(u.postRotation=c.PostRotation.value),l[a]=u}l[a]&&(l[a][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===l[a]){var c,h=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,f=t.get(h).parents[0].ID,p=t.get(f).parents[0].ID,d=t.get(p).parents[0].ID;u={modelName:(c=e.Objects.Model[d]).attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",morphName:e.Objects.Deformer[h].attrName};l[a]=u}l[a][s.attr]=s}}})),a.set(parseInt(s),l)}return a},parseAnimStacks:function(n){var r=e.Objects.AnimationStack,i={};for(var o in r){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new r.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],n=new r.Vector3,i=new r.Quaternion,o=new r.Vector3;if(e.transform&&e.transform.decompose(n,i,o),n=n.toArray(),i=(new r.Euler).setFromQuaternion(i,e.eulerOrder).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==s&&t.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var l=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==l&&t.push(l)}if(void 0!==e.DeformPercent){var u=this.generateMorphTrack(e);void 0!==u&&t.push(u)}return t},generateVectorTrack:function(e,t,n,i){var o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,n);return new r.VectorKeyframeTrack(e+"."+i,o,a)},generateRotationTrack:function(e,t,n,i,o,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(r.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(r.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(r.MathUtils.degToRad));var s=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(s,t,n);void 0!==i&&((i=i.map(r.MathUtils.degToRad)).push(a),i=(new r.Euler).fromArray(i),i=(new r.Quaternion).setFromEuler(i)),void 0!==o&&((o=o.map(r.MathUtils.degToRad)).push(a),o=(new r.Euler).fromArray(o),o=(new r.Quaternion).setFromEuler(o).inverse());for(var u=new r.Quaternion,c=new r.Euler,h=[],f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],a),u.setFromEuler(c),void 0!==i&&u.premultiply(i),void 0!==o&&u.multiply(o),u.toArray(h,f/3*4);return new r.QuaternionKeyframeTrack(e+".quaternion",s,h)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,i=t.values.map((function(e){return e/100})),o=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new r.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+o+"]",t.times,i)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,n){return n.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,n){var r=n,i=[],o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var l=t.y.values[a];i.push(l),r[1]=l}else i.push(r[1]);if(-1!==s){var u=t.z.values[s];i.push(u),r[2]=u}else i.push(r[2])})),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,l=e.times[t-1],u=(e.times[t]-l)/o,c=l+u,h=[],f=[];c<e.times[t];)h.push(c),c+=u,f.push(s),s+=a;e.times=E(e.times,t,h),e.values=E(e.values,t,f)}}}},f.prototype={constructor:f,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new m,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}},parseNodeProperty:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),l=parseInt(a[1]),u=i.split(",").slice(3);r="connections",function(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i=[s,l],u=u.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=S(i))}else this.parseNodeSpecialProperty(e,r,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=S(t.a))},parseNodeSpecialProperty:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=S(l)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),i)}},p.prototype={constructor:p,parse:function(e){var t=new d(e);t.skip(23);var n=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+n);for(var r=new m;!this.endOfContent(t);){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===r)return null;for(var s=[],l=0;l<i;l++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",c=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){var f=this.parseNode(e,t);null!==f&&this.parseSubNode(a,n,f)}return n.propertyList=s,"number"==typeof u&&(n.id=u),""!==c&&(n.attrName=c),""!==h&&(n.attrType=h),""!==a&&(n.name=a),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],l=n.propertyList[2],u=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[a]={type:s,type2:l,flag:u,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(0===o)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}void 0===i.a&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new d(new i.a.Inflate(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},d.prototype={constructor:d,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),r.LoaderUtils.decodeText(new Uint8Array(t))}},m.prototype={constructor:m,add:function(e,t){this[e]=t}};var y=[];function b(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(var i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(y,r.buffer,o,a)}var x=new r.Euler,w=new r.Vector3;function q(e){var t,n=new r.Matrix4,i=new r.Matrix4,o=new r.Matrix4,a=new r.Matrix4,s=new r.Matrix4,l=new r.Matrix4,u=new r.Matrix4,c=new r.Matrix4,h=new r.Matrix4,f=new r.Matrix4,p=new r.Matrix4,d=e.inheritType?e.inheritType:0;(e.translation&&n.setPosition(w.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(r.MathUtils.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(x.fromArray(t)));e.rotation&&((t=e.rotation.map(r.MathUtils.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(x.fromArray(t)));e.postRotation&&((t=e.postRotation.map(r.MathUtils.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(x.fromArray(t)));e.scale&&s.scale(w.fromArray(e.scale)),e.scalingOffset&&u.setPosition(w.fromArray(e.scalingOffset)),e.scalingPivot&&l.setPosition(w.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(w.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(w.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f=e.parentMatrixWorld);var m=i.multiply(o).multiply(a),v=new r.Matrix4;f.extractRotation(v);var g,y,b,q,_=new r.Matrix4;if(_.copyPosition(f),b=_.getInverse(_).multiply(f),y=v.getInverse(v).multiply(b),g=s,0===d)q=v.multiply(m).multiply(y).multiply(g);else if(1===d)q=v.multiply(y).multiply(m).multiply(g);else{var S=(new r.Matrix4).copy(s),M=y.multiply(S.getInverse(S));q=v.multiply(m).multiply(M).multiply(g)}var E=n.multiply(c).multiply(h).multiply(i).multiply(o).multiply(a).multiply(h.getInverse(h)).multiply(u).multiply(l).multiply(s).multiply(l.getInverse(l)),T=(new r.Matrix4).copyPosition(E),P=f.multiply(T);return p.copyPosition(P),E=p.multiply(q)}function _(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function S(e){return e.split(",").map((function(e){return parseFloat(e)}))}function M(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),r.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function E(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return l}()}]);